var $r=Object.defineProperty;var Cr=(t,e,n)=>e in t?$r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(Cr(t,typeof e!="symbol"?e+"":e,n),n);const x={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Comptime:7,Static:8,Literal:9,Null:10,Undefined:11},v={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,ExternUnion:6,BareUnion:7,TaggedUnion:8,ErrorUnion:9,ErrorSet:10,Enumeration:11,Optional:12,Pointer:13,Slice:14,Vector:15,Opaque:16,Function:17};function De(t){const{type:e,bitSize:n,byteSize:s}=t;if(e===x.Int)return`${n<=32?"":"Big"}Int${n}`;if(e===x.Uint)return`${n<=32?"":"Big"}Uint${n}`;if(e===x.Float)return`Float${n}`;if(e===x.Bool)return`Bool${s!==void 0?s*8:1}`;if(e===x.Void)return"Null"}function Dr(t){const{type:e,bitSize:n}=t,s=e===x.Int;let r=s?n-1:n;if(n<=32){const i=2**r-1;return{min:s?-(2**r):0,max:i}}else{r=BigInt(r);const i=2n**r-1n;return{min:s?-(2n**r):0n,max:i}}}function Cn({type:t,bitSize:e}){if(t===x.Int||t===x.Uint)return e<=32?Number:BigInt;if(t===x.Float)return Number;if(t===x.Bool)return Boolean}function Dn(t){const e=Cn(t);if(e)return typeof e(0)}function kn({bitOffset:t,bitSize:e,byteSize:n}){return n!==void 0||!(t&7)&&!(e&7)||e===0}function Dt(t){return typeof t=="object"&&typeof t.error=="string"&&Object.keys(t).length===1}class kr extends TypeError{constructor(e){const{name:n}=e;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class Fn extends TypeError{constructor(e,n,s=null){const{name:r,type:i,byteSize:c}=e,o=n.byteLength,a=c!==1?"s":"";let l;if(i===v.Slice&&!s)l=`${r} has elements that are ${c} byte${a} in length, received ${o}`;else{const u=i===v.Slice?s.length*c:c;l=`${r} has ${u} byte${a}, received ${o}`}super(l)}}class Fr extends TypeError{constructor(e){const{type:n,byteSize:s,typedArray:r}=e,i=s!==1?"s":"",c=["ArrayBuffer","DataView"].map(it);r&&c.push(it(r.name));let o;n===v.Slice?o=`Expecting ${Pe(c)} that can accommodate items ${s} byte${i} in length`:o=`Expecting ${Pe(c)} that is ${s} byte${i} in length`,super(o)}}class Rr extends TypeError{constructor(e,n){const{name:s}=e;let r;typeof n=="number"||typeof n=="bigint"?r=`Value given does not correspond to an item of enum ${s}: ${n}`:r=`Enum item of the type ${s} expected, received ${n}`,super(r)}}class Nr extends TypeError{constructor(e,n){const{name:s}=e,r=typeof n;let i;r==="string"||r==="number"||Dt(n)?(Dt(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),i=`Error ${r} does not corresponds to any error in error set ${s}: ${n}`):i=`Error of the type ${s} expected, received ${n}`,super(i)}}class Rn extends TypeError{constructor(e){const{name:n}=e;super(`Error given is not a part of error set ${n}`)}}class ht extends TypeError{constructor(e,n,s){const{name:r}=e,i=[];if(Array.isArray(n))for(const o of n)i.push(it(o));else i.push(it(n));const c=Ln(s);super(`${r} expects ${Pe(i)} as argument, received ${c}`)}}class mt extends ht{constructor(e,n,s=!1){var l;const{instance:{members:[r]},type:i,typedArray:c}=e,o=[],a=Dn(r);if(a){let u;switch((l=r.structure)==null?void 0:l.type){case v.Enumeration:u="enum item";break;case v.ErrorSet:u="error";break;default:u=a}o.push(`array of ${u}s`)}else o.push("array of objects");c&&o.push(c.name),i===v.Slice&&s&&o.push("length"),super(e,o.join(" or "),n)}}class re extends TypeError{constructor(e,n,s){const{name:r,length:i,instance:{members:[c]}}=e,{structure:{constructor:o}}=c,{length:a,constructor:l}=s,u=(n==null?void 0:n.length)??i,f=u!==1?"s":"";let b;l===o?b="only a single one":l.child===o?b=`a slice/array that has ${a}`:b=`${a} initializer${a>1?"s":""}`,super(`${r} has ${u} element${f}, received ${b}`)}}class Lr extends TypeError{constructor(e,n){const{name:s}=e;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class Br extends TypeError{constructor(e,n){const{name:s,instance:{members:r}}=e,i=r.find(o=>o.name===n);let c;i?c=`Comptime value cannot be changed: ${n}`:c=`${s} does not have a property with that name: ${n}`,super(c)}}class _r extends Error{constructor(e,n){const{name:s,instance:{members:r}}=e,i=r.length-1,c=i!==1?"s":"";super(`${s} expects ${i} argument${c}, received ${n}`)}}class qr extends TypeError{constructor(e){super("Non-slice pointers can only be created with the help of the new operator")}}class Gr extends TypeError{constructor(e,n){const{name:s}=e,{constructor:{name:r}}=n;super(`Conversion of ${r} to ${s} requires an explicit cast`)}}class An extends TypeError{constructor(e,n,s,r){const{name:i}=e;super(`${i} expects the sentinel value ${n} at ${r-1}, found at ${s}`)}}class Yt extends TypeError{constructor(e,n,s){const{name:r}=e;super(`${r} expects the sentinel value ${n} at ${s-1}`)}}class Wr extends TypeError{constructor(e,n){super(`Unable to simultaneously align memory to ${n}-byte and ${e}-byte boundary`)}}class ie extends TypeError{constructor(e,n){const s=Ln(n);super(`Expected ${it(e)}, received ${s}`)}}class jn extends TypeError{constructor(){super("Null pointer")}}class Kr extends TypeError{constructor(e,n){const{name:s}=e;let r;if(n!=null){const i=typeof n,c=i==="object"&&n.constructor!==Object?`${n.constructor.name} object`:i;r=`${Bn(c)} ${c}`}else r=n+"";super(`${s} cannot point to ${r}`)}}class Jr extends TypeError{constructor(e,n){super("Pointers in fixed memory cannot point to garbage-collected object")}}class Hr extends TypeError{constructor(e,n){const s=De(e);super(`${s} cannot represent the value given: ${n}`)}}class Tn extends RangeError{constructor(e,n){const{name:s}=e;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class Yr extends TypeError{constructor(e){const{name:n,structure:{name:{struct:s}}}=e;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class Xr extends TypeError{constructor(){super("Unable to modify read-only object")}}class Zr extends TypeError{constructor(e){const{name:n}=e;super(`${n} cannot point to a read-only object`)}}class xn extends Error{constructor(e){super(Nn(e))}}function Qr(t,e,n){const{name:s,instance:{members:r}}=t,i=`args[${e}]`,c=r.length-1,o=e!==0?"..., ":"",a=e!==c-1?", ...":"",l=o+i+a,u=Object.create(n.constructor.prototype);return u.message=`${s}(${l}): ${n.message}`,u.stack=n.stack,u}function zn(t,e,n){return n instanceof RangeError&&!(n instanceof Tn)&&(n=new Tn(t,e)),n}function xt(){throw new Xr}function ti(t,e){const n=it(t.typedArray.name),s=it(e.constructor.name);console.warn(`Implicitly creating ${n} from ${s}`)}function Nn(t){let e=t.replace(/_/g," ");try{e=e.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,(n,s,r)=>{if(s.length===1)return` ${s.toLocaleLowerCase()}${r}`;if(r){const i=s.substring(0,s.length-1),c=s.charAt(s.length-1).toLocaleLowerCase();return` ${i} ${c}${r}`}else return` ${s}`}).trimStart()}catch{}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function Ln(t){const e=typeof t;let n;return e==="object"?n=t?Object.prototype.toString.call(t):"null":n=e,it(n)}function it(t){return`${Bn(t)} ${t}`}function Bn(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function Pe(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}const S=Symbol("memory"),T=Symbol("slots"),ke=Symbol("parent"),_n=Symbol("name"),H=Symbol("type"),qn=Symbol("tuple"),Ut=Symbol("class"),En=Symbol("tag"),bt=Symbol("props"),oe=Symbol("getter"),ce=Symbol("setter"),Pt=Symbol("elementGetter"),Mt=Symbol("elementSetter"),Me=Symbol("addressGetter"),Gn=Symbol("addressSetter"),yt=Symbol("targetGetter"),Ue=Symbol("targetSetter"),pt=Symbol("entriesGetter"),At=Symbol("fixedLocation"),Fe=Symbol("propSetters"),L=Symbol("writeDisabler"),Wn=Symbol("allKeys"),$e=Symbol("length"),ae=Symbol("proxy"),Nt=Symbol("compat"),B=Symbol("size"),k=Symbol("align"),Re=Symbol("array"),kt=Symbol("pointer"),dt=Symbol("constTarget"),Ie=Symbol("constProxy"),M=Symbol("copier"),In=Symbol("resetter"),Y=Symbol("vivificator"),D=Symbol("pointerVisitor"),$t=Symbol("environment"),Xt=Symbol("attributes"),Kn=Symbol("more");function ct(t){return function(){const e=this[S];this[S]=null,this[T]&&(this[T]={}),t.releaseFixedView(e)}}function Vn(t,e,n){if(t+e<=8){const s=2**e-1;if(n)return function(r,i,c){const a=i.getUint8(c)>>t&s;r.setUint8(0,a)};{const r=255^s<<t;return function(i,c,o){const a=c.getUint8(0),u=i.getUint8(o)&r|(a&s)<<t;i.setUint8(o,u)}}}else{const s=8-t,r=2**s-1;if(n){const c=2**(e%8)-1;return function(o,a,l){let u=l,f=0,b=a.getUint8(u++),y,m=b>>t&r,h=s,d=e;do d>h&&(b=a.getUint8(u++),m=m|b<<h),y=d>=8?m&255:m&c,o.setUint8(f++,y),m>>=8,d-=8;while(d>0)}}else{const c=2**((e-s)%8)-1,o=255^r<<t,a=255^c;return function(l,u,f){let b=0,y=f,m=l.getUint8(y),h,d,g=m&o,w=t,E=e+w;do E>w&&(h=u.getUint8(b++),g=g|h<<w,w+=8),E>=8?d=g&255:(m=l.getUint8(y),d=m&a|g&c),l.setUint8(y++,d),g>>=8,w-=8,E-=8;while(E>0)}}}}function q(t,e=!1){const n=Jn(t,e);return function(s){J.call(this),J.call(s);const r=s[S],i=this[S];n(i,r)}}function Jn(t,e=!1){if(!e){const n=ei[t];if(n)return n}return t&7?t&3?t&1?ni:si:ri:ii}const ei={1:oi,2:ci,4:ai,8:li,16:ui,32:fi};function ni(t,e){for(let n=0,s=t.byteLength;n<s;n++)t.setInt8(n,e.getInt8(n))}function si(t,e){for(let n=0,s=t.byteLength;n<s;n+=2)t.setInt16(n,e.getInt16(n,!0),!0)}function ri(t,e){for(let n=0,s=t.byteLength;n<s;n+=4)t.setInt32(n,e.getInt32(n,!0),!0)}function ii(t,e){for(let n=0,s=t.byteLength;n<s;n+=8)t.setInt32(n,e.getInt32(n,!0),!0),t.setInt32(n+4,e.getInt32(n+4,!0),!0)}function oi(t,e){t.setInt8(0,e.getInt8(0))}function ci(t,e){t.setInt16(0,e.getInt16(0,!0),!0)}function ai(t,e){t.setInt32(0,e.getInt32(0,!0),!0)}function li(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0)}function ui(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0)}function fi(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0),t.setInt32(16,e.getInt32(16,!0),!0),t.setInt32(20,e.getInt32(20,!0),!0),t.setInt32(24,e.getInt32(24,!0),!0),t.setInt32(28,e.getInt32(28,!0),!0)}function yi(t,e){const n=mi(e);return function(){J.call(this);const s=this[S];n(s,t,e)}}function mi(t){const e=hi[t];return e||(t&7?t&3?t&1?bi:pi:di:gi)}const hi={1:Si,2:wi,4:Oi,8:vi,16:Ai,32:ji};function bi(t,e,n){for(let s=e,r=e+n;s<r;s++)t.setInt8(s,0)}function pi(t,e,n){for(let s=e,r=e+n;s<r;s+=2)t.setInt16(s,0,!0)}function di(t,e,n){for(let s=e,r=e+n;s<r;s+=4)t.setInt32(s,0,!0)}function gi(t,e,n){for(let s=e,r=e+n;s<r;s+=8)t.setInt32(s,0,!0),t.setInt32(s+4,0,!0)}function Si(t,e){t.setInt8(e,0)}function wi(t,e){t.setInt16(e,0,!0)}function Oi(t,e){t.setInt32(e,0,!0)}function vi(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0)}function Ai(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0)}function ji(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0),t.setInt32(e+16,0,!0),t.setInt32(e+20,0,!0),t.setInt32(e+24,0,!0),t.setInt32(e+28,0,!0)}function J(){const t=this[S],e=t[S];if(!e||t.buffer.byteLength!==0)return!1;const{memory:n,address:s,len:r}=e,i=new DataView(n.buffer,s,r);return i[S]=e,this[S]=i,!0}function Ft(t,e){return Di(t,e,n=>DataView.prototype[n]?DataView.prototype[n]:xi(t,e))}const Hn={};function Ti(){Hn[x.Uint]=zi}function xi(t,e){const n=Hn[e.type];return n(t,e)}function zi(t,e){return kn(e)?Ui(t,e):$i(t,e)}function le(t,e,n){const{type:s,byteSize:r,typedArray:i}=t;let c;const o=e==null?void 0:e[Symbol.toStringTag];if(o==="DataView")c=e;else if(o==="ArrayBuffer"||o==="SharedArrayBuffer")c=n.obtainView(e,0,e.byteLength);else if(i&&o===i.name||o==="Uint8ClampedArray"&&i===Uint8Array)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else if(o==="Uint8Array"&&typeof Buffer=="function"&&e instanceof Buffer)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else{const a=e==null?void 0:e[S];if(a){const{constructor:l,instance:{members:[u]}}=t;if(e instanceof l)return a;if(s===v.Array||s===v.Slice||s===v.Vector){const{byteSize:f,structure:{constructor:b}}=u,y=Xn(e,b);if(y!==void 0){if(s===v.Slice||y*f===r)return a;throw new re(t,null,e)}}}}return c&&r!==void 0&&Yn(c,t),c}function Ei(t){if((t==null?void 0:t[Symbol.toStringTag])!=="DataView")throw new ie("a DataView",t);return t}function Yn(t,e){const{byteSize:n,type:s}=e;if(s===v.Slice?t.byteLength%n!==0:t.byteLength!==n)throw new Fn(e,t)}function Lt(t,e,n,s,r){const{byteSize:i,type:c,sentinel:o}=e,a=c===v.Slice;if(this[S]){const l=a?i*this.length:i;if(t.byteLength!==l)throw new Fn(e,t,this);const u={[S]:t};o==null||o.validateData(u,this.length),this[M](u)}else{const{shapeDefiner:l}=r;Yn(t,e);const u=t.byteLength/i,f={[S]:t};o==null||o.validateData(f,u),s&&(n=!0),l.call(this,n?null:t,u,s),n&&this[M](f)}}function Xn(t,e){const{constructor:n}=t;if(n===e)return 1;if(n.child===e)return t.length}function Ii(t,e,n){const s=le(t,e,n);if(!s)throw new Fr(t);return s}function gt(t){const{type:e,byteSize:n}=t;if(e===x.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(e===x.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(e===x.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(e===x.Object)return t.structure.typedArray;return null}function Vi(t,e){const n=t==null?void 0:t[Symbol.toStringTag];return!!e&&n===e.name}function Pi(t,e){const n=e[Nt];if(n){const s=t==null?void 0:t[Symbol.toStringTag];if(n.includes(s))return!0}return!!(e.child&&Xn(t,e.child)!==void 0)}function ue(t){const{typedArray:e}=t,n=[];return e&&(n.push(e.name),n.push("DataView"),(e===Uint8Array||e===Int8Array)&&(n.push("ArrayBuffer"),n.push("SharedArrayBuffer"),e===Uint8Array&&n.push("Uint8ClampedArray"))),n}function Mi(t){const e=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,s=Math.ceil(t/64);return{get:function(r,i){let c=0n;if(i)for(let o=0,a=r+(s-1)*8;o<s;o++,a-=8){const l=e.call(this,a,i);c=c<<64n|l}else for(let o=0,a=r;o<s;o++,a+=8){const l=e.call(this,a,i);c=c<<64n|l}return c},set:function(r,i,c){let o=i;const a=0xFFFFFFFFFFFFFFFFn;if(c)for(let l=0,u=r;l<s;l++,u+=8){const f=o&a;n.call(this,u,f,c),o>>=64n}else{o<<=BigInt(s*64-t);for(let l=0,u=r+(s-1)*8;l<s;l++,u-=8){const f=o&a;n.call(this,u,f,c),o>>=64n}}return o}}}function Ui(t,e){const{bitSize:n,byteSize:s}=e;if(n<64){const r=De({...e,bitSize:s*8}),i=DataView.prototype[`get${r}`],c=DataView.prototype[`set${r}`],o=n<=32?2**n-1:2n**BigInt(n)-1n;return t==="get"?function(a,l){return i.call(this,a,l)&o}:function(a,l,u){const f=l&o;c.call(this,a,f,u)}}else{const{get:r,set:i}=Mi(n),c=2n**BigInt(n)-1n;return t==="get"?function(o,a){return r.call(this,o,a)&c}:function(o,a,l){const u=a&c;i.call(this,o,u,l)}}}function $i(t,e){const{bitSize:n,bitOffset:s}=e,r=s&7;if(r+n<=8){const i=DataView.prototype.setUint8,c=DataView.prototype.getUint8,o=2**n-1;if(t==="get")return function(a){return c.call(this,a)>>>r&o};{const a=255^o<<r;return function(l,u){const b=c.call(this,l)&a|(u&o)<<r;i.call(this,l,b)}}}return Ci(t,e)}function Ci(t,e){const{bitSize:n,bitOffset:s}=e,r=s&7,i=[1,2,4,8].find(o=>o*8>=n)??Math.ceil(n/64)*64,c=new DataView(new ArrayBuffer(i));if(t==="get"){const o=Ft("get",{...e,byteSize:i}),a=Vn(r,n,!0);return function(l,u){return a(c,this,l),o.call(c,0,u)}}else{const o=Ft("set",{...e,byteSize:i}),a=Vn(r,n,!1);return function(l,u,f){o.call(c,0,u,f),a(this,c,l)}}}const Pn={};function Di(t,e,n){const{type:s,bitOffset:r,bitSize:i,structure:c}=e,o=r&7,a=De(e),l=kn(e)?"":`Bit${o}`,u=s===x.Int||s===x.Uint;let f=`${t}${a}${l}`,b=!1,y=f;if(u&&i===64){const h=c==null?void 0:c.name;(h==="usize"||h==="isize")&&(f+="Size",b=!0)}let m=Pn[f];if(!m){if(u&&t==="set"){const h=Cn(e),d=n(y);m=function(g,w,E){d.call(this,g,h(w),E)}}else if(b&&t==="get"){const h=n(y),d=BigInt(Number.MIN_SAFE_INTEGER),g=BigInt(Number.MAX_SAFE_INTEGER);m=function(w,E){const U=h.call(this,w,E);return d<=U&&U<=g?Number(U):U}}else m=n(f);m&&m.name!==f&&Object.defineProperty(m,"name",{value:f,configurable:!0,writable:!1}),Pn[f]=m}return m}function ki({type:t}){switch(t){case x.Type:case x.Comptime:case x.Literal:return!0;default:return!1}}const wt={};function Fi(){wt[x.Int]=Gi}function Zn(){wt[x.Uint]=Wi}function Ri(){wt[x.Float]=Ki}function Ni(){wt[x.Object]=Xi}function Li(){wt[x.Type]=Qi}function Bi(){wt[x.Comptime]=to}const Ne={};function _i(){Ne[v.Enumeration]=Ji}function qi(){Ne[v.ErrorSet]=Hi}function F(t,e){const n=wt[t.type];return n(t,e)}function Qn(t,e){const{structure:n}=e,s=Ne[n==null?void 0:n.type];return s?s(t,n):t}function Gi(t,e){const n=ts(e,Ft),s=_e(t,e,n);return Qn(s,t)}function Wi(t,e){const n=ts(e,Ft),s=_e(t,e,n);return Qn(s,t)}function ts(t,e){return function(n,s){const{runtimeSafety:r=!0}=t,i=e(n,s);if(r&&n==="set"){const{min:c,max:o}=Dr(s);return function(a,l,u){if(l<c||l>o)throw new Hr(s,l);i.call(this,a,l,u)}}return i}}function Ki(t,e){return _e(t,e,Ft)}function Ji(t,e){const n=function(s){const{constructor:r}=e,i=r(s);if(!i)throw new Rr(e,s);return i};return{get:t.get.length===0?function(r){const i=t.get.call(this);return r==="number"?i:n(i)}:function(r){const i=t.get.call(this,r);return n(i)},set:t.set.length===1?function(r,i){i!=="number"&&(r=n(r)[Symbol.toPrimitive]()),t.set.call(this,r)}:function(r,i){const c=n(i);t.set.call(this,r,c[Symbol.toPrimitive]())}}}function Hi(t,e){const n=function(s){const{constructor:r}=e,i=r(s);if(!i)throw s instanceof Error?new Rn(e):new Nr(e,s);return i};return{get:t.get.length===0?function(r){const i=t.get.call(this);return r==="number"?i:n(i)}:function(r){const i=t.get.call(this,r);return n(i)},set:t.set.length===1?function(r,i){if(i!=="number"){const c=n(r);r=Number(c)}t.set.call(this,r)}:function(r,i){const c=n(i);i=Number(c),t.set.call(this,r,i)}}}function Le(t){switch(t.type){case v.Primitive:case v.ErrorUnion:case v.Optional:case v.Enumeration:case v.ErrorSet:return!0;default:return!1}}function es(t){return(this[T][t]??this[Y](t))[oe]()}function ns(t){return this[T][t]??this[Y](t)}function Yi(t,e){(this[T][t]??this[Y](t))[ce](e)}function Be(t,{get:e,set:n}){return t!==void 0?{get:function(){return e.call(this,t)},set:n?function(s){return n.call(this,t,s)}:void 0}:{get:e,set:n}}function Xi(t,e){const{structure:n,slot:s}=t;return Be(s,{get:Le(n)?es:ns,set:Yi})}function Zi(t){const e=this[T][t];return e==null?void 0:e.constructor}function Qi(t,e){const{slot:n}=t;return Be(n,{get:Zi})}function to(t,e){const{slot:n,structure:s}=t;return Be(n,{get:Le(s)?es:ns})}function _e(t,e,n){const{littleEndian:s=!0}=e,{bitOffset:r,byteSize:i}=t,c=n("get",t),o=n("set",t);if(r!==void 0){const a=r>>3;return{get:function(){try{return c.call(this[S],a,s)}catch(u){if(u instanceof TypeError&&J.call(this))return c.call(this[S],a,s);throw u}},set:function(u){try{return o.call(this[S],a,u,s)}catch(f){if(f instanceof TypeError&&J.call(this))return o.call(this[S],a,u,s);throw f}}}}else return{get:function(l){try{return c.call(this[S],l*i,s)}catch(u){if(u instanceof TypeError&&J.call(this))return c.call(this[S],l*i,s);throw zn(t,l,u)}},set:function(l,u){try{return o.call(this[S],l*i,u,s)}catch(f){if(f instanceof TypeError&&J.call(this))return o.call(this[S],l*i,u,s);throw zn(t,l,f)}}}}function N(t,e){for(const[n,s]of Object.entries(e))if(s){const{set:r,get:i,value:c,enumerable:o,configurable:a=!0,writable:l=!0}=s;Object.defineProperty(t,n,i?{get:i,set:r,configurable:a,enumerable:o}:{value:c,configurable:a,enumerable:o,writable:l})}for(const n of Object.getOwnPropertySymbols(e)){const s=e[n];s&&Object.defineProperty(t,n,s)}}function et(t,e,n){const s={};for(const[c,o]of Object.entries(e))o!=null&&o.set&&c!=="$"&&(s[c]=o.set);const{get:r,set:i}=e.$;return N(t.prototype,{[Wn]:{value:Object.keys(s)},[ce]:{value:i},[oe]:{value:r},[Fe]:{value:s},[dt]:{value:null},...e}),N(t,n),t}function Ot(){const t=Object.getOwnPropertyDescriptors(this.constructor.prototype);for(const[e,n]of Object.entries(t))n.set&&(n.set=xt,Object.defineProperty(this,e,n));Object.defineProperty(this,ce,{value:xt}),Object.defineProperty(this,dt,{value:this})}function nt(t,e,n){const{byteSize:s,align:r,instance:{members:i,template:c},hasPointer:o}=t,{modifier:a,initializer:l,finalizer:u,alternateCaster:f,shapeDefiner:b}=e,y=eo(i);let m;if(c!=null&&c[T]){const g=i.filter(w=>ki(w));g.length>0&&(m=g.map(w=>w.slot))}const h=new no,d=function(g,w={}){const{fixed:E=!1}=w,U=this instanceof d;let P,A;if(U){if(arguments.length===0)throw new kr(t);P=this,y&&(P[T]={}),b?(l.call(P,g,E),A=P[S]):P[S]=A=n.allocateMemory(s,r,E)}else{if(f&&(P=f.call(this,g,w),P!==!1)||(A=Ii(t,g,n),P=h.find(A)))return P;P=Object.create(d.prototype),b?Lt.call(P,A,t,!1,!1,{shapeDefiner:b}):P[S]=A,y&&(P[T]={})}if(m)for(const z of m)P[T][z]=c[T][z];return a&&a.call(P),U&&(b||l.call(P,g)),u&&(P=u.call(P)),h.save(A,P)};return d}function Bt({source:t}){const e=t[T][0];e&&this[Ue](e)}function at(t){const{instance:{template:e}}=t;return function(n,s){var f;const r=Object.keys(n),i=this[Fe],c=this[Wn];for(const b of r)if(!(b in i))throw new Br(t,b);let o=0,a=0,l=0,u=0;for(const b of c){const y=i[b];y.special?b in n&&u++:(o++,b in n?a++:y.required&&l++)}if(l!==0&&u===0){const b=c.filter(y=>i[y].required&&!(y in n));throw new Lr(t,b)}if(u+a>r.length)for(const b of c)b in n&&(r.includes(b)||r.push(b));a<o&&u===0&&e&&(e[S]&&this[M](e),(f=this[D])==null||f.call(this,Bt,{vivificate:!0,source:e}));for(const b of r)i[b].call(this,n[b],s);return r.length}}function eo(t){for(const{type:e}of t)switch(e){case x.Object:case x.Comptime:case x.Type:case x.Literal:return!0}return!1}function ss(){return this}class no{constructor(){V(this,"map",new WeakMap)}find(e){return this.map.get(e)}save(e,n){return this.map.set(e,n),n}}const Mn={},Un={};function Ct(t,e="utf-8"){let n=Mn[e];n||(n=Mn[e]=new TextDecoder(e));let s;if(Array.isArray(t))if(t.length===1)s=t[0];else{let r=0;for(const o of t)r+=o.length;const{constructor:i}=t[0];s=new i(r);let c=0;for(const o of t)s.set(o,c),c+=o.length}else s=t;return n.decode(s)}function so(t,e="utf-8"){switch(e){case"utf-16":{const{length:n}=t,s=new Uint16Array(n);for(let r=0;r<n;r++)s[r]=t.charCodeAt(r);return s}default:{let n=Un[e];return n||(n=Un[e]=new TextEncoder),n.encode(t)}}}function ro(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}function io(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<n.byteLength;s++)n[s]=e.charCodeAt(s);return new DataView(n.buffer)}function G(){return rs(this,!1)}function X(){return rs(this,!0)}const oo=BigInt(Number.MAX_SAFE_INTEGER),co=BigInt(Number.MIN_SAFE_INTEGER);function rs(t,e){const n=e?"return":"throw",s=new Map,r=function(i){var a,l,u;const c=typeof i=="function"?v.Struct:(a=i==null?void 0:i.constructor)==null?void 0:a[H];if(c===void 0){if(e){if(typeof i=="bigint"&&co<=i&&i<=oo)return Number(i);if(i instanceof Error)return{error:i.message}}return i}let o=s.get(i);if(o===void 0){let f;switch(c){case v.Struct:case v.PackedStruct:case v.ExternStruct:case v.TaggedUnion:case v.BareUnion:case v.ExternUnion:f=(l=i[pt])==null?void 0:l.call(i,{error:n}),o=i.constructor[qn]?[]:{};break;case v.Array:case v.Vector:case v.Slice:f=(u=i[pt])==null?void 0:u.call(i,{error:n}),o=[];break;case v.Pointer:try{o=i["*"]}catch{o=Symbol.for("inaccessible")}break;case v.Enumeration:o=Qt(()=>String(i),{error:n});break;case v.Opaque:o={};break;default:o=Qt(()=>i.$,{error:n})}if(o=r(o),s.set(i,o),f)for(const[b,y]of f)o[b]=r(y)}return o};return r(t)}function Qt(t,e={}){const{error:n="throw"}=e;try{return t()}catch(s){debugger;if(n==="return")return s;throw s}}function lt(t,e={}){return fe({get(){return J.call(this),this[S]},set(n,s){Ei(n),Lt.call(this,n,t,!0,s,e)}})}function ut(t,e={}){return fe({get(){return ro(this.dataView)},set(n,s){if(typeof n!="string")throw new ie("string",n);const r=io(n);Lt.call(this,r,t,!1,s,e)}})}function is(t,e={}){const{sentinel:n,instance:{members:s}}=t,{byteSize:r}=s[0];return fe({get(){const i=this.dataView,c=r===1?Int8Array:Int16Array,o=new c(i.buffer,i.byteOffset,this.length),a=Ct(o,`utf-${r*8}`);return(n==null?void 0:n.value)===void 0?a:a.slice(0,-1)},set(i,c){if(typeof i!="string")throw new ie("a string",i);(n==null?void 0:n.value)!==void 0&&i.charCodeAt(i.length-1)!==n.value&&(i=i+String.fromCharCode(n.value));const o=so(i,`utf-${r*8}`),a=new DataView(o.buffer);Lt.call(this,a,t,!1,c,e)}})}function It(t,e={}){const{typedArray:n}=t;return fe({get(){const s=this.dataView,r=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,r)},set(s,r){if(!Vi(s,n))throw new ie(n.name,s);const i=new DataView(s.buffer,s.byteOffset,s.byteLength);Lt.call(this,i,t,!0,r,e)}})}function fe({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}let rt,Zt;function os(t,e){const{name:n,byteSize:s,align:r,instance:{members:[i]}}=t;if(Zt||(Zt=class extends uo{},rt=os({...t,name:"anyerror"},e)),rt&&n==="anyerror")return t.constructor=rt,t.typedArray=gt(i),rt;const c=Zt,{get:o,set:a}=F(i,e),l=["string","number"],u=at(t),f=function(g){if(g instanceof y[Ut])a.call(this,g);else if(g&&typeof g=="object"&&!Dt(g)){if(u.call(this,g)===0)throw new ht(t,l,g)}else g!==void 0&&a.call(this,g)},b=function(g){if(typeof g=="number"||typeof g=="string")return y[g];if(g instanceof y[Ut])return y[Number(g)];if(Dt(g))return y[`Error: ${g.error}`];if(le(t,g,e))return!1;throw new ht(t,l,g)},y=t.constructor=nt(t,{initializer:f,alternateCaster:b},e),m=t.typedArray=gt(i),h={$:{get:o,set:a},dataView:lt(t),base64:ut(t),typedArray:m&&It(t),valueOf:{value:G},toJSON:{value:X},delete:{value:ct(e)},[M]:{value:q(s)},[L]:{value:Ot}},d={[k]:{value:r},[B]:{value:s},[Ut]:{value:c},[bt]:n==="anyerror"?{value:[]}:void 0,[H]:{value:t.type}};return et(y,h,d)}function ao(t,e,n){const s=n[oe]("number");let r=rt[s];if(!r){const o=t[Ut];r=new o(e,s)}const i=String(r),c={[s]:{value:r},[i]:{value:r},[e]:{value:r}};N(t,c),N(rt,c),rt[bt].push(e)}function lo(){Zt=rt=void 0}class uo extends Error{constructor(e,n){super(Nn(e)),this.number=n,this.stack=void 0}[Symbol.toPrimitive](e){switch(e){case"string":case"default":return Error.prototype.toString.call(this,e);default:return this.number}}toJSON(){return{error:this.message}}}function fo(t,e){const n=(s,{methods:r},i)=>{const c={},o=/^(get|set)\s+([\s\S]+)/;for(const a of r){const l=e.createCaller(a,i),u=o.exec(l.name);if(u){const f=u[1],b=u[2],y=f==="get"?0:1;if(yo(a,i)===y){let h=c[b];h||(h=c[b]={configurable:!0,enumerable:!0}),h[f]=l}}else c[l.name]={value:l,configurable:!0,writable:!0}}N(s,c)};n(t.constructor,t.static,!1),n(t.constructor.prototype,t.instance,!0)}function yo(t,e){const{argStruct:{instance:{members:n}}}=t;return n.length-(e?2:1)}function mo(t,e){const{byteSize:n,align:s,instance:{members:[r]}}=t,{get:i,set:c}=F(r,e),o=["string","number","tagged union"],a=at(t),l=function(d){if(d&&typeof d=="object"){if(a.call(this,d)===0)throw new ht(t,o,d)}else d!==void 0&&c.call(this,d)},u=function(d){if(typeof d=="string"||typeof d=="number"||typeof d=="bigint"){let g=f[d];if(!g&&f[Kn]&&typeof d!="string"){g=new f(void 0);debugger;c.call(g,d,"number"),cs(f,`${d}`,g)}return g}else{if(d instanceof f)return d;if((d==null?void 0:d[En])instanceof f)return d[En];if(le(t,d,e))return!1;throw new ht(t,o,d)}},f=t.constructor=nt(t,{initializer:l,alternateCaster:u},e),b=t.typedArray=gt(r),y=function(d){switch(d){case"string":case"default":return this.$[_n];default:return i.call(this,"number")}},m={$:{get:i,set:c},dataView:lt(t),base64:ut(t),typedArray:b&&It(t),valueOf:{value:G},toString:{value:G},toJSON:{value:X},delete:{value:ct(e)},[Symbol.toPrimitive]:{value:y},[M]:{value:q(n)},[L]:{value:Ot}},h={[k]:{value:s},[B]:{value:n},[H]:{value:t.type}};return et(f,m,h)}function cs(t,e,n){if(e!==void 0){if(n instanceof t){N(n,{[_n]:{value:e}});const s=n[Symbol.toPrimitive]();N(t,{[s]:{value:n},[e]:{value:n}})}}else N(t,{[Kn]:{value:!0}})}function ho(t,e){const{byteSize:n,align:s,instance:{members:[r]},isConst:i}=t,{runtimeSafety:c=!0}=e,{structure:o}=r,{type:a,sentinel:l,length:u}=o,f=a===v.Slice&&o.length===void 0&&!l,b=f?n/2:n,{get:y,set:m}=F({type:x.Uint,bitOffset:0,bitSize:b*8,byteSize:b,structure:{byteSize:b}},e),{get:h,set:d}=f?F({type:x.Uint,bitOffset:b*8,bitSize:b*8,byteSize:b,structure:{name:"usize",byteSize:b}},e):{},g=function(){const O=this[At];if(O){const I=this[Me]();if(I.address!==O.address||I.length!==O.length){const{constructor:Z}=o,st=e.findMemory(I.address,I.length,Z[B]),Ee=Z.call($t,st);this[T][0]=Ee,this[At]=I}}},w=function(){g.call(this);const O=this[T][0];if(!O)throw new jn;return i?as(O):O},E=function(O){if(e.inFixedMemory(this))if(e.inFixedMemory(O)){const I={address:e.getViewAddress(O[S]),length:f?O.length:On};wn.call(this,I),this[At]=I}else throw new Jr(t,O);this[T][0]=O},U=Le(o)?function(){return w.call(this)[oe]()}:w,P=i?xt:function(O){g.call(this);const I=this[T][0];if(!I)throw new jn;return I[ce](O)},A=function(O,I){const Z=o.constructor;if(this===$t||this===ke||O instanceof ft)return!1;if($n(O,Z))return new ft(Z(O["*"]),I);if(a===v.Slice)return new ft(Z(O),I);throw new qr(t)},z=function(){const O=a===v.Pointer?{}:Oo,I=new Proxy(this,O);return Object.defineProperty(this,ae,{value:I}),I},K=function(O){var Z;const I=o.constructor;if($n(O,I)){if(!i&&O.constructor.const)throw new Gr(t,O);O=O[T][0]}if(O instanceof I){J.call(O);const st=O[dt];if(st)if(i)O=st;else throw new Zr(t)}else if(Pi(O,I)){const st=le(o,O,e);O=I(st)}else if(O!==void 0&&!O[S]){const st=e.inFixedMemory(this),Ee=new I(O,{fixed:st});if(c&&o.typedArray){const vn=(Z=O==null?void 0:O.buffer)==null?void 0:Z[Symbol.toStringTag];(vn==="ArrayBuffer"||vn==="SharedArrayBuffer")&&ti(o,O)}O=Ee}else if(O!==void 0)throw new Kr(t,O);this[Ue](O)},ft=t.constructor=nt(t,{initializer:K,alternateCaster:A,finalizer:z},e),wn=function({address:O,length:I}){m.call(this,O),d==null||d.call(this,I)},On=a!=v.Slice?1:u,Pr=function(){const O=y.call(this),I=h?h.call(this):l?O?e.findSentinel(O,l.bytes)+1:0:On;return{address:O,length:I}},Mr={"*":{get:U,set:P},$:{get:qe,set:K},valueOf:{value:G},toJSON:{value:X},delete:{value:po},[Symbol.toPrimitive]:a===v.Primitive&&{value:go},[yt]:{value:w},[Ue]:{value:E},[Me]:{value:Pr},[Gn]:{value:wn},[D]:{value:wo},[M]:{value:q(n)},[At]:{value:void 0,writable:!0},[L]:{value:bo}},Ur={child:{get:()=>o.constructor},const:{value:i},[k]:{value:s},[B]:{value:n},[H]:{value:t.type}};return et(ft,Mr,Ur)}function bo(){const t=this[kt],e=Object.getOwnPropertyDescriptor(t.constructor.prototype,"$");e.set=xt,Object.defineProperty(t,"$",e),Object.defineProperty(t,dt,{value:t})}function po(){const t=this[T][0];t==null||t.delete()}function go(t){return this[T][0][Symbol.toPrimitive](t)}function qe(){return this[ae]}function So({isActive:t}){this[T][0]&&!t(this)&&(this[T][0]=void 0)}function wo(t,e={}){const{source:n,isActive:s=Q,isMutable:r=Q}=e;t.call(this,{source:n,isActive:s,isMutable:r})}function $n(t,e){var n;return((n=t==null?void 0:t.constructor)==null?void 0:n.child)===e&&t["*"]}function as(t){let e=t[Ie];return e||(Object.defineProperty(t,Ie,{value:void 0,configurable:!0}),e=new Proxy(t,vo),Object.defineProperty(t,Ie,{value:e})),e}const Oo={get(t,e){return e===kt?t:e in t?t[e]:t[yt]()[e]},set(t,e,n){if(e in t)t[e]=n;else{const s=t[yt]();s[e]=n}return!0},deleteProperty(t,e){if(e in t)delete t[e];else{const n=t[yt]();delete n[e]}return!0},has(t,e){if(e in t)return!0;{const n=t[yt]();return e in n}}},vo={get(t,e){if(e===dt)return t;{const n=t[e];return(n==null?void 0:n[dt])===null?as(n):n}},set(t,e,n){const s=t[kt];if(s&&!(e in s))return t[e]=n,!0;xt()}};function Q(){return!0}function Ao(t,e){const{length:n,byteSize:s,align:r,instance:{members:[i]}}=t,{bitSize:c,structure:o}=i,a={};for(let h=0,d=0;h<n;h++,d+=c){const{get:g,set:w}=F({...i,bitOffset:d},e);a[h]={get:g,set:w,configurable:!0}}const l=at(t),u=function(h){if(h instanceof f)this[M](h);else if(h!=null&&h[Symbol.iterator]){let d=h.length;if(typeof d!="number"&&(h=[...h],d=h.length),d!==n)throw new re(t,this,h);let g=0;for(const w of h)this[Fe][g++].call(this,w)}else if(h&&typeof h=="object"){if(l.call(this,h)===0)throw new mt(t,h)}else if(h!==void 0)throw new mt(t,h)},f=t.constructor=nt(t,{initializer:u},e),b=t.typedArray=gt(i),y={...a,$:{get:ss,set:u},length:{value:n},dataView:lt(t),base64:ut(t),typedArray:b&&It(t),valueOf:{value:G},toJSON:{value:X},entries:{value:te},delete:{value:ct(t)},[Symbol.iterator]:{value:ls},[pt]:{value:te},[M]:{value:q(s)},[L]:{value:Ot}},m={child:{get:()=>o.constructor},[Nt]:{value:ue(t)},[k]:{value:r},[B]:{value:s},[H]:{value:t.type}};return et(f,y,m)}function ls(){const t=this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const i=n++;s=t[i],r=!1}else r=!0;return{value:s,done:r}}}}function jo(){const t=this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const i=n++;s=[i,t[i]],r=!1}else r=!0;return{value:s,done:r}}}}function te(){return{[Symbol.iterator]:jo.bind(this),length:this.length}}function To(t,e){const{byteSize:n,align:s,instance:{members:r},isTuple:i,hasPointer:c}=t,o={};for(const m of r){const{get:h,set:d}=F(m,e);o[m.name]={get:h,set:d,configurable:!0,enumerable:!0},m.isRequired&&d&&(d.required=!0)}const a=!!r.find(m=>m.type===x.Object),l=at(t),u=function(m){if(m instanceof f)this[M](m),c&&this[D](Bt,{vivificate:!0,source:m});else if(m&&typeof m=="object")l.call(this,m);else if(m!==void 0)throw new ht(t,"object",m)},f=t.constructor=nt(t,{initializer:u},e),b={$:{get:ss,set:u},dataView:lt(t),base64:ut(t),length:i&&{value:r.length>0?parseInt(r[r.length-1].name)+1:0},valueOf:{value:G},toJSON:{value:X},delete:{value:ct(e)},entries:i&&{value:te},...o,[Symbol.iterator]:{value:i?ls:us},[pt]:{value:i?te:Ge},[M]:{value:q(n)},[Y]:a&&{value:We(t)},[D]:c&&{value:Ke(t,Q)},[L]:{value:Ot},[bt]:{value:r.map(m=>m.name)}},y={[k]:{value:s},[B]:{value:n},[H]:{value:t.type},[qn]:{value:i}};return et(f,b,y)}function Ge(t){return{[Symbol.iterator]:xo.bind(this,t),length:this[bt].length}}function us(t){return Ge.call(this,t)[Symbol.iterator]()}function xo(t){const e=this,n=this[bt];let s=0;return{next(){let r,i;if(s<n.length){const c=n[s++];r=[c,Qt(()=>e[c],t)],i=!1}else i=!0;return{value:r,done:i}}}}function We(t){const{instance:{members:e}}=t,n={};for(const s of e.filter(r=>r.type===x.Object))n[s.slot]=s;return function(r){const i=n[r],{bitOffset:c,byteSize:o,structure:{constructor:a}}=i,l=this[S],f=l.byteOffset+(c>>3);let b=o;if(b===void 0){if(c&7)throw new Yr(i);b=i.bitSize>>3}const y=new DataView(l.buffer,f,b);return this[T][r]=a.call(ke,y)}}function Ke(t,e={}){const{isChildActive:n=Q,isChildMutable:s=Q}=e,{instance:{members:r}}=t,i=r.filter(c=>c.structure.hasPointer);return function(o,a={}){var m;const{source:l,vivificate:u=!1,isActive:f=Q,isMutable:b=Q}=a,y={...a,isActive:h=>f(this)&&n.call(this,h),isMutable:h=>b(this)&&s.call(this,h)};for(const{slot:h}of i){if(l){const g=(m=l[T])==null?void 0:m[h];if(!g)continue;y.source=g}const d=this[T][h]??(u?this[Y](h):null);d&&d[D](o,y)}}}function zo(t,e){const{type:n,constructor:s,static:{members:r,template:i}}=t,c={};for(const o of r)c[o.name]=F(o,e);if(N(s,{valueOf:{value:G},toJSON:{value:X},...c,[Symbol.iterator]:{value:us},[pt]:{value:Ge},[T]:i&&{value:i[T]},[bt]:!s[bt]&&{value:r.map(o=>o.name)}}),n===v.Enumeration)for(const{name:o,slot:a}of r)cs(s,o,s[T][a]);else if(n===v.ErrorSet)for(const{name:o,slot:a}of r)ao(s,o,s[T][a])}function Eo(t,e){const{byteSize:n,align:s,instance:{members:r},hasPointer:i}=t,c=!!r.find(y=>y.type===x.Object),o=t.constructor=function(y){const m=e.allocateMemory(n,s);this[S]=m,c&&(this[T]={}),u.call(this,y)},a=r.slice(0,-1).map(y=>y.name),l=a.length,u=function(y){if(y.length!==l)throw new _r(t,y.length);for(const[m,h]of a.entries())try{this[h]=y[m]}catch(d){throw Qr(t,m,d)}},f={};for(const y of r)f[y.name]=F(y,e);const b=function(y){return y===this.retval};return N(o.prototype,{...f,[M]:{value:q(n)},[Y]:c&&{value:We(t)},[D]:i&&{value:Ke(t,{isChildMutable:b})}}),N(o,{[k]:{value:s},[B]:{value:n}}),o}function Io(t,e){const{length:n,byteSize:s,align:r,instance:{members:[i]},hasPointer:c}=t,{get:o,set:a}=F(i,e),l=ms(i),u=at(t),f=function(w){if(w instanceof y)this[M](w),c&&this[D](Bt,{vivificate:!0,source:w});else if(typeof w=="string"&&l&&(w={string:w}),w!=null&&w[Symbol.iterator]){if(w=ds(w),w.length!==n)throw new re(t,this,w);let E=0;for(const U of w)a.call(this,E++,U)}else if(w&&typeof w=="object"){if(u.call(this,w)===0)throw new mt(t,w)}else if(w!==void 0)throw new mt(t,w)},b=fs,y=t.constructor=nt(t,{initializer:f,finalizer:b},e),m=t.typedArray=gt(i),h=i.type===x.Object,d={$:{get:qe,set:f},length:{value:n},dataView:lt(t),base64:ut(t),string:l&&is(t),typedArray:m&&It(t),get:{value:o},set:{value:a},entries:{value:ee},valueOf:{value:G},toJSON:{value:X},delete:{value:ct(e)},[Symbol.iterator]:{value:hs},[pt]:{value:ee},[M]:{value:q(s)},[Y]:h&&{value:bs(t)},[D]:c&&{value:ps()},[L]:{value:ys}},g={child:{get:()=>i.structure.constructor},[Nt]:{value:ue(t)},[k]:{value:r},[B]:{value:s},[H]:{value:t.type}};return et(y,d,g)}function fs(){const t=new Proxy(this,Po);return Object.defineProperty(this,ae,{value:t}),t}function ys(){Ot.call(this),Object.defineProperty(this,"set",{value:xt});const t=this.get;Object.defineProperty(this,"get",{value:function(n){var r;const s=t.call(this,n);return(s==null?void 0:s[dt])===null&&((r=s[L])==null||r.call(s)),s}})}function ms(t){return t.type===x.Uint&&[8,16].includes(t.bitSize)}function hs(){const t=this[Re]??this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const i=n++;s=t.get(i),r=!1}else r=!0;return{value:s,done:r}}}}function Vo(t){const e=this[Re]??this,n=this.length;let s=0;return{next(){let r,i;if(s<n){const c=s++;r=[c,Qt(()=>e.get(c),t)],i=!1}else i=!0;return{value:r,done:i}}}}function ee(t){return{[Symbol.iterator]:Vo.bind(this,t),length:this.length}}function bs(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:s}=e;return function(i){const{constructor:c}=s,o=this[S],l=o.byteOffset+n*i,u=new DataView(o.buffer,l,n);return this[T][i]=c.call(ke,u)}}function ps(t){return function(n,s={}){const{source:r,vivificate:i=!1,isActive:c=Q,isMutable:o=Q}=s,a={...s,isActive:()=>c(this),isMutable:()=>o(this)};for(let l=0,u=this.length;l<u;l++){r&&(a.source=r==null?void 0:r[T][l]);const f=this[T][l]??(i?this[Y](l):null);f&&f[D](n,a)}}}function ds(t){var r;if(typeof t.length=="number")return t;const e=t[Symbol.iterator](),n=e.next(),s=(r=n.value)==null?void 0:r.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let i;for(;!(i=e.next()).done;)yield i.value}(),{length:s});{const i=[];let c=n;for(;!c.done;)i.push(c.value),c=e.next();return i}}const Po={get(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return t.get(n);switch(e){case"get":return t[Pt]||(t[Pt]=t.get.bind(t)),t[Pt];case"set":return t[Mt]||(t[Mt]=t.set.bind(t)),t[Mt];case Re:return t;default:return t[e]}},set(t,e,n){const s=typeof e=="symbol"?0:e|0;if(s!==0||s==e)t.set(s,n);else switch(e){case"get":t[Pt]=n;break;case"set":t[Mt]=n;break;default:t[e]=n}return!0},deleteProperty(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return!1;switch(e){case"get":delete t[Pt];break;case"set":delete t[Mt];break;default:delete t[e]}return!0},has(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,s=t.length;n<s;n++)e.push(`${n}`);return e.push("length",ae),e},getOwnPropertyDescriptor(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e){if(n>=0&&n<t.length)return{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(t,e)}};function Mo(t,e){const{byteSize:n,align:s,instance:{members:r},hasPointer:i}=t,{get:c,set:o}=F(r[0],e),{get:a,set:l}=F(r[1],e),u=function(){if(a.call(this,"number"))throw a.call(this);return c.call(this)},f=r[0].type===x.Void,b=r[1].structure.constructor,y=function(){return!a.call(this,"number")},m=function(){var z;this[In](),(z=this[D])==null||z.call(this,So)},h=!!r.find(z=>z.type===x.Object),d=at(t),g=function(z){if(z instanceof w)this[M](z),i&&y.call(this)&&this[D](Bt,{vivificate:!0,source:z});else if(z instanceof b[Ut]&&b(z))l.call(this,z),m.call(this);else if(z!==void 0||f)try{o.call(this,z),l.call(this,0,"number")}catch(K){if(z instanceof Error)throw new Rn(t);if(Dt(z))l.call(this,z),m.call(this);else if(z&&typeof z=="object"){if(d.call(this,z)===0)throw K}else throw K}},w=t.constructor=nt(t,{initializer:g},e),{bitOffset:E,byteSize:U}=r[0],P={$:{get:u,set:g},dataView:lt(t),base64:ut(t),valueOf:{value:G},toJSON:{value:X},delete:{value:ct(e)},[M]:{value:q(n)},[In]:{value:yi(E/8,U)},[Y]:h&&{value:We(t)},[D]:i&&{value:Ke(t,{isChildActive:y})},[L]:{value:Ot}},A={[k]:{value:s},[B]:{value:n},[H]:{value:t.type}};return et(w,P,A)}function Uo(t,e){const{byteSize:n,align:s,instance:{members:[r]}}=t,{get:i,set:c}=F(r,e),o=at(t),a=function(y){if(y instanceof l)this[M](y);else if(y&&typeof y=="object"){if(o.call(this,y)===0){const m=Dn(r);throw new ht(t,m,y)}}else y!==void 0&&c.call(this,y)},l=t.constructor=nt(t,{initializer:a},e),u=t.typedArray=gt(r),f={$:{get:i,set:c},dataView:lt(t),base64:ut(t),typedArray:u&&It(t),valueOf:{value:G},toJSON:{value:X},delete:{value:ct(e)},[Symbol.toPrimitive]:{value:i},[M]:{value:q(n)},[L]:{value:Ot}},b={[Nt]:{value:ue(t)},[k]:{value:s},[B]:{value:n},[H]:{value:t.type}};return et(l,f,b)}function $o(t,e){const{align:n,instance:{members:[s]},hasPointer:r}=t,{get:i,set:c}=F(s,e),{byteSize:o,structure:a}=s,l=Do(t,e);l&&(t.sentinel=l);const u=ms(s),f=function(A,z,K=!1){A||(A=e.allocateMemory(z*o,n,K)),this[S]=A,this[$e]=z},b=function(A,z){if(z!==this[$e])throw new re(t,this,A)},y=at(t),m=function(A,z=!1){if(A instanceof d)this[S]?b.call(this,A,A.length):f.call(this,null,A.length,z),this[M](A),r&&this[D](Bt,{vivificate:!0,source:A});else if(typeof A=="string"&&u)m.call(this,{string:A},z);else if(A!=null&&A[Symbol.iterator]){A=ds(A),this[S]?b.call(this,A,A.length):f.call(this,null,A.length,z);let K=0;for(const ft of A)l==null||l.validateValue(ft,K,A.length),c.call(this,K++,ft)}else if(typeof A=="number")if(!this[S]&&A>=0&&isFinite(A))f.call(this,null,A);else throw new mt(t,A,!this[S]);else if(A&&typeof A=="object"){if(y.call(this,A,z)===0)throw new mt(t,A)}else if(A!==void 0)throw new mt(t,A)},h=fs,d=t.constructor=nt(t,{initializer:m,shapeDefiner:f,finalizer:h},e),g=t.typedArray=gt(s),w=s.type===x.Object,E={shapeDefiner:f},U={$:{get:qe,set:m},length:{get:Co},dataView:lt(t,E),base64:ut(t,E),string:u&&is(t,E),typedArray:g&&It(t,E),get:{value:i},set:{value:c},entries:{value:ee},valueOf:{value:G},toJSON:{value:X},delete:{value:ct(e)},[Symbol.iterator]:{value:hs},[pt]:{value:ee},[M]:{value:q(o,!0)},[Y]:w&&{value:bs(t)},[D]:r&&{value:ps()},[L]:{value:ys}},P={child:{get:()=>a.constructor},[Nt]:{value:ue(t)},[k]:{value:n},[B]:{value:o},[H]:{value:t.type}};return et(d,U,P)}function Co(){return this[$e]}function Do(t,e){const{runtimeSafety:n=!0}=e,{byteSize:s,instance:{members:[r,i],template:c}}=t;if(!i)return;const{get:o}=F(i,e),a=o.call(c,0),{get:l}=F(r,e),u=n?function(y,m,h){if(y===a&&m!==h-1)throw new An(t,y,m,h);if(y!==a&&m===h-1)throw new Yt(t,a,m,h)}:function(y,m,h){if(y!==a&&m===h-1)throw new Yt(t,a,h)},f=n?function(y,m){for(let h=0;h<m;h++){const d=l.call(y,h);if(d===a&&h!==m-1)throw new An(t,a,h,m);if(d!==a&&h===m-1)throw new Yt(t,a,m)}}:function(y,m){if(m*s===y[S].byteLength){const h=m-1;if(l.call(y,h)!==a)throw new Yt(t,a,m)}},b=c[S];return{value:a,bytes:b,validateValue:u,validateData:f}}const W=Array(Object.values(v).length);function ko(){W[v.Primitive]=Uo}function Fo(){W[v.Array]=Io}function Ro(){W[v.Struct]=To}function No(){W[v.ArgStruct]=Eo}function Lo(){W[v.ErrorUnion]=Mo}function Bo(){W[v.ErrorSet]=os,qi()}function _o(){W[v.Enumeration]=mo,_i()}function qo(){W[v.Pointer]=ho,Zn()}function Go(){W[v.Slice]=$o}function Wo(){W[v.Vector]=Ao}function Ko(t){return W[t]}class Jo{constructor(){V(this,"context");V(this,"contextStack",[]);V(this,"consolePending",[]);V(this,"consoleTimeout",0);V(this,"viewMap",new WeakMap);V(this,"initPromise");V(this,"abandoned",!1);V(this,"released",!1);V(this,"littleEndian",!0);V(this,"runtimeSafety",!0);V(this,"comptime",!1);V(this,"variables",[]);V(this,"imports");V(this,"console",globalThis.console)}startContext(){this.context&&this.contextStack.push(this.context),this.context=new Ho}endContext(){this.context=this.contextStack.pop()}allocateMemory(e,n=0,s=!1){return s?this.allocateFixedMemory(e,n):this.allocateRelocMemory(e,n)}allocateRelocMemory(e,n){return this.obtainView(new ArrayBuffer(e),0,e)}registerMemory(e,n=null,s=void 0){const{memoryList:r}=this.context,i=this.getViewAddress(e),c=Ve(r,i);return r.splice(c,0,{address:i,dv:e,len:e.byteLength,targetDV:n,targetAlign:s}),i}unregisterMemory(e){const{memoryList:n}=this.context,s=Ve(n,e),r=n[s-1];(r==null?void 0:r.address)===e&&n.splice(s-1,1)}findMemory(e,n,s){if(Zo(e))if(!n)e=0;else return null;else if(!e&&n)return null;let r=n*(s??0);if(this.context){const{memoryList:i}=this.context,c=Ve(i,e),o=i[c-1];if((o==null?void 0:o.address)===e&&o.len===r)return o.targetDV??o.dv;if((o==null?void 0:o.address)<=e&&e<vt(o.address,o.len)){const a=Number(e-o.address),l=o.targetDV??o.dv,u=s===void 0;u&&(r=l.byteLength-a);const f=this.obtainView(l.buffer,l.byteOffset+a,r);return u&&(f[k]=o.targetAlign),f}}return this.obtainFixedView(e,r)}getViewAddress(e){const n=this.getBufferAddress(e.buffer);return vt(n,e.byteOffset)}obtainView(e,n,s){let r=this.viewMap.get(e);if(!r){const o=new DataView(e,n,s);return this.viewMap.set(e,o),o}if(r instanceof DataView){if(r.byteOffset===n&&r.byteLength===s)return r;{const o=r;r={[`${o.byteOffset}:${o.byteLength}`]:o},this.viewMap.set(e,r)}}const i=`${n}:${s}`;let c=r[i];return c||(c=r[i]=new DataView(e,n,s)),c}captureView(e,n,s){if(s){const r=this.allocateRelocMemory(n,0);return n>0&&this.copyBytes(r,e,n),r}else return this.obtainFixedView(e,n)}castView(e,n,s,r){const{constructor:i,hasPointer:c}=r,o=this.captureView(e,n,s),a=i.call($t,o);return c&&this.acquirePointerTargets(a),s&&a[L](),a}finalizeShape(e){const s=Ko(e.type)(e,this);typeof s=="function"&&(N(s,{name:{value:e.name,configurable:!0}}),s.prototype.hasOwnProperty(Symbol.toStringTag)||N(s.prototype,{[Symbol.toStringTag]:{value:e.name,configurable:!0}}))}finalizeStructure(e){zo(e,this),fo(e,this)}createCaller(e,n){const{name:s,argStruct:r,thunkId:i}=e,{constructor:c}=r,o=this;let a;return n?a=function(...l){return o.invokeThunk(i,new c([this,...l]))}:a=function(...l){return o.invokeThunk(i,new c(l))},Object.defineProperty(a,"name",{value:s}),a}recreateStructures(e,n){Object.assign(this,n);const s=(c,o)=>{for(const[a,l]of Object.entries(o))c[a]=r(l);return c},r=c=>{var o;if(c.memory){const{array:a,offset:l,length:u}=c.memory,f=this.obtainView(a.buffer,l,u),{constructor:b}=c.structure,{reloc:y,const:m}=c,h=b.call($t,f);return m&&((o=h[L])==null||o.call(h)),c.slots&&s(h[T],c.slots),y!==void 0&&this.variables.push({reloc:y,object:h}),h}else return c.structure};lo();const i=new Map;for(const c of e){for(const o of[c.instance,c.static])if(o.template){const a=o.template,l=o.template={};if(a.memory){const{array:u,offset:f,length:b}=a.memory;l[S]=this.obtainView(u.buffer,f,b)}if(a.slots){const u=l[T]={};i.set(u,a.slots)}}this.finalizeShape(c)}for(const[c,o]of i)s(c,o);for(const c of e)this.finalizeStructure(c)}linkVariables(e){const n=[];for(const{object:s,reloc:r}of this.variables)this.linkObject(s,r,e),s[yt]&&s[T][0]&&n.push(s);for(const s of n){const r=s[yt](),i=this.getViewAddress(r[S]),{length:c=1}=r;s[At]={address:i,length:c}}}linkObject(e,n,s){if(this.inFixedMemory(e))return;const r=e[S],i=this.recreateAddress(n),c=this.obtainFixedView(i,r.byteLength);if(s){const a=Object.create(e.constructor.prototype);a[S]=c,a[M](e)}e[S]=c;const o=a=>{if(a[T]){for(const l of Object.values(a[T]))if(l){const u=l[S];if(u.buffer===r.buffer){const f=u.byteOffset-r.byteOffset;l[S]=this.obtainView(c.buffer,f,u.byteLength),o(l)}}}};o(e)}unlinkVariables(){for(const{object:e}of this.variables)this.unlinkObject(e)}unlinkObject(e){if(!this.inFixedMemory(e))return;const n=e[S],s=this.allocateMemory(n.byteLength),r=Object.create(e.constructor.prototype);r[S]=s,r[M](e),e[S]=s}releaseFunctions(){const e=()=>{throw new Error("Module was abandoned")};for(const n of Object.keys(this.imports))this[n]&&(this[n]=e)}getSpecialExports(){return{init:()=>this.initPromise??Promise.resolve(),abandon:()=>this.abandon(),released:()=>this.released,connect:e=>this.console=e}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}writeToConsole(e){const{console:n}=this;try{const s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).slice(),r=s.lastIndexOf(10);if(r===-1)this.consolePending.push(s);else{const i=s.subarray(0,r),c=s.subarray(r+1),o=[...this.consolePending,i];n.log(Ct(o)),this.consolePending=c.length>0?[c]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout(()=>{n.log(Ct(this.consolePending)),this.consolePending=[]},250))}catch(s){n.error(s)}}flushConsole(){this.consolePending.length>0&&(console.log(Ct(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}updatePointerAddresses(e){const n=new Map,s=new Map,r=[],i=this,c=function({isActive:l}){var b;if(!l(this))return;const u=this[kt];if(n.get(u))return;const f=u[T][0];if(f&&(n.set(u,f),!i.inFixedMemory(f))){const y=f[S],m=s.get(y.buffer);if(m){const h=Array.isArray(m)?m:[m],d=gs(h,y.byteOffset,g=>g[S].byteOffset);h.splice(d,0,f),Array.isArray(m)||(s.set(y.buffer,h),r.push(h))}else s.set(y.buffer,f);(b=f[D])==null||b.call(f,c)}};e[D](c);const o=this.findTargetClusters(r),a=new Map;for(const l of o)for(const u of l.targets)a.set(u,l);for(const[l,u]of n){const f=a.get(u),{length:b=1}=u;let y=this.getTargetAddress(u,f);y===!1&&(y=this.getShadowAddress(u,f)),l[Gn]({address:y,length:b})}}findTargetClusters(e){const n=[];for(const s of e){let r=null,i=0,c=0,o=null;for(const a of s){const l=a[S],{byteOffset:u,byteLength:f}=l,b=u+f;let y=!0;r&&(c>u?(o||(o={targets:[r],start:i,end:c,address:void 0,misaligned:void 0},n.push(o)),o.targets.push(a),b>c?o.end=b:y=!1):o=null),y&&(r=a,i=u,c=b)}}return n}createClusterShadow(e){const{start:n,end:s,targets:r}=e;let i=0,c;for(const g of r){const w=g[S],E=w.byteOffset,U=g.constructor[k]??w[k];(i===void 0||U>i)&&(i=U,c=E)}const o=s-n,a=this.allocateShadowMemory(o+i,1),l=this.getViewAddress(a),u=Xo(vt(l,c-n),i),f=vt(u,n-c),b=a.byteOffset+Number(f-l),y=new DataView(a.buffer,b,o);for(const g of r){const w=g[S],E=w.byteOffset;if(E!==c){const U=g.constructor[k]??w[k];if(Yo(vt(f,E-n),U))throw new Wr(U,i)}}const m={[M]:q(o)},h=Object.create(m),d=Object.create(m);return h[S]=new DataView(r[0][S].buffer,Number(n),o),d[S]=y,d[Xt]={address:l,len:a.byteLength,align:1},this.addShadow(d,h,1)}getShadowAddress(e,n){if(n){const s=e[S];if(n.address===void 0){const r=this.createClusterShadow(n);n.address=this.getViewAddress(r[S])}return vt(n.address,s.byteOffset-n.start)}else{const s=this.createShadow(e);return this.getViewAddress(s[S])}}createShadow(e){const n=e[S],s=e.constructor[k]??n[k],r=Object.create(e.constructor.prototype),i=r[S]=this.allocateShadowMemory(n.byteLength,s);return r[Xt]={address:this.getViewAddress(i),len:i.byteLength,align:s},this.addShadow(r,e,s)}addShadow(e,n,s){let{shadowMap:r}=this.context;return r||(r=this.context.shadowMap=new Map),r.set(e,n),this.registerMemory(e[S],n[S],s),e}removeShadow(e){const{shadowMap:n}=this.context;if(n){for(const[s]of n)if(s[S]===e){n.delete(s);break}}}updateShadows(){const{shadowMap:e}=this.context;if(e)for(const[n,s]of e)n[M](s)}updateShadowTargets(){const{shadowMap:e}=this.context;if(e)for(const[n,s]of e)s[M](n)}releaseShadows(){const{shadowMap:e}=this.context;if(e)for(const[n]of e){const{address:s,len:r,align:i}=n[Xt];this.freeShadowMemory(s,r,i)}}acquirePointerTargets(e){const n=this,s=new Map,r=function({isActive:i,isMutable:c}){var b,y;const o=this[kt];if(s.get(o))return;s.set(o,!0);const a=!o.constructor.const,l=o[T][0];let u,f;if(i(this)){const m=o.constructor.child;if(!l||c(this)){f=o[Me]();const h=n.findMemory(f.address,f.length,m[B]);u=h?m.call($t,h):null}else u=l}(b=l==null?void 0:l[D])==null||b.call(l,r,{vivificate:!0,isMutable:()=>a}),u!==l&&((y=u==null?void 0:u[D])==null||y.call(u,r,{vivificate:!0,isMutable:()=>a}),o[T][0]=u,n.inFixedMemory(o)&&(o[At]=f))};e[D](r,{vivificate:!0})}}class Ho{constructor(){V(this,"pointerProcessed",new Map);V(this,"memoryList",[]);V(this,"shadowMap",null);V(this,"call",0)}}function gs(t,e,n){let s=0,r=t.length;if(r===0)return 0;for(;s<r;){const i=Math.floor((s+r)/2);n(t[i])<=e?s=i+1:r=i}return r}function Ve(t,e){return gs(t,e,n=>n.address)}function Yo(t,e){if(e===void 0)return!1;typeof t=="bigint"&&(t=Number(t&0xFFFFFFFFn));const n=e-1;return(t&n)!==0}function Xo(t,e){let n;return typeof t=="bigint"?(e=BigInt(e),n=~(e-1n)):n=~(e-1),(t&n)+e}function vt(t,e){return t+(typeof t=="bigint"?BigInt(e):e)}function Zo(t){return typeof t=="bigint"?t===0xaaaaaaaaaaaaaaaan:t===2863311530}class Qo extends Jo{constructor(){super(...arguments);V(this,"imports",{getFactoryThunk:{argType:"",returnType:"i"},allocateExternMemory:{argType:"ii",returnType:"i"},freeExternMemory:{argType:"iii"},allocateShadowMemory:{argType:"cii",returnType:"v"},freeShadowMemory:{argType:"ciii"},runThunk:{argType:"iv",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"}});V(this,"exports",{allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"iibv",returnType:"v"},getSlotNumber:{argType:"ii",returnType:"i"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"},startCall:{argType:"iv",returnType:"i"},endCall:{argType:"iv",returnType:"i"}});V(this,"nextValueIndex",1);V(this,"valueTable",{0:null});V(this,"valueIndices",new Map);V(this,"memory",null);V(this,"littleEndian",!0)}allocateHostMemory(n,s){const r={[k]:s},i=q(n),c=this.allocateRelocMemory(n,s),o=this.allocateShadowMemory(n,s),a={constructor:r,[S]:c,[M]:i},l={constructor:r,[S]:o,[M]:i};return l[Xt]={address:this.getViewAddress(o),len:n,align:s},this.addShadow(l,a,s),o}freeHostMemory(n,s,r){const i=this.findMemory(n,s,1);this.removeShadow(i),this.unregisterMemory(n),this.freeShadowMemory(n,s,r)}getBufferAddress(n){return 0}allocateFixedMemory(n,s){const r=n?this.allocateExternMemory(n,s):0,i=this.obtainFixedView(r,n);return i[k]=s,i}freeFixedMemory(n,s,r){s&&this.freeExternMemory(n,s,r)}obtainFixedView(n,s){n<0&&(n=0);const{memory:r}=this,i=this.obtainView(r.buffer,n,s);return i[S]={memory:r,address:n,len:s},i}releaseFixedView(n){n.buffer;const s=n.byteOffset,r=n.byteLength,i=n[k];i!==void 0&&this.freeFixedMemory(s,r,i)}inFixedMemory(n){return this.memory?(J.call(n),n[S].buffer===this.memory.buffer):!1}copyBytes(n,s,r){const{memory:i}=this,c=new DataView(i.buffer,s,r);Jn(r)(n,c)}findSentinel(n,s){const{memory:r}=this,i=s.byteLength,c=r.buffer.byteLength-i+1;for(let o=n;o<c;o+=i){const a=new DataView(r.buffer,o,i);let l=!0;for(let u=0;u<i;u++){const f=a.getUint8(u),b=s.getUint8(u);if(f!==b){l=!1;break}}if(l)return(o-n)/i}}captureString(n,s){const{buffer:r}=this.memory,i=new Uint8Array(r,n,s);return Ct(i)}getTargetAddress(n,s){return this.inFixedMemory(n)?this.getViewAddress(n[S]):n[S].byteLength===0?0:!1}clearExchangeTable(){this.nextValueIndex!==1&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(n){if(n){let s=this.valueIndices.get(n);return s===void 0&&(s=this.nextValueIndex++,this.valueIndices.set(n,s),this.valueTable[s]=n),s}else return 0}fromWebAssembly(n,s){switch(n){case"v":case"s":return this.valueTable[s];case"i":return s;case"b":return!!s}}toWebAssembly(n,s){switch(n){case"v":case"s":return this.getObjectIndex(s);case"i":return s;case"b":return s?1:0}}exportFunction(n,s="",r=""){return n?(...i)=>{i=i.map((o,a)=>this.fromWebAssembly(s.charAt(a),o));const c=n.apply(this,i);return this.toWebAssembly(r,c)}:()=>{}}importFunction(n,s="",r=""){let i=!1;return s.startsWith("c")&&(i=!0,s=s.slice(1)),(...c)=>{c=c.map((a,l)=>this.toWebAssembly(s.charAt(l),a)),i&&(c=[this.context.call,...c]);const o=n.apply(this,c);return this.fromWebAssembly(r,o)}}exportFunctions(){const n={};for(const[s,{argType:r,returnType:i,alias:c}]of Object.entries(this.exports)){const o=this[c??s];n[`_${s}`]=this.exportFunction(o,r,i)}return n}importFunctions(n){for(const[s,r]of Object.entries(n)){const i=this.imports[s];if(i){const{argType:c,returnType:o}=i;this[s]=this.importFunction(r,c,o)}}}async instantiateWebAssembly(n){const s=await n,r=this.exportFunctions(),i=this.getWASI(),c={env:r,wasi_snapshot_preview1:i};return s[Symbol.toStringTag]==="Response"?WebAssembly.instantiateStreaming(s,c):WebAssembly.instantiate(s,c)}loadModule(n){return this.initPromise=(async()=>{const{instance:s}=await this.instantiateWebAssembly(n),{memory:r,_initialize:i}=s.exports;this.importFunctions(s.exports),this.trackInstance(s),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=r,i==null||i()})()}trackInstance(n){const s=new WeakRef(n);Object.defineProperty(this,"released",{get:()=>!s.deref(),enumerable:!0})}linkVariables(n){this.initPromise&&(this.initPromise=this.initPromise.then(()=>super.linkVariables(n)))}getMemoryOffset(n){return n}recreateAddress(n){return n}startCall(n,s){this.startContext(),this.context.call=n,s[D]&&this.updatePointerAddresses(s);const r=this.getShadowAddress(s);return this.updateShadows(),r}endCall(n,s){this.updateShadowTargets(),s[D]&&this.acquirePointerTargets(s),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&this.flushConsole()}async runThunk(n,s){return await this.initPromise,this.runThunk(n,s)}invokeThunk(n,s){const r=this.runThunk(n,s);if(r){if(r[Symbol.toStringTag]==="Promise")return r.then(i=>{if(i)throw new xn(i);return s.retval});throw new xn(r)}return s.retval}getWASI(){return{fd_write:(n,s,r,i)=>{if(n===1||n===2){const c=new DataView(this.memory.buffer);let o=0;for(let a=0,l=s;a<r;a++,l+=8){const u=c.getUint32(l,!0),f=c.getUint32(l+4,!0),b=new DataView(this.memory.buffer,u,f);this.writeToConsole(b),o+=f}return c.setUint32(i,o,!0),0}else return 1},random_get:(n,s)=>{const r=new DataView(this.memory.buffer,n,s);for(let i=0;i<s;i++)r.setUint8(i,Math.floor(256*Math.random()));return 0},proc_exit:()=>{},path_open:()=>1,fd_read:()=>1,fd_close:()=>1}}}function tc(t){return new Qo}ko();Li();Zn();Fo();qo();Ni();Bi();Fi();Ro();Wo();Go();_o();Ti();Ri();Bo();Lo();No();const j={constructor:null,typedArray:null,type:0,name:void 0,byteSize:0,align:0,isConst:!1,isTuple:!1,hasPointer:!1,instance:{members:[],methods:[],template:null},static:{members:[],methods:[],template:null}},p={type:0,isRequired:!1},$={},St={},ye={},me={},he={},be={},C={},_={},pe={},de={},zt={},ge={},ne={},Se={},we={},ot={},Oe={},ve={},Je={},_t={},Ae={},Vt={},R={},tt={},Rt={},se={},He={},Et={},qt={},je={},Gt={},Te={},Wt={},Kt={},jt={},Ye={},Xe={},Tt={},Ze={},Qe={},tn={},Ss={},en={},nn={},sn={},ws={},rn={},Os={},on={},vs={},As={},cn={},an={},js={},ln={},Ts={},un={},xs={},zs={},fn={},yn={},Es={},Jt={},Is={},Vs={},mn={},hn={},Ps={},bn={},Ms={},Us={},$s={},Cs={},Ds={},ks={},Fs={},Rs={},Ns={},Ls={},Bs={},_s={},qs={},Gs={},Ws={},Ks={},Js={},xe={},Hs={},Ys={},pn={},Xs={},dn={},Zs={},Qs={},tr={},er={},nr={},sr={},rr={},ir={},or={},gn={},cr={},ar={},lr={},ur={},fr={},yr={},mr={},hr={},br={},pr={},dr={},gr={},Sr={},wr={},Or={},vr={},Ar={},jr={},Tr={},xr={},zr={},Er={},ec=new Uint8Array,nc=new Uint8Array,sc=new Uint8Array([1]),rc=new Uint8Array,ic=new Uint8Array([32]),oc=new Uint8Array,cc=new Uint8Array([8]),ac=new Uint8Array,lc=new Uint8Array,uc=new Uint8Array([1]),fc=new Uint8Array,yc=new Uint8Array([0,2]),mc=new Uint8Array,hc=new Uint8Array([56]),bc=new Uint8Array,pc=new Uint8Array,dc=new Uint8Array,gc=new Uint8Array([4]),Sc=new Uint8Array,wc=new Uint8Array,Oc=new Uint8Array,vc=new Uint8Array([244,4,0,1]),Ac=new Uint8Array([99,111,109,46,103,114,101,121,98,111,120,119,97,114,101,46,97,115,99,105,105,109,105,105,0]),jc=new Uint8Array([24,5,0,1]),Tc=new Uint8Array([82,105,99,104,97,114,100,32,90,117,114,97,100,0]),xc=new Uint8Array,zc=new Uint8Array([1]),Ec=new Uint8Array([55,5,0,1]),Ic=new Uint8Array([70,105,108,116,101,114,32,116,111,32,109,105,109,105,99,32,116,104,101,32,84,69,88,84,112,32,101,102,102,101,99,116,32,102,114,111,109,32,89,111,117,84,117,98,101,39,115,32,50,48,49,48,32,65,112,114,105,108,32,70,111,111,108,115,32,106,111,107,101,0]),Vc=new Uint8Array,Pc=new Uint8Array,Mc=new Uint8Array,Uc=new Uint8Array([0]),$c=new Uint8Array([1]),Ir=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Cc=new Uint8Array,Dc=new Uint8Array,kc=new Uint8Array,Fc=new Uint8Array,Rc=new Uint8Array([4]),Ht=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Vr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Nc=new Uint8Array,Lc=new Uint8Array,Bc=new Uint8Array,_c=new Uint8Array,qc=new Uint8Array([4]),Sn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Gc=new Uint8Array([8,0,0,0,56,0,0,0]),Wc=new Uint8Array([27,0]),Kc=new Uint8Array([27,0]),Jc=new Uint8Array,Hc=new Uint8Array,Yc=new Uint8Array,Xc=new Uint8Array;Object.assign(Ss,{slots:{0:en,1:sn,2:rn,3:on}});Object.assign(en,{structure:$,memory:{array:ec},const:!0,slots:{0:nn}});Object.assign(nn,{structure:zt});Object.assign(sn,{structure:C,memory:{array:nc},const:!0,slots:{0:ws}});Object.assign(ws,{structure:_,memory:{array:sc},const:!0});Object.assign(rn,{structure:C,memory:{array:rc},const:!0,slots:{0:Os}});Object.assign(Os,{structure:_,memory:{array:ic},const:!0});Object.assign(on,{structure:C,memory:{array:oc},const:!0,slots:{0:vs}});Object.assign(vs,{structure:_,memory:{array:cc},const:!0});Object.assign(As,{slots:{0:cn,1:an,2:ln,3:un}});Object.assign(cn,{structure:$,memory:{array:ac},const:!0,slots:{0:nn}});Object.assign(an,{structure:C,memory:{array:lc},const:!0,slots:{0:js}});Object.assign(js,{structure:_,memory:{array:uc},const:!0});Object.assign(ln,{structure:C,memory:{array:fc},const:!0,slots:{0:Ts}});Object.assign(Ts,{structure:ne,memory:{array:yc},const:!0});Object.assign(un,{structure:C,memory:{array:mc},const:!0,slots:{0:xs}});Object.assign(xs,{structure:_,memory:{array:hc},const:!0});Object.assign(zs,{slots:{0:fn,1:yn}});Object.assign(fn,{structure:ge,memory:{array:bc},const:!0,slots:{0:en,1:sn,2:rn,3:on}});Object.assign(yn,{structure:Se,memory:{array:pc},const:!0,slots:{0:cn,1:an,2:ln,3:un}});Object.assign(Es,{slots:{0:Jt}});Object.assign(Jt,{structure:C,memory:{array:dc},const:!0,slots:{0:Is}});Object.assign(Is,{structure:_,memory:{array:gc},const:!0});Object.assign(Vs,{slots:{0:mn,1:hn}});Object.assign(mn,{structure:ot,memory:{array:Sc},const:!0,slots:{0:Jt}});Object.assign(hn,{structure:ot,memory:{array:wc},const:!0,slots:{0:Jt}});Object.assign(Ps,{slots:{0:bn}});Object.assign(bn,{structure:ot,memory:{array:Oc},const:!0,slots:{0:Jt}});Object.assign(Ms,{slots:{0:Us,1:Cs,2:ks,3:Rs,4:Ls,5:Bs,6:_s}});Object.assign(Us,{structure:me,memory:{array:vc},const:!0,slots:{0:$s}});Object.assign($s,{structure:ye,memory:{array:Ac},reloc:16778484});Object.assign(Cs,{structure:be,memory:{array:jc},const:!0,slots:{0:Ds}});Object.assign(Ds,{structure:he,memory:{array:Tc},reloc:16778520});Object.assign(ks,{structure:C,memory:{array:xc},const:!0,slots:{0:Fs}});Object.assign(Fs,{structure:_,memory:{array:zc},const:!0});Object.assign(Rs,{structure:de,memory:{array:Ec},const:!0,slots:{0:Ns}});Object.assign(Ns,{structure:pe,memory:{array:Ic},reloc:16778551});Object.assign(Ls,{structure:we,memory:{array:Vc},const:!0,slots:{0:fn,1:yn}});Object.assign(Bs,{structure:Oe,memory:{array:Pc},const:!0,slots:{0:mn,1:hn}});Object.assign(_s,{structure:ve,memory:{array:Mc},const:!0,slots:{0:bn}});Object.assign(qs,{slots:{0:Gs,1:Ws}});Object.assign(Gs,{structure:tt,memory:{array:Uc},const:!0});Object.assign(Ws,{structure:tt,memory:{array:$c},const:!0});Object.assign(Ks,{memory:{array:Ir},slots:{0:Js}});Object.assign(Js,{structure:Vt,memory:{array:Ir,offset:0,length:8},slots:{0:xe}});Object.assign(xe,{structure:Ae,memory:{array:Cc},reloc:0});Object.assign(Hs,{slots:{0:Ys,1:Xs,2:Zs}});Object.assign(Ys,{structure:$,memory:{array:Dc},const:!0,slots:{0:pn}});Object.assign(pn,{structure:_t});Object.assign(Xs,{structure:$,memory:{array:kc},const:!0,slots:{0:dn}});Object.assign(dn,{structure:He});Object.assign(Zs,{structure:C,memory:{array:Fc},const:!0,slots:{0:Qs}});Object.assign(Qs,{structure:_,memory:{array:Rc},const:!0});Object.assign(tr,{memory:{array:Ht},slots:{0:er,1:sr}});Object.assign(er,{structure:Et,memory:{array:Ht,offset:0,length:24},slots:{0:nr}});Object.assign(nr,{structure:Vt,memory:{array:Ht,offset:0,length:8},slots:{0:xe}});Object.assign(sr,{structure:Et,memory:{array:Ht,offset:24,length:24},slots:{0:rr}});Object.assign(rr,{structure:Vt,memory:{array:Ht,offset:24,length:8},slots:{0:xe}});Object.assign(ir,{memory:{array:Vr},slots:{0:or}});Object.assign(or,{structure:Gt,memory:{array:Vr,offset:0,length:8},slots:{0:gn}});Object.assign(gn,{structure:je,memory:{array:Nc},reloc:0});Object.assign(cr,{slots:{0:ar,1:lr,2:ur}});Object.assign(ar,{structure:$,memory:{array:Lc},const:!0,slots:{0:pn}});Object.assign(lr,{structure:$,memory:{array:Bc},const:!0,slots:{0:dn}});Object.assign(ur,{structure:C,memory:{array:_c},const:!0,slots:{0:fr}});Object.assign(fr,{structure:_,memory:{array:qc},const:!0});Object.assign(yr,{memory:{array:Sn},slots:{0:mr}});Object.assign(mr,{structure:Te,memory:{array:Sn},slots:{0:hr}});Object.assign(hr,{structure:Gt,memory:{array:Sn,offset:0,length:8},slots:{0:gn}});Object.assign(br,{memory:{array:Gc}});Object.assign(pr,{slots:{0:dr}});Object.assign(dr,{structure:jt,memory:{array:Wc},const:!0});Object.assign(gr,{slots:{0:Sr}});Object.assign(Sr,{structure:Tt,memory:{array:Kc},const:!0});Object.assign(wr,{slots:{0:Or,1:Ar,2:Tr,3:zr}});Object.assign(Or,{structure:$,memory:{array:Jc},const:!0,slots:{0:vr}});Object.assign(vr,{structure:Je});Object.assign(Ar,{structure:$,memory:{array:Hc},const:!0,slots:{0:jr}});Object.assign(jr,{structure:qt});Object.assign(Tr,{structure:$,memory:{array:Yc},const:!0,slots:{0:xr}});Object.assign(xr,{structure:Wt});Object.assign(zr,{structure:$,memory:{array:Xc},const:!0,slots:{0:Er}});Object.assign(Er,{structure:Kt});const Zc={argStruct:Xe,thunkId:2,name:"createOutput"},Qc={argStruct:Qe,thunkId:3,name:"createPartialOutput"};Object.assign($,{...j,name:"type",align:1,instance:{members:[{...p,type:6,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:$}],methods:[]}});Object.assign(St,{...j,name:"u8",byteSize:1,align:1,instance:{members:[{...p,type:3,bitOffset:0,bitSize:8,byteSize:1,structure:St}],methods:[]}});Object.assign(ye,{...j,type:1,name:"[24:0]u8",length:24,byteSize:25,align:1,instance:{members:[{...p,type:3,bitSize:8,byteSize:1,structure:St}],methods:[]}});Object.assign(me,{...j,type:13,name:"*const [24:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...p,type:5,bitSize:32,byteSize:4,slot:0,structure:ye}],methods:[]}});Object.assign(he,{...j,type:1,name:"[13:0]u8",length:13,byteSize:14,align:1,instance:{members:[{...p,type:3,bitSize:8,byteSize:1,structure:St}],methods:[]}});Object.assign(be,{...j,type:13,name:"*const [13:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...p,type:5,bitSize:32,byteSize:4,slot:0,structure:he}],methods:[]}});Object.assign(C,{...j,name:"comptime_int",align:1,instance:{members:[{...p,type:7,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:C}],methods:[]}});Object.assign(_,{...j,name:"i8",byteSize:1,align:1,instance:{members:[{...p,type:2,bitOffset:0,bitSize:8,byteSize:1,structure:_}],methods:[]}});Object.assign(pe,{...j,type:1,name:"[69:0]u8",length:69,byteSize:70,align:1,instance:{members:[{...p,type:3,bitSize:8,byteSize:1,structure:St}],methods:[]}});Object.assign(de,{...j,type:13,name:"*const [69:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...p,type:5,bitSize:32,byteSize:4,slot:0,structure:pe}],methods:[]}});Object.assign(zt,{...j,name:"i32",byteSize:4,align:4,instance:{members:[{...p,type:2,bitOffset:0,bitSize:32,byteSize:4,structure:zt}],methods:[]}});Object.assign(ge,{...j,type:2,name:"Struct1449345558",align:1,instance:{members:[{...p,type:7,slot:0,name:"type",structure:$},{...p,type:7,slot:1,name:"minValue",structure:C},{...p,type:7,slot:2,name:"maxValue",structure:C},{...p,type:7,slot:3,name:"defaultValue",structure:C}],methods:[],template:Ss}});Object.assign(ne,{...j,name:"i16",byteSize:2,align:2,instance:{members:[{...p,type:2,bitOffset:0,bitSize:16,byteSize:2,structure:ne}],methods:[]}});Object.assign(Se,{...j,type:2,name:"Struct3551455779",align:1,instance:{members:[{...p,type:7,slot:0,name:"type",structure:$},{...p,type:7,slot:1,name:"minValue",structure:C},{...p,type:7,slot:2,name:"maxValue",structure:C},{...p,type:7,slot:3,name:"defaultValue",structure:C}],methods:[],template:As}});Object.assign(we,{...j,type:2,name:"Struct3770657015",align:1,instance:{members:[{...p,type:7,slot:0,name:"size",structure:ge},{...p,type:7,slot:1,name:"charCount",structure:Se}],methods:[],template:zs}});Object.assign(ot,{...j,type:2,name:"Struct3832472641",align:1,instance:{members:[{...p,type:7,slot:0,name:"channels",structure:C}],methods:[],template:Es}});Object.assign(Oe,{...j,type:2,name:"Struct1891826899",align:1,instance:{members:[{...p,type:7,slot:0,name:"src",structure:ot},{...p,type:7,slot:1,name:"text",structure:ot}],methods:[],template:Vs}});Object.assign(ve,{...j,type:2,name:"Struct172100005",align:1,instance:{members:[{...p,type:7,slot:0,name:"dst",structure:ot}],methods:[],template:Ps}});Object.assign(Je,{...j,type:2,name:"asciimii.kernel",align:1,static:{members:[{...p,type:7,slot:0,name:"namespace",structure:me},{...p,type:7,slot:1,name:"vendor",structure:be},{...p,type:7,slot:2,name:"version",structure:C},{...p,type:7,slot:3,name:"description",structure:de},{...p,type:7,slot:4,name:"parameters",structure:we},{...p,type:7,slot:5,name:"inputImages",structure:Oe},{...p,type:7,slot:6,name:"outputImages",structure:ve}],methods:[],template:Ms}});Object.assign(_t,{...j,type:15,name:"@Vector(4, u8)",length:4,byteSize:4,align:4,instance:{members:[{...p,type:3,bitSize:8,byteSize:1,structure:St}],methods:[]}});Object.assign(Ae,{...j,type:14,name:"[_]const @Vector(4, u8)",byteSize:4,align:4,instance:{members:[{...p,type:5,bitSize:32,byteSize:4,structure:_t}],methods:[]}});Object.assign(Vt,{...j,type:13,name:"[]const @Vector(4, u8)",byteSize:8,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...p,type:5,bitSize:64,byteSize:8,slot:0,structure:Ae}],methods:[]}});Object.assign(R,{...j,name:"u32",byteSize:4,align:4,instance:{members:[{...p,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:R}],methods:[]}});Object.assign(tt,{...j,type:11,name:"asciimii.ColorSpace",byteSize:1,align:1,instance:{members:[{...p,type:3,bitOffset:0,bitSize:1,byteSize:1,structure:tt}],methods:[]},static:{members:[{...p,type:7,slot:0,name:"srgb",structure:tt},{...p,type:7,slot:1,name:"display-p3",structure:tt}],methods:[],template:qs}});Object.assign(Rt,{...j,name:"usize",byteSize:4,align:4,instance:{members:[{...p,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:Rt}],methods:[]}});Object.assign(se,{...j,name:"f32",byteSize:4,align:4,instance:{members:[{...p,type:4,bitOffset:0,bitSize:32,byteSize:4,structure:se}],methods:[]}});Object.assign(He,{...j,type:15,name:"@Vector(4, f32)",length:4,byteSize:16,align:16,instance:{members:[{...p,type:4,bitSize:32,byteSize:4,structure:se}],methods:[]}});Object.assign(Et,{...j,type:2,name:"asciimii.Image(u8,4,false)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...p,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:Vt},{...p,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:R},{...p,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:R},{...p,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:tt},{...p,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Rt}],methods:[],template:Ks},static:{members:[{...p,type:7,slot:0,name:"Pixel",structure:$},{...p,type:7,slot:1,name:"FPixel",structure:$},{...p,type:7,slot:2,name:"channels",structure:C}],methods:[],template:Hs}});Object.assign(qt,{...j,type:2,name:"asciimii.KernelInput(u8,asciimii.kernel)",byteSize:48,align:4,hasPointer:!0,instance:{members:[{...p,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"src",structure:Et},{...p,type:5,bitOffset:192,bitSize:192,byteSize:24,slot:1,name:"text",structure:Et}],methods:[],template:tr}});Object.assign(je,{...j,type:14,name:"[_]@Vector(4, u8)",byteSize:4,align:4,instance:{members:[{...p,type:5,bitSize:32,byteSize:4,structure:_t}],methods:[]}});Object.assign(Gt,{...j,type:13,name:"[]@Vector(4, u8)",byteSize:8,align:4,hasPointer:!0,instance:{members:[{...p,type:5,bitSize:64,byteSize:8,slot:0,structure:je}],methods:[]}});Object.assign(Te,{...j,type:2,name:"asciimii.Image(u8,4,true)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...p,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:Gt},{...p,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:R},{...p,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:R},{...p,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:tt},{...p,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Rt}],methods:[],template:ir},static:{members:[{...p,type:7,slot:0,name:"Pixel",structure:$},{...p,type:7,slot:1,name:"FPixel",structure:$},{...p,type:7,slot:2,name:"channels",structure:C}],methods:[],template:cr}});Object.assign(Wt,{...j,type:2,name:"asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...p,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"dst",structure:Te}],methods:[],template:yr}});Object.assign(Kt,{...j,type:2,name:"asciimii.KernelParameters(asciimii.kernel)",byteSize:8,align:4,instance:{members:[{...p,type:2,bitOffset:0,bitSize:32,byteSize:4,slot:0,name:"size",structure:zt},{...p,type:2,bitOffset:32,bitSize:32,byteSize:4,slot:1,name:"charCount",structure:zt}],methods:[],template:br}});Object.assign(jt,{...j,type:10,name:"ErrorSet2017218537",byteSize:2,align:2,instance:{members:[{...p,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:jt}],methods:[]},static:{members:[{...p,type:7,slot:0,name:"OutOfMemory",structure:jt}],methods:[],template:pr}});Object.assign(Ye,{...j,type:9,name:"ErrorSet2017218537!asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...p,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:Wt},{...p,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:jt}],methods:[]}});Object.assign(Xe,{...j,type:5,name:"createOutput",byteSize:92,align:4,hasPointer:!0,instance:{members:[{...p,type:3,isRequired:!0,bitOffset:0,bitSize:32,byteSize:4,slot:3,name:"0",structure:R},{...p,type:3,isRequired:!0,bitOffset:32,bitSize:32,byteSize:4,slot:4,name:"1",structure:R},{...p,type:5,isRequired:!0,bitOffset:64,bitSize:384,byteSize:48,slot:0,name:"2",structure:qt},{...p,type:5,isRequired:!0,bitOffset:448,bitSize:64,byteSize:8,slot:1,name:"3",structure:Kt},{...p,type:5,isRequired:!0,bitOffset:512,bitSize:224,byteSize:28,slot:2,name:"retval",structure:Ye}],methods:[]}});Object.assign(Tt,{...j,type:10,name:"ErrorSet3250127848",byteSize:2,align:2,instance:{members:[{...p,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:Tt}],methods:[]},static:{members:[{...p,type:7,slot:0,name:"OutOfMemory",structure:Tt}],methods:[],template:gr}});Object.assign(Ze,{...j,type:9,name:"ErrorSet3250127848!asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...p,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:Wt},{...p,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:Tt}],methods:[]}});Object.assign(Qe,{...j,type:5,name:"createPartialOutput",byteSize:100,align:4,hasPointer:!0,instance:{members:[{...p,type:3,isRequired:!0,bitOffset:0,bitSize:32,byteSize:4,slot:3,name:"0",structure:R},{...p,type:3,isRequired:!0,bitOffset:32,bitSize:32,byteSize:4,slot:4,name:"1",structure:R},{...p,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:5,name:"2",structure:R},{...p,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:6,name:"3",structure:R},{...p,type:5,isRequired:!0,bitOffset:128,bitSize:384,byteSize:48,slot:0,name:"4",structure:qt},{...p,type:5,isRequired:!0,bitOffset:512,bitSize:64,byteSize:8,slot:1,name:"5",structure:Kt},{...p,type:5,isRequired:!0,bitOffset:576,bitSize:224,byteSize:28,slot:2,name:"retval",structure:Ze}],methods:[]}});Object.assign(tn,{...j,type:2,name:"asciimii",align:1,static:{members:[{...p,type:7,slot:0,name:"kernel",structure:$},{...p,type:7,slot:1,name:"Input",structure:$},{...p,type:7,slot:2,name:"Output",structure:$},{...p,type:7,slot:3,name:"Parameters",structure:$}],methods:[Zc,Qc],template:wr}});const ta=[$,St,ye,me,he,be,C,_,pe,de,zt,ge,ne,Se,we,ot,Oe,ve,Je,_t,Ae,Vt,R,tt,Rt,se,He,Et,qt,je,Gt,Te,Wt,Kt,jt,Ye,Xe,Tt,Ze,Qe,tn],ea=tn,na={runtimeSafety:!1,littleEndian:!0},ze=tc();ze.getSpecialExports();ze.recreateStructures(ta,na);const sa=(async()=>{const t=new URL("asciimii-7ca249f1.wasm",import.meta.url).href;return fetch(t)})();ze.loadModule(sa);ze.linkVariables(!0);const{constructor:ra}=ea,{createPartialOutput:ia,Input:oa,kernel:Ce}=ra;function ca(t,e,n,s,r={},i={}){const c=[];for(const[y]of Ce.inputImages)c.push(y);const o=[];for(const[y]of Ce.outputImages)o.push(y);if(Array.isArray(r)){const y=r;r={};for(const[m,h]of c.entries())r[h]=y[m]}const a=new oa(void 0),l=[];let u;for(const y of c){let m=r[y];if(m||(c.length===1&&["data","width","height"].every(h=>!!r[h])?m=r:l.push(y)),a[y]=m,u){if(m.colorSpace!==u)throw new Error(`Input images must all use the same color space: ${u}`)}else u=m.colorSpace}if(l.length>0)throw new Error(`Missing input image${l.length>1?"s":""}: ${l.join(", ")}`);const f=ia(t,e,n,s,a,i),b=y=>{const m={};for(const h of o){const{data:{typedArray:d},width:g,height:w}=y[h];let E;if(typeof ImageData=="function"){const U=new Uint8ClampedArray(d.buffer,d.byteOffset,d.byteLength);E=new ImageData(U,g,s,{colorSpace:u})}else E={data:d,width:g,height:w};if(o.length===1)return E;m[h]=E}return m};return f[Symbol.toStringTag]==="Promise"?f.then(b):b(f)}function aa(){const t={};for(let[e,n]of Ce){if(e==="parameters"){const s={};for(const[r,i]of n){const c=s[r]={};for(let[o,a]of i)typeof a=="object"?a=a.string??a.valueOf():typeof a=="function"&&(a=la(a.name)),c[o]=a}n=s}else typeof n=="object"&&(n=n.string??n.valueOf());t[e]=n}return t}function la(t){return{bool:"bool","@Vector(2, bool)":"bool2","@Vector(3, bool)":"bool3","@Vector(4, bool)":"bool4",i32:"int","@Vector(2, i32)":"int2","@Vector(3, i32)":"int3","@Vector(4, i32)":"int4",f32:"float","@Vector(2, f32)":"float2","@Vector(3, f32)":"float3","@Vector(4, f32)":"float4","[2]@Vector(2, f32)":"float2x2","[3]@Vector(3, f32)":"float3x3","[4]@Vector(4, f32)":"float4x4"}[t]}onmessage=async t=>{if(!Array.isArray(t.data))return;const[e,n,...s]=t.data;try{const[r,i]=await ua(e,s);postMessage([e,n,r],{transfer:i})}catch(r){postMessage(["error",n,r])}};async function ua(t,e){switch(t){case"getKernelInfo":return[aa(...e)];case"createPartialImageData":const s=await ca(...e),r=[];if("data"in s&&"width"in s&&"height"in s)r.push(s.data.buffer);else for(const i of Object.entries(s))r.push(s.data.buffer);return[s,r];default:throw new Error(`Unknown function: ${t}`)}}postMessage("ready");
