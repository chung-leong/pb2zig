var Dr=Object.defineProperty;var _r=(t,e,n)=>e in t?Dr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>(_r(t,typeof e!="symbol"?e+"":e,n),n);const I={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Comptime:7,Static:8,Literal:9,Null:10,Undefined:11},z={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,ExternUnion:6,BareUnion:7,TaggedUnion:8,ErrorUnion:9,ErrorSet:10,Enum:11,Optional:12,Pointer:13,Slice:14,Vector:15,Opaque:16,Function:17};function _e(t){const{type:e,bitSize:n,byteSize:s}=t;if(e===I.Int)return`${n<=32?"":"Big"}Int${n}`;if(e===I.Uint)return`${n<=32?"":"Big"}Uint${n}`;if(e===I.Float)return`Float${n}`;if(e===I.Bool)return`Bool${s!==void 0?s*8:1}`;if(e===I.Void)return"Null"}function Fr(t){for(const[e,n]of Object.entries(z))if(n===t)return e.replace(/\B[A-Z]/g,s=>` ${s}`).toLowerCase()}function Rr(t){const{type:e,bitSize:n}=t,s=e===I.Int;let r=s?n-1:n;if(n<=32){const o=2**r-1;return{min:s?-(2**r):0,max:o}}else{r=BigInt(r);const o=2n**r-1n;return{min:s?-(2n**r):0n,max:o}}}function Dn({type:t,bitSize:e}){if(t===I.Int||t===I.Uint)return e<=32?Number:BigInt;if(t===I.Float)return Number;if(t===I.Bool)return Boolean}function _n(t){const e=Dn(t);if(e)return typeof e(0)}function Fn({bitOffset:t,bitSize:e,byteSize:n}){return n!==void 0||!(t&7)&&!(e&7)||e===0}function _t(t){return typeof t=="object"&&typeof t.error=="string"&&Object.keys(t).length===1}class Nr extends TypeError{constructor(e){const{name:n}=e;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class Rn extends TypeError{constructor(e,n,s=null){const{name:r,type:o,byteSize:c}=e,i=n.byteLength,a=c!==1?"s":"";let l;if(o===z.Slice&&!s)l=`${r} has elements that are ${c} byte${a} in length, received ${i}`;else{const u=o===z.Slice?s.length*c:c;l=`${r} has ${u} byte${a}, received ${i}`}super(l)}}class Ur extends TypeError{constructor(e){const{type:n,byteSize:s,typedArray:r}=e,o=s!==1?"s":"",c=["ArrayBuffer","DataView"].map(ct);r&&c.push(ct(r.name));let i;n===z.Slice?i=`Expecting ${$e(c)} that can accommodate items ${s} byte${o} in length`:i=`Expecting ${$e(c)} that is ${s} byte${o} in length`,super(i)}}class Lr extends TypeError{constructor(e,n){const{name:s}=e;let r;typeof n=="number"||typeof n=="bigint"?r=`Value given does not correspond to an item of enum ${s}: ${n}`:r=`Enum item of the type ${s} expected, received ${n}`,super(r)}}class Br extends TypeError{constructor(e,n){const{name:s}=e,r=typeof n;let o;r==="string"||r==="number"||_t(n)?(_t(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),o=`Error ${r} does not corresponds to any error in error set ${s}: ${n}`):o=`Error of the type ${s} expected, received ${n}`,super(o)}}class Nn extends TypeError{constructor(e){const{name:n}=e;super(`Error given is not a part of error set ${n}`)}}class dt extends TypeError{constructor(e,n,s){const{name:r}=e,o=[];if(Array.isArray(n))for(const i of n)o.push(ct(i));else o.push(ct(n));const c=Bn(s);super(`${r} expects ${$e(o)} as argument, received ${c}`)}}class pt extends dt{constructor(e,n,s=!1){var l;const{instance:{members:[r]},type:o,typedArray:c}=e,i=[],a=_n(r);if(a){let u;switch((l=r.structure)==null?void 0:l.type){case z.Enum:u="enum item";break;case z.ErrorSet:u="error";break;default:u=a}i.push(`array of ${u}s`)}else i.push("array of objects");c&&i.push(c.name),o===z.Slice&&s&&i.push("length"),super(e,i.join(" or "),n)}}class oe extends TypeError{constructor(e,n,s){const{name:r,length:o,instance:{members:[c]}}=e,{structure:{constructor:i}}=c,{length:a,constructor:l}=s,u=(n==null?void 0:n.length)??o,f=u!==1?"s":"";let p;l===i?p="only a single one":l.child===i?p=`a slice/array that has ${a}`:p=`${a} initializer${a>1?"s":""}`,super(`${r} has ${u} element${f}, received ${p}`)}}class qr extends TypeError{constructor(e,n){const{name:s}=e;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class Wr extends TypeError{constructor(e,n){const{name:s,instance:{members:r}}=e,o=r.find(i=>i.name===n);let c;o?c=`Comptime value cannot be changed: ${n}`:c=`${s} does not have a property with that name: ${n}`,super(c)}}class Gr extends Error{constructor(e,n,s){const r=n!==1?"s":"";super(`${e}() expects ${n} argument${r}, received ${s}`)}}class Kr extends TypeError{constructor(e){super("Non-slice pointers can only be created with the help of the new operator")}}class Jr extends TypeError{constructor(e,n){const{name:s}=e,{constructor:{name:r}}=n;super(`Conversion of ${r} to ${s} requires an explicit cast`)}}class En extends TypeError{constructor(e,n,s,r){const{name:o}=e;super(`${o} expects the sentinel value ${n} at ${r-1}, found at ${s}`)}}class Xt extends TypeError{constructor(e,n,s){const{name:r}=e;super(`${r} expects the sentinel value ${n} at ${s-1}`)}}class Yr extends TypeError{constructor(e,n){super(`Unable to simultaneously align memory to ${n}-byte and ${e}-byte boundary`)}}class ie extends TypeError{constructor(e,n){const s=Bn(n);super(`Expected ${ct(e)}, received ${s}`)}}class zn extends TypeError{constructor(){super("Null pointer")}}class Hr extends TypeError{constructor(e,n){const{name:s}=e;let r;if(n!=null){const o=typeof n,c=o==="object"&&n.constructor!==Object?`${n.constructor.name} object`:o;r=`${qn(c)} ${c}`}else r=n+"";super(`${s} cannot point to ${r}`)}}class Xr extends TypeError{constructor(e,n){super("Pointers in fixed memory cannot point to garbage-collected object")}}class Zr extends TypeError{constructor(e,n){const s=_e(e);super(`${s} cannot represent the value given: ${n}`)}}class Tn extends RangeError{constructor(e,n){const{name:s}=e;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class Qr extends TypeError{constructor(e){const{name:n,structure:{name:{struct:s}}}=e;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class to extends TypeError{constructor(){super("Unable to modify read-only object")}}class eo extends TypeError{constructor(e){const{name:n}=e;super(`${n} cannot point to a read-only object`)}}class Un extends Error{constructor(e){super(Ln(e))}}class xn extends Un{constructor(e){super("Program exited"),this.code=e}}function no(t,e,n,s){const r=`args[${e}]`,o=e!==0?"..., ":"",c=e!==n-1?", ...":"",i=o+r+c,a=Object.create(s.constructor.prototype);return a.message=`${t}(${i}): ${s.message}`,a.stack=s.stack,a}function In(t,e,n){return n instanceof RangeError&&!(n instanceof Tn)&&(n=new Tn(t,e)),n}function xt(){throw new to}function so(t,e){const n=ct(t.typedArray.name),s=ct(e.constructor.name);console.warn(`Implicitly creating ${n} from ${s}`)}function Ln(t){let e=t.replace(/_/g," ");try{e=e.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,(n,s,r)=>{if(s.length===1)return` ${s.toLocaleLowerCase()}${r}`;if(r){const o=s.substring(0,s.length-1),c=s.charAt(s.length-1).toLocaleLowerCase();return` ${o} ${c}${r}`}else return` ${s}`}).trimStart()}catch{}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function Bn(t){const e=typeof t;let n;return e==="object"?n=t?Object.prototype.toString.call(t):"null":n=e,ct(n)}function ct(t){return`${qn(t)} ${t}`}function qn(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function $e(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}const w=Symbol("memory"),x=Symbol("slots"),Fe=Symbol("parent"),Wn=Symbol("name"),J=Symbol("type"),Gn=Symbol("tuple"),Ct=Symbol("class"),Vn=Symbol("tag"),bt=Symbol("props"),ce=Symbol("getter"),ae=Symbol("setter"),$t=Symbol("elementGetter"),kt=Symbol("elementSetter"),ke=Symbol("addressGetter"),Kn=Symbol("addressSetter"),ht=Symbol("targetGetter"),Ce=Symbol("targetSetter"),gt=Symbol("entriesGetter"),Et=Symbol("fixedLocation"),Re=Symbol("propSetters"),W=Symbol("writeDisabler"),Jn=Symbol("allKeys"),je=Symbol("length"),le=Symbol("proxy"),Ut=Symbol("compat"),q=Symbol("size"),F=Symbol("align"),Ne=Symbol("array"),Ft=Symbol("pointer"),St=Symbol("constTarget"),Pe=Symbol("constProxy"),C=Symbol("copier"),Pn=Symbol("resetter"),Z=Symbol("vivificator"),R=Symbol("pointerVisitor"),jt=Symbol("environment"),Zt=Symbol("attributes"),Yn=Symbol("more");function lt(t){return function(){const e=this[w];this[w]=null,this[x]&&(this[x]={}),t.releaseFixedView(e)}}function Mn(t,e,n){if(t+e<=8){const s=2**e-1;if(n)return function(r,o,c){const a=o.getUint8(c)>>t&s;r.setUint8(0,a)};{const r=255^s<<t;return function(o,c,i){const a=c.getUint8(0),u=o.getUint8(i)&r|(a&s)<<t;o.setUint8(i,u)}}}else{const s=8-t,r=2**s-1;if(n){const c=2**(e%8)-1;return function(i,a,l){let u=l,f=0,p=a.getUint8(u++),m,d=p>>t&r,h=s,g=e;do g>h&&(p=a.getUint8(u++),d=d|p<<h),m=g>=8?d&255:d&c,i.setUint8(f++,m),d>>=8,g-=8;while(g>0)}}else{const c=2**((e-s)%8)-1,i=255^r<<t,a=255^c;return function(l,u,f){let p=0,m=f,d=l.getUint8(m),h,g,S=d&i,v=t,O=e+v;do O>v&&(h=u.getUint8(p++),S=S|h<<v,v+=8),O>=8?g=S&255:(d=l.getUint8(m),g=d&a|S&c),l.setUint8(m++,g),S>>=8,v-=8,O-=8;while(O>0)}}}}function G(t,e=!1){const n=Hn(t,e);return function(s){X.call(this),X.call(s);const r=s[w],o=this[w];n(o,r)}}function Hn(t,e=!1){if(!e){const n=ro[t];if(n)return n}return t&7?t&3?t&1?oo:io:co:ao}const ro={1:lo,2:uo,4:fo,8:yo,16:mo,32:ho};function oo(t,e){for(let n=0,s=t.byteLength;n<s;n++)t.setInt8(n,e.getInt8(n))}function io(t,e){for(let n=0,s=t.byteLength;n<s;n+=2)t.setInt16(n,e.getInt16(n,!0),!0)}function co(t,e){for(let n=0,s=t.byteLength;n<s;n+=4)t.setInt32(n,e.getInt32(n,!0),!0)}function ao(t,e){for(let n=0,s=t.byteLength;n<s;n+=8)t.setInt32(n,e.getInt32(n,!0),!0),t.setInt32(n+4,e.getInt32(n+4,!0),!0)}function lo(t,e){t.setInt8(0,e.getInt8(0))}function uo(t,e){t.setInt16(0,e.getInt16(0,!0),!0)}function fo(t,e){t.setInt32(0,e.getInt32(0,!0),!0)}function yo(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0)}function mo(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0)}function ho(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0),t.setInt32(16,e.getInt32(16,!0),!0),t.setInt32(20,e.getInt32(20,!0),!0),t.setInt32(24,e.getInt32(24,!0),!0),t.setInt32(28,e.getInt32(28,!0),!0)}function po(t,e){const n=bo(e);return function(){X.call(this);const s=this[w];n(s,t,e)}}function bo(t){const e=go[t];return e||(t&7?t&3?t&1?So:wo:vo:Oo)}const go={1:Ao,2:Eo,4:zo,8:To,16:xo,32:Io};function So(t,e,n){for(let s=e,r=e+n;s<r;s++)t.setInt8(s,0)}function wo(t,e,n){for(let s=e,r=e+n;s<r;s+=2)t.setInt16(s,0,!0)}function vo(t,e,n){for(let s=e,r=e+n;s<r;s+=4)t.setInt32(s,0,!0)}function Oo(t,e,n){for(let s=e,r=e+n;s<r;s+=8)t.setInt32(s,0,!0),t.setInt32(s+4,0,!0)}function Ao(t,e){t.setInt8(e,0)}function Eo(t,e){t.setInt16(e,0,!0)}function zo(t,e){t.setInt32(e,0,!0)}function To(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0)}function xo(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0)}function Io(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0),t.setInt32(e+16,0,!0),t.setInt32(e+20,0,!0),t.setInt32(e+24,0,!0),t.setInt32(e+28,0,!0)}function X(){const t=this[w],e=t[w];if(!e||t.buffer.byteLength!==0)return!1;const{memory:n,address:s,len:r}=e,o=new DataView(n.buffer,s,r);return o[w]=e,this[w]=o,!0}function Rt(t,e){return No(t,e,n=>DataView.prototype[n]?DataView.prototype[n]:Po(t,e))}const Xn={};function Vo(){Xn[I.Uint]=Mo}function Po(t,e){const n=Xn[e.type];return n(t,e)}function Mo(t,e){return Fn(e)?_o(t,e):Fo(t,e)}function ue(t,e,n){const{type:s,byteSize:r,typedArray:o}=t;let c;const i=e==null?void 0:e[Symbol.toStringTag];if(i==="DataView")c=e;else if(i==="ArrayBuffer"||i==="SharedArrayBuffer")c=n.obtainView(e,0,e.byteLength);else if(o&&i===o.name||i==="Uint8ClampedArray"&&o===Uint8Array)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else if(i==="Uint8Array"&&typeof Buffer=="function"&&e instanceof Buffer)c=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else{const a=e==null?void 0:e[w];if(a){const{constructor:l,instance:{members:[u]}}=t;if(e instanceof l)return a;if(s===z.Array||s===z.Slice||s===z.Vector){const{byteSize:f,structure:{constructor:p}}=u,m=Qn(e,p);if(m!==void 0){if(s===z.Slice||m*f===r)return a;throw new oe(t,null,e)}}}}return c&&r!==void 0&&Zn(c,t),c}function $o(t){if((t==null?void 0:t[Symbol.toStringTag])!=="DataView")throw new ie("a DataView",t);return t}function Zn(t,e){const{byteSize:n,type:s}=e;if(s===z.Slice?t.byteLength%n!==0:t.byteLength!==n)throw new Rn(e,t)}function Lt(t,e,n,s,r){const{byteSize:o,type:c,sentinel:i}=e,a=c===z.Slice;if(this[w]){const l=a?o*this.length:o;if(t.byteLength!==l)throw new Rn(e,t,this);const u={[w]:t};i==null||i.validateData(u,this.length),this[C](u)}else{const{shapeDefiner:l}=r;Zn(t,e);const u=t.byteLength/o,f={[w]:t};i==null||i.validateData(f,u),s&&(n=!0),l.call(this,n?null:t,u,s),n&&this[C](f)}}function Qn(t,e){const{constructor:n}=t;if(n===e)return 1;if(n.child===e)return t.length}function ko(t,e,n){const s=ue(t,e,n);if(!s)throw new Ur(t);return s}function wt(t){const{type:e,byteSize:n}=t;if(e===I.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(e===I.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(e===I.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(e===I.Object)return t.structure.typedArray;return null}function Co(t,e){const n=t==null?void 0:t[Symbol.toStringTag];return!!e&&n===e.name}function jo(t,e){const n=e[Ut];if(n){const s=t==null?void 0:t[Symbol.toStringTag];if(n.includes(s))return!0}return!!(e.child&&Qn(t,e.child)!==void 0)}function fe(t){const{typedArray:e}=t,n=[];return e&&(n.push(e.name),n.push("DataView"),(e===Uint8Array||e===Int8Array)&&(n.push("ArrayBuffer"),n.push("SharedArrayBuffer"),e===Uint8Array&&n.push("Uint8ClampedArray"))),n}function Do(t){const e=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,s=Math.ceil(t/64);return{get:function(r,o){let c=0n;if(o)for(let i=0,a=r+(s-1)*8;i<s;i++,a-=8){const l=e.call(this,a,o);c=c<<64n|l}else for(let i=0,a=r;i<s;i++,a+=8){const l=e.call(this,a,o);c=c<<64n|l}return c},set:function(r,o,c){let i=o;const a=0xFFFFFFFFFFFFFFFFn;if(c)for(let l=0,u=r;l<s;l++,u+=8){const f=i&a;n.call(this,u,f,c),i>>=64n}else{i<<=BigInt(s*64-t);for(let l=0,u=r+(s-1)*8;l<s;l++,u-=8){const f=i&a;n.call(this,u,f,c),i>>=64n}}return i}}}function _o(t,e){const{bitSize:n,byteSize:s}=e;if(n<64){const r=_e({...e,bitSize:s*8}),o=DataView.prototype[`get${r}`],c=DataView.prototype[`set${r}`],i=n<=32?2**n-1:2n**BigInt(n)-1n;return t==="get"?function(a,l){return o.call(this,a,l)&i}:function(a,l,u){const f=l&i;c.call(this,a,f,u)}}else{const{get:r,set:o}=Do(n),c=2n**BigInt(n)-1n;return t==="get"?function(i,a){return r.call(this,i,a)&c}:function(i,a,l){const u=a&c;o.call(this,i,u,l)}}}function Fo(t,e){const{bitSize:n,bitOffset:s}=e,r=s&7;if(r+n<=8){const o=DataView.prototype.setUint8,c=DataView.prototype.getUint8,i=2**n-1;if(t==="get")return function(a){return c.call(this,a)>>>r&i};{const a=255^i<<r;return function(l,u){const p=c.call(this,l)&a|(u&i)<<r;o.call(this,l,p)}}}return Ro(t,e)}function Ro(t,e){const{bitSize:n,bitOffset:s}=e,r=s&7,o=[1,2,4,8].find(i=>i*8>=n)??Math.ceil(n/64)*64,c=new DataView(new ArrayBuffer(o));if(t==="get"){const i=Rt("get",{...e,byteSize:o}),a=Mn(r,n,!0);return function(l,u){return a(c,this,l),i.call(c,0,u)}}else{const i=Rt("set",{...e,byteSize:o}),a=Mn(r,n,!1);return function(l,u,f){i.call(c,0,u,f),a(this,c,l)}}}const $n={};function No(t,e,n){const{type:s,bitOffset:r,bitSize:o,structure:c}=e,i=r&7,a=_e(e),l=Fn(e)?"":`Bit${i}`,u=s===I.Int||s===I.Uint;let f=`${t}${a}${l}`,p=!1,m=f;if(u&&o===64){const h=c==null?void 0:c.name;(h==="usize"||h==="isize")&&(f+="Size",p=!0)}let d=$n[f];if(!d){if(u&&t==="set"){const h=Dn(e),g=n(m);d=function(S,v,O){g.call(this,S,h(v),O)}}else if(p&&t==="get"){const h=n(m),g=BigInt(Number.MIN_SAFE_INTEGER),S=BigInt(Number.MAX_SAFE_INTEGER);d=function(v,O){const j=h.call(this,v,O);return g<=j&&j<=S?Number(j):j}}else d=n(f);d&&d.name!==f&&Object.defineProperty(d,"name",{value:f,configurable:!0,writable:!1}),$n[f]=d}return d}function Uo({type:t}){switch(t){case I.Type:case I.Comptime:case I.Literal:return!0;default:return!1}}const vt={};function Lo(){vt[I.Int]=Yo}function ts(){vt[I.Uint]=Ho}function Bo(){vt[I.Float]=Xo}function qo(){vt[I.Object]=ei}function Wo(){vt[I.Type]=si}function Go(){vt[I.Comptime]=ri}const Ue={};function Ko(){Ue[z.Enum]=Zo}function Jo(){Ue[z.ErrorSet]=Qo}function N(t,e){const n=vt[t.type];return n(t,e)}function es(t,e){const{structure:n}=e,s=Ue[n==null?void 0:n.type];return s?s(t,n):t}function Yo(t,e){const n=ns(e,Rt),s=qe(t,e,n);return es(s,t)}function Ho(t,e){const n=ns(e,Rt),s=qe(t,e,n);return es(s,t)}function ns(t,e){return function(n,s){const{runtimeSafety:r=!0}=t,o=e(n,s);if(r&&n==="set"){const{min:c,max:i}=Rr(s);return function(a,l,u){if(l<c||l>i)throw new Zr(s,l);o.call(this,a,l,u)}}return o}}function Xo(t,e){return qe(t,e,Rt)}function Zo(t,e){const n=function(s){const{constructor:r}=e,o=r(s);if(!o)throw new Lr(e,s);return o};return{get:t.get.length===0?function(r){const o=t.get.call(this);return r==="number"?o:n(o)}:function(r){const o=t.get.call(this,r);return n(o)},set:t.set.length===1?function(r,o){o!=="number"&&(r=n(r)[Symbol.toPrimitive]()),t.set.call(this,r)}:function(r,o){const c=n(o);t.set.call(this,r,c[Symbol.toPrimitive]())}}}function Qo(t,e){const n=function(s){const{constructor:r}=e,o=r(s);if(!o)throw s instanceof Error?new Nn(e):new Br(e,s);return o};return{get:t.get.length===0?function(r){const o=t.get.call(this);return r==="number"?o:n(o)}:function(r){const o=t.get.call(this,r);return n(o)},set:t.set.length===1?function(r,o){if(o!=="number"){const c=n(r);r=Number(c)}t.set.call(this,r)}:function(r,o){const c=n(o);o=Number(c),t.set.call(this,r,o)}}}function Le(t){switch(t.type){case z.Primitive:case z.ErrorUnion:case z.Optional:case z.Enum:case z.ErrorSet:return!0;default:return!1}}function ss(t){return(this[x][t]??this[Z](t))[ce]()}function rs(t){return this[x][t]??this[Z](t)}function ti(t,e){(this[x][t]??this[Z](t))[ae](e)}function Be(t,{get:e,set:n}){return t!==void 0?{get:function(){return e.call(this,t)},set:n?function(s){return n.call(this,t,s)}:void 0}:{get:e,set:n}}function ei(t,e){const{structure:n,slot:s}=t;return Be(s,{get:Le(n)?ss:rs,set:ti})}function ni(t){const e=this[x][t];return e==null?void 0:e.constructor}function si(t,e){const{slot:n}=t;return Be(n,{get:ni})}function ri(t,e){const{slot:n,structure:s}=t;return Be(n,{get:Le(s)?ss:rs})}function qe(t,e,n){const{littleEndian:s=!0}=e,{bitOffset:r,byteSize:o}=t,c=n("get",t),i=n("set",t);if(r!==void 0){const a=r>>3;return{get:function(){try{return c.call(this[w],a,s)}catch(u){if(u instanceof TypeError&&X.call(this))return c.call(this[w],a,s);throw u}},set:function(u){try{return i.call(this[w],a,u,s)}catch(f){if(f instanceof TypeError&&X.call(this))return i.call(this[w],a,u,s);throw f}}}}else return{get:function(l){try{return c.call(this[w],l*o,s)}catch(u){if(u instanceof TypeError&&X.call(this))return c.call(this[w],l*o,s);throw In(t,l,u)}},set:function(l,u){try{return i.call(this[w],l*o,u,s)}catch(f){if(f instanceof TypeError&&X.call(this))return i.call(this[w],l*o,u,s);throw In(t,l,f)}}}}function B(t,e){for(const[n,s]of Object.entries(e))if(s){const{set:r,get:o,value:c,enumerable:i,configurable:a=!0,writable:l=!0}=s;Object.defineProperty(t,n,o?{get:o,set:r,configurable:a,enumerable:i}:{value:c,configurable:a,enumerable:i,writable:l})}for(const n of Object.getOwnPropertySymbols(e)){const s=e[n];s&&Object.defineProperty(t,n,s)}}function st(t,e,n){const s={};for(const[c,i]of Object.entries(e))i!=null&&i.set&&c!=="$"&&(s[c]=i.set);const{get:r,set:o}=e.$;return B(t.prototype,{[Jn]:{value:Object.keys(s)},[ae]:{value:o},[ce]:{value:r},[Re]:{value:s},[St]:{value:null},...e}),B(t,n),t}function Ot(){const t=Object.getOwnPropertyDescriptors(this.constructor.prototype);for(const[e,n]of Object.entries(t))n.set&&(n.set=xt,Object.defineProperty(this,e,n));Object.defineProperty(this,ae,{value:xt}),Object.defineProperty(this,St,{value:this})}function rt(t,e,n){const{byteSize:s,align:r,instance:{members:o,template:c},hasPointer:i}=t,{modifier:a,initializer:l,finalizer:u,alternateCaster:f,shapeDefiner:p}=e,m=oi(o);let d;if(c!=null&&c[x]){const S=o.filter(v=>Uo(v));S.length>0&&(d=S.map(v=>v.slot))}const h=new ii,g=function(S,v={}){const{fixed:O=!1}=v,j=this instanceof g;let M,T;if(j){if(arguments.length===0)throw new Nr(t);M=this,m&&(M[x]={}),p?(l.call(M,S,O),T=M[w]):M[w]=T=n.allocateMemory(s,r,O)}else{if(f&&(M=f.call(this,S,v),M!==!1)||(T=ko(t,S,n),M=h.find(T)))return M;M=Object.create(g.prototype),p?Lt.call(M,T,t,!1,!1,{shapeDefiner:p}):M[w]=T,m&&(M[x]={})}if(d)for(const P of d)M[x][P]=c[x][P];return a&&a.call(M),j&&(p||l.call(M,S)),u&&(M=u.call(M)),h.save(T,M)};return g}function Bt({source:t}){const e=t[x][0];e&&this[Ce](e)}function ut(t){const{instance:{template:e}}=t;return function(n,s){var f;const r=Object.keys(n),o=this[Re],c=this[Jn];for(const p of r)if(!(p in o))throw new Wr(t,p);let i=0,a=0,l=0,u=0;for(const p of c){const m=o[p];m.special?p in n&&u++:(i++,p in n?a++:m.required&&l++)}if(l!==0&&u===0){const p=c.filter(m=>o[m].required&&!(m in n));throw new qr(t,p)}if(u+a>r.length)for(const p of c)p in n&&(r.includes(p)||r.push(p));a<i&&u===0&&e&&(e[w]&&this[C](e),(f=this[R])==null||f.call(this,Bt,{vivificate:!0,source:e}));for(const p of r)o[p].call(this,n[p],s);return r.length}}function oi(t){for(const{type:e}of t)switch(e){case I.Object:case I.Comptime:case I.Type:case I.Literal:return!0}return!1}function os(){return this}class ii{constructor(){$(this,"map",new WeakMap)}find(e){return this.map.get(e)}save(e,n){return this.map.set(e,n),n}}const kn={},Cn={};function Dt(t,e="utf-8"){let n=kn[e];n||(n=kn[e]=new TextDecoder(e));let s;if(Array.isArray(t))if(t.length===1)s=t[0];else{let r=0;for(const i of t)r+=i.length;const{constructor:o}=t[0];s=new o(r);let c=0;for(const i of t)s.set(i,c),c+=i.length}else s=t;return n.decode(s)}function ci(t,e="utf-8"){switch(e){case"utf-16":{const{length:n}=t,s=new Uint16Array(n);for(let r=0;r<n;r++)s[r]=t.charCodeAt(r);return s}default:{let n=Cn[e];return n||(n=Cn[e]=new TextEncoder),n.encode(t)}}}function ai(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}function li(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<n.byteLength;s++)n[s]=e.charCodeAt(s);return new DataView(n.buffer)}function K(){return is(this,!1)}function Q(){return is(this,!0)}const ui=BigInt(Number.MAX_SAFE_INTEGER),fi=BigInt(Number.MIN_SAFE_INTEGER);function is(t,e){const n=e?"return":"throw",s=new Map,r=function(o){var a,l,u;const c=typeof o=="function"?z.Struct:(a=o==null?void 0:o.constructor)==null?void 0:a[J];if(c===void 0){if(e){if(typeof o=="bigint"&&fi<=o&&o<=ui)return Number(o);if(o instanceof Error)return{error:o.message}}return o}let i=s.get(o);if(i===void 0){let f;switch(c){case z.Struct:case z.PackedStruct:case z.ExternStruct:case z.TaggedUnion:case z.BareUnion:case z.ExternUnion:f=(l=o[gt])==null?void 0:l.call(o,{error:n}),i=o.constructor[Gn]?[]:{};break;case z.Array:case z.Vector:case z.Slice:f=(u=o[gt])==null?void 0:u.call(o,{error:n}),i=[];break;case z.Pointer:try{i=o["*"]}catch{i=Symbol.for("inaccessible")}break;case z.Enum:i=te(()=>String(o),{error:n});break;case z.Opaque:i={};break;default:i=te(()=>o.$,{error:n})}if(i=r(i),s.set(o,i),f)for(const[p,m]of f)i[p]=r(m)}return i};return r(t)}function te(t,e={}){const{error:n="throw"}=e;try{return t()}catch(s){debugger;if(n==="return")return s;throw s}}function ft(t,e={}){return ye({get(){return X.call(this),this[w]},set(n,s){$o(n),Lt.call(this,n,t,!0,s,e)}})}function yt(t,e={}){return ye({get(){return ai(this.dataView)},set(n,s){if(typeof n!="string")throw new ie("string",n);const r=li(n);Lt.call(this,r,t,!1,s,e)}})}function cs(t,e={}){const{sentinel:n,instance:{members:s}}=t,{byteSize:r}=s[0];return ye({get(){const o=this.dataView,c=r===1?Int8Array:Int16Array,i=new c(o.buffer,o.byteOffset,this.length),a=Dt(i,`utf-${r*8}`);return(n==null?void 0:n.value)===void 0?a:a.slice(0,-1)},set(o,c){if(typeof o!="string")throw new ie("a string",o);(n==null?void 0:n.value)!==void 0&&o.charCodeAt(o.length-1)!==n.value&&(o=o+String.fromCharCode(n.value));const i=ci(o,`utf-${r*8}`),a=new DataView(i.buffer);Lt.call(this,a,t,!1,c,e)}})}function Pt(t,e={}){const{typedArray:n}=t;return ye({get(){const s=this.dataView,r=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,r)},set(s,r){if(!Co(s,n))throw new ie(n.name,s);const o=new DataView(s.buffer,s.byteOffset,s.byteLength);Lt.call(this,o,t,!0,r,e)}})}function ye({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}let it,Qt;function as(t,e){const{name:n,byteSize:s,align:r,instance:{members:[o]}}=t;if(Qt||(Qt=class extends hi{},it=as({...t,name:"anyerror"},e)),it&&n==="anyerror")return t.constructor=it,t.typedArray=wt(o),it;const c=Qt,{get:i,set:a}=N(o,e),l=["string","number"],u=ut(t),f=function(S){if(S instanceof m[Ct])a.call(this,S);else if(S&&typeof S=="object"&&!_t(S)){if(u.call(this,S)===0)throw new dt(t,l,S)}else S!==void 0&&a.call(this,S)},p=function(S){if(typeof S=="number"||typeof S=="string")return m[S];if(S instanceof m[Ct])return m[Number(S)];if(_t(S))return m[`Error: ${S.error}`];if(ue(t,S,e))return!1;throw new dt(t,l,S)},m=t.constructor=rt(t,{initializer:f,alternateCaster:p},e),d=t.typedArray=wt(o),h={$:{get:i,set:a},dataView:ft(t),base64:yt(t),typedArray:d&&Pt(t),valueOf:{value:K},toJSON:{value:Q},delete:{value:lt(e)},[C]:{value:G(s)},[W]:{value:Ot}},g={[F]:{value:r},[q]:{value:s},[Ct]:{value:c},[bt]:n==="anyerror"?{value:[]}:void 0,[J]:{value:t.type}};return st(m,h,g)}function yi(t,e,n){const s=n[ce]("number");let r=it[s];if(!r){const i=t[Ct];r=new i(e,s)}const o=String(r),c={[s]:{value:r},[o]:{value:r},[e]:{value:r}};B(t,c),B(it,c),it[bt].push(e)}function mi(){Qt=it=void 0}class hi extends Error{constructor(e,n){super(Ln(e)),this.number=n,this.stack=void 0}[Symbol.toPrimitive](e){switch(e){case"string":case"default":return Error.prototype.toString.call(this,e);default:return this.number}}toJSON(){return{error:this.message}}}function pi(t,e){const n=(s,{methods:r},o)=>{const c={},i=/^(get|set)\s+([\s\S]+)/;for(const a of r){const l=e.createCaller(a,o),u=i.exec(l.name);if(u){const f=u[1],p=u[2],m=f==="get"?0:1;if(di(a,o)===m){let h=c[p];h||(h=c[p]={configurable:!0,enumerable:!0}),h[f]=l}}else c[l.name]={value:l,configurable:!0,writable:!0}}B(s,c)};n(t.constructor,t.static,!1),n(t.constructor.prototype,t.instance,!0)}function di(t,e){const{argStruct:{instance:{members:n}}}=t;return n.length-(e?2:1)}function bi(t,e){const{byteSize:n,align:s,instance:{members:[r]}}=t,{get:o,set:c}=N(r,e),i=["string","number","tagged union"],a=ut(t),l=function(g){if(g&&typeof g=="object"){if(a.call(this,g)===0)throw new dt(t,i,g)}else g!==void 0&&c.call(this,g)},u=function(g){if(typeof g=="string"||typeof g=="number"||typeof g=="bigint"){let S=f[g];if(!S&&f[Yn]&&typeof g!="string"){S=new f(void 0);debugger;c.call(S,g,"number"),ls(f,`${g}`,S)}return S}else{if(g instanceof f)return g;if((g==null?void 0:g[Vn])instanceof f)return g[Vn];if(ue(t,g,e))return!1;throw new dt(t,i,g)}},f=t.constructor=rt(t,{initializer:l,alternateCaster:u},e),p=t.typedArray=wt(r),m=function(g){switch(g){case"string":case"default":return this.$[Wn];default:return o.call(this,"number")}},d={$:{get:o,set:c},dataView:ft(t),base64:yt(t),typedArray:p&&Pt(t),valueOf:{value:K},toString:{value:K},toJSON:{value:Q},delete:{value:lt(e)},[Symbol.toPrimitive]:{value:m},[C]:{value:G(n)},[W]:{value:Ot}},h={[F]:{value:s},[q]:{value:n},[J]:{value:t.type}};return st(f,d,h)}function ls(t,e,n){if(e!==void 0){if(n instanceof t){B(n,{[Wn]:{value:e}});const s=n[Symbol.toPrimitive]();B(t,{[s]:{value:n},[e]:{value:n}})}}else B(t,{[Yn]:{value:!0}})}function gi(t,e){const{byteSize:n,align:s,instance:{members:[r]},isConst:o}=t,{runtimeSafety:c=!0}=e,{structure:i}=r,{type:a,sentinel:l,length:u}=i,f=a===z.Slice&&i.length===void 0&&!l,p=f?n/2:n,{get:m,set:d}=N({type:I.Uint,bitOffset:0,bitSize:p*8,byteSize:p,structure:{byteSize:p}},e),{get:h,set:g}=f?N({type:I.Uint,bitOffset:p*8,bitSize:p*8,byteSize:p,structure:{name:"usize",byteSize:p}},e):{},S=function(){const E=this[Et];if(E){const k=this[ke]();if(k.address!==E.address||k.length!==E.length){const{constructor:tt}=i,ot=e.findMemory(k.address,k.length,tt[q]),Ve=tt.call(jt,ot);this[x][0]=Ve,this[Et]=k}}},v=function(){S.call(this);const E=this[x][0];if(!E)throw new zn;return o?us(E):E},O=function(E){if(e.inFixedMemory(this))if(e.inFixedMemory(E)){const k={address:e.getViewAddress(E[w]),length:f?E.length:On};vn.call(this,k),this[Et]=k}else throw new Xr(t,E);this[x][0]=E},j=Le(i)?function(){return v.call(this)[ce]()}:v,M=o?xt:function(E){S.call(this);const k=this[x][0];if(!k)throw new zn;return k[ae](E)},T=function(E,k){const tt=i.constructor;if(this===jt||this===Fe||E instanceof mt)return!1;if(jn(E,tt))return new mt(tt(E["*"]),k);if(a===z.Slice)return new mt(tt(E),k);throw new Kr(t)},P=function(){const E=a===z.Pointer?{}:Ei,k=new Proxy(this,E);return Object.defineProperty(this,le,{value:k}),k},H=function(E){var tt;const k=i.constructor;if(jn(E,k)){if(!o&&E.constructor.const)throw new Jr(t,E);E=E[x][0]}if(E instanceof k){X.call(E);const ot=E[St];if(ot)if(o)E=ot;else throw new eo(t)}else if(jo(E,k)){const ot=ue(i,E,e);E=k(ot)}else if(E!==void 0&&!E[w]){const ot=e.inFixedMemory(this),Ve=new k(E,{fixed:ot});if(c&&i.typedArray){const An=(tt=E==null?void 0:E.buffer)==null?void 0:tt[Symbol.toStringTag];(An==="ArrayBuffer"||An==="SharedArrayBuffer")&&so(i,E)}E=Ve}else if(E!==void 0)throw new Hr(t,E);this[Ce](E)},mt=t.constructor=rt(t,{initializer:H,alternateCaster:T,finalizer:P},e),vn=function({address:E,length:k}){d.call(this,E),g==null||g.call(this,k)},On=a!=z.Slice?1:u,kr=function(){const E=m.call(this),k=h?h.call(this):l?E?e.findSentinel(E,l.bytes)+1:0:On;return{address:E,length:k}},Cr={"*":{get:j,set:M},$:{get:We,set:H},valueOf:{value:K},toJSON:{value:Q},delete:{value:wi},[Symbol.toPrimitive]:a===z.Primitive&&{value:vi},[ht]:{value:v},[Ce]:{value:O},[ke]:{value:kr},[Kn]:{value:vn},[R]:{value:Ai},[C]:{value:G(n)},[Et]:{value:void 0,writable:!0},[W]:{value:Si}},jr={child:{get:()=>i.constructor},const:{value:o},[F]:{value:s},[q]:{value:n},[J]:{value:t.type}};return st(mt,Cr,jr)}function Si(){const t=this[Ft],e=Object.getOwnPropertyDescriptor(t.constructor.prototype,"$");e.set=xt,Object.defineProperty(t,"$",e),Object.defineProperty(t,St,{value:t})}function wi(){const t=this[x][0];t==null||t.delete()}function vi(t){return this[x][0][Symbol.toPrimitive](t)}function We(){return this[le]}function Oi({isActive:t}){this[x][0]&&!t(this)&&(this[x][0]=void 0)}function Ai(t,e={}){const{source:n,isActive:s=et,isMutable:r=et}=e;t.call(this,{source:n,isActive:s,isMutable:r})}function jn(t,e){var n;return((n=t==null?void 0:t.constructor)==null?void 0:n.child)===e&&t["*"]}function us(t){let e=t[Pe];return e||(Object.defineProperty(t,Pe,{value:void 0,configurable:!0}),e=new Proxy(t,zi),Object.defineProperty(t,Pe,{value:e})),e}const Ei={get(t,e){return e===Ft?t:e in t?t[e]:t[ht]()[e]},set(t,e,n){if(e in t)t[e]=n;else{const s=t[ht]();s[e]=n}return!0},deleteProperty(t,e){if(e in t)delete t[e];else{const n=t[ht]();delete n[e]}return!0},has(t,e){if(e in t)return!0;{const n=t[ht]();return e in n}}},zi={get(t,e){if(e===St)return t;{const n=t[e];return(n==null?void 0:n[St])===null?us(n):n}},set(t,e,n){const s=t[Ft];if(s&&!(e in s))return t[e]=n,!0;xt()}};function et(){return!0}function Ti(t,e){const{length:n,byteSize:s,align:r,instance:{members:[o]}}=t,{bitSize:c,structure:i}=o,a={};for(let h=0,g=0;h<n;h++,g+=c){const{get:S,set:v}=N({...o,bitOffset:g},e);a[h]={get:S,set:v,configurable:!0}}const l=ut(t),u=function(h){if(h instanceof f)this[C](h);else if(h!=null&&h[Symbol.iterator]){let g=h.length;if(typeof g!="number"&&(h=[...h],g=h.length),g!==n)throw new oe(t,this,h);let S=0;for(const v of h)this[Re][S++].call(this,v)}else if(h&&typeof h=="object"){if(l.call(this,h)===0)throw new pt(t,h)}else if(h!==void 0)throw new pt(t,h)},f=t.constructor=rt(t,{initializer:u},e),p=t.typedArray=wt(o),m={...a,$:{get:os,set:u},length:{value:n},dataView:ft(t),base64:yt(t),typedArray:p&&Pt(t),valueOf:{value:K},toJSON:{value:Q},entries:{value:ee},delete:{value:lt(t)},[Symbol.iterator]:{value:fs},[gt]:{value:ee},[C]:{value:G(s)},[W]:{value:Ot}},d={child:{get:()=>i.constructor},[Ut]:{value:fe(t)},[F]:{value:r},[q]:{value:s},[J]:{value:t.type}};return st(f,m,d)}function fs(){const t=this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const o=n++;s=t[o],r=!1}else r=!0;return{value:s,done:r}}}}function xi(){const t=this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const o=n++;s=[o,t[o]],r=!1}else r=!0;return{value:s,done:r}}}}function ee(){return{[Symbol.iterator]:xi.bind(this),length:this.length}}function Ii(t,e){const{byteSize:n,align:s,instance:{members:r},isTuple:o,hasPointer:c}=t,i={},a=r.filter(O=>!!O.name),l=r.find(O=>!O.name);for(const O of a){const{get:j,set:M}=N(O,e);i[O.name]={get:j,set:M,configurable:!0,enumerable:!0},O.isRequired&&M&&(M.required=!0)}const u=l?N(l,e):null,f=!!r.find(O=>O.type===I.Object),p=ut(t),m=function(O){if(O instanceof d)this[C](O),c&&this[R](Bt,{vivificate:!0,source:O});else if(O&&typeof O=="object")p.call(this,O);else if((typeof O=="number"||typeof O=="bigint")&&u)u.set.call(this,O);else if(O!==void 0)throw new dt(t,"object",O)},d=t.constructor=rt(t,{initializer:m},e),h=u?function(O){switch(O){case"string":return Object.prototype.toString.call(this);default:return u.get.call(this)}}:null,g=o&&r.length>0?parseInt(r[r.length-1].name)+1:0,S={$:{get:os,set:m},dataView:ft(t),base64:yt(t),length:o&&{value:g},valueOf:{value:K},toJSON:{value:Q},delete:{value:lt(e)},entries:o&&{value:ee},...i,[Symbol.iterator]:{value:o?fs:ys},[Symbol.toPrimitive]:u&&{value:h},[gt]:{value:o?ee:Ge},[C]:{value:G(n)},[Z]:f&&{value:Ke(t)},[R]:c&&{value:Je(t,et)},[W]:{value:Ot},[bt]:{value:a.map(O=>O.name)}},v={[F]:{value:s},[q]:{value:n},[J]:{value:t.type},[Gn]:{value:o}};return st(d,S,v)}function Ge(t){return{[Symbol.iterator]:Vi.bind(this,t),length:this[bt].length}}function ys(t){return Ge.call(this,t)[Symbol.iterator]()}function Vi(t){const e=this,n=this[bt];let s=0;return{next(){let r,o;if(s<n.length){const c=n[s++];r=[c,te(()=>e[c],t)],o=!1}else o=!0;return{value:r,done:o}}}}function Ke(t){const{instance:{members:e}}=t,n={};for(const s of e.filter(r=>r.type===I.Object))n[s.slot]=s;return function(r){const o=n[r],{bitOffset:c,byteSize:i,structure:{constructor:a}}=o,l=this[w],f=l.byteOffset+(c>>3);let p=i;if(p===void 0){if(c&7)throw new Qr(o);p=o.bitSize>>3}const m=new DataView(l.buffer,f,p);return this[x][r]=a.call(Fe,m)}}function Je(t,e={}){const{isChildActive:n=et,isChildMutable:s=et}=e,{instance:{members:r}}=t,o=r.filter(c=>c.structure.hasPointer);return function(i,a={}){var d;const{source:l,vivificate:u=!1,isActive:f=et,isMutable:p=et}=a,m={...a,isActive:h=>f(this)&&n.call(this,h),isMutable:h=>p(this)&&s.call(this,h)};for(const{slot:h}of o){if(l){const S=(d=l[x])==null?void 0:d[h];if(!S)continue;m.source=S}const g=this[x][h]??(u?this[Z](h):null);g&&g[R](i,m)}}}function Pi(t,e){const{type:n,constructor:s,static:{members:r,template:o}}=t,c={};for(const i of r)c[i.name]=N(i,e);if(B(s,{valueOf:{value:K},toJSON:{value:Q},...c,[Symbol.iterator]:{value:ys},[gt]:{value:Ge},[x]:o&&{value:o[x]},[bt]:!s[bt]&&{value:r.map(i=>i.name)}}),n===z.Enum)for(const{name:i,slot:a}of r)ls(s,i,s[x][a]);else if(n===z.ErrorSet)for(const{name:i,slot:a}of r)yi(s,i,s[x][a])}function Mi(t,e){const{byteSize:n,align:s,instance:{members:r},hasPointer:o,name:c}=t,i=!!r.find(m=>m.type===I.Object),a=r.slice(0,-1).map(m=>m.name),l=a.length,u=t.constructor=function(m,d,h){const g=e.allocateMemory(n,s);if(this[w]=g,i&&(this[x]={}),m.length!==l)throw new Gr(d,l-h,m.length-h);for(const[S,v]of a.entries())try{this[v]=m[S]}catch(O){throw no(d,S-h,l-h,O)}},f={};for(const m of r)f[m.name]=N(m,e);const p=function(m){return m===this.retval};return B(u.prototype,{...f,[C]:{value:G(n)},[Z]:i&&{value:Ke(t)},[R]:o&&{value:Je(t,{isChildMutable:p})}}),B(u,{[F]:{value:s},[q]:{value:n}}),u}function $i(t,e){const{length:n,byteSize:s,align:r,instance:{members:[o]},hasPointer:c}=t,{get:i,set:a}=N(o,e),l=ps(o),u=ut(t),f=function(v){if(v instanceof m)this[C](v),c&&this[R](Bt,{vivificate:!0,source:v});else if(typeof v=="string"&&l&&(v={string:v}),v!=null&&v[Symbol.iterator]){if(v=Ss(v),v.length!==n)throw new oe(t,this,v);let O=0;for(const j of v)a.call(this,O++,j)}else if(v&&typeof v=="object"){if(u.call(this,v)===0)throw new pt(t,v)}else if(v!==void 0)throw new pt(t,v)},p=ms,m=t.constructor=rt(t,{initializer:f,finalizer:p},e),d=t.typedArray=wt(o),h=o.type===I.Object,g={$:{get:We,set:f},length:{value:n},dataView:ft(t),base64:yt(t),string:l&&cs(t),typedArray:d&&Pt(t),get:{value:i},set:{value:a},entries:{value:ne},valueOf:{value:K},toJSON:{value:Q},delete:{value:lt(e)},[Symbol.iterator]:{value:ds},[gt]:{value:ne},[C]:{value:G(s)},[Z]:h&&{value:bs(t)},[R]:c&&{value:gs()},[W]:{value:hs}},S={child:{get:()=>o.structure.constructor},[Ut]:{value:fe(t)},[F]:{value:r},[q]:{value:s},[J]:{value:t.type}};return st(m,g,S)}function ms(){const t=new Proxy(this,Ci);return Object.defineProperty(this,le,{value:t}),t}function hs(){Ot.call(this),Object.defineProperty(this,"set",{value:xt});const t=this.get;Object.defineProperty(this,"get",{value:function(n){var r;const s=t.call(this,n);return(s==null?void 0:s[St])===null&&((r=s[W])==null||r.call(s)),s}})}function ps(t){return t.type===I.Uint&&[8,16].includes(t.bitSize)}function ds(){const t=this[Ne]??this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const o=n++;s=t.get(o),r=!1}else r=!0;return{value:s,done:r}}}}function ki(t){const e=this[Ne]??this,n=this.length;let s=0;return{next(){let r,o;if(s<n){const c=s++;r=[c,te(()=>e.get(c),t)],o=!1}else o=!0;return{value:r,done:o}}}}function ne(t){return{[Symbol.iterator]:ki.bind(this,t),length:this.length}}function bs(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:s}=e;return function(o){const{constructor:c}=s,i=this[w],l=i.byteOffset+n*o,u=new DataView(i.buffer,l,n);return this[x][o]=c.call(Fe,u)}}function gs(t){return function(n,s={}){const{source:r,vivificate:o=!1,isActive:c=et,isMutable:i=et}=s,a={...s,isActive:()=>c(this),isMutable:()=>i(this)};for(let l=0,u=this.length;l<u;l++){r&&(a.source=r==null?void 0:r[x][l]);const f=this[x][l]??(o?this[Z](l):null);f&&f[R](n,a)}}}function Ss(t){var r;if(typeof t.length=="number")return t;const e=t[Symbol.iterator](),n=e.next(),s=(r=n.value)==null?void 0:r.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let o;for(;!(o=e.next()).done;)yield o.value}(),{length:s});{const o=[];let c=n;for(;!c.done;)o.push(c.value),c=e.next();return o}}const Ci={get(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return t.get(n);switch(e){case"get":return t[$t]||(t[$t]=t.get.bind(t)),t[$t];case"set":return t[kt]||(t[kt]=t.set.bind(t)),t[kt];case Ne:return t;default:return t[e]}},set(t,e,n){const s=typeof e=="symbol"?0:e|0;if(s!==0||s==e)t.set(s,n);else switch(e){case"get":t[$t]=n;break;case"set":t[kt]=n;break;default:t[e]=n}return!0},deleteProperty(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return!1;switch(e){case"get":delete t[$t];break;case"set":delete t[kt];break;default:delete t[e]}return!0},has(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,s=t.length;n<s;n++)e.push(`${n}`);return e.push("length",le),e},getOwnPropertyDescriptor(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e){if(n>=0&&n<t.length)return{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(t,e)}};function ji(t,e){const{byteSize:n,align:s,instance:{members:r},hasPointer:o}=t,{get:c,set:i}=N(r[0],e),{get:a,set:l}=N(r[1],e),u=function(){if(a.call(this,"number"))throw a.call(this);return c.call(this)},f=r[0].type===I.Void,p=r[1].structure.constructor,m=function(){return!a.call(this,"number")},d=function(){var P;this[Pn](),(P=this[R])==null||P.call(this,Oi)},h=!!r.find(P=>P.type===I.Object),g=ut(t),S=function(P){if(P instanceof v)this[C](P),o&&m.call(this)&&this[R](Bt,{vivificate:!0,source:P});else if(P instanceof p[Ct]&&p(P))l.call(this,P),d.call(this);else if(P!==void 0||f)try{i.call(this,P),l.call(this,0,"number")}catch(H){if(P instanceof Error)throw new Nn(t);if(_t(P))l.call(this,P),d.call(this);else if(P&&typeof P=="object"){if(g.call(this,P)===0)throw H}else throw H}},v=t.constructor=rt(t,{initializer:S},e),{bitOffset:O,byteSize:j}=r[0],M={$:{get:u,set:S},dataView:ft(t),base64:yt(t),valueOf:{value:K},toJSON:{value:Q},delete:{value:lt(e)},[C]:{value:G(n)},[Pn]:{value:po(O/8,j)},[Z]:h&&{value:Ke(t)},[R]:o&&{value:Je(t,{isChildActive:m})},[W]:{value:Ot}},T={[F]:{value:s},[q]:{value:n},[J]:{value:t.type}};return st(v,M,T)}function Di(t,e){const{byteSize:n,align:s,instance:{members:[r]}}=t,{get:o,set:c}=N(r,e),i=ut(t),a=function(m){if(m instanceof l)this[C](m);else if(m&&typeof m=="object"){if(i.call(this,m)===0){const d=_n(r);throw new dt(t,d,m)}}else m!==void 0&&c.call(this,m)},l=t.constructor=rt(t,{initializer:a},e),u=t.typedArray=wt(r),f={$:{get:o,set:c},dataView:ft(t),base64:yt(t),typedArray:u&&Pt(t),valueOf:{value:K},toJSON:{value:Q},delete:{value:lt(e)},[Symbol.toPrimitive]:{value:o},[C]:{value:G(n)},[W]:{value:Ot}},p={[Ut]:{value:fe(t)},[F]:{value:s},[q]:{value:n},[J]:{value:t.type}};return st(l,f,p)}function _i(t,e){const{align:n,instance:{members:[s]},hasPointer:r}=t,{get:o,set:c}=N(s,e),{byteSize:i,structure:a}=s,l=Ri(t,e);l&&(t.sentinel=l);const u=ps(s),f=function(T,P,H=!1){T||(T=e.allocateMemory(P*i,n,H)),this[w]=T,this[je]=P},p=function(T,P){if(P!==this[je])throw new oe(t,this,T)},m=ut(t),d=function(T,P=!1){if(T instanceof g)this[w]?p.call(this,T,T.length):f.call(this,null,T.length,P),this[C](T),r&&this[R](Bt,{vivificate:!0,source:T});else if(typeof T=="string"&&u)d.call(this,{string:T},P);else if(T!=null&&T[Symbol.iterator]){T=Ss(T),this[w]?p.call(this,T,T.length):f.call(this,null,T.length,P);let H=0;for(const mt of T)l==null||l.validateValue(mt,H,T.length),c.call(this,H++,mt)}else if(typeof T=="number")if(!this[w]&&T>=0&&isFinite(T))f.call(this,null,T);else throw new pt(t,T,!this[w]);else if(T&&typeof T=="object"){if(m.call(this,T,P)===0)throw new pt(t,T)}else if(T!==void 0)throw new pt(t,T)},h=ms,g=t.constructor=rt(t,{initializer:d,shapeDefiner:f,finalizer:h},e),S=t.typedArray=wt(s),v=s.type===I.Object,O={shapeDefiner:f},j={$:{get:We,set:d},length:{get:Fi},dataView:ft(t,O),base64:yt(t,O),string:u&&cs(t,O),typedArray:S&&Pt(t,O),get:{value:o},set:{value:c},entries:{value:ne},valueOf:{value:K},toJSON:{value:Q},delete:{value:lt(e)},[Symbol.iterator]:{value:ds},[gt]:{value:ne},[C]:{value:G(i,!0)},[Z]:v&&{value:bs(t)},[R]:r&&{value:gs()},[W]:{value:hs}},M={child:{get:()=>a.constructor},[Ut]:{value:fe(t)},[F]:{value:n},[q]:{value:i},[J]:{value:t.type}};return st(g,j,M)}function Fi(){return this[je]}function Ri(t,e){const{runtimeSafety:n=!0}=e,{byteSize:s,instance:{members:[r,o],template:c}}=t;if(!o)return;const{get:i}=N(o,e),a=i.call(c,0),{get:l}=N(r,e),u=n?function(m,d,h){if(m===a&&d!==h-1)throw new En(t,m,d,h);if(m!==a&&d===h-1)throw new Xt(t,a,d,h)}:function(m,d,h){if(m!==a&&d===h-1)throw new Xt(t,a,h)},f=n?function(m,d){for(let h=0;h<d;h++){const g=l.call(m,h);if(g===a&&h!==d-1)throw new En(t,a,h,d);if(g!==a&&h===d-1)throw new Xt(t,a,d)}}:function(m,d){if(d*s===m[w].byteLength){const h=d-1;if(l.call(m,h)!==a)throw new Xt(t,a,d)}},p=c[w];return{value:a,bytes:p,validateValue:u,validateData:f}}const Y=Array(Object.values(z).length);function Ni(){Y[z.Primitive]=Di}function Ui(){Y[z.Array]=$i}function Li(){Y[z.Struct]=Ii}function Bi(){Y[z.ArgStruct]=Mi}function qi(){Y[z.ErrorUnion]=ji}function Wi(){Y[z.ErrorSet]=as,Jo()}function Gi(){Y[z.Enum]=bi,Ko()}function Ki(){Y[z.Pointer]=gi,ts()}function Ji(){Y[z.Slice]=_i}function Yi(){Y[z.Vector]=Ti}function Hi(t){return Y[t]}class Xi{constructor(){$(this,"context");$(this,"contextStack",[]);$(this,"consolePending",[]);$(this,"consoleTimeout",0);$(this,"viewMap",new WeakMap);$(this,"abandoned",!1);$(this,"released",!1);$(this,"littleEndian",!0);$(this,"runtimeSafety",!0);$(this,"comptime",!1);$(this,"variables",[]);$(this,"imports");$(this,"console",globalThis.console)}startContext(){this.context&&this.contextStack.push(this.context),this.context=new Zi}endContext(){this.context=this.contextStack.pop()}allocateMemory(e,n=0,s=!1){return s?this.allocateFixedMemory(e,n):this.allocateRelocMemory(e,n)}allocateRelocMemory(e,n){return this.obtainView(new ArrayBuffer(e),0,e)}registerMemory(e,n=null,s=void 0){const{memoryList:r}=this.context,o=this.getViewAddress(e),c=Me(r,o);return r.splice(c,0,{address:o,dv:e,len:e.byteLength,targetDV:n,targetAlign:s}),o}unregisterMemory(e){const{memoryList:n}=this.context,s=Me(n,e),r=n[s-1];(r==null?void 0:r.address)===e&&n.splice(s-1,1)}findMemory(e,n,s){if(ec(e))if(!n)e=0;else return null;else if(!e&&n)return null;let r=n*(s??0);if(this.context){const{memoryList:o}=this.context,c=Me(o,e),i=o[c-1];if((i==null?void 0:i.address)===e&&i.len===r)return i.targetDV??i.dv;if((i==null?void 0:i.address)<=e&&e<At(i.address,i.len)){const a=Number(e-i.address),l=i.targetDV??i.dv,u=s===void 0;u&&(r=l.byteLength-a);const f=this.obtainView(l.buffer,l.byteOffset+a,r);return u&&(f[F]=i.targetAlign),f}}return this.obtainFixedView(e,r)}getViewAddress(e){const n=this.getBufferAddress(e.buffer);return At(n,e.byteOffset)}obtainView(e,n,s){let r=this.viewMap.get(e);if(!r){const i=new DataView(e,n,s);return this.viewMap.set(e,i),i}if(r instanceof DataView){if(r.byteOffset===n&&r.byteLength===s)return r;{const i=r;r={[`${i.byteOffset}:${i.byteLength}`]:i},this.viewMap.set(e,r)}}const o=`${n}:${s}`;let c=r[o];return c||(c=r[o]=new DataView(e,n,s)),c}captureView(e,n,s){if(s){const r=this.allocateRelocMemory(n,0);return n>0&&this.copyBytes(r,e,n),r}else return this.obtainFixedView(e,n)}castView(e,n,s,r){const{constructor:o,hasPointer:c}=r,i=this.captureView(e,n,s),a=o.call(jt,i);return c&&this.acquirePointerTargets(a),s&&a[W](),a}finalizeShape(e){const s=Hi(e.type)(e,this);typeof s=="function"&&(B(s,{name:{value:e.name,configurable:!0}}),s.prototype.hasOwnProperty(Symbol.toStringTag)||B(s.prototype,{[Symbol.toStringTag]:{value:e.name,configurable:!0}}))}finalizeStructure(e){Pi(e,this),pi(e,this)}createCaller(e,n){const{name:s,argStruct:r,thunkId:o}=e,{constructor:c}=r,i=this;let a;return n?a=function(...l){return i.invokeThunk(o,new c([this,...l],s,1))}:a=function(...l){return i.invokeThunk(o,new c(l,s,0))},Object.defineProperty(a,"name",{value:s}),a}recreateStructures(e,n){Object.assign(this,n);const s=(c,i)=>{for(const[a,l]of Object.entries(i))c[a]=r(l);return c},r=c=>{var u;const{memory:i,structure:a,actual:l}=c;if(i){if(l)return l;{const{array:f,offset:p,length:m}=i,d=this.obtainView(f.buffer,p,m),{constructor:h}=a,{reloc:g,const:S}=c,v=c.actual=h.call(jt,d);return S&&((u=v[W])==null||u.call(v)),c.slots&&s(v[x],c.slots),g!==void 0&&this.variables.push({reloc:g,object:v}),v}}else return a};mi();const o=new Map;for(const c of e){for(const i of[c.instance,c.static])if(i.template){const a=i.template,l=i.template={};if(a.memory){const{array:u,offset:f,length:p}=a.memory;l[w]=this.obtainView(u.buffer,f,p)}if(a.slots){const u=l[x]={};o.set(u,a.slots)}}this.finalizeShape(c)}for(const[c,i]of o)s(c,i);for(const c of e)this.finalizeStructure(c)}linkVariables(e){const n=[];for(const{object:s,reloc:r}of this.variables)this.linkObject(s,r,e),s[ht]&&s[x][0]&&n.push(s);for(const s of n){const r=s[ht](),o=this.getViewAddress(r[w]),{length:c=1}=r;s[Et]={address:o,length:c}}}linkObject(e,n,s){if(this.inFixedMemory(e))return;const r=e[w],o=this.recreateAddress(n),c=this.obtainFixedView(o,r.byteLength);if(s){const a=Object.create(e.constructor.prototype);a[w]=c,a[C](e)}e[w]=c;const i=a=>{if(a[x]){for(const l of Object.values(a[x]))if(l){const u=l[w];if(u.buffer===r.buffer){const f=u.byteOffset-r.byteOffset;l[w]=this.obtainView(c.buffer,f,u.byteLength),i(l)}}}};i(e)}unlinkVariables(){for(const{object:e}of this.variables)this.unlinkObject(e)}unlinkObject(e){if(!this.inFixedMemory(e))return;const n=e[w],s=this.allocateMemory(n.byteLength),r=Object.create(e.constructor.prototype);r[w]=s,r[C](e),e[w]=s}releaseFunctions(){const e=()=>{throw new Error("Module was abandoned")};for(const n of Object.keys(this.imports))this[n]&&(this[n]=e)}getSpecialExports(){const e=n=>{if(n===void 0)throw new Error("Not a Zig type");return n};return{init:(...n)=>this.init(...n),abandon:()=>this.abandon(),released:()=>this.released,connect:n=>this.console=n,sizeOf:n=>e(n[q]),alignOf:n=>e(n[F]),typeOf:n=>Fr(e(n[J]))}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}writeToConsole(e){const{console:n}=this;try{const s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).slice(),r=s.lastIndexOf(10);if(r===-1)this.consolePending.push(s);else{const o=s.subarray(0,r),c=s.subarray(r+1),i=[...this.consolePending,o];n.log(Dt(i)),this.consolePending=c.length>0?[c]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout(()=>{n.log(Dt(this.consolePending)),this.consolePending=[]},250))}catch(s){n.error(s)}}flushConsole(){this.consolePending.length>0&&(console.log(Dt(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}updatePointerAddresses(e){const n=new Map,s=new Map,r=[],o=this,c=function({isActive:l}){var p;if(!l(this))return;const u=this[Ft];if(n.get(u))return;const f=u[x][0];if(f&&(n.set(u,f),!o.inFixedMemory(f))){const m=f[w],d=s.get(m.buffer);if(d){const h=Array.isArray(d)?d:[d],g=ws(h,m.byteOffset,S=>S[w].byteOffset);h.splice(g,0,f),Array.isArray(d)||(s.set(m.buffer,h),r.push(h))}else s.set(m.buffer,f);(p=f[R])==null||p.call(f,c)}};e[R](c);const i=this.findTargetClusters(r),a=new Map;for(const l of i)for(const u of l.targets)a.set(u,l);for(const[l,u]of n){const f=a.get(u),{length:p=1}=u;let m=this.getTargetAddress(u,f);m===!1&&(m=this.getShadowAddress(u,f)),l[Kn]({address:m,length:p})}}findTargetClusters(e){const n=[];for(const s of e){let r=null,o=0,c=0,i=null;for(const a of s){const l=a[w],{byteOffset:u,byteLength:f}=l,p=u+f;let m=!0;r&&(c>u?(i||(i={targets:[r],start:o,end:c,address:void 0,misaligned:void 0},n.push(i)),i.targets.push(a),p>c?i.end=p:m=!1):i=null),m&&(r=a,o=u,c=p)}}return n}createClusterShadow(e){const{start:n,end:s,targets:r}=e;let o=0,c;for(const S of r){const v=S[w],O=v.byteOffset,j=S.constructor[F]??v[F];(o===void 0||j>o)&&(o=j,c=O)}const i=s-n,a=this.allocateShadowMemory(i+o,1),l=this.getViewAddress(a),u=tc(At(l,c-n),o),f=At(u,n-c),p=a.byteOffset+Number(f-l),m=new DataView(a.buffer,p,i);for(const S of r){const v=S[w],O=v.byteOffset;if(O!==c){const j=S.constructor[F]??v[F];if(Qi(At(f,O-n),j))throw new Yr(j,o)}}const d={[C]:G(i)},h=Object.create(d),g=Object.create(d);return h[w]=new DataView(r[0][w].buffer,Number(n),i),g[w]=m,g[Zt]={address:l,len:a.byteLength,align:1},this.addShadow(g,h,1)}getShadowAddress(e,n){if(n){const s=e[w];if(n.address===void 0){const r=this.createClusterShadow(n);n.address=this.getViewAddress(r[w])}return At(n.address,s.byteOffset-n.start)}else{const s=this.createShadow(e);return this.getViewAddress(s[w])}}createShadow(e){const n=e[w],s=e.constructor[F]??n[F],r=Object.create(e.constructor.prototype),o=r[w]=this.allocateShadowMemory(n.byteLength,s);return r[Zt]={address:this.getViewAddress(o),len:o.byteLength,align:s},this.addShadow(r,e,s)}addShadow(e,n,s){let{shadowMap:r}=this.context;return r||(r=this.context.shadowMap=new Map),r.set(e,n),this.registerMemory(e[w],n[w],s),e}removeShadow(e){const{shadowMap:n}=this.context;if(n){for(const[s]of n)if(s[w]===e){n.delete(s);break}}}updateShadows(){const{shadowMap:e}=this.context;if(e)for(const[n,s]of e)n[C](s)}updateShadowTargets(){const{shadowMap:e}=this.context;if(e)for(const[n,s]of e)s[C](n)}releaseShadows(){const{shadowMap:e}=this.context;if(e)for(const[n]of e){const{address:s,len:r,align:o}=n[Zt];this.freeShadowMemory(s,r,o)}}acquirePointerTargets(e){const n=this,s=new Map,r=function({isActive:o,isMutable:c}){var p,m;const i=this[Ft];if(s.get(i))return;s.set(i,!0);const a=!i.constructor.const,l=i[x][0];let u,f;if(o(this)){const d=i.constructor.child;if(!l||c(this)){f=i[ke]();const h=n.findMemory(f.address,f.length,d[q]);u=h?d.call(jt,h):null}else u=l}(p=l==null?void 0:l[R])==null||p.call(l,r,{vivificate:!0,isMutable:()=>a}),u!==l&&((m=u==null?void 0:u[R])==null||m.call(u,r,{vivificate:!0,isMutable:()=>a}),i[x][0]=u,n.inFixedMemory(i)&&(i[Et]=f))};e[R](r,{vivificate:!0})}}class Zi{constructor(){$(this,"pointerProcessed",new Map);$(this,"memoryList",[]);$(this,"shadowMap",null);$(this,"call",0)}}function ws(t,e,n){let s=0,r=t.length;if(r===0)return 0;for(;s<r;){const o=Math.floor((s+r)/2);n(t[o])<=e?s=o+1:r=o}return r}function Me(t,e){return ws(t,e,n=>n.address)}function Qi(t,e){if(e===void 0)return!1;typeof t=="bigint"&&(t=Number(t&0xFFFFFFFFn));const n=e-1;return(t&n)!==0}function tc(t,e){let n;return typeof t=="bigint"?(e=BigInt(e),n=~(e-1n)):n=~(e-1),(t&n)+e}function At(t,e){return t+(typeof t=="bigint"?BigInt(e):e)}function ec(t){return typeof t=="bigint"?t===0xaaaaaaaaaaaaaaaan:t===2863311530}class nc extends Xi{constructor(){super(...arguments);$(this,"imports",{getFactoryThunk:{argType:"",returnType:"i"},allocateExternMemory:{argType:"ii",returnType:"i"},freeExternMemory:{argType:"iii"},allocateShadowMemory:{argType:"cii",returnType:"v"},freeShadowMemory:{argType:"ciii"},runThunk:{argType:"iv",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"}});$(this,"exports",{allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"iibv",returnType:"v"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"},startCall:{argType:"iv",returnType:"i"},endCall:{argType:"iv",returnType:"i"}});$(this,"nextValueIndex",1);$(this,"valueTable",{0:null});$(this,"valueIndices",new Map);$(this,"memory",null);$(this,"initPromise",null);$(this,"customWASI",null);$(this,"hasCodeSource",!1);$(this,"littleEndian",!0)}async init(n){if(n&&this.hasCodeSource)throw new Error("Cannot set WASI interface after compilation has already begun (consider disabling topLevelAwait)");this.customWASI=n,await this.initPromise}allocateHostMemory(n,s){const r={[F]:s},o=G(n),c=this.allocateRelocMemory(n,s),i=this.allocateShadowMemory(n,s),a={constructor:r,[w]:c,[C]:o},l={constructor:r,[w]:i,[C]:o};return l[Zt]={address:this.getViewAddress(i),len:n,align:s},this.addShadow(l,a,s),i}freeHostMemory(n,s,r){const o=this.findMemory(n,s,1);this.removeShadow(o),this.unregisterMemory(n),this.freeShadowMemory(n,s,r)}getBufferAddress(n){return 0}allocateFixedMemory(n,s){const r=n?this.allocateExternMemory(n,s):0,o=this.obtainFixedView(r,n);return o[F]=s,o}freeFixedMemory(n,s,r){s&&this.freeExternMemory(n,s,r)}obtainFixedView(n,s){n<0&&(n=0);const{memory:r}=this,o=this.obtainView(r.buffer,n,s);return o[w]={memory:r,address:n,len:s},o}releaseFixedView(n){n.buffer;const s=n.byteOffset,r=n.byteLength,o=n[F];o!==void 0&&this.freeFixedMemory(s,r,o)}inFixedMemory(n){return this.memory?(X.call(n),n[w].buffer===this.memory.buffer):!1}copyBytes(n,s,r){const{memory:o}=this,c=new DataView(o.buffer,s,r);Hn(r)(n,c)}findSentinel(n,s){const{memory:r}=this,o=s.byteLength,c=r.buffer.byteLength-o+1;for(let i=n;i<c;i+=o){const a=new DataView(r.buffer,i,o);let l=!0;for(let u=0;u<o;u++){const f=a.getUint8(u),p=s.getUint8(u);if(f!==p){l=!1;break}}if(l)return(i-n)/o}}captureString(n,s){const{buffer:r}=this.memory,o=new Uint8Array(r,n,s);return Dt(o)}getTargetAddress(n,s){return this.inFixedMemory(n)?this.getViewAddress(n[w]):n[w].byteLength===0?0:!1}clearExchangeTable(){this.nextValueIndex!==1&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(n){if(n){let s=this.valueIndices.get(n);return s===void 0&&(s=this.nextValueIndex++,this.valueIndices.set(n,s),this.valueTable[s]=n),s}else return 0}fromWebAssembly(n,s){switch(n){case"v":case"s":return this.valueTable[s];case"i":return s;case"b":return!!s}}toWebAssembly(n,s){switch(n){case"v":case"s":return this.getObjectIndex(s);case"i":return s;case"b":return s?1:0}}exportFunction(n,s="",r=""){return n?(...o)=>{o=o.map((i,a)=>this.fromWebAssembly(s.charAt(a),i));const c=n.apply(this,o);return this.toWebAssembly(r,c)}:()=>{}}importFunction(n,s="",r=""){let o=!1;return s.startsWith("c")&&(o=!0,s=s.slice(1)),(...c)=>{c=c.map((a,l)=>this.toWebAssembly(s.charAt(l),a)),o&&(c=[this.context.call,...c]);const i=n.apply(this,c);return this.fromWebAssembly(r,i)}}exportFunctions(){const n={};for(const[s,{argType:r,returnType:o,alias:c}]of Object.entries(this.exports)){const i=this[c??s];n[`_${s}`]=this.exportFunction(i,r,o)}return n}importFunctions(n){for(const[s,r]of Object.entries(n)){const o=this.imports[s];if(o){const{argType:c,returnType:i}=o;this[s]=this.importFunction(r,c,i)}}}async instantiateWebAssembly(n){const s=await n;this.hasCodeSource=!0;const r={env:this.exportFunctions(),wasi_snapshot_preview1:this.getWASIImport()};return s[Symbol.toStringTag]==="Response"?WebAssembly.instantiateStreaming(s,r):WebAssembly.instantiate(s,r)}loadModule(n){return this.initPromise=(async()=>{var c,i;const{instance:s}=await this.instantiateWebAssembly(n),{memory:r,_initialize:o}=s.exports;this.importFunctions(s.exports),this.trackInstance(s),(i=(c=this.customWASI)==null?void 0:c.initialize)==null||i.call(c,s),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=r,o==null||o()})()}trackInstance(n){const s=new WeakRef(n);Object.defineProperty(this,"released",{get:()=>!s.deref(),enumerable:!0})}linkVariables(n){this.initPromise&&(this.initPromise=this.initPromise.then(()=>super.linkVariables(n)))}getMemoryOffset(n){return n}recreateAddress(n){return n}startCall(n,s){this.startContext(),this.context.call=n,s[R]&&this.updatePointerAddresses(s);const r=this.getShadowAddress(s);return this.updateShadows(),r}endCall(n,s){this.updateShadowTargets(),s[R]&&this.acquirePointerTargets(s),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&this.flushConsole()}async runThunk(n,s){return await this.initPromise,this.runThunk(n,s)}invokeThunk(n,s){try{const r=this.runThunk(n,s);if(r){if(r[Symbol.toStringTag]==="Promise")return r.then(o=>(o&&this.handleError(o),s.retval),o=>{this.handleError(o)});throw r}return s.retval}catch(r){this.handleError(r)}}handleError(n){if(typeof n=="string")throw new Un(n);if(n instanceof xn&&n.code===0)return;throw n}getWASIImport(){if(this.customWASI)return this.customWASI.wasiImport;{const s=()=>38;return{args_get:s,args_sizes_get:s,clock_res_get:s,clock_time_get:s,environ_get:s,environ_sizes_get:s,fd_advise:s,fd_allocate:s,fd_close:s,fd_datasync:s,fd_pread:s,fd_pwrite:s,fd_read:s,fd_readdir:s,fd_renumber:s,fd_seek:s,fd_sync:s,fd_tell:s,fd_write:(r,o,c,i)=>{if(r===1||r===2){const a=new DataView(this.memory.buffer);let l=0;for(let u=0,f=o;u<c;u++,f+=8){const p=a.getUint32(f,!0),m=a.getUint32(f+4,!0),d=new DataView(this.memory.buffer,p,m);this.writeToConsole(d),l+=m}return a.setUint32(i,l,!0),0}else return 38},fd_fdstat_get:s,fd_fdstat_set_flags:s,fd_fdstat_set_rights:s,fd_filestat_get:s,fd_filestat_set_size:s,fd_filestat_set_times:s,fd_prestat_get:s,fd_prestat_dir_name:s,path_create_directory:s,path_filestat_get:s,path_filestat_set_times:s,path_link:s,path_open:s,path_readlink:s,path_remove_directory:s,path_rename:s,path_symlink:s,path_unlink_file:s,poll_oneoff:s,proc_exit:r=>{throw new xn(r)},random_get:(r,o)=>{const c=new DataView(this.memory.buffer,r,o);for(let i=0;i<o;i++)c.setUint8(i,Math.floor(256*Math.random()));return 0},sched_yield:s,sock_accept:s,sock_recv:s,sock_send:s,sock_shutdown:s}}}}function sc(t){return new nc}Ni();Wo();ts();Ui();Ki();qo();Go();Lo();Li();Yi();Ji();Gi();Vo();Bo();Wi();qi();Bi();const V={constructor:null,typedArray:null,type:0,name:void 0,byteSize:0,align:0,isConst:!1,isTuple:!1,hasPointer:!1,instance:{members:[],methods:[],template:null},static:{members:[],methods:[],template:null}},b={type:0,isRequired:!1},D={},U={},me={},he={},pe={},de={},_={},be={},ge={},It={},Se={},se={},we={},ve={},at={},Oe={},Ae={},Ye={},qt={},Ee={},Mt={},L={},nt={},Nt={},re={},He={},Vt={},Wt={},ze={},Gt={},Te={},Kt={},Jt={},zt={},Xe={},Ze={},Tt={},Qe={},tn={},en={},vs={},nn={},sn={},rn={},Os={},on={},As={},cn={},Es={},zs={},an={},ln={},Ts={},un={},xs={},fn={},Is={},Vs={},yn={},mn={},Ps={},Yt={},Ms={},$s={},hn={},pn={},ks={},dn={},Cs={},js={},Ds={},_s={},Fs={},Rs={},Ns={},Us={},Ls={},Bs={},qs={},Ws={},Gs={},Ks={},Js={},Ys={},Hs={},xe={},Xs={},Zs={},bn={},Qs={},gn={},tr={},er={},nr={},sr={},rr={},or={},ir={},cr={},ar={},Sn={},lr={},ur={},fr={},yr={},mr={},hr={},pr={},dr={},br={},gr={},Sr={},wr={},vr={},Or={},Ar={},Er={},zr={},Tr={},xr={},Ir={},Vr={},Pr={},A=t=>new Uint8Array(t),rc=A(),oc=A(),ic=A([1]),cc=A(),ac=A([32]),lc=A(),uc=A([8]),fc=A(),yc=A(),mc=A([1]),hc=A(),pc=A([0,2]),dc=A(),bc=A([56]),gc=A(),Sc=A(),wc=A(),vc=A([4]),Oc=A(),Ac=A(),Ec=A(),zc=A([240,3,0,1]),Tc=A([99,111,109,46,103,114,101,121,98,111,120,119,97,114,101,46,97,115,99,105,105,109,105,105,0]),xc=A([9,4,0,1]),Ic=A([82,105,99,104,97,114,100,32,90,117,114,97,100,0]),Vc=A(),Pc=A([1]),Mc=A([23,4,0,1]),$c=A([70,105,108,116,101,114,32,116,111,32,109,105,109,105,99,32,116,104,101,32,84,69,88,84,112,32,101,102,102,101,99,116,32,102,114,111,109,32,89,111,117,84,117,98,101,39,115,32,50,48,49,48,32,65,112,114,105,108,32,70,111,111,108,115,32,106,111,107,101,0]),kc=A(),Cc=A(),jc=A(),Dc=A(1),_c=A([1]),Mr=A(24),Fc=A(),Rc=A(),Nc=A(),Uc=A(),Lc=A([4]),Ht=A(48),$r=A(24),Bc=A(),qc=A(),Wc=A(),Gc=A(),Kc=A([4]),wn=A(24),Jc=A([8,0,0,0,56,0,0,0]),Yc=A([2,0]),Hc=A([2,0]),Xc=A(),Zc=A(),Qc=A(),ta=A(),y=Object.assign;y(vs,{slots:{0:nn,1:rn,2:on,3:cn}});y(nn,{structure:D,memory:{array:rc},const:!0,slots:{0:sn}});y(sn,{structure:It});y(rn,{structure:_,memory:{array:oc},const:!0,slots:{0:Os}});y(Os,{structure:U,memory:{array:ic},const:!0});y(on,{structure:_,memory:{array:cc},const:!0,slots:{0:As}});y(As,{structure:U,memory:{array:ac},const:!0});y(cn,{structure:_,memory:{array:lc},const:!0,slots:{0:Es}});y(Es,{structure:U,memory:{array:uc},const:!0});y(zs,{slots:{0:an,1:ln,2:un,3:fn}});y(an,{structure:D,memory:{array:fc},const:!0,slots:{0:sn}});y(ln,{structure:_,memory:{array:yc},const:!0,slots:{0:Ts}});y(Ts,{structure:U,memory:{array:mc},const:!0});y(un,{structure:_,memory:{array:hc},const:!0,slots:{0:xs}});y(xs,{structure:se,memory:{array:pc},const:!0});y(fn,{structure:_,memory:{array:dc},const:!0,slots:{0:Is}});y(Is,{structure:U,memory:{array:bc},const:!0});y(Vs,{slots:{0:yn,1:mn}});y(yn,{structure:Se,memory:{array:gc},const:!0,slots:{0:nn,1:rn,2:on,3:cn}});y(mn,{structure:we,memory:{array:Sc},const:!0,slots:{0:an,1:ln,2:un,3:fn}});y(Ps,{slots:{0:Yt}});y(Yt,{structure:_,memory:{array:wc},const:!0,slots:{0:Ms}});y(Ms,{structure:U,memory:{array:vc},const:!0});y($s,{slots:{0:hn,1:pn}});y(hn,{structure:at,memory:{array:Oc},const:!0,slots:{0:Yt}});y(pn,{structure:at,memory:{array:Ac},const:!0,slots:{0:Yt}});y(ks,{slots:{0:dn}});y(dn,{structure:at,memory:{array:Ec},const:!0,slots:{0:Yt}});y(Cs,{slots:{0:js,1:_s,2:Rs,3:Us,4:Bs,5:qs,6:Ws}});y(js,{structure:he,memory:{array:zc},const:!0,slots:{0:Ds}});y(Ds,{structure:me,memory:{array:Tc},reloc:16778224});y(_s,{structure:de,memory:{array:xc},const:!0,slots:{0:Fs}});y(Fs,{structure:pe,memory:{array:Ic},reloc:16778249});y(Rs,{structure:_,memory:{array:Vc},const:!0,slots:{0:Ns}});y(Ns,{structure:U,memory:{array:Pc},const:!0});y(Us,{structure:ge,memory:{array:Mc},const:!0,slots:{0:Ls}});y(Ls,{structure:be,memory:{array:$c},reloc:16778263});y(Bs,{structure:ve,memory:{array:kc},const:!0,slots:{0:yn,1:mn}});y(qs,{structure:Oe,memory:{array:Cc},const:!0,slots:{0:hn,1:pn}});y(Ws,{structure:Ae,memory:{array:jc},const:!0,slots:{0:dn}});y(Gs,{slots:{0:Ks,1:Js}});y(Ks,{structure:nt,memory:{array:Dc},const:!0});y(Js,{structure:nt,memory:{array:_c},const:!0});y(Ys,{memory:{array:Mr},slots:{0:Hs}});y(Hs,{structure:Mt,memory:{array:Mr,offset:0,length:8},slots:{0:xe}});y(xe,{structure:Ee,memory:{array:Fc},reloc:0});y(Xs,{slots:{0:Zs,1:Qs,2:tr}});y(Zs,{structure:D,memory:{array:Rc},const:!0,slots:{0:bn}});y(bn,{structure:qt});y(Qs,{structure:D,memory:{array:Nc},const:!0,slots:{0:gn}});y(gn,{structure:He});y(tr,{structure:_,memory:{array:Uc},const:!0,slots:{0:er}});y(er,{structure:U,memory:{array:Lc},const:!0});y(nr,{memory:{array:Ht},slots:{0:sr,1:or}});y(sr,{structure:Vt,memory:{array:Ht,offset:0,length:24},slots:{0:rr}});y(rr,{structure:Mt,memory:{array:Ht,offset:0,length:8},slots:{0:xe}});y(or,{structure:Vt,memory:{array:Ht,offset:24,length:24},slots:{0:ir}});y(ir,{structure:Mt,memory:{array:Ht,offset:24,length:8},slots:{0:xe}});y(cr,{memory:{array:$r},slots:{0:ar}});y(ar,{structure:Gt,memory:{array:$r,offset:0,length:8},slots:{0:Sn}});y(Sn,{structure:ze,memory:{array:Bc},reloc:0});y(lr,{slots:{0:ur,1:fr,2:yr}});y(ur,{structure:D,memory:{array:qc},const:!0,slots:{0:bn}});y(fr,{structure:D,memory:{array:Wc},const:!0,slots:{0:gn}});y(yr,{structure:_,memory:{array:Gc},const:!0,slots:{0:mr}});y(mr,{structure:U,memory:{array:Kc},const:!0});y(hr,{memory:{array:wn},slots:{0:pr}});y(pr,{structure:Te,memory:{array:wn},slots:{0:dr}});y(dr,{structure:Gt,memory:{array:wn,offset:0,length:8},slots:{0:Sn}});y(br,{memory:{array:Jc}});y(gr,{slots:{0:Sr}});y(Sr,{structure:zt,memory:{array:Yc},const:!0});y(wr,{slots:{0:vr}});y(vr,{structure:Tt,memory:{array:Hc},const:!0});y(Or,{slots:{0:Ar,1:zr,2:xr,3:Vr}});y(Ar,{structure:D,memory:{array:Xc},const:!0,slots:{0:Er}});y(Er,{structure:Ye});y(zr,{structure:D,memory:{array:Zc},const:!0,slots:{0:Tr}});y(Tr,{structure:Wt});y(xr,{structure:D,memory:{array:Qc},const:!0,slots:{0:Ir}});y(Ir,{structure:Kt});y(Vr,{structure:D,memory:{array:ta},const:!0,slots:{0:Pr}});y(Pr,{structure:Jt});const ea={argStruct:Ze,thunkId:2,name:"createOutput"},na={argStruct:tn,thunkId:3,name:"createPartialOutput"};y(D,{...V,name:"type",align:1,instance:{members:[{...b,type:6,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:D}],methods:[]}});y(U,{...V,name:"u8",byteSize:1,align:1,instance:{members:[{...b,type:3,bitOffset:0,bitSize:8,byteSize:1,structure:U}],methods:[]}});y(me,{...V,type:1,name:"[24:0]u8",length:24,byteSize:25,align:1,instance:{members:[{...b,type:3,bitSize:8,byteSize:1,structure:U}],methods:[]}});y(he,{...V,type:13,name:"*const [24:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...b,type:5,bitSize:32,byteSize:4,slot:0,structure:me}],methods:[]}});y(pe,{...V,type:1,name:"[13:0]u8",length:13,byteSize:14,align:1,instance:{members:[{...b,type:3,bitSize:8,byteSize:1,structure:U}],methods:[]}});y(de,{...V,type:13,name:"*const [13:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...b,type:5,bitSize:32,byteSize:4,slot:0,structure:pe}],methods:[]}});y(_,{...V,name:"comptime_int",align:1,instance:{members:[{...b,type:7,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:_}],methods:[]}});y(be,{...V,type:1,name:"[69:0]u8",length:69,byteSize:70,align:1,instance:{members:[{...b,type:3,bitSize:8,byteSize:1,structure:U}],methods:[]}});y(ge,{...V,type:13,name:"*const [69:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...b,type:5,bitSize:32,byteSize:4,slot:0,structure:be}],methods:[]}});y(It,{...V,name:"i32",byteSize:4,align:4,instance:{members:[{...b,type:2,bitOffset:0,bitSize:32,byteSize:4,structure:It}],methods:[]}});y(Se,{...V,type:2,name:"Struct0020",align:1,instance:{members:[{...b,type:7,slot:0,name:"type",structure:D},{...b,type:7,slot:1,name:"minValue",structure:_},{...b,type:7,slot:2,name:"maxValue",structure:_},{...b,type:7,slot:3,name:"defaultValue",structure:_}],methods:[],template:vs}});y(se,{...V,name:"u16",byteSize:2,align:2,instance:{members:[{...b,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:se}],methods:[]}});y(we,{...V,type:2,name:"Struct0022",align:1,instance:{members:[{...b,type:7,slot:0,name:"type",structure:D},{...b,type:7,slot:1,name:"minValue",structure:_},{...b,type:7,slot:2,name:"maxValue",structure:_},{...b,type:7,slot:3,name:"defaultValue",structure:_}],methods:[],template:zs}});y(ve,{...V,type:2,name:"Struct0019",align:1,instance:{members:[{...b,type:7,slot:0,name:"size",structure:Se},{...b,type:7,slot:1,name:"charCount",structure:we}],methods:[],template:Vs}});y(at,{...V,type:2,name:"Struct0027",align:1,instance:{members:[{...b,type:7,slot:0,name:"channels",structure:_}],methods:[],template:Ps}});y(Oe,{...V,type:2,name:"Struct0026",align:1,instance:{members:[{...b,type:7,slot:0,name:"src",structure:at},{...b,type:7,slot:1,name:"text",structure:at}],methods:[],template:$s}});y(Ae,{...V,type:2,name:"Struct0029",align:1,instance:{members:[{...b,type:7,slot:0,name:"dst",structure:at}],methods:[],template:ks}});y(Ye,{...V,type:2,name:"asciimii.kernel",align:1,static:{members:[{...b,type:7,slot:0,name:"namespace",structure:he},{...b,type:7,slot:1,name:"vendor",structure:de},{...b,type:7,slot:2,name:"version",structure:_},{...b,type:7,slot:3,name:"description",structure:ge},{...b,type:7,slot:4,name:"parameters",structure:ve},{...b,type:7,slot:5,name:"inputImages",structure:Oe},{...b,type:7,slot:6,name:"outputImages",structure:Ae}],methods:[],template:Cs}});y(qt,{...V,type:15,name:"@Vector(4, u8)",length:4,byteSize:4,align:4,instance:{members:[{...b,type:3,bitSize:8,byteSize:1,structure:U}],methods:[]}});y(Ee,{...V,type:14,name:"[_]const @Vector(4, u8)",byteSize:4,align:4,instance:{members:[{...b,type:5,bitSize:32,byteSize:4,structure:qt}],methods:[]}});y(Mt,{...V,type:13,name:"[]const @Vector(4, u8)",byteSize:8,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...b,type:5,bitSize:64,byteSize:8,slot:0,structure:Ee}],methods:[]}});y(L,{...V,name:"u32",byteSize:4,align:4,instance:{members:[{...b,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:L}],methods:[]}});y(nt,{...V,type:11,name:"asciimii.ColorSpace",byteSize:1,align:1,instance:{members:[{...b,type:3,bitOffset:0,bitSize:1,byteSize:1,structure:nt}],methods:[]},static:{members:[{...b,type:7,slot:0,name:"srgb",structure:nt},{...b,type:7,slot:1,name:"display-p3",structure:nt}],methods:[],template:Gs}});y(Nt,{...V,name:"usize",byteSize:4,align:4,instance:{members:[{...b,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:Nt}],methods:[]}});y(re,{...V,name:"f32",byteSize:4,align:4,instance:{members:[{...b,type:4,bitOffset:0,bitSize:32,byteSize:4,structure:re}],methods:[]}});y(He,{...V,type:15,name:"@Vector(4, f32)",length:4,byteSize:16,align:16,instance:{members:[{...b,type:4,bitSize:32,byteSize:4,structure:re}],methods:[]}});y(Vt,{...V,type:2,name:"asciimii.Image(u8,4,false)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...b,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:Mt},{...b,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:L},{...b,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:L},{...b,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:nt},{...b,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Nt}],methods:[],template:Ys},static:{members:[{...b,type:7,slot:0,name:"Pixel",structure:D},{...b,type:7,slot:1,name:"FPixel",structure:D},{...b,type:7,slot:2,name:"channels",structure:_}],methods:[],template:Xs}});y(Wt,{...V,type:2,name:"asciimii.KernelInput(u8,asciimii.kernel)",byteSize:48,align:4,hasPointer:!0,instance:{members:[{...b,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"src",structure:Vt},{...b,type:5,bitOffset:192,bitSize:192,byteSize:24,slot:1,name:"text",structure:Vt}],methods:[],template:nr}});y(ze,{...V,type:14,name:"[_]@Vector(4, u8)",byteSize:4,align:4,instance:{members:[{...b,type:5,bitSize:32,byteSize:4,structure:qt}],methods:[]}});y(Gt,{...V,type:13,name:"[]@Vector(4, u8)",byteSize:8,align:4,hasPointer:!0,instance:{members:[{...b,type:5,bitSize:64,byteSize:8,slot:0,structure:ze}],methods:[]}});y(Te,{...V,type:2,name:"asciimii.Image(u8,4,true)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...b,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:Gt},{...b,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:L},{...b,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:L},{...b,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:nt},{...b,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Nt}],methods:[],template:cr},static:{members:[{...b,type:7,slot:0,name:"Pixel",structure:D},{...b,type:7,slot:1,name:"FPixel",structure:D},{...b,type:7,slot:2,name:"channels",structure:_}],methods:[],template:lr}});y(Kt,{...V,type:2,name:"asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...b,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"dst",structure:Te}],methods:[],template:hr}});y(Jt,{...V,type:2,name:"asciimii.KernelParameters(asciimii.kernel)",byteSize:8,align:4,instance:{members:[{...b,type:2,bitOffset:0,bitSize:32,byteSize:4,slot:0,name:"size",structure:It},{...b,type:2,bitOffset:32,bitSize:32,byteSize:4,slot:1,name:"charCount",structure:It}],methods:[],template:br}});y(zt,{...V,type:10,name:"ErrorSet0045",byteSize:2,align:2,instance:{members:[{...b,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:zt}],methods:[]},static:{members:[{...b,type:7,slot:0,name:"OutOfMemory",structure:zt}],methods:[],template:gr}});y(Xe,{...V,type:9,name:"ErrorSet0045!asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...b,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:Kt},{...b,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:zt}],methods:[]}});y(Ze,{...V,type:5,name:"Arg0050",byteSize:92,align:4,hasPointer:!0,instance:{members:[{...b,type:3,isRequired:!0,bitOffset:0,bitSize:32,byteSize:4,slot:0,name:"0",structure:L},{...b,type:3,isRequired:!0,bitOffset:32,bitSize:32,byteSize:4,slot:1,name:"1",structure:L},{...b,type:5,isRequired:!0,bitOffset:64,bitSize:384,byteSize:48,slot:2,name:"2",structure:Wt},{...b,type:5,isRequired:!0,bitOffset:448,bitSize:64,byteSize:8,slot:3,name:"3",structure:Jt},{...b,type:5,isRequired:!0,bitOffset:512,bitSize:224,byteSize:28,slot:4,name:"retval",structure:Xe}],methods:[]}});y(Tt,{...V,type:10,name:"ErrorSet0047",byteSize:2,align:2,instance:{members:[{...b,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:Tt}],methods:[]},static:{members:[{...b,type:7,slot:0,name:"OutOfMemory",structure:Tt}],methods:[],template:wr}});y(Qe,{...V,type:9,name:"ErrorSet0047!asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...b,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:Kt},{...b,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:Tt}],methods:[]}});y(tn,{...V,type:5,name:"Arg0051",byteSize:100,align:4,hasPointer:!0,instance:{members:[{...b,type:3,isRequired:!0,bitOffset:0,bitSize:32,byteSize:4,slot:0,name:"0",structure:L},{...b,type:3,isRequired:!0,bitOffset:32,bitSize:32,byteSize:4,slot:1,name:"1",structure:L},{...b,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:2,name:"2",structure:L},{...b,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:3,name:"3",structure:L},{...b,type:5,isRequired:!0,bitOffset:128,bitSize:384,byteSize:48,slot:4,name:"4",structure:Wt},{...b,type:5,isRequired:!0,bitOffset:512,bitSize:64,byteSize:8,slot:5,name:"5",structure:Jt},{...b,type:5,isRequired:!0,bitOffset:576,bitSize:224,byteSize:28,slot:6,name:"retval",structure:Qe}],methods:[]}});y(en,{...V,type:2,name:"asciimii",align:1,static:{members:[{...b,type:7,slot:0,name:"kernel",structure:D},{...b,type:7,slot:1,name:"Input",structure:D},{...b,type:7,slot:2,name:"Output",structure:D},{...b,type:7,slot:3,name:"Parameters",structure:D}],methods:[ea,na],template:Or}});const sa=[D,U,me,he,pe,de,_,be,ge,It,Se,se,we,ve,at,Oe,Ae,Ye,qt,Ee,Mt,L,nt,Nt,re,He,Vt,Wt,ze,Gt,Te,Kt,Jt,zt,Xe,Ze,Tt,Qe,tn,en],ra=en,oa={runtimeSafety:!1,littleEndian:!0},Ie=sc();Ie.getSpecialExports();Ie.recreateStructures(sa,oa);const ia=(async()=>{const t=new URL("asciimii-b1dd8105.wasm",import.meta.url).href;return fetch(t)})();Ie.loadModule(ia);Ie.linkVariables(!0);const{constructor:ca}=ra,{createPartialOutput:aa,Input:la,kernel:De}=ca;function ua(t,e,n,s,r={},o={}){const c=[];for(const[m]of De.inputImages)c.push(m);const i=[];for(const[m]of De.outputImages)i.push(m);if(Array.isArray(r)){const m=r;r={};for(const[d,h]of c.entries())r[h]=m[d]}const a=new la(void 0),l=[];let u;for(const m of c){let d=r[m];if(d||(c.length===1&&["data","width","height"].every(h=>!!r[h])?d=r:l.push(m)),a[m]=d,u){if(d.colorSpace!==u)throw new Error(`Input images must all use the same color space: ${u}`)}else u=d.colorSpace}if(l.length>0)throw new Error(`Missing input image${l.length>1?"s":""}: ${l.join(", ")}`);const f=aa(t,e,n,s,a,o),p=m=>{const d={};for(const h of i){const{data:{typedArray:g},width:S,height:v}=m[h];let O;if(typeof ImageData=="function"){const j=new Uint8ClampedArray(g.buffer,g.byteOffset,g.byteLength);O=new ImageData(j,S,s,{colorSpace:u})}else O={data:g,width:S,height:v};if(i.length===1)return O;d[h]=O}return d};return f[Symbol.toStringTag]==="Promise"?f.then(p):p(f)}function fa(){const t={};for(let[e,n]of De){if(e==="parameters"){const s={};for(const[r,o]of n){const c=s[r]={};for(let[i,a]of o)typeof a=="object"?a=a.string??a.valueOf():typeof a=="function"&&(a=ya(a.name)),c[i]=a}n=s}else typeof n=="object"&&(n=n.string??n.valueOf());t[e]=n}return t}function ya(t){return{bool:"bool","@Vector(2, bool)":"bool2","@Vector(3, bool)":"bool3","@Vector(4, bool)":"bool4",i32:"int","@Vector(2, i32)":"int2","@Vector(3, i32)":"int3","@Vector(4, i32)":"int4",f32:"float","@Vector(2, f32)":"float2","@Vector(3, f32)":"float3","@Vector(4, f32)":"float4","[2]@Vector(2, f32)":"float2x2","[3]@Vector(3, f32)":"float3x3","[4]@Vector(4, f32)":"float4x4"}[t]}onmessage=async t=>{if(!Array.isArray(t.data))return;const[e,n,...s]=t.data;try{const[r,o]=await ma(e,s);postMessage([e,n,r],{transfer:o})}catch(r){postMessage(["error",n,r])}};async function ma(t,e){switch(t){case"getKernelInfo":return[fa(...e)];case"createPartialImageData":const s=await ua(...e),r=[];if("data"in s&&"width"in s&&"height"in s)r.push(s.data.buffer);else for(const o of Object.entries(s))r.push(s.data.buffer);return[s,r];default:throw new Error(`Unknown function: ${t}`)}}postMessage("ready");
