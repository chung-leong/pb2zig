var Zr=Object.defineProperty;var Qr=(e,t,n)=>t in e?Zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var D=(e,t,n)=>(Qr(e,typeof t!="symbol"?t+"":t,n),n);const I={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Comptime:7,Static:8,Literal:9,Null:10,Undefined:11,Unsupported:12},A={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,VariadicStruct:6,ExternUnion:7,BareUnion:8,TaggedUnion:9,ErrorUnion:10,ErrorSet:11,Enum:12,Optional:13,SinglePointer:14,SlicePointer:15,MultiPointer:16,CPointer:17,Slice:18,Vector:19,Opaque:20,Function:21},Je={Normal:0,Scratch:1};function nn(e){const{type:t,bitSize:n,byteSize:s}=e;if(t===I.Int)return`${n<=32?"":"Big"}Int${n}`;if(t===I.Uint)return`${n<=32?"":"Big"}Uint${n}`;if(t===I.Float)return`Float${n}`;if(t===I.Bool)return`Bool${s!==void 0?s*8:1}`;if(t===I.Void)return"Null"}function to(e){for(const[t,n]of Object.entries(A))if(n===e)return t.replace(/\B[A-Z]/g,s=>` ${s}`).toLowerCase()}function eo(e){const{type:t,bitSize:n}=e,s=t===I.Int;let r=s?n-1:n;if(n<=32){const o=2**r-1;return{min:s?-(2**r):0,max:o}}else{r=BigInt(r);const o=2n**r-1n;return{min:s?-(2n**r):0n,max:o}}}function ts({type:e,bitSize:t}){if(e===I.Int||e===I.Uint)return t<=32?Number:BigInt;if(e===I.Float)return Number;if(e===I.Bool)return Boolean}function es(e){const t=ts(e);if(t)return typeof t(0)}function Nn(e){switch(e){case A.SinglePointer:case A.SlicePointer:case A.MultiPointer:case A.CPointer:return!0;default:return!1}}function no(e){return e===A.Array||e===A.Vector||e===A.Slice}function ns({bitOffset:e,bitSize:t,byteSize:n}){return n!==void 0||!(e&7)&&!(t&7)||t===0}function Yt(e){return typeof e=="object"&&typeof e.error=="string"&&Object.keys(e).length===1}class so extends ReferenceError{constructor(t){super(`Invalid memory deallocation: @${t.toString(16)}`)}}class ro extends TypeError{constructor(t){const{name:n}=t;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class ss extends TypeError{constructor(t,n,s=null){const{name:r,type:o,byteSize:i}=t,c=n.byteLength,a=i!==1?"s":"";let l;if(o===A.Slice&&!s)l=`${r} has elements that are ${i} byte${a} in length, received ${c}`;else{const u=o===A.Slice?s.length*i:i;l=`${r} has ${u} byte${a}, received ${c}`}super(l)}}class oo extends TypeError{constructor(t){const{type:n,byteSize:s,typedArray:r}=t,o=s!==1?"s":"",i=["ArrayBuffer","DataView"].map(dt);r&&i.push(dt(r.name));let c;n===A.Slice?c=`Expecting ${He(i)} that can accommodate items ${s} byte${o} in length`:c=`Expecting ${He(i)} that is ${s} byte${o} in length`,super(c)}}class io extends TypeError{constructor(t,n){const{name:s}=t;let r;typeof n=="number"||typeof n=="bigint"?r=`Value given does not correspond to an item of enum ${s}: ${n}`:r=`Enum item of the type ${s} expected, received ${n}`,super(r)}}class co extends TypeError{constructor(t,n){const{name:s}=t,r=typeof n;let o;r==="string"||r==="number"||Yt(n)?(Yt(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),o=`Error ${r} does not corresponds to any error in error set ${s}: ${n}`):o=`Error of the type ${s} expected, received ${n}`,super(o)}}class rs extends TypeError{constructor(t){const{name:n}=t;super(`Error given is not a part of error set ${n}`)}}class zt extends TypeError{constructor(t,n,s){const{name:r}=t,o=[];if(Array.isArray(n))for(const c of n)o.push(dt(c));else o.push(dt(n));const i=cs(s);super(`${r} expects ${He(o)} as argument, received ${i}`)}}class Tt extends zt{constructor(t,n,s=!1){var l;const{instance:{members:[r]},type:o,typedArray:i}=t,c=[],a=es(r);if(a){let u;switch((l=r.structure)==null?void 0:l.type){case A.Enum:u="enum item";break;case A.ErrorSet:u="error";break;default:u=a}c.push(`array of ${u}s`)}else c.push("array of objects");i&&c.push(i.name),o===A.Slice&&s&&c.push("length"),super(t,c.join(" or "),n)}}class ge extends TypeError{constructor(t,n,s){const{name:r,length:o,instance:{members:[i]}}=t,{structure:{constructor:c}}=i,{length:a,constructor:l}=s,u=(n==null?void 0:n.length)??o,f=u!==1?"s":"";let p;l===c?p="only a single one":l.child===c?p=`a slice/array that has ${a}`:p=`${a} initializer${a>1?"s":""}`,super(`${r} has ${u} element${f}, received ${p}`)}}class Bn extends TypeError{constructor(t,n){t<0?super("Length of slice cannot be negative"):super(`Length of slice can be ${n} or less, received ${t}`)}}class ao extends TypeError{constructor(t,n){const{name:s}=t;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class lo extends TypeError{constructor(t,n){const{name:s,instance:{members:r}}=t,o=r.find(c=>c.name===n);let i;o?i=`Comptime value cannot be changed: ${n}`:i=`${s} does not have a property with that name: ${n}`,super(i)}}class uo extends Error{constructor(t,n,s){const r=n!==1?"s":"";super(`${t}() expects ${n} argument${r}, received ${s}`)}}class fo extends TypeError{constructor(t){super("Non-slice pointers can only be created with the help of the new operator")}}class yo extends TypeError{constructor(t,n){const{name:s}=t,{constructor:{name:r}}=n;super(`Conversion of ${r} to ${s} requires an explicit cast`)}}class Ln extends TypeError{constructor(t,n,s,r){const{name:o}=t;super(`${o} expects the sentinel value ${n} at ${r-1}, found at ${s}`)}}class ue extends TypeError{constructor(t,n,s){const{name:r}=t;super(`${r} expects the sentinel value ${n} at ${s-1}`)}}class ho extends TypeError{constructor(t,n){super(`Unable to simultaneously align memory to ${n}-byte and ${t}-byte boundary`)}}class we extends TypeError{constructor(t,n){const s=cs(n);super(`Expected ${dt(t)}, received ${s}`)}}class mo extends TypeError{constructor(){super("Null pointer")}}class po extends TypeError{constructor(t,n){const{name:s}=t;let r;if(n!=null){const o=typeof n,i=o==="object"&&n.constructor!==Object?`${n.constructor.name} object`:o;r=`${as(i)} ${i}`}else r=n+"";super(`${s} cannot point to ${r}`)}}class bo extends TypeError{constructor(t,n){super("Pointers in fixed memory cannot point to garbage-collected object")}}class So extends TypeError{constructor(t,n){const s=nn(t);super(`${s} cannot represent the value given: ${n}`)}}class qn extends RangeError{constructor(t,n){const{name:s}=t;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class go extends TypeError{constructor(t){const{name:n,structure:{name:{struct:s}}}=t;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class wo extends TypeError{constructor(){super("Unable to modify read-only object")}}class vo extends TypeError{constructor(t){const{name:n}=t;super(`${n} cannot point to a read-only object`)}}class os extends Error{constructor(t){super(is(t))}}class Wn extends os{constructor(t){super("Program exited"),this.code=t}}function Oo(e,t,n,s){const r=`args[${t}]`,o=t!==0?"..., ":"",i=t!==n-1?", ...":"",c=o+r+i,a=Object.create(s.constructor.prototype);return a.message=`${e}(${c}): ${s.message}`,a.stack=s.stack,a}function Gn(e,t,n){return n instanceof RangeError&&!(n instanceof qn)&&(n=new qn(e,t)),n}function Rt(){throw new wo}function Ao(e,t){const n=dt(e.typedArray.name),s=dt(t.constructor.name);console.warn(`Implicitly creating ${n} from ${s}`)}function is(e){let t=e.replace(/_/g," ");try{t=t.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,(n,s,r)=>s.length===1?` ${s.toLocaleLowerCase()}${r}`:r?n:` ${s}`).trimStart()}catch{}return t.charAt(0).toLocaleUpperCase()+t.substring(1)}function cs(e){const t=typeof e;let n;return t==="object"?n=e?Object.prototype.toString.call(e):"null":n=t,dt(n)}function dt(e){return`${as(e)} ${e}`}function as(e){return/^\W*[aeiou]/i.test(e)?"an":"a"}function He(e,t="or"){const n=` ${t} `;return e.length>2?e.slice(0,-1).join(", ")+n+e[e.length-1]:e.join(n)}const w=Symbol("memory"),P=Symbol("slots"),sn=Symbol("parent"),j=Symbol("fixed"),ls=Symbol("name"),Q=Symbol("type"),us=Symbol("tuple"),Kt=Symbol("class"),Kn=Symbol("tag"),xt=Symbol("props"),ve=Symbol("getter"),Oe=Symbol("setter"),Wt=Symbol("elementGetter"),Gt=Symbol("elementSetter"),rt=Symbol("targetGetter"),Ye=Symbol("targetSetter"),It=Symbol("entriesGetter"),Xe=Symbol("addressSetter"),Ze=Symbol("lengthSetter"),fs=Symbol("targetUpdater"),fe=Symbol("maxLength"),Ae=Symbol("propSetters"),H=Symbol("memoryRestorer"),tt=Symbol("writeDisabler"),ys=Symbol("allKeys"),ye=Symbol("address"),Et=Symbol("length"),Ee=Symbol("proxy"),Qt=Symbol("compat"),hs=Symbol("cache"),et=Symbol("size"),Eo=Symbol("bitSize"),B=Symbol("align"),rn=Symbol("array"),Vt=Symbol("pointer"),Pt=Symbol("constTarget"),Ge=Symbol("constProxy"),_=Symbol("copier"),Jn=Symbol("resetter"),ot=Symbol("vivificator"),N=Symbol("pointerVisitor"),Jt=Symbol("environment"),To=Symbol("attributes"),ms=Symbol("more"),zo=Symbol("primitive");function St(e){return function(){const t=this[w];this[w]=null,this[P]&&(this[P]={}),e.releaseFixedView(t)}}function Hn(e,t,n){if(e+t<=8){const s=2**t-1;if(n)return function(r,o,i){const a=o.getUint8(i)>>e&s;r.setUint8(0,a)};{const r=255^s<<e;return function(o,i,c){const a=i.getUint8(0),u=o.getUint8(c)&r|(a&s)<<e;o.setUint8(c,u)}}}else{const s=8-e,r=2**s-1;if(n){const i=2**(t%8)-1;return function(c,a,l){let u=l,f=0,p=a.getUint8(u++),m,d=p>>e&r,h=s,b=t;do b>h&&(p=a.getUint8(u++),d=d|p<<h),m=b>=8?d&255:d&i,c.setUint8(f++,m),d>>=8,b-=8;while(b>0)}}else{const i=2**((t-s)%8)-1,c=255^r<<e,a=255^i;return function(l,u,f){let p=0,m=f,d=l.getUint8(m),h,b,v=d&c,O=e,$=t+O;do $>O&&(h=u.getUint8(p++),v=v|h<<O,O+=8),$>=8?b=v&255:(d=l.getUint8(m),b=d&a|v&i),l.setUint8(m++,b),v>>=8,O-=8,$-=8;while($>0)}}}}function nt(e,t=!1){const n=on(e,t);return function(s){var i,c;(i=this[H])==null||i.call(this),(c=s[H])==null||c.call(s);const r=s[w],o=this[w];n(o,r)}}function on(e,t=!1){if(e!==void 0){if(!t){const n=Io[e];if(n)return n}return e&7?e&3?e&1?Vo:Po:Mo:$o}else return xo}function xo(e,t){on(e.byteLength)(e,t)}const Io={1:ko,2:Do,4:Co,8:jo,16:_o,32:Ro};function Vo(e,t){for(let n=0,s=e.byteLength;n<s;n++)e.setInt8(n,t.getInt8(n))}function Po(e,t){for(let n=0,s=e.byteLength;n<s;n+=2)e.setInt16(n,t.getInt16(n,!0),!0)}function Mo(e,t){for(let n=0,s=e.byteLength;n<s;n+=4)e.setInt32(n,t.getInt32(n,!0),!0)}function $o(e,t){for(let n=0,s=e.byteLength;n<s;n+=8)e.setInt32(n,t.getInt32(n,!0),!0),e.setInt32(n+4,t.getInt32(n+4,!0),!0)}function ko(e,t){e.setInt8(0,t.getInt8(0))}function Do(e,t){e.setInt16(0,t.getInt16(0,!0),!0)}function Co(e,t){e.setInt32(0,t.getInt32(0,!0),!0)}function jo(e,t){e.setInt32(0,t.getInt32(0,!0),!0),e.setInt32(4,t.getInt32(4,!0),!0)}function _o(e,t){e.setInt32(0,t.getInt32(0,!0),!0),e.setInt32(4,t.getInt32(4,!0),!0),e.setInt32(8,t.getInt32(8,!0),!0),e.setInt32(12,t.getInt32(12,!0),!0)}function Ro(e,t){e.setInt32(0,t.getInt32(0,!0),!0),e.setInt32(4,t.getInt32(4,!0),!0),e.setInt32(8,t.getInt32(8,!0),!0),e.setInt32(12,t.getInt32(12,!0),!0),e.setInt32(16,t.getInt32(16,!0),!0),e.setInt32(20,t.getInt32(20,!0),!0),e.setInt32(24,t.getInt32(24,!0),!0),e.setInt32(28,t.getInt32(28,!0),!0)}function Fo(e,t){const n=Uo(t);return function(){var r;(r=this[H])==null||r.call(this);const s=this[w];n(s,e,t)}}function Uo(e){const t=No[e];return t||(e&7?e&3?e&1?Bo:Lo:qo:Wo)}const No={1:Go,2:Ko,4:Jo,8:Ho,16:Yo,32:Xo};function Bo(e,t,n){for(let s=t,r=t+n;s<r;s++)e.setInt8(s,0)}function Lo(e,t,n){for(let s=t,r=t+n;s<r;s+=2)e.setInt16(s,0,!0)}function qo(e,t,n){for(let s=t,r=t+n;s<r;s+=4)e.setInt32(s,0,!0)}function Wo(e,t,n){for(let s=t,r=t+n;s<r;s+=8)e.setInt32(s,0,!0),e.setInt32(s+4,0,!0)}function Go(e,t){e.setInt8(t,0)}function Ko(e,t){e.setInt16(t,0,!0)}function Jo(e,t){e.setInt32(t,0,!0)}function Ho(e,t){e.setInt32(t+0,0,!0),e.setInt32(t+4,0,!0)}function Yo(e,t){e.setInt32(t+0,0,!0),e.setInt32(t+4,0,!0),e.setInt32(t+8,0,!0),e.setInt32(t+12,0,!0)}function Xo(e,t){e.setInt32(t+0,0,!0),e.setInt32(t+4,0,!0),e.setInt32(t+8,0,!0),e.setInt32(t+12,0,!0),e.setInt32(t+16,0,!0),e.setInt32(t+20,0,!0),e.setInt32(t+24,0,!0),e.setInt32(t+28,0,!0)}function Xt(e,t){return li(e,t,n=>DataView.prototype[n]?DataView.prototype[n]:Qo(e,t))}const ps={};function Zo(){ps[I.Uint]=ti}function Qo(e,t){const n=ps[t.type];return n(e,t)}function ti(e,t){return ns(t)?ii(e,t):ci(e,t)}function Te(e,t,n){const{type:s,byteSize:r,typedArray:o}=e;let i;const c=t==null?void 0:t[Symbol.toStringTag];if(c==="DataView")i=n.registerView(t);else if(c==="ArrayBuffer"||c==="SharedArrayBuffer")i=n.obtainView(t,0,t.byteLength);else if(o&&c===o.name||c==="Uint8ClampedArray"&&o===Uint8Array)i=n.obtainView(t.buffer,t.byteOffset,t.byteLength);else if(c==="Uint8Array"&&typeof Buffer=="function"&&t instanceof Buffer)i=n.obtainView(t.buffer,t.byteOffset,t.byteLength);else{const a=t==null?void 0:t[w];if(a){const{constructor:l,instance:{members:[u]}}=e;if(t instanceof l)return a;if(no(s)){const{byteSize:f,structure:{constructor:p}}=u,m=bs(t,p);if(m!==void 0){if(s===A.Slice||m*f===r)return a;throw new ge(e,null,t)}}}}return i&&r!==void 0&&ds(i,e),i}function ei(e){if((e==null?void 0:e[Symbol.toStringTag])!=="DataView")throw new we("a DataView",e);return e}function ds(e,t){const{byteSize:n,type:s}=t;if(!(s===A.Slice?e.byteLength%n===0:e.byteLength===n))throw new ss(t,e)}function te(e,t,n,s,r){const{byteSize:o,type:i,sentinel:c}=t,a=o??1;if(this[w]){const l=i===A.Slice?a*this.length:a;if(e.byteLength!==l)throw new ss(t,e,this);const u={[w]:e};c==null||c.validateData(u,this.length),this[_](u)}else{const{shapeDefiner:l}=r;o!==void 0&&ds(e,t);const u=e.byteLength/a,f={[w]:e};c==null||c.validateData(f,u),s&&(n=!0),l.call(this,n?null:e,u,s),n&&this[_](f)}}function bs(e,t){const{constructor:n}=e;if(n===t)return 1;if(n.child===t)return e.length}function ni(e,t,n){const s=Te(e,t,n);if(!s)throw new oo(e);return s}function Mt(e){const{type:t,byteSize:n}=e;if(t===I.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(t===I.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(t===I.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(t===I.Object)return e.structure.typedArray;return null}function si(e,t){const n=e==null?void 0:e[Symbol.toStringTag];return!!t&&n===t.name}function ri(e,t){if(e){const n=t[Qt];if(n){const s=e==null?void 0:e[Symbol.toStringTag];if(n.includes(s))return!0}if(t.child&&bs(e,t.child)!==void 0)return!0}return!1}function ze(e){const{typedArray:t}=e,n=[];return t&&(n.push(t.name),n.push("DataView"),(t===Uint8Array||t===Int8Array)&&(n.push("ArrayBuffer"),n.push("SharedArrayBuffer"),t===Uint8Array&&n.push("Uint8ClampedArray"))),n}function oi(e){const t=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,s=Math.ceil(e/64);return{get:function(r,o){let i=0n;if(o)for(let c=0,a=r+(s-1)*8;c<s;c++,a-=8){const l=t.call(this,a,o);i=i<<64n|l}else for(let c=0,a=r;c<s;c++,a+=8){const l=t.call(this,a,o);i=i<<64n|l}return i},set:function(r,o,i){let c=o;const a=0xFFFFFFFFFFFFFFFFn;if(i)for(let l=0,u=r;l<s;l++,u+=8){const f=c&a;n.call(this,u,f,i),c>>=64n}else{c<<=BigInt(s*64-e);for(let l=0,u=r+(s-1)*8;l<s;l++,u-=8){const f=c&a;n.call(this,u,f,i),c>>=64n}}return c}}}function ii(e,t){const{bitSize:n,byteSize:s}=t;if(n<64){const r=nn({...t,bitSize:s*8}),o=DataView.prototype[`get${r}`],i=DataView.prototype[`set${r}`],c=n<=32?2**n-1:2n**BigInt(n)-1n;return e==="get"?function(a,l){return o.call(this,a,l)&c}:function(a,l,u){const f=l&c;i.call(this,a,f,u)}}else{const{get:r,set:o}=oi(n),i=2n**BigInt(n)-1n;return e==="get"?function(c,a){return r.call(this,c,a)&i}:function(c,a,l){const u=a&i;o.call(this,c,u,l)}}}function ci(e,t){const{bitSize:n,bitOffset:s}=t,r=s&7;if(r+n<=8){const o=DataView.prototype.setUint8,i=DataView.prototype.getUint8,c=2**n-1;if(e==="get")return function(a){return i.call(this,a)>>>r&c};{const a=255^c<<r;return function(l,u){const p=i.call(this,l)&a|(u&c)<<r;o.call(this,l,p)}}}return ai(e,t)}function ai(e,t){const{bitSize:n,bitOffset:s}=t,r=s&7,o=[1,2,4,8].find(c=>c*8>=n)??Math.ceil(n/64)*64,i=new DataView(new ArrayBuffer(o));if(e==="get"){const c=Xt("get",{...t,byteSize:o}),a=Hn(r,n,!0);return function(l,u){return a(i,this,l),c.call(i,0,u)}}else{const c=Xt("set",{...t,byteSize:o}),a=Hn(r,n,!1);return function(l,u,f){c.call(i,0,u,f),a(this,i,l)}}}const Yn={};function li(e,t,n){const{type:s,bitOffset:r,bitSize:o,structure:i}=t,c=r&7,a=nn(t),l=ns(t)?"":`Bit${c}`,u=s===I.Int||s===I.Uint;let f=`${e}${a}${l}`,p=!1,m=f;if(u&&o===64){const h=i==null?void 0:i.name;(h==="usize"||h==="isize")&&(f+="Size",p=!0)}let d=Yn[f];if(!d){if(u&&e==="set"){const h=ts(t),b=n(m);d=function(v,O,$){b.call(this,v,h(O),$)}}else if(p&&e==="get"){const h=n(m),b=BigInt(Number.MIN_SAFE_INTEGER),v=BigInt(Number.MAX_SAFE_INTEGER);d=function(O,$){const z=h.call(this,O,$);return b<=z&&z<=v?Number(z):z}}else d=n(f);d&&d.name!==f&&Object.defineProperty(d,"name",{value:f,configurable:!0,writable:!1}),Yn[f]=d}return d}function ui({type:e}){switch(e){case I.Type:case I.Comptime:case I.Literal:return!0;default:return!1}}const $t={};function fi(){$t[I.Int]=Si}function cn(){$t[I.Uint]=gi}function yi(){$t[I.Float]=wi}function hi(){$t[I.Object]=Ei}function mi(){$t[I.Type]=zi}function pi(){$t[I.Comptime]=xi}const an={};function di(){an[A.Enum]=vi}function bi(){an[A.ErrorSet]=Oi}function G(e,t){const n=$t[e.type];return n(e,t)}function Ss(e,t){const{structure:n}=t,s=an[n==null?void 0:n.type];return s?s(e,n):e}function Si(e,t){const n=gs(t,Xt),s=fn(e,t,n);return Ss(s,e)}function gi(e,t){const n=gs(t,Xt),s=fn(e,t,n);return Ss(s,e)}function gs(e,t){return function(n,s){const{runtimeSafety:r=!0}=e,o=t(n,s);if(r&&n==="set"){const{min:i,max:c}=eo(s);return function(a,l,u){if(l<i||l>c)throw new So(s,l);o.call(this,a,l,u)}}return o}}function wi(e,t){return fn(e,t,Xt)}function vi(e,t){const n=function(s){const{constructor:r}=t,o=r(s);if(!o)throw new io(t,s);return o};return{get:e.get.length===0?function(r){const o=e.get.call(this);return r==="number"?o:n(o)}:function(r){const o=e.get.call(this,r);return n(o)},set:e.set.length===1?function(r,o){o!=="number"&&(r=n(r)[Symbol.toPrimitive]()),e.set.call(this,r)}:function(r,o){const i=n(o);e.set.call(this,r,i[Symbol.toPrimitive]())}}}function Oi(e,t){const n=function(s){const{constructor:r}=t,o=r(s);if(!o)throw s instanceof Error?new rs(t):new co(t,s);return o};return{get:e.get.length===0?function(r){const o=e.get.call(this);return r==="number"?o:n(o)}:function(r){const o=e.get.call(this,r);return n(o)},set:e.set.length===1?function(r,o){if(o!=="number"){const i=n(r);r=Number(i)}e.set.call(this,r)}:function(r,o){const i=n(o);o=Number(i),e.set.call(this,r,o)}}}function ln(e){switch(e==null?void 0:e.type){case A.Primitive:case A.ErrorUnion:case A.Optional:case A.Enum:case A.ErrorSet:return!0;default:return!1}}function ws(e){return(this[P][e]??this[ot](e))[ve]()}function vs(e){return this[P][e]??this[ot](e)}function Ai(e,t){(this[P][e]??this[ot](e))[Oe](t)}function un(e,{get:t,set:n}){return e!==void 0?{get:function(){return t.call(this,e)},set:n?function(s){return n.call(this,e,s)}:void 0}:{get:t,set:n}}function Ei(e,t){const{structure:n,slot:s}=e;return un(s,{get:ln(n)?ws:vs,set:Ai})}function Ti(e){const t=this[P][e];return t==null?void 0:t.constructor}function zi(e,t){const{slot:n}=e;return un(n,{get:Ti})}function xi(e,t){const{slot:n,structure:s}=e;return un(n,{get:ln(s)?ws:vs})}function fn(e,t,n){const{littleEndian:s=!0}=t,{bitOffset:r,byteSize:o}=e,i=n("get",e),c=n("set",e);if(r!==void 0){const a=r>>3;return{get:function(){try{return i.call(this[w],a,s)}catch(u){if(u instanceof TypeError&&this[H]())return i.call(this[w],a,s);throw u}},set:function(u){try{return c.call(this[w],a,u,s)}catch(f){if(f instanceof TypeError&&this[H]())return c.call(this[w],a,u,s);throw f}}}}else return{get:function(l){try{return i.call(this[w],l*o,s)}catch(u){if(u instanceof TypeError&&this[H]())return i.call(this[w],l*o,s);throw Gn(e,l,u)}},set:function(l,u){try{return c.call(this[w],l*o,u,s)}catch(f){if(f instanceof TypeError&&this[H]())return c.call(this[w],l*o,u,s);throw Gn(e,l,f)}}}}function Qe(e,t,n){if(n){const{set:s,get:r,value:o,enumerable:i,configurable:c=!0,writable:a=!0}=n;Object.defineProperty(e,t,r?{get:r,set:s,configurable:c,enumerable:i}:{value:o,configurable:c,enumerable:i,writable:a})}}function X(e,t){for(const[n,s]of Object.entries(t))Qe(e,n,s);for(const n of Object.getOwnPropertySymbols(t)){const s=t[n];Qe(e,n,s)}}function yt(e,t,n,s){const r={};for(const[c,a]of Object.entries(t))a!=null&&a.set&&c!=="$"&&(r[c]=a.set);const{get:o,set:i}=t.$;return X(e.prototype,{[ys]:{value:Object.keys(r)},[Oe]:{value:i},[ve]:{value:o},[Ae]:{value:r},[Pt]:{value:null},[H]:{value:yn(e[hs],s)},...t}),X(e,n),e}function kt(){const e=Object.getOwnPropertyDescriptors(this.constructor.prototype);for(const[t,n]of Object.entries(e))n.set&&(n.set=Rt,Object.defineProperty(this,t,n));Object.defineProperty(this,Oe,{value:Rt}),Object.defineProperty(this,Pt,{value:this})}function ht(e,t,n){const{byteSize:s,align:r,instance:{members:o,template:i}}=e,{modifier:c,initializer:a,finalizer:l,alternateCaster:u,shapeDefiner:f}=t,p=Ii(o);let m;if(i!=null&&i[P]){const b=o.filter(v=>ui(v));b.length>0&&(m=b.map(v=>v.slot))}const d=new Vi,h=function(b,v={}){const{fixed:O=!1}=v,$=this instanceof h;let z,x;if($){if(arguments.length===0)throw new ro(e);z=this,p&&(z[P]={}),f?(a.call(z,b,O),x=z[w]):z[w]=x=n.allocateMemory(s,r,O)}else{if(u&&(z=u.call(this,b,v),z!==!1)||(x=ni(e,b,n),z=d.find(x)))return z;z=Object.create(h.prototype),f?te.call(z,x,e,!1,!1,{shapeDefiner:f}):z[w]=x,p&&(z[P]={})}if(m)for(const W of m)z[P][W]=i[P][W];return c&&c.call(z),$&&(f||a.call(z,b)),l&&(z=l.call(z)),d.save(x,z)};return Qe(h,hs,{value:d}),h}function yn(e,t){return function(){const n=this[w],s=n[j];if(s&&n.buffer.byteLength===0){const r=t.obtainFixedView(s.address,s.len);return s.align&&(r[j].align=s.align),this[w]=r,e==null||e.save(r,this),!0}else return!1}}function ee({source:e}){const t=e[P][0];t&&this[Ye](t)}function gt(e){const{instance:{template:t}}=e;return function(n,s){var f;const r=Object.keys(n),o=this[Ae],i=this[ys];for(const p of r)if(!(p in o))throw new lo(e,p);let c=0,a=0,l=0,u=0;for(const p of i){const m=o[p];m.special?p in n&&u++:(c++,p in n?a++:m.required&&l++)}if(l!==0&&u===0){const p=i.filter(m=>o[m].required&&!(m in n));throw new ao(e,p)}if(u+a>r.length)for(const p of i)p in n&&(r.includes(p)||r.push(p));a<c&&u===0&&t&&(t[w]&&this[_](t),(f=this[N])==null||f.call(this,ee,{vivificate:!0,source:t}));for(const p of r)o[p].call(this,n[p],s);return r.length}}function Ii(e){for(const{type:t}of e)switch(t){case I.Object:case I.Comptime:case I.Type:case I.Literal:return!0}return!1}function Os(){return this}class Vi{constructor(){D(this,"map",new WeakMap)}find(t){return this.map.get(t)}save(t,n){return this.map.set(t,n),n}}const Xn={},Zn={};function Ht(e,t="utf-8"){let n=Xn[t];n||(n=Xn[t]=new TextDecoder(t));let s;if(Array.isArray(e))if(e.length===1)s=e[0];else{let r=0;for(const c of e)r+=c.length;const{constructor:o}=e[0];s=new o(r);let i=0;for(const c of e)s.set(c,i),i+=c.length}else s=e;return n.decode(s)}function Pi(e,t="utf-8"){switch(t){case"utf-16":{const{length:n}=e,s=new Uint16Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return s}default:{let n=Zn[t];return n||(n=Zn[t]=new TextEncoder),n.encode(e)}}}function Mi(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=String.fromCharCode.apply(null,t);return btoa(n)}function $i(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<n.byteLength;s++)n[s]=t.charCodeAt(s);return new DataView(n.buffer)}function it(){return As(this,!1)}function at(){return As(this,!0)}const ki=BigInt(Number.MAX_SAFE_INTEGER),Di=BigInt(Number.MIN_SAFE_INTEGER);function As(e,t){const n=t?"return":"throw",s=new Map,r=function(o){var a,l,u;const i=typeof o=="function"?A.Struct:(a=o==null?void 0:o.constructor)==null?void 0:a[Q];if(i===void 0){if(t){if(typeof o=="bigint"&&Di<=o&&o<=ki)return Number(o);if(o instanceof Error)return{error:o.message}}return o}let c=s.get(o);if(c===void 0){let f;switch(i){case A.Struct:case A.PackedStruct:case A.ExternStruct:case A.TaggedUnion:case A.BareUnion:case A.ExternUnion:f=(l=o[It])==null?void 0:l.call(o,{error:n}),c=o.constructor[us]?[]:{};break;case A.Array:case A.Vector:case A.Slice:f=(u=o[It])==null?void 0:u.call(o,{error:n}),c=[];break;case A.SinglePointer:case A.SlicePointer:case A.MultiPointer:case A.CPointer:try{c=o["*"]}catch{c=Symbol.for("inaccessible")}break;case A.Enum:c=me(()=>String(o),{error:n});break;case A.Opaque:c={};break;default:c=me(()=>o.$,{error:n})}if(c=r(c),s.set(o,c),f)for(const[p,m]of f)c[p]=r(m)}return c};return r(e)}function me(e,t={}){const{error:n="throw"}=t;try{return e()}catch(s){if(n==="return")return s;throw s}}function wt(e,t={}){return xe({get(){return this[H](),this[w]},set(n,s){ei(n),te.call(this,n,e,!0,s,t)}})}function vt(e,t={}){return xe({get(){return Mi(this.dataView)},set(n,s){if(typeof n!="string")throw new we("string",n);const r=$i(n);te.call(this,r,e,!1,s,t)}})}function Es(e,t={}){const{sentinel:n,instance:{members:s}}=e,{byteSize:r}=s[0];return xe({get(){const o=this.dataView,i=r===1?Int8Array:Int16Array,c=new i(o.buffer,o.byteOffset,this.length);let a=Ht(c,`utf-${r*8}`);return(n==null?void 0:n.value)!==void 0&&a.charCodeAt(a.length-1)===n.value&&(a=a.slice(0,-1)),a},set(o,i){if(typeof o!="string")throw new we("a string",o);(n==null?void 0:n.value)!==void 0&&o.charCodeAt(o.length-1)!==n.value&&(o=o+String.fromCharCode(n.value));const c=Pi(o,`utf-${r*8}`),a=new DataView(c.buffer);te.call(this,a,e,!1,i,t)}})}function Nt(e,t={}){const{typedArray:n}=e;return xe({get(){const s=this.dataView,r=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,r)},set(s,r){if(!si(s,n))throw new we(n.name,s);const o=new DataView(s.buffer,s.byteOffset,s.byteLength);te.call(this,o,e,!0,r,t)}})}function xe({get:e,set:t}){return e.special=t.special=!0,{get:e,set:t}}let pt,he;function Ts(e,t){const{name:n,byteSize:s,align:r,instance:{members:[o]}}=e;if(he||(he=class extends _i{},pt=Ts({...e,name:"anyerror"},t)),pt&&n==="anyerror")return e.constructor=pt,e.typedArray=Mt(o),pt;const i=he,{get:c,set:a}=G(o,t),l=["string","number"],u=gt(e),f=function(v){if(v instanceof m[Kt])a.call(this,v);else if(v&&typeof v=="object"&&!Yt(v)){if(u.call(this,v)===0)throw new zt(e,l,v)}else v!==void 0&&a.call(this,v)},p=function(v){if(typeof v=="number"||typeof v=="string")return m[v];if(v instanceof m[Kt])return m[Number(v)];if(Yt(v))return m[`Error: ${v.error}`];if(Te(e,v,t))return!1;throw new zt(e,l,v)},m=e.constructor=ht(e,{initializer:f,alternateCaster:p},t),d=e.typedArray=Mt(o),h={$:{get:c,set:a},dataView:wt(e),base64:vt(e),typedArray:d&&Nt(e),valueOf:{value:it},toJSON:{value:at},delete:{value:St(t)},[_]:{value:nt(s)},[tt]:{value:kt}},b={[B]:{value:r},[et]:{value:s},[Kt]:{value:i},[xt]:n==="anyerror"?{value:[]}:void 0,[Q]:{value:e.type}};return yt(m,h,b,t)}function Ci(e,t,n){const s=n[ve]("number");let r=pt[s];if(!r){const c=e[Kt];r=new c(t,s)}const o=String(r),i={[s]:{value:r},[o]:{value:r},[t]:{value:r}};X(e,i),X(pt,i),pt[xt].push(t)}function ji(){he=pt=void 0}class _i extends Error{constructor(t,n){super(is(t)),this.number=n,this.stack=void 0}[Symbol.toPrimitive](t){switch(t){case"string":case"default":return Error.prototype.toString.call(this,t);default:return this.number}}toJSON(){return{error:this.message}}}function Ri(e,t){const n=(s,{methods:r},o)=>{const i={},c=/^(get|set)\s+([\s\S]+)/;for(const a of r){const l=t.createCaller(a,o),u=c.exec(l.name);if(u){const f=u[1],p=u[2],m=f==="get"?0:1;if(Fi(a,o)===m){let h=i[p];h||(h=i[p]={configurable:!0,enumerable:!0}),h[f]=l}}else i[l.name]={value:l,configurable:!0,writable:!0}}X(s,i)};n(e.constructor,e.static,!1),n(e.constructor.prototype,e.instance,!0)}function Fi(e,t){const{argStruct:{instance:{members:n}}}=e;return n.length-(t?2:1)}function Ui(e,t){const{byteSize:n,align:s,instance:{members:[r]}}=e,{get:o,set:i}=G(r,t),c=["string","number","tagged union"],a=gt(e),l=function(b){if(b&&typeof b=="object"){if(a.call(this,b)===0)throw new zt(e,c,b)}else b!==void 0&&i.call(this,b)},u=function(b){if(typeof b=="string"||typeof b=="number"||typeof b=="bigint"){let v=f[b];return v||f[ms]&&typeof b!="string"&&(v=new f(void 0),i.call(v,b,"number"),zs(f,`${b}`,v)),v}else{if(b instanceof f)return b;if((b==null?void 0:b[Kn])instanceof f)return b[Kn];if(Te(e,b,t))return!1;throw new zt(e,c,b)}},f=e.constructor=ht(e,{initializer:l,alternateCaster:u},t),p=e.typedArray=Mt(r),m=function(b){switch(b){case"string":case"default":return this.$[ls];default:return o.call(this,"number")}},d={$:{get:o,set:i},dataView:wt(e),base64:vt(e),typedArray:p&&Nt(e),valueOf:{value:it},toString:{value:it},toJSON:{value:at},delete:{value:St(t)},[Symbol.toPrimitive]:{value:m},[_]:{value:nt(n)},[tt]:{value:kt}},h={[B]:{value:s},[et]:{value:n},[Q]:{value:e.type}};return yt(f,d,h,t)}function zs(e,t,n){if(t!==void 0){if(n instanceof e){X(n,{[ls]:{value:t}});const s=n[Symbol.toPrimitive]();X(e,{[s]:{value:n},[t]:{value:n}})}}else X(e,{[ms]:{value:!0}})}function xs(e,t){const{name:n,type:s,byteSize:r,align:o,instance:{members:[i]},isConst:c}=e,{runtimeSafety:a=!0}=t,{structure:l}=i,{type:u,sentinel:f,byteSize:p=1}=l,m=s===A.SlicePointer,d=m?r/2:r,{get:h,set:b}=G({type:I.Uint,bitOffset:0,bitSize:d*8,byteSize:d,structure:{byteSize:d}},t),{get:v,set:O}=m?G({type:I.Uint,bitOffset:d*8,bitSize:d*8,byteSize:d,structure:{name:"usize",byteSize:d}},t):{},$=function(S=!0,V=!0){if(S||this[w][j])if(V){const R=h.call(this),Z=m?v.call(this):f!=null&&f.isRequired?t.findSentinel(R,f.bytes)+1:1;if(R!==this[ye]||Z!==this[Et]){const q=l.constructor,L=t.findMemory(R,Z,q[et]),mt=L?q.call(Jt,L):null;return this[P][0]=mt,this[ye]=R,this[Et]=Z,m&&(this[fe]=void 0),mt}}else return this[P][0]=void 0;return this[P][0]},z=function(S){b.call(this,S),this[ye]=S},x=m||f?function(S){var V;(V=O==null?void 0:O.call)==null||V.call(O,this,S),this[Et]=S}:null,W=function(){const S=this[Vt]??this,V=$.call(S,!1);if(!V){if(s===A.CPointer)return null;throw new mo}return c?Is(V):V},k=function(S){if(S===void 0)return;const V=this[Vt]??this;if(S){if(S[w][j]){const R=t.getViewAddress(S[w]);z.call(this,R),m&&x.call(this,S.length)}else if(V[w][j])throw new bo(e,S)}else V[w][j]&&(z.call(this,0),m&&x.call(this,0));V[P][0]=S??null,m&&(V[fe]=void 0)},Dt=ln(l)?function(){return W.call(this)[ve]()}:W,Be=c?Rt:function(S){return W.call(this)[Oe](S)},Ct=function(){const S=W.call(this);return S?S.length:0},Le=function(S){S=S|0;const V=W.call(this);if(!V){if(S!==0)throw new Bn(S,0);return}const R=V[w],Z=R[j],q=R.buffer.byteLength-R.byteOffset;let L;if(Z||(m?(L=this[fe],L===void 0&&(L=this[fe]=V.length)):L=q/p|0),S<0||S>L)throw new Bn(S,L);const mt=S*p,We=mt<=q?t.obtainView(R.buffer,R.byteOffset,mt):t.obtainFixedView(Z.address,mt),qt=l.constructor;this[P][0]=qt.call(Jt,We),m&&(x==null||x.call(this,S))},qe=function(S,V){const R=l.constructor;if(this===Jt||this===sn||S instanceof lt)return!1;if(tn(S,R))return new lt(R(S["*"]),V);if(Qn(S,R,s))return new lt(S);if(u===A.Slice)return new lt(R(S),V);throw new fo(e)},E=function(){const S=Nn(u)?{}:Wi,V=new Proxy(this,S);return Object.defineProperty(this,Ee,{value:V}),V},C=function(S){var R,Z;const V=l.constructor;if(tn(S,V)){if(!c&&S.constructor.const)throw new yo(e,S);S=S[P][0]}else if(s!=A.SinglePointer)Qn(S,V,s)&&(S=V(S[P][0][w]));else if(n==="*anyopaque"&&S){if(Nn(S.constructor[Q]))S=(R=S["*"])==null?void 0:R[w];else if(S[w])S=S[w];else if((S==null?void 0:S.buffer)instanceof ArrayBuffer&&!(S instanceof Uint8Array||S instanceof DataView)){const{byteOffset:q,byteLength:L}=S;q!==void 0&&L!==void 0&&(S=new DataView(S.buffer,q,L))}}if(S instanceof V){S[H]();const q=S[Pt];if(q)if(c)S=q;else throw new vo(e)}else if(s===A.CPointer&&S instanceof V.child)S=V(S[w]);else if(ri(S,V)){const q=Te(l,S,t);S=V(q)}else if(S!=null&&!S[w]){if(s===A.CPointer&&typeof S=="object"&&!S[Symbol.iterator]){let L=!0;const mt=V.prototype[Ae];for(const We of Object.keys(S)){const qt=mt[We];if(qt!=null&&qt.special){L=!1;break}}L&&(S=[S])}const q=new V(S,{fixed:!!this[w][j]});if(a&&l.typedArray){const L=(Z=S==null?void 0:S.buffer)==null?void 0:Z[Symbol.toStringTag];(L==="ArrayBuffer"||L==="SharedArrayBuffer")&&Ao(l,S)}S=q}else if(S!==void 0&&(s!==A.CPointer||S!==null))throw new po(e,S);this[Ye](S)},J=u===A.Primitive?function(S){return this[rt]()[Symbol.toPrimitive](S)}:null,ct=u===A.Slice?function(S,V){const Z=this[rt]().slice(S,V);return new lt(Z)}:null,Ot=u===A.Slice?function(S,V,R){const q=this[rt]().subarray(S,V,R);return new lt(q)}:null,lt=e.constructor=ht(e,{initializer:C,alternateCaster:qe,finalizer:E},t),le={"*":{get:Dt,set:Be},$:{get:hn,set:C},length:{get:Ct,set:Le},valueOf:{value:it},toJSON:{value:at},delete:{value:Bi},slice:ct&&{value:ct},subarray:Ot&&{value:Ot},[Symbol.toPrimitive]:J&&{value:J},[rt]:{value:W},[Ye]:{value:k},[fs]:{value:$},[Xe]:{value:z},[Ze]:x&&{value:x},[N]:{value:qi},[_]:{value:nt(r)},[tt]:{value:Ni},[ye]:{value:void 0,writable:!0},[Et]:x&&{value:void 0,writable:!0}},Xr={child:{get:()=>l.constructor},const:{value:c},[B]:{value:o},[et]:{value:r},[Q]:{value:e.type}};return yt(lt,le,Xr,t)}function Ni(){const e=this[Vt],t=Object.getOwnPropertyDescriptor(e.constructor.prototype,"$");t.set=Rt,Object.defineProperty(e,"$",t),Object.defineProperty(e,Pt,{value:e})}function Bi(){const e=this[rt]();e==null||e.delete()}function hn(){return this[Ee]}function Li({isActive:e}){this[P][0]&&!e(this)&&(this[P][0]=void 0)}function qi(e,t={}){const{source:n,isActive:s=ut,isMutable:r=ut}=t;e.call(this,{source:n,isActive:s,isMutable:r})}function tn(e,t){var n;return((n=e==null?void 0:e.constructor)==null?void 0:n.child)===t&&e["*"]}function Qn(e,t,n){var s,r;if(n!==A.SinglePointer){if(((r=(s=e==null?void 0:e.constructor)==null?void 0:s.child)==null?void 0:r.child)===t.child&&e["*"])return!0;if(n===A.CPointer&&tn(e,t.child))return!0}return!1}function Is(e){let t=e[Ge];return t||(Object.defineProperty(e,Ge,{value:void 0,configurable:!0}),t=new Proxy(e,Gi),Object.defineProperty(e,Ge,{value:t})),t}const Wi={get(e,t){return t===Vt?e:t in e?e[t]:e[rt]()[t]},set(e,t,n){if(t in e)e[t]=n;else{const s=e[rt]();s[t]=n}return!0},deleteProperty(e,t){if(t in e)delete e[t];else{const n=e[rt]();delete n[t]}return!0},has(e,t){if(t in e)return!0;{const n=e[rt]();return t in n}}},Gi={get(e,t){if(t===Pt)return e;{const n=e[t];return(n==null?void 0:n[Pt])===null?Is(n):n}},set(e,t,n){const s=e[Vt];return s&&!(t in s)?e[t]=n:Rt(),!0}};function ut(){return!0}function Ki(e,t){const{length:n,byteSize:s,align:r,instance:{members:[o]}}=e,{bitSize:i,structure:c}=o,a={};for(let h=0,b=0;h<n;h++,b+=i){const{get:v,set:O}=G({...o,bitOffset:b},t);a[h]={get:v,set:O,configurable:!0}}const l=gt(e),u=function(h){if(h instanceof f)this[_](h);else if(h!=null&&h[Symbol.iterator]){let b=h.length;if(typeof b!="number"&&(h=[...h],b=h.length),b!==n)throw new ge(e,this,h);let v=0;for(const O of h)this[Ae][v++].call(this,O)}else if(h&&typeof h=="object"){if(l.call(this,h)===0)throw new Tt(e,h)}else if(h!==void 0)throw new Tt(e,h)},f=e.constructor=ht(e,{initializer:u},t),p=e.typedArray=Mt(o),m={...a,$:{get:Os,set:u},length:{value:n},dataView:wt(e),base64:vt(e),typedArray:p&&Nt(e),valueOf:{value:it},toJSON:{value:at},entries:{value:pe},delete:{value:St(e)},[Symbol.iterator]:{value:Vs},[It]:{value:pe},[_]:{value:nt(s)},[tt]:{value:kt}},d={child:{get:()=>c.constructor},[Qt]:{value:ze(e)},[B]:{value:r},[et]:{value:s},[Q]:{value:e.type}};return yt(f,m,d,t)}function Vs(){const e=this,t=this.length;let n=0;return{next(){let s,r;if(n<t){const o=n++;s=e[o],r=!1}else r=!0;return{value:s,done:r}}}}function Ji(){const e=this,t=this.length;let n=0;return{next(){let s,r;if(n<t){const o=n++;s=[o,e[o]],r=!1}else r=!0;return{value:s,done:r}}}}function pe(){return{[Symbol.iterator]:Ji.bind(this),length:this.length}}function Hi(e,t){const{byteSize:n,align:s,instance:{members:r},isTuple:o,isIterator:i,hasPointer:c}=e,a={},l=r.filter(x=>!!x.name),u=r.find(x=>!x.name);for(const x of l){const{get:W,set:k}=G(x,t);a[x.name]={get:W,set:k,configurable:!0,enumerable:!0},x.isRequired&&k&&(k.required=!0)}const f=u?G(u,t):null,p=!!r.find(x=>x.type===I.Object),m=gt(e),d=function(x){if(x instanceof h)this[_](x),c&&this[N](ee,{vivificate:!0,source:x});else if(x&&typeof x=="object")m.call(this,x);else if((typeof x=="number"||typeof x=="bigint")&&f)f.set.call(this,x);else if(x!==void 0)throw new zt(e,"object",x)},h=e.constructor=ht(e,{initializer:d},t),b=f?function(x){switch(x){case"string":return Object.prototype.toString.call(this);default:return f.get.call(this)}}:null,v=o&&r.length>0?parseInt(r[r.length-1].name)+1:0,O=i?Yi:o?Vs:Ps,$={$:{get:Os,set:d},dataView:wt(e),base64:vt(e),length:o&&{value:v},valueOf:{value:it},toJSON:{value:at},delete:{value:St(t)},entries:o&&{value:pe},...a,[Symbol.iterator]:{value:O},[Symbol.toPrimitive]:f&&{value:b},[It]:{value:o?pe:mn},[_]:{value:nt(n)},[ot]:p&&{value:pn(e,t)},[N]:c&&{value:dn(e,ut)},[tt]:{value:kt},[xt]:{value:l.map(x=>x.name)}},z={[B]:{value:s},[et]:{value:n},[Q]:{value:e.type},[us]:{value:o}};return yt(h,$,z,t)}function mn(e){return{[Symbol.iterator]:Xi.bind(this,e),length:this[xt].length}}function Yi(){const e=this;return{next(){const t=e.next();return{value:t,done:t===null}}}}function Ps(e){return mn.call(this,e)[Symbol.iterator]()}function Xi(e){const t=this,n=this[xt];let s=0;return{next(){let r,o;if(s<n.length){const i=n[s++];r=[i,me(()=>t[i],e)],o=!1}else o=!0;return{value:r,done:o}}}}function pn(e,t){const{instance:{members:n}}=e,s={};for(const r of n.filter(o=>o.type===I.Object))s[r.slot]=r;return function(o){const i=s[o],{bitOffset:c,byteSize:a,structure:{constructor:l}}=i,u=this[w],p=u.byteOffset+(c>>3);let m=a;if(m===void 0){if(c&7)throw new go(i);m=i.bitSize>>3}const d=t.obtainView(u.buffer,p,m);return this[P][o]=l.call(sn,d)}}function dn(e,t={}){const{isChildActive:n=ut,isChildMutable:s=ut}=t,{instance:{members:r}}=e,o=r.filter(i=>{var c;return(c=i.structure)==null?void 0:c.hasPointer});return function(c,a={}){var d;const{source:l,vivificate:u=!1,isActive:f=ut,isMutable:p=ut}=a,m={...a,isActive:h=>f(this)&&n.call(this,h),isMutable:h=>p(this)&&s.call(this,h)};for(const{slot:h}of o){if(l){const v=(d=l[P])==null?void 0:d[h];if(!v)continue;m.source=v}const b=this[P][h]??(u?this[ot](h):null);b&&b[N](c,m)}}}function Zi(e,t){const{type:n,constructor:s,static:{members:r,template:o}}=e,i={};for(const c of r)i[c.name]=G(c,t);if(X(s,{valueOf:{value:it},toJSON:{value:at},...i,[Symbol.iterator]:{value:Ps},[It]:{value:mn},[P]:o&&{value:o[P]},[xt]:!s[xt]&&{value:r.map(c=>c.name)}}),n===A.Enum)for(const{name:c,slot:a}of r)zs(s,c,s[P][a]);else if(n===A.ErrorSet)for(const{name:c,slot:a}of r)Ci(s,c,s[P][a])}function Qi(e,t){const{byteSize:n,align:s,instance:{members:r},hasPointer:o}=e,i=!!r.find(d=>d.type===I.Object),c=r.slice(1).map(d=>d.name),a=c.length,l=e.constructor=function(d,h,b){const v=t.allocateMemory(n,s);if(this[w]=v,i&&(this[P]={}),d.length!==a)throw new uo(h,a-b,d.length-b);for(const[O,$]of c.entries())try{this[$]=d[O]}catch(z){throw Oo(h,O-b,a-b,z)}},u={};for(const d of r)u[d.name]=G(d,t);const{slot:f,type:p}=r[0],m=p===I.Object?function(d){const h=this[ot](f);return d===h}:function(){return!1};return X(l.prototype,{...u,[_]:{value:nt(n)},[ot]:i&&{value:pn(e,t)},[N]:o&&{value:dn(e,{isChildMutable:m})},[H]:{value:yn(null,t)}}),X(l,{[B]:{value:s},[et]:{value:n}}),l}function tc(e,t){const{length:n,byteSize:s,align:r,instance:{members:[o]},hasPointer:i}=e,{get:c,set:a}=G(o,t),l=ks(o),u=gt(e),f=function(O){if(O instanceof m)this[_](O),i&&this[N](ee,{vivificate:!0,source:O});else if(typeof O=="string"&&l&&(O={string:O}),O!=null&&O[Symbol.iterator]){if(O=_s(O),O.length!==n)throw new ge(e,this,O);let $=0;for(const z of O)a.call(this,$++,z)}else if(O&&typeof O=="object"){if(u.call(this,O)===0)throw new Tt(e,O)}else if(O!==void 0)throw new Tt(e,O)},p=Ms,m=e.constructor=ht(e,{initializer:f,finalizer:p},t),d=e.typedArray=Mt(o),h=o.type===I.Object,b={$:{get:hn,set:f},length:{value:n},dataView:wt(e),base64:vt(e),string:l&&Es(e),typedArray:d&&Nt(e),get:{value:c},set:{value:a},entries:{value:de},valueOf:{value:it},toJSON:{value:at},delete:{value:St(t)},[Symbol.iterator]:{value:Ds},[It]:{value:de},[_]:{value:nt(s)},[ot]:h&&{value:Cs(e,t)},[N]:i&&{value:js()},[tt]:{value:$s}},v={child:{get:()=>o.structure.constructor},[Qt]:{value:ze(e)},[B]:{value:r},[et]:{value:s},[Q]:{value:e.type}};return yt(m,b,v,t)}function Ms(){const e=new Proxy(this,nc);return Object.defineProperty(this,Ee,{value:e}),e}function $s(){kt.call(this),Object.defineProperty(this,"set",{value:Rt});const e=this.get;Object.defineProperty(this,"get",{value:function(n){var r;const s=e.call(this,n);return(s==null?void 0:s[Pt])===null&&((r=s[tt])==null||r.call(s)),s}})}function ks(e){return e.type===I.Uint&&[8,16].includes(e.bitSize)}function Ds(){const e=this[rn]??this,t=this.length;let n=0;return{next(){let s,r;if(n<t){const o=n++;s=e.get(o),r=!1}else r=!0;return{value:s,done:r}}}}function ec(e){const t=this[rn]??this,n=this.length;let s=0;return{next(){let r,o;if(s<n){const i=s++;r=[i,me(()=>t.get(i),e)],o=!1}else o=!0;return{value:r,done:o}}}}function de(e){return{[Symbol.iterator]:ec.bind(this,e),length:this.length}}function Cs(e,t){const{instance:{members:[n]}}=e,{byteSize:s,structure:r}=n;return function(i){const{constructor:c}=r,a=this[w],u=a.byteOffset+s*i,f=t.obtainView(a.buffer,u,s);return this[P][i]=c.call(sn,f)}}function js(e){return function(n,s={}){const{source:r,vivificate:o=!1,isActive:i=ut,isMutable:c=ut}=s,a={...s,isActive:()=>i(this),isMutable:()=>c(this)};for(let l=0,u=this.length;l<u;l++){r&&(a.source=r==null?void 0:r[P][l]);const f=this[P][l]??(o?this[ot](l):null);f&&f[N](n,a)}}}function _s(e){var r;if(typeof e.length=="number")return e;const t=e[Symbol.iterator](),n=t.next(),s=(r=n.value)==null?void 0:r.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let o;for(;!(o=t.next()).done;)yield o.value}(),{length:s});{const o=[];let i=n;for(;!i.done;)o.push(i.value),i=t.next();return o}}const nc={get(e,t){const n=typeof t=="symbol"?0:t|0;if(n!==0||n==t)return e.get(n);switch(t){case"get":return e[Wt]||(e[Wt]=e.get.bind(e)),e[Wt];case"set":return e[Gt]||(e[Gt]=e.set.bind(e)),e[Gt];case rn:return e;default:return e[t]}},set(e,t,n){const s=typeof t=="symbol"?0:t|0;if(s!==0||s==t)e.set(s,n);else switch(t){case"get":e[Wt]=n;break;case"set":e[Gt]=n;break;default:e[t]=n}return!0},deleteProperty(e,t){const n=typeof t=="symbol"?0:t|0;if(n!==0||n==t)return!1;switch(t){case"get":delete e[Wt];break;case"set":delete e[Gt];break;default:delete e[t]}return!0},has(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?n>=0&&n<e.length:e[t]},ownKeys(e){const t=[];for(let n=0,s=e.length;n<s;n++)t.push(`${n}`);return t.push("length",Ee),t},getOwnPropertyDescriptor(e,t){const n=typeof t=="symbol"?0:t|0;if(n!==0||n==t){if(n>=0&&n<e.length)return{value:e.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(e,t)}};function sc(e,t){const{byteSize:n,align:s,instance:{members:r},hasPointer:o}=e,{get:i,set:c}=G(r[0],t),{get:a,set:l}=G(r[1],t),u=function(){if(a.call(this,"number"))throw a.call(this);return i.call(this)},f=r[0].type===I.Void,p=r[1].structure.constructor,m=function(){return!a.call(this,"number")},d=function(){var k;this[Jn](),(k=this[N])==null||k.call(this,Li)},h=!!r.find(k=>k.type===I.Object),b=gt(e),v=function(k){if(k instanceof O)this[_](k),o&&m.call(this)&&this[N](ee,{vivificate:!0,source:k});else if(k instanceof p[Kt]&&p(k))l.call(this,k),d.call(this);else if(k!==void 0||f)try{c.call(this,k),l.call(this,0,"number")}catch(Dt){if(k instanceof Error)throw new rs(e);if(Yt(k))l.call(this,k),d.call(this);else if(k&&typeof k=="object"){if(b.call(this,k)===0)throw Dt}else throw Dt}},O=e.constructor=ht(e,{initializer:v},t),{bitOffset:$,byteSize:z}=r[0],x={$:{get:u,set:v},dataView:wt(e),base64:vt(e),valueOf:{value:it},toJSON:{value:at},delete:{value:St(t)},[_]:{value:nt(n)},[Jn]:{value:Fo($/8,z)},[ot]:h&&{value:pn(e,t)},[N]:o&&{value:dn(e,{isChildActive:m})},[tt]:{value:kt}},W={[B]:{value:s},[et]:{value:n},[Q]:{value:e.type}};return yt(O,x,W,t)}function rc(e,t){const{byteSize:n,align:s,instance:{members:[r]}}=e,{get:o,set:i}=G(r,t),c=gt(e),a=function(m){if(m instanceof l)this[_](m);else if(m&&typeof m=="object"){if(c.call(this,m)===0){const d=es(r);throw new zt(e,d,m)}}else m!==void 0&&i.call(this,m)},l=e.constructor=ht(e,{initializer:a},t),u=e.typedArray=Mt(r),f={$:{get:o,set:i},dataView:wt(e),base64:vt(e),typedArray:u&&Nt(e),valueOf:{value:it},toJSON:{value:at},delete:{value:St(t)},[Symbol.toPrimitive]:{value:o},[_]:{value:nt(n)},[tt]:{value:kt}},p={[Qt]:{value:ze(e)},[B]:{value:s},[et]:{value:n},[Eo]:{value:r.bitSize},[Q]:{value:e.type},[zo]:{value:r.type}};return yt(l,f,p,t)}function oc(e,t){const{align:n,instance:{members:[s]},byteSize:r,hasPointer:o}=e,{get:i,set:c}=G(s,t),{byteSize:a,structure:l}=s,u=ic(e,t);u&&(e.sentinel=u);const f=ks(s),p=function(E,C,J=!1){E||(E=t.allocateMemory(C*a,n,J)),this[w]=E,this[Et]=C},m=function(E,C){if(C!==this[Et])throw new ge(e,this,E)},d=gt(e),h=function(E,C=!1){if(E instanceof k)this[w]?m.call(this,E,E.length):p.call(this,null,E.length,C),this[_](E),o&&this[N](ee,{vivificate:!0,source:E});else if(typeof E=="string"&&f)h.call(this,{string:E},C);else if(E!=null&&E[Symbol.iterator]){E=_s(E),this[w]?m.call(this,E,E.length):p.call(this,null,E.length,C);let J=0;for(const ct of E)u==null||u.validateValue(ct,J,E.length),c.call(this,J++,ct)}else if(typeof E=="number")if(!this[w]&&E>=0&&isFinite(E))p.call(this,null,E,C);else throw new Tt(e,E,!this[w]);else if(E&&typeof E=="object"){if(d.call(this,E,C)===0)throw new Tt(e,E)}else if(E!==void 0)throw new Tt(e,E)},b=function(){return this[Et]},v=function(E,C){return E=E|0,E<0?(E=C+E,E<0&&(E=0)):E>C&&(E=C),E};function O(E,C){E=E===void 0?0:v(E,this.length),C=C===void 0?this.length:v(C,this.length);const J=this[w],ct=E*a,Ot=C*a-ct;return t.obtainView(J.buffer,J.byteOffset+ct,Ot)}function $(E,C){const J=O.call(this,E,C);return k(J)}const z=function(E,C,J={}){const{fixed:ct=!1}=J,Ot=O.call(this,E,C),lt=t.allocateMemory(Ot.byteLength,n,ct),le=k(lt);return W.call(le,{[w]:Ot}),le},x=Ms,W=nt(a,!0),k=e.constructor=ht(e,{initializer:h,shapeDefiner:p,finalizer:x},t),Dt=e.typedArray=Mt(s),Be=s.type===I.Object,Ct={shapeDefiner:p},Le={$:{get:hn,set:h},length:{get:b},dataView:wt(e,Ct),base64:vt(e,Ct),string:f&&Es(e,Ct),typedArray:Dt&&Nt(e,Ct),get:{value:i},set:{value:c},entries:{value:de},slice:{value:z},subarray:{value:$},valueOf:{value:it},toJSON:{value:at},delete:{value:St(t)},[Symbol.iterator]:{value:Ds},[It]:{value:de},[_]:{value:W},[ot]:Be&&{value:Cs(e,t)},[N]:o&&{value:js()},[tt]:{value:$s}},qe={child:{get:()=>l.constructor},[Qt]:{value:ze(e)},[B]:{value:n},[et]:{value:r},[Q]:{value:e.type}};return yt(k,Le,qe,t)}function ic(e,t){const{runtimeSafety:n=!0}=t,{byteSize:s,instance:{members:[r,o],template:i}}=e;if(!o)return;const{get:c}=G(o,t),a=c.call(i,0),{get:l}=G(r,t),{isRequired:u}=o,f=u?n?function(d,h,b){if(d===a&&h!==b-1)throw new Ln(e,d,h,b);if(d!==a&&h===b-1)throw new ue(e,a,h,b)}:function(d,h,b){if(d!==a&&h===b-1)throw new ue(e,a,b)}:function(){},p=u?n?function(d,h){for(let b=0;b<h;b++){const v=l.call(d,b);if(v===a&&b!==h-1)throw new Ln(e,a,b,h);if(v!==a&&b===h-1)throw new ue(e,a,h)}}:function(d,h){if(h*s===d[w].byteLength){const b=h-1;if(l.call(d,b)!==a)throw new ue(e,a,h)}}:function(){},m=i[w];return{value:a,bytes:m,validateValue:f,validateData:p,isRequired:u}}const st=Array(Object.values(A).length);function cc(){st[A.Primitive]=rc}function ac(){st[A.Array]=tc}function lc(){st[A.Struct]=Hi}function uc(){st[A.ArgStruct]=Qi}function fc(){st[A.ErrorUnion]=sc}function yc(){st[A.ErrorSet]=Ts,bi()}function hc(){st[A.Enum]=Ui,di()}function mc(){st[A.SinglePointer]=xs,cn()}function pc(){st[A.SlicePointer]=xs,cn()}function dc(){st[A.Slice]=oc}function bc(){st[A.Vector]=Ki}function Sc(e){return st[e]}class gc{constructor(){D(this,"context");D(this,"contextStack",[]);D(this,"consolePending",[]);D(this,"consoleTimeout",0);D(this,"viewMap",new WeakMap);D(this,"emptyBuffer",new ArrayBuffer(0));D(this,"abandoned",!1);D(this,"released",!1);D(this,"littleEndian",!0);D(this,"wordSize",4);D(this,"runtimeSafety",!0);D(this,"comptime",!1);D(this,"variables",[]);D(this,"imports");D(this,"console",globalThis.console)}startContext(){this.context&&this.contextStack.push(this.context),this.context=new wc}endContext(){this.context=this.contextStack.pop()}allocateMemory(t,n=0,s=!1){return s?this.allocateFixedMemory(t,n):this.allocateRelocMemory(t,n)}allocateFixedMemory(t,n,s=Je.Normal){const r=t?this.allocateExternMemory(s,t,n):0,o=this.obtainFixedView(r,t);return o[j].align=n,o[j].type=s,o}freeFixedMemory(t){const{address:n,unalignedAddress:s,len:r,align:o,type:i}=t[j];r&&this.freeExternMemory(i,s??n,r,o)}obtainFixedView(t,n){let s;if(t&&n)s=this.obtainExternView(t,n);else{let r=this.viewMap.get(this.emptyBuffer);r||this.viewMap.set(this.emptyBuffer,r={});const o=`${t}:0`;s=r[o],s||(s=r[o]=new DataView(this.emptyBuffer),s[j]={address:t,len:0})}return s}releaseFixedView(t){var n;((n=t[j])==null?void 0:n.type)!==void 0&&(this.freeFixedMemory(t),t[j]=null)}allocateRelocMemory(t,n){return this.obtainView(new ArrayBuffer(t),0,t)}registerMemory(t,n=null,s=void 0){const{memoryList:r}=this.context,o=this.getViewAddress(t),i=Ke(r,o);return r.splice(i,0,{address:o,dv:t,len:t.byteLength,targetDV:n,targetAlign:s}),o}unregisterMemory(t){const{memoryList:n}=this.context,s=Ke(n,t),r=n[s-1];if((r==null?void 0:r.address)===t)return n.splice(s-1,1),r.dv}findMemory(t,n,s){if(Ac(t))if(!n)t=0;else return null;else if(!t&&n)return null;let r=n*(s??0);if(this.context){const{memoryList:o}=this.context,i=Ke(o,t),c=o[i-1];if((c==null?void 0:c.address)===t&&c.len===r)return c.targetDV??c.dv;if((c==null?void 0:c.address)<=t&&t<At(c.address,c.len)){const a=Number(t-c.address),l=c.targetDV??c.dv,u=s===void 0;u&&(r=l.byteLength-a);const f=this.obtainView(l.buffer,l.byteOffset+a,r);return u&&(f[B]=c.targetAlign),f}}return this.obtainFixedView(t,r)}getViewAddress(t){const n=t[j];if(n)return n.address;{const s=this.getBufferAddress(t.buffer);return At(s,t.byteOffset)}}findViewAt(t,n,s){let r=this.viewMap.get(t),o;if(r)if(r instanceof DataView)if(r.byteOffset===n&&r.byteLength===s)o=r;else{const i=r;r={[`${i.byteOffset}:${i.byteLength}`]:i},this.viewMap.set(t,r)}else o=r[`${n}:${s}`];return{existing:o,entry:r}}obtainView(t,n,s){const{existing:r,entry:o}=this.findViewAt(t,n,s);let i;if(r)return r;o?i=o[`${n}:${s}`]=new DataView(t,n,s):this.viewMap.set(t,i=new DataView(t,n,s));const c=t[j];return c&&(i[j]={address:At(c.address,n),len:s}),i}registerView(t){if(!t[j]){const{buffer:n,byteOffset:s,byteLength:r}=t,{existing:o,entry:i}=this.findViewAt(n,s,r);if(o)return o;i?i[`${s}:${r}`]=t:this.viewMap.set(n,t)}return t}captureView(t,n,s){if(s){const r=this.allocateRelocMemory(n,0);return n>0&&this.copyBytes(r,t,n),r}else return this.obtainFixedView(t,n)}castView(t,n,s,r){const{constructor:o,hasPointer:i}=r,c=this.captureView(t,n,s),a=o.call(Jt,c);return i&&this.updatePointerTargets(a),s&&a[tt](),a}finalizeShape(t){const s=Sc(t.type)(t,this);typeof s=="function"&&(X(s,{name:{value:t.name,configurable:!0}}),s.prototype.hasOwnProperty(Symbol.toStringTag)||X(s.prototype,{[Symbol.toStringTag]:{value:t.name,configurable:!0}}))}finalizeStructure(t){Zi(t,this),Ri(t,this)}createCaller(t,n){const{name:s,argStruct:r,thunkId:o}=t,{constructor:i}=r,c=this;let a;return n?a=function(...l){return c.invokeThunk(o,new i([this,...l],s,1))}:a=function(...l){return c.invokeThunk(o,new i(l,s,0))},Object.defineProperty(a,"name",{value:s}),a}recreateStructures(t,n){Object.assign(this,n);const s=(i,c)=>{for(const[a,l]of Object.entries(c))i[a]=r(l);return i},r=i=>{var u;const{memory:c,structure:a,actual:l}=i;if(c){if(l)return l;{const{array:f,offset:p,length:m}=c,d=this.obtainView(f.buffer,p,m),{constructor:h}=a,{reloc:b,const:v}=i,O=i.actual=h.call(Jt,d);return v&&((u=O[tt])==null||u.call(O)),i.slots&&s(O[P],i.slots),b!==void 0&&this.variables.push({reloc:b,object:O}),O}}else return a};ji();const o=new Map;for(const i of t){for(const c of[i.instance,i.static])if(c.template){const a=c.template,l=c.template={};if(a.memory){const{array:u,offset:f,length:p}=a.memory;l[w]=this.obtainView(u.buffer,f,p)}if(a.slots){const u=l[P]={};o.set(u,a.slots)}}this.finalizeShape(i)}for(const[i,c]of o)s(i,c);for(const i of t)this.finalizeStructure(i)}linkVariables(t){var s;const n=[];for(const{object:r,reloc:o}of this.variables)this.linkObject(r,o,t),r[rt]&&r[P][0]&&n.push(r);for(const r of n){const o=r[rt](),i=this.getViewAddress(o[w]);r[Xe](i),(s=r[Ze])==null||s.call(r,o.length)}}linkObject(t,n,s){if(t[w][j])return;const r=t[w],o=this.recreateAddress(n),i=this.obtainFixedView(o,r.byteLength);if(s){const a=Object.create(t.constructor.prototype);a[w]=i,a[_](t)}t[w]=i;const c=a=>{if(a[P]){for(const l of Object.values(a[P]))if(l){const u=l[w];if(u.buffer===r.buffer){const f=u.byteOffset-r.byteOffset;l[w]=this.obtainView(i.buffer,f,u.byteLength),c(l)}}}};c(t)}unlinkVariables(){for(const{object:t}of this.variables)this.unlinkObject(t)}unlinkObject(t){if(!t[w][j])return;t[H]();const n=t[w],s=this.allocateMemory(n.byteLength),r=Object.create(t.constructor.prototype);r[w]=s,r[_](t),t[w]=s}releaseFunctions(){const t=()=>{throw new Error("Module was abandoned")};for(const n of Object.keys(this.imports))this[n]&&(this[n]=t)}getSpecialExports(){const t=n=>{if(n===void 0)throw new Error("Not a Zig type");return n};return{init:(...n)=>this.init(...n),abandon:()=>this.abandon(),released:()=>this.released,connect:n=>this.console=n,sizeOf:n=>t(n[et]),alignOf:n=>t(n[B]),typeOf:n=>to(t(n[Q]))}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}updatePointerAddresses(t){var a;const n=new Map,s=new Map,r=[],o=function({isActive:l}){var u;if(l(this)){const f=this[Vt];if(!n.get(f)){const p=f[P][0];if(p){n.set(f,p);const m=p[w];if(!m[j]){const d=s.get(m.buffer);if(d){const h=Array.isArray(d)?d:[d],b=Rs(h,m.byteOffset,v=>v[w].byteOffset);h.splice(b,0,p),Array.isArray(d)||(s.set(m.buffer,h),r.push(h))}else s.set(m.buffer,p);(u=p[N])==null||u.call(p,o)}}}}};t[N](o);const i=this.findTargetClusters(r),c=new Map;for(const l of i)for(const u of l.targets)c.set(u,l);for(const[l,u]of n){const f=c.get(u),p=this.getTargetAddress(u,f)??this.getShadowAddress(u,f);l[Xe](p),(a=l[Ze])==null||a.call(l,u.length)}}findTargetClusters(t){const n=[];for(const s of t){let r=null,o=0,i=0,c=null;for(const a of s){const l=a[w],{byteOffset:u,byteLength:f}=l,p=u+f;let m=!0;r&&(i>u?(c||(c={targets:[r],start:o,end:i,address:void 0,misaligned:void 0},n.push(c)),c.targets.push(a),p>i?c.end=p:m=!1):c=null),m&&(r=a,o=u,i=p)}}return n}createClusterShadow(t){const{start:n,end:s,targets:r}=t;let o=0,i;for(const v of r){const O=v[w],$=O.byteOffset,z=v.constructor[B]??O[B];(o===void 0||z>o)&&(o=z,i=$)}const c=s-n,a=this.allocateShadowMemory(c+o,1),l=this.getViewAddress(a),u=Oc(At(l,i-n),o),f=At(u,n-i),p=a.byteOffset+Number(f-l),m=new DataView(a.buffer,p,c);for(const v of r){const O=v[w],$=O.byteOffset;if($!==i){const z=v.constructor[B]??O[B];if(vc(At(f,$-n),z))throw new ho(z,o)}}const d={[_]:nt(c)},h=Object.create(d),b=Object.create(d);return h[w]=new DataView(r[0][w].buffer,Number(n),c),b[w]=m,m[j]={address:f,len:c,align:1,unalignedAddress:l,type:Je.Scratch},this.addShadow(b,h,1)}getShadowAddress(t,n){if(n){const s=t[w];if(n.address===void 0){const r=this.createClusterShadow(n);n.address=this.getViewAddress(r[w])}return At(n.address,s.byteOffset-n.start)}else{const s=this.createShadow(t);return this.getViewAddress(s[w])}}createShadow(t){const n=t[w],s=t.constructor[B]??n[B],r=Object.create(t.constructor.prototype);return r[w]=this.allocateShadowMemory(n.byteLength,s),this.addShadow(r,t,s)}addShadow(t,n,s){let{shadowMap:r}=this.context;if(r||(r=this.context.shadowMap=new Map),!t[w][j])debugger;return t[H]=yn(null,this),r.set(t,n),this.registerMemory(t[w],n[w],s),t}removeShadow(t){const{shadowMap:n}=this.context;if(n){for(const[s]of n)if(s[w]===t){n.delete(s);break}}}updateShadows(){const{shadowMap:t}=this.context;if(t)for(const[n,s]of t)n[_](s)}updateShadowTargets(){const{shadowMap:t}=this.context;if(t)for(const[n,s]of t)s[_](n)}releaseShadows(){const{shadowMap:t}=this.context;if(t)for(const[n]of t)this.freeShadowMemory(n[w])}updatePointerTargets(t){const n=new Map,s=function({isActive:r,isMutable:o}){var c,a;const i=this[Vt]??this;if(!n.get(i)){n.set(i,!0);const l=!i.constructor.const,u=i[P][0],f=!u||o(this)?i[fs](!0,r(this)):u;(c=u==null?void 0:u[N])==null||c.call(u,s,{vivificate:!0,isMutable:()=>l}),f!==u&&((a=f==null?void 0:f[N])==null||a.call(f,s,{vivificate:!0,isMutable:()=>l}))}};t[N](s,{vivificate:!0})}writeToConsole(t){const{console:n}=this;try{const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength).slice(),r=s.lastIndexOf(10);if(r===-1)this.consolePending.push(s);else{const o=s.subarray(0,r),i=s.subarray(r+1),c=[...this.consolePending,o];n.log(Ht(c)),this.consolePending=i.length>0?[i]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout(()=>{n.log(Ht(this.consolePending)),this.consolePending=[]},250))}catch(s){n.error(s)}}flushConsole(){this.consolePending.length>0&&(console.log(Ht(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}}class wc{constructor(){D(this,"pointerProcessed",new Map);D(this,"memoryList",[]);D(this,"shadowMap",null);D(this,"call",0)}}function Rs(e,t,n){let s=0,r=e.length;if(r===0)return 0;for(;s<r;){const o=Math.floor((s+r)/2);n(e[o])<=t?s=o+1:r=o}return r}function Ke(e,t){return Rs(e,t,n=>n.address)}function vc(e,t){if(t===void 0)return!1;typeof e=="bigint"&&(e=Number(e&0xFFFFFFFFn));const n=t-1;return(e&n)!==0}function Oc(e,t){let n;return typeof e=="bigint"?(t=BigInt(t),n=~(t-1n)):n=~(t-1),(e&n)+t}function At(e,t){return e+(typeof e=="bigint"?BigInt(t):t)}function Ac(e){return typeof e=="bigint"?e===0xaaaaaaaaaaaaaaaan:e===2863311530}class Ec extends gc{constructor(){super(...arguments);D(this,"imports",{allocateExternMemory:{argType:"iii",returnType:"i"},freeExternMemory:{argType:"iiii"},runThunk:{argType:"ii",returnType:"v"},runVariadicThunk:{argType:"iiii",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"},flushStdout:{argType:"",returnType:""}});D(this,"exports",{allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"iibv",returnType:"v"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"}});D(this,"nextValueIndex",1);D(this,"valueTable",{0:null});D(this,"valueIndices",new Map);D(this,"memory",null);D(this,"initPromise",null);D(this,"customWASI",null);D(this,"hasCodeSource",!1);D(this,"littleEndian",!0)}async init(n){if(n&&this.hasCodeSource)throw new Error("Cannot set WASI interface after compilation has already begun (consider disabling topLevelAwait)");this.customWASI=n,await this.initPromise}allocateHostMemory(n,s){const r={[B]:s},o=nt(n),i=this.allocateRelocMemory(n,s),c=this.allocateShadowMemory(n,s),a={constructor:r,[w]:i,[_]:o},l={constructor:r,[w]:c,[_]:o};return this.addShadow(l,a,s),c}freeHostMemory(n,s,r){const o=this.unregisterMemory(n);if(o)this.removeShadow(o),this.freeShadowMemory(o);else throw new so(n)}allocateShadowMemory(n,s){return this.allocateFixedMemory(n,s,Je.Scratch)}freeShadowMemory(n){return this.freeFixedMemory(n)}getBufferAddress(n){return 0}obtainExternView(n,s){const{buffer:r}=this.memory;return r[j]||(r[j]={address:0,len:r.byteLength}),this.obtainView(r,n,s)}copyBytes(n,s,r){const{memory:o}=this,i=new DataView(o.buffer,s,r);on(r)(n,i)}findSentinel(n,s){const{memory:r}=this,o=s.byteLength,i=r.buffer.byteLength-o+1;for(let c=n;c<i;c+=o){const a=new DataView(r.buffer,c,o);let l=!0;for(let u=0;u<o;u++){const f=a.getUint8(u),p=s.getUint8(u);if(f!==p){l=!1;break}}if(l)return(c-n)/o}}captureString(n,s){const{buffer:r}=this.memory,o=new Uint8Array(r,n,s);return Ht(o)}getTargetAddress(n,s){const r=n[w];if(r[j])return this.getViewAddress(r);if(r.byteLength===0)return 0}clearExchangeTable(){this.nextValueIndex!==1&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(n){if(n){let s=this.valueIndices.get(n);return s===void 0&&(s=this.nextValueIndex++,this.valueIndices.set(n,s),this.valueTable[s]=n),s}else return 0}fromWebAssembly(n,s){switch(n){case"v":case"s":return this.valueTable[s];case"i":return s;case"b":return!!s}}toWebAssembly(n,s){switch(n){case"v":case"s":return this.getObjectIndex(s);case"i":return s;case"b":return s?1:0}}exportFunction(n,s="",r=""){return n?(...o)=>{o=o.map((c,a)=>this.fromWebAssembly(s.charAt(a),c));const i=n.apply(this,o);return this.toWebAssembly(r,i)}:()=>{}}importFunction(n,s="",r=""){return(...o)=>{o=o.map((c,a)=>this.toWebAssembly(s.charAt(a),c));const i=n.apply(this,o);return this.fromWebAssembly(r,i)}}exportFunctions(){const n={};for(const[s,{argType:r,returnType:o,alias:i}]of Object.entries(this.exports)){const c=this[i??s];n[`_${s}`]=this.exportFunction(c,r,o)}return n}importFunctions(n){for(const[s,{argType:r,returnType:o}]of Object.entries(this.imports)){const i=n[s];if(!i)throw new Error(`Unable to import function: ${s}`);this[s]=this.importFunction(i,r,o)}}async instantiateWebAssembly(n){const s=await n;this.hasCodeSource=!0;const r={env:this.exportFunctions(),wasi_snapshot_preview1:this.getWASIImport()};return s[Symbol.toStringTag]==="Response"?WebAssembly.instantiateStreaming(s,r):WebAssembly.instantiate(s,r)}loadModule(n){return this.initPromise=(async()=>{var i,c;const{instance:s}=await this.instantiateWebAssembly(n),{memory:r,_initialize:o}=s.exports;this.importFunctions(s.exports),this.trackInstance(s),(c=(i=this.customWASI)==null?void 0:i.initialize)==null||c.call(i,s),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=r})()}trackInstance(n){const s=new WeakRef(n);Object.defineProperty(this,"released",{get:()=>!s.deref(),enumerable:!0})}linkVariables(n){this.initPromise&&(this.initPromise=this.initPromise.then(()=>super.linkVariables(n)))}getMemoryOffset(n){return n}recreateAddress(n){return n}invokeThunk(n,s){return this.runThunk?this.invokeThunkForReal(n,s):this.initPromise.then(()=>this.invokeThunkForReal(n,s))}invokeThunkForReal(n,s){try{this.startContext(),s[N]&&this.updatePointerAddresses(s);const r=this.getShadowAddress(s),o=s[To],i=o?this.getShadowAddress(o):0;this.updateShadows();const c=o?this.runVariadicThunk(n,r,i,o.length):this.runThunk(n,r);if(this.updateShadowTargets(),s[N]&&this.updatePointerTargets(s),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&(this.flushStdout(),this.flushConsole()),c)throw new os(c);return s.retval}catch(r){if(!(r instanceof Wn&&r.code===0))throw r}}getWASIImport(){if(this.customWASI)return this.customWASI.wasiImport;{const r=()=>38;return{args_get:r,args_sizes_get:r,clock_res_get:r,clock_time_get:r,environ_get:r,environ_sizes_get:r,fd_advise:r,fd_allocate:r,fd_close:r,fd_datasync:r,fd_pread:r,fd_pwrite:r,fd_read:r,fd_readdir:r,fd_renumber:r,fd_seek:r,fd_sync:r,fd_tell:r,fd_write:(o,i,c,a)=>{if(o===1||o===2){const l=new DataView(this.memory.buffer);let u=0;for(let f=0,p=i;f<c;f++,p+=8){const m=l.getUint32(p,!0),d=l.getUint32(p+4,!0);if(d>0){const h=new DataView(this.memory.buffer,m,d);this.writeToConsole(h),u+=d}}return l.setUint32(a,u,!0),0}else return 38},fd_fdstat_get:r,fd_fdstat_set_flags:r,fd_fdstat_set_rights:r,fd_filestat_get:r,fd_filestat_set_size:r,fd_filestat_set_times:r,fd_prestat_get:()=>8,fd_prestat_dir_name:r,path_create_directory:r,path_filestat_get:r,path_filestat_set_times:r,path_link:r,path_open:r,path_readlink:r,path_remove_directory:r,path_rename:r,path_symlink:r,path_unlink_file:r,poll_oneoff:r,proc_exit:o=>{throw new Wn(o)},random_get:(o,i)=>{const c=new DataView(this.memory.buffer,o,i);for(let a=0;a<i;a++)c.setUint8(a,Math.floor(256*Math.random()));return 0},sched_yield:r,sock_accept:r,sock_recv:r,sock_send:r,sock_shutdown:r}}}}function Tc(e){return new Ec}cc();mi();cn();ac();mc();hi();pi();fi();lc();bc();dc();pc();hc();Zo();yi();yc();fc();uc();const M={constructor:null,typedArray:null,type:0,name:void 0,byteSize:0,align:0,isConst:!1,isTuple:!1,isIterator:!1,hasPointer:!1,instance:{members:[],methods:[],template:null},static:{members:[],methods:[],template:null}},g={type:0,isRequired:!1},F={},K={},Ie={},Ve={},Pe={},Me={},U={},$e={},ke={},Ft={},De={},be={},Ce={},je={},bt={},_e={},Re={},bn={},Fe={},ne={},Bt={},Y={},ft={},Zt={},Se={},Sn={},Ut={},se={},re={},Ue={},oe={},ie={},jt={},gn={},wn={},_t={},vn={},On={},An={},Fs={},En={},Tn={},zn={},Us={},xn={},Ns={},In={},Bs={},Ls={},Vn={},Pn={},qs={},Mn={},Ws={},$n={},Gs={},Ks={},kn={},Dn={},Js={},ce={},Hs={},Ys={},Cn={},jn={},Xs={},_n={},Zs={},Qs={},tr={},er={},nr={},sr={},rr={},or={},ir={},cr={},ar={},lr={},ur={},fr={},yr={},hr={},mr={},Lt={},pr={},dr={},Rn={},br={},Fn={},Sr={},gr={},wr={},vr={},Or={},Ar={},Er={},Tr={},zr={},xr={},Ir={},Vr={},Pr={},Mr={},$r={},kr={},Dr={},Cr={},jr={},_r={},Rr={},Fr={},Ur={},Nr={},Br={},Lr={},qr={},Wr={},Gr={},Kr={},Jr={},T=e=>new Uint8Array(e),zc=T(),xc=T(),Ic=T([1]),Vc=T(),Pc=T([32]),Mc=T(),$c=T([8]),kc=T(),Dc=T(),Cc=T([1]),jc=T(),_c=T([0,2]),Rc=T(),Fc=T([56]),Uc=T(),Nc=T(),Bc=T(),Lc=T([4]),qc=T(),Wc=T(),Gc=T(),Kc=T([171,2,0,1]),Jc=T([99,111,109,46,103,114,101,121,98,111,120,119,97,114,101,46,97,115,99,105,105,109,105,105,0]),Hc=T([163,4,0,1]),Yc=T([82,105,99,104,97,114,100,32,90,117,114,97,100,0]),Xc=T(),Zc=T([1]),Qc=T([254,3,0,1]),ta=T([70,105,108,116,101,114,32,116,111,32,109,105,109,105,99,32,116,104,101,32,84,69,88,84,112,32,101,102,102,101,99,116,32,102,114,111,109,32,89,111,117,84,117,98,101,39,115,32,50,48,49,48,32,65,112,114,105,108,32,70,111,111,108,115,32,106,111,107,101,0]),ea=T(),na=T(),sa=T(),ra=T(1),oa=T([1]),Hr=T(24),ia=T(),ca=T(),aa=T(),la=T(),ua=T([4]),ae=T(48),Yr=T(24),fa=T(),ya=T(),ha=T(),ma=T([4]),Un=T(24),pa=T([8,0,0,0,56,0,0,0]),da=T([8,0]),ba=T([8,0]),Sa=T(),ga=T(),wa=T(),va=T(),y=Object.assign;y(Fs,{slots:{0:En,1:zn,2:xn,3:In}});y(En,{structure:F,memory:{array:zc},const:!0,slots:{0:Tn}});y(Tn,{structure:Ft});y(zn,{structure:U,memory:{array:xc},const:!0,slots:{0:Us}});y(Us,{structure:K,memory:{array:Ic},const:!0});y(xn,{structure:U,memory:{array:Vc},const:!0,slots:{0:Ns}});y(Ns,{structure:K,memory:{array:Pc},const:!0});y(In,{structure:U,memory:{array:Mc},const:!0,slots:{0:Bs}});y(Bs,{structure:K,memory:{array:$c},const:!0});y(Ls,{slots:{0:Vn,1:Pn,2:Mn,3:$n}});y(Vn,{structure:F,memory:{array:kc},const:!0,slots:{0:Tn}});y(Pn,{structure:U,memory:{array:Dc},const:!0,slots:{0:qs}});y(qs,{structure:K,memory:{array:Cc},const:!0});y(Mn,{structure:U,memory:{array:jc},const:!0,slots:{0:Ws}});y(Ws,{structure:be,memory:{array:_c},const:!0});y($n,{structure:U,memory:{array:Rc},const:!0,slots:{0:Gs}});y(Gs,{structure:K,memory:{array:Fc},const:!0});y(Ks,{slots:{0:kn,1:Dn}});y(kn,{structure:De,memory:{array:Uc},const:!0,slots:{0:En,1:zn,2:xn,3:In}});y(Dn,{structure:Ce,memory:{array:Nc},const:!0,slots:{0:Vn,1:Pn,2:Mn,3:$n}});y(Js,{slots:{0:ce}});y(ce,{structure:U,memory:{array:Bc},const:!0,slots:{0:Hs}});y(Hs,{structure:K,memory:{array:Lc},const:!0});y(Ys,{slots:{0:Cn,1:jn}});y(Cn,{structure:bt,memory:{array:qc},const:!0,slots:{0:ce}});y(jn,{structure:bt,memory:{array:Wc},const:!0,slots:{0:ce}});y(Xs,{slots:{0:_n}});y(_n,{structure:bt,memory:{array:Gc},const:!0,slots:{0:ce}});y(Zs,{slots:{0:Qs,1:er,2:sr,3:or,4:cr,5:ar,6:lr}});y(Qs,{structure:Ve,memory:{array:Kc},const:!0,slots:{0:tr}});y(tr,{structure:Ie,memory:{array:Jc},reloc:16777899});y(er,{structure:Me,memory:{array:Hc},const:!0,slots:{0:nr}});y(nr,{structure:Pe,memory:{array:Yc},reloc:16778403});y(sr,{structure:U,memory:{array:Xc},const:!0,slots:{0:rr}});y(rr,{structure:K,memory:{array:Zc},const:!0});y(or,{structure:ke,memory:{array:Qc},const:!0,slots:{0:ir}});y(ir,{structure:$e,memory:{array:ta},reloc:16778238});y(cr,{structure:je,memory:{array:ea},const:!0,slots:{0:kn,1:Dn}});y(ar,{structure:_e,memory:{array:na},const:!0,slots:{0:Cn,1:jn}});y(lr,{structure:Re,memory:{array:sa},const:!0,slots:{0:_n}});y(ur,{slots:{0:fr,1:yr}});y(fr,{structure:ft,memory:{array:ra},const:!0});y(yr,{structure:ft,memory:{array:oa},const:!0});y(hr,{memory:{array:Hr},slots:{0:mr}});y(mr,{structure:Bt,memory:{array:Hr,offset:0,length:8},slots:{0:Lt}});y(Lt,{structure:ne,memory:{array:ia},reloc:0});y(pr,{slots:{0:dr,1:br,2:Sr}});y(dr,{structure:F,memory:{array:ca},const:!0,slots:{0:Rn}});y(Rn,{structure:Fe});y(br,{structure:F,memory:{array:aa},const:!0,slots:{0:Fn}});y(Fn,{structure:Sn});y(Sr,{structure:U,memory:{array:la},const:!0,slots:{0:gr}});y(gr,{structure:K,memory:{array:ua},const:!0});y(wr,{memory:{array:ae},slots:{0:vr,1:Ar}});y(vr,{structure:Ut,memory:{array:ae,offset:0,length:24},slots:{0:Or}});y(Or,{structure:Bt,memory:{array:ae,offset:0,length:8},slots:{0:Lt}});y(Ar,{structure:Ut,memory:{array:ae,offset:24,length:24},slots:{0:Er}});y(Er,{structure:Bt,memory:{array:ae,offset:24,length:8},slots:{0:Lt}});y(Tr,{memory:{array:Yr},slots:{0:zr}});y(zr,{structure:re,memory:{array:Yr,offset:0,length:8},slots:{0:Lt}});y(xr,{slots:{0:Ir,1:Vr,2:Pr}});y(Ir,{structure:F,memory:{array:fa},const:!0,slots:{0:Rn}});y(Vr,{structure:F,memory:{array:ya},const:!0,slots:{0:Fn}});y(Pr,{structure:U,memory:{array:ha},const:!0,slots:{0:Mr}});y(Mr,{structure:K,memory:{array:ma},const:!0});y($r,{memory:{array:Un},slots:{0:kr}});y(kr,{structure:Ue,memory:{array:Un},slots:{0:Dr}});y(Dr,{structure:re,memory:{array:Un,offset:0,length:8},slots:{0:Lt}});y(Cr,{memory:{array:pa}});y(jr,{slots:{0:_r}});y(_r,{structure:jt,memory:{array:da},const:!0});y(Rr,{slots:{0:Fr}});y(Fr,{structure:_t,memory:{array:ba},const:!0});y(Ur,{slots:{0:Nr,1:Lr,2:Wr,3:Kr}});y(Nr,{structure:F,memory:{array:Sa},const:!0,slots:{0:Br}});y(Br,{structure:bn});y(Lr,{structure:F,memory:{array:ga},const:!0,slots:{0:qr}});y(qr,{structure:se});y(Wr,{structure:F,memory:{array:wa},const:!0,slots:{0:Gr}});y(Gr,{structure:oe});y(Kr,{structure:F,memory:{array:va},const:!0,slots:{0:Jr}});y(Jr,{structure:ie});const Oa={argStruct:wn,thunkId:2,name:"createOutput"},Aa={argStruct:On,thunkId:3,name:"createPartialOutput"};y(F,{...M,name:"type",align:1,instance:{members:[{...g,type:6,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:F}],methods:[]}});y(K,{...M,name:"u8",byteSize:1,align:1,instance:{members:[{...g,type:3,bitOffset:0,bitSize:8,byteSize:1,structure:K}],methods:[]}});y(Ie,{...M,type:1,name:"[24:0]u8",length:24,byteSize:25,align:1,instance:{members:[{...g,type:3,bitSize:8,byteSize:1,structure:K}],methods:[]}});y(Ve,{...M,type:14,name:"*const [24:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...g,type:5,bitSize:32,byteSize:4,slot:0,structure:Ie}],methods:[]}});y(Pe,{...M,type:1,name:"[13:0]u8",length:13,byteSize:14,align:1,instance:{members:[{...g,type:3,bitSize:8,byteSize:1,structure:K}],methods:[]}});y(Me,{...M,type:14,name:"*const [13:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...g,type:5,bitSize:32,byteSize:4,slot:0,structure:Pe}],methods:[]}});y(U,{...M,name:"comptime_int",align:1,instance:{members:[{...g,type:7,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:U}],methods:[]}});y($e,{...M,type:1,name:"[69:0]u8",length:69,byteSize:70,align:1,instance:{members:[{...g,type:3,bitSize:8,byteSize:1,structure:K}],methods:[]}});y(ke,{...M,type:14,name:"*const [69:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...g,type:5,bitSize:32,byteSize:4,slot:0,structure:$e}],methods:[]}});y(Ft,{...M,name:"i32",byteSize:4,align:4,instance:{members:[{...g,type:2,bitOffset:0,bitSize:32,byteSize:4,structure:Ft}],methods:[]}});y(De,{...M,type:2,name:"Struct0020",align:1,instance:{members:[{...g,type:7,slot:0,name:"type",structure:F},{...g,type:7,slot:1,name:"minValue",structure:U},{...g,type:7,slot:2,name:"maxValue",structure:U},{...g,type:7,slot:3,name:"defaultValue",structure:U}],methods:[],template:Fs}});y(be,{...M,name:"u16",byteSize:2,align:2,instance:{members:[{...g,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:be}],methods:[]}});y(Ce,{...M,type:2,name:"Struct0022",align:1,instance:{members:[{...g,type:7,slot:0,name:"type",structure:F},{...g,type:7,slot:1,name:"minValue",structure:U},{...g,type:7,slot:2,name:"maxValue",structure:U},{...g,type:7,slot:3,name:"defaultValue",structure:U}],methods:[],template:Ls}});y(je,{...M,type:2,name:"Struct0019",align:1,instance:{members:[{...g,type:7,slot:0,name:"size",structure:De},{...g,type:7,slot:1,name:"charCount",structure:Ce}],methods:[],template:Ks}});y(bt,{...M,type:2,name:"Struct0027",align:1,instance:{members:[{...g,type:7,slot:0,name:"channels",structure:U}],methods:[],template:Js}});y(_e,{...M,type:2,name:"Struct0026",align:1,instance:{members:[{...g,type:7,slot:0,name:"src",structure:bt},{...g,type:7,slot:1,name:"text",structure:bt}],methods:[],template:Ys}});y(Re,{...M,type:2,name:"Struct0029",align:1,instance:{members:[{...g,type:7,slot:0,name:"dst",structure:bt}],methods:[],template:Xs}});y(bn,{...M,type:2,name:"asciimii.kernel",align:1,static:{members:[{...g,type:7,slot:0,name:"namespace",structure:Ve},{...g,type:7,slot:1,name:"vendor",structure:Me},{...g,type:7,slot:2,name:"version",structure:U},{...g,type:7,slot:3,name:"description",structure:ke},{...g,type:7,slot:4,name:"parameters",structure:je},{...g,type:7,slot:5,name:"inputImages",structure:_e},{...g,type:7,slot:6,name:"outputImages",structure:Re}],methods:[],template:Zs}});y(Fe,{...M,type:19,name:"@Vector(4, u8)",length:4,byteSize:4,align:4,instance:{members:[{...g,type:3,bitSize:8,byteSize:1,structure:K}],methods:[]}});y(ne,{...M,type:18,name:"[_]@Vector(4, u8)",byteSize:4,align:4,instance:{members:[{...g,type:5,bitSize:32,byteSize:4,structure:Fe}],methods:[]}});y(Bt,{...M,type:15,name:"[]const @Vector(4, u8)",byteSize:8,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...g,type:5,bitSize:64,byteSize:8,slot:0,structure:ne}],methods:[]}});y(Y,{...M,name:"u32",byteSize:4,align:4,instance:{members:[{...g,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:Y}],methods:[]}});y(ft,{...M,type:12,name:"asciimii.ColorSpace",byteSize:1,align:1,instance:{members:[{...g,type:3,bitOffset:0,bitSize:1,byteSize:1,structure:ft}],methods:[]},static:{members:[{...g,type:7,slot:0,name:"srgb",structure:ft},{...g,type:7,slot:1,name:"display-p3",structure:ft}],methods:[],template:ur}});y(Zt,{...M,name:"usize",byteSize:4,align:4,instance:{members:[{...g,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:Zt}],methods:[]}});y(Se,{...M,name:"f32",byteSize:4,align:4,instance:{members:[{...g,type:4,bitOffset:0,bitSize:32,byteSize:4,structure:Se}],methods:[]}});y(Sn,{...M,type:19,name:"@Vector(4, f32)",length:4,byteSize:16,align:16,instance:{members:[{...g,type:4,bitSize:32,byteSize:4,structure:Se}],methods:[]}});y(Ut,{...M,type:2,name:"asciimii.Image(u8,4,false)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...g,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:Bt},{...g,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:Y},{...g,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:Y},{...g,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:ft},{...g,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Zt}],methods:[],template:hr},static:{members:[{...g,type:7,slot:0,name:"Pixel",structure:F},{...g,type:7,slot:1,name:"FPixel",structure:F},{...g,type:7,slot:2,name:"channels",structure:U}],methods:[],template:pr}});y(se,{...M,type:2,name:"asciimii.KernelInput(u8,asciimii.kernel)",byteSize:48,align:4,hasPointer:!0,instance:{members:[{...g,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"src",structure:Ut},{...g,type:5,bitOffset:192,bitSize:192,byteSize:24,slot:1,name:"text",structure:Ut}],methods:[],template:wr}});y(re,{...M,type:15,name:"[]@Vector(4, u8)",byteSize:8,align:4,hasPointer:!0,instance:{members:[{...g,type:5,bitSize:64,byteSize:8,slot:0,structure:ne}],methods:[]}});y(Ue,{...M,type:2,name:"asciimii.Image(u8,4,true)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...g,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:re},{...g,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:Y},{...g,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:Y},{...g,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:ft},{...g,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Zt}],methods:[],template:Tr},static:{members:[{...g,type:7,slot:0,name:"Pixel",structure:F},{...g,type:7,slot:1,name:"FPixel",structure:F},{...g,type:7,slot:2,name:"channels",structure:U}],methods:[],template:xr}});y(oe,{...M,type:2,name:"asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...g,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"dst",structure:Ue}],methods:[],template:$r}});y(ie,{...M,type:2,name:"asciimii.KernelParameters(asciimii.kernel)",byteSize:8,align:4,instance:{members:[{...g,type:2,bitOffset:0,bitSize:32,byteSize:4,slot:0,name:"size",structure:Ft},{...g,type:2,bitOffset:32,bitSize:32,byteSize:4,slot:1,name:"charCount",structure:Ft}],methods:[],template:Cr}});y(jt,{...M,type:11,name:"ErrorSet0044",byteSize:2,align:2,instance:{members:[{...g,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:jt}],methods:[]},static:{members:[{...g,type:7,slot:0,name:"OutOfMemory",structure:jt}],methods:[],template:jr}});y(gn,{...M,type:10,name:"ErrorSet0044!asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...g,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:oe},{...g,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:jt}],methods:[]}});y(wn,{...M,type:5,name:"Arg0047",byteSize:92,align:4,hasPointer:!0,instance:{members:[{...g,type:5,isRequired:!0,bitOffset:0,bitSize:224,byteSize:28,slot:0,name:"retval",structure:gn},{...g,type:3,isRequired:!0,bitOffset:224,bitSize:32,byteSize:4,slot:1,name:"0",structure:Y},{...g,type:3,isRequired:!0,bitOffset:256,bitSize:32,byteSize:4,slot:2,name:"1",structure:Y},{...g,type:5,isRequired:!0,bitOffset:288,bitSize:384,byteSize:48,slot:3,name:"2",structure:se},{...g,type:5,isRequired:!0,bitOffset:672,bitSize:64,byteSize:8,slot:4,name:"3",structure:ie}],methods:[]}});y(_t,{...M,type:11,name:"ErrorSet0046",byteSize:2,align:2,instance:{members:[{...g,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:_t}],methods:[]},static:{members:[{...g,type:7,slot:0,name:"OutOfMemory",structure:_t}],methods:[],template:Rr}});y(vn,{...M,type:10,name:"ErrorSet0046!asciimii.KernelOutput(u8,asciimii.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...g,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:oe},{...g,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:_t}],methods:[]}});y(On,{...M,type:5,name:"Arg0048",byteSize:100,align:4,hasPointer:!0,instance:{members:[{...g,type:5,isRequired:!0,bitOffset:0,bitSize:224,byteSize:28,slot:0,name:"retval",structure:vn},{...g,type:3,isRequired:!0,bitOffset:224,bitSize:32,byteSize:4,slot:1,name:"0",structure:Y},{...g,type:3,isRequired:!0,bitOffset:256,bitSize:32,byteSize:4,slot:2,name:"1",structure:Y},{...g,type:3,isRequired:!0,bitOffset:288,bitSize:32,byteSize:4,slot:3,name:"2",structure:Y},{...g,type:3,isRequired:!0,bitOffset:320,bitSize:32,byteSize:4,slot:4,name:"3",structure:Y},{...g,type:5,isRequired:!0,bitOffset:352,bitSize:384,byteSize:48,slot:5,name:"4",structure:se},{...g,type:5,isRequired:!0,bitOffset:736,bitSize:64,byteSize:8,slot:6,name:"5",structure:ie}],methods:[]}});y(An,{...M,type:2,name:"asciimii",align:1,static:{members:[{...g,type:7,slot:0,name:"kernel",structure:F},{...g,type:7,slot:1,name:"Input",structure:F},{...g,type:7,slot:2,name:"Output",structure:F},{...g,type:7,slot:3,name:"Parameters",structure:F}],methods:[Oa,Aa],template:Ur}});const Ea=[F,K,Ie,Ve,Pe,Me,U,$e,ke,Ft,De,be,Ce,je,bt,_e,Re,bn,Fe,ne,Bt,Y,ft,Zt,Se,Sn,Ut,se,re,Ue,oe,ie,jt,gn,wn,_t,vn,On,An],Ta=An,za={runtimeSafety:!1,littleEndian:!0},Ne=Tc();Ne.recreateStructures(Ea,za);const xa=(async()=>{const e=new URL("asciimii-47a5965c.wasm",import.meta.url).href;return fetch(e)})();Ne.loadModule(xa);Ne.linkVariables(!0);const{constructor:Ia}=Ta;Ne.getSpecialExports();const{createPartialOutput:Va,Input:Pa,kernel:en}=Ia;function Ma(e,t,n,s,r={},o={}){const i=[];for(const[m]of en.inputImages)i.push(m);const c=[];for(const[m]of en.outputImages)c.push(m);if(Array.isArray(r)){const m=r;r={};for(const[d,h]of i.entries())r[h]=m[d]}const a=new Pa(void 0),l=[];let u;for(const m of i){let d=r[m];if(d||(i.length===1&&["data","width","height"].every(h=>!!r[h])?d=r:l.push(m)),a[m]=d,u){if(d.colorSpace!==u)throw new Error(`Input images must all use the same color space: ${u}`)}else u=d.colorSpace}if(l.length>0)throw new Error(`Missing input image${l.length>1?"s":""}: ${l.join(", ")}`);const f=Va(e,t,n,s,a,o),p=m=>{const d={};for(const h of c){const{data:{typedArray:b},width:v,height:O}=m[h];let $;if(typeof ImageData=="function"){const z=new Uint8ClampedArray(b.buffer,b.byteOffset,b.byteLength);$=new ImageData(z,v,s,{colorSpace:u})}else $={data:b,width:v,height:O};if(c.length===1)return $;d[h]=$}return d};return f[Symbol.toStringTag]==="Promise"?f.then(p):p(f)}function $a(){const e={};for(let[t,n]of en){if(t==="parameters"){const s={};for(const[r,o]of n){const i=s[r]={};for(let[c,a]of o)typeof a=="object"?a=a.string??a.valueOf():typeof a=="function"&&(a=ka(a.name)),i[c]=a}n=s}else typeof n=="object"&&(n=n.string??n.valueOf());e[t]=n}return e}function ka(e){return{bool:"bool","@Vector(2, bool)":"bool2","@Vector(3, bool)":"bool3","@Vector(4, bool)":"bool4",i32:"int","@Vector(2, i32)":"int2","@Vector(3, i32)":"int3","@Vector(4, i32)":"int4",f32:"float","@Vector(2, f32)":"float2","@Vector(3, f32)":"float3","@Vector(4, f32)":"float4","[2]@Vector(2, f32)":"float2x2","[3]@Vector(3, f32)":"float3x3","[4]@Vector(4, f32)":"float4x4"}[e]}onmessage=async e=>{if(!Array.isArray(e.data))return;const[t,n,...s]=e.data;try{const[r,o]=await Da(t,s);postMessage([t,n,r],{transfer:o})}catch(r){postMessage(["error",n,r])}};async function Da(e,t){switch(e){case"getKernelInfo":return[$a(...t)];case"createPartialImageData":const s=await Ma(...t),r=[];if("data"in s&&"width"in s&&"height"in s)r.push(s.data.buffer);else for(const o of Object.entries(s))r.push(s.data.buffer);return[s,r];default:throw new Error(`Unknown function: ${e}`)}}postMessage("ready");
