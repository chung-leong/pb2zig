var Xe=Object.defineProperty;var Ze=(t,e,n)=>e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(Ze(t,typeof e!="symbol"?e+"":e,n),n);const b=Symbol("memory"),E=Symbol("slots"),Gt=Symbol("parent"),Tt=Symbol("name"),ie=Symbol("tag"),rt=Symbol("items"),xt=Symbol("props"),qt=Symbol("getter"),At=Symbol("setter"),ut=Symbol("elementGetter"),ft=Symbol("elementSetter"),Bt=Symbol("addressGetter"),pe=Symbol("addressSetter"),nt=Symbol("targetGetter"),Ut=Symbol("targetSetter"),st=Symbol("fixedLocation"),Jt=Symbol("propSetters"),de=Symbol("allKeys"),Lt=Symbol("length"),It=Symbol("proxy"),mt=Symbol("compat"),z=Symbol("size"),j=Symbol("align"),Ht=Symbol("array"),Rt=Symbol("pointer"),Et=Symbol("const"),_t=Symbol("constProto"),$=Symbol("copier"),se=Symbol("resetter"),U=Symbol("normalizer"),N=Symbol("vivificator"),P=Symbol("pointerVisitor"),yt=Symbol("environment"),vt=Symbol("attributes"),me=Symbol("more");function J(t){return function(){const e=this[b];this[b]=null,this[E]&&(this[E]={}),t.releaseFixedView(e)}}function re(t,e,n){if(t+e<=8){const o=2**e-1;if(n)return function(i,s,r){const l=s.getUint8(r)>>t&o;i.setUint8(0,l)};{const i=255^o<<t;return function(s,r,c){const l=r.getUint8(0),u=s.getUint8(c)&i|(l&o)<<t;s.setUint8(c,u)}}}else{const o=8-t,i=2**o-1;if(n){const r=2**(e%8)-1;return function(c,l,a){let u=a,f=0,y=l.getUint8(u++),h,d=y>>t&i,p=o,w=e;do w>p&&(y=l.getUint8(u++),d=d|y<<p),h=w>=8?d&255:d&r,c.setUint8(f++,h),d>>=8,w-=8;while(w>0)}}else{const r=2**((e-o)%8)-1,c=255^i<<t,l=255^r;return function(a,u,f){let y=0,h=f,d=a.getUint8(h),p,w,S=d&c,m=t,v=e+m;do v>m&&(p=u.getUint8(y++),S=S|p<<m,m+=8),v>=8?w=S&255:(d=a.getUint8(h),w=d&l|S&r),a.setUint8(h++,w),S>>=8,m-=8,v-=8;while(v>0)}}}}function k(t,e=!1){const n=be(t,e);return function(o){W.call(this),W.call(o);const i=o[b],s=this[b];n(s,i)}}function be(t,e=!1){if(!e){const n=Qe[t];if(n)return n}return t&7?t&3?t&1?tn:en:nn:on}const Qe={1:sn,2:rn,4:cn,8:ln,16:an,32:un};function tn(t,e){for(let n=0,o=t.byteLength;n<o;n++)t.setInt8(n,e.getInt8(n))}function en(t,e){for(let n=0,o=t.byteLength;n<o;n+=2)t.setInt16(n,e.getInt16(n,!0),!0)}function nn(t,e){for(let n=0,o=t.byteLength;n<o;n+=4)t.setInt32(n,e.getInt32(n,!0),!0)}function on(t,e){for(let n=0,o=t.byteLength;n<o;n+=8)t.setInt32(n,e.getInt32(n,!0),!0),t.setInt32(n+4,e.getInt32(n+4,!0),!0)}function sn(t,e){t.setInt8(0,e.getInt8(0))}function rn(t,e){t.setInt16(0,e.getInt16(0,!0),!0)}function cn(t,e){t.setInt32(0,e.getInt32(0,!0),!0)}function ln(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0)}function an(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0)}function un(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0),t.setInt32(16,e.getInt32(16,!0),!0),t.setInt32(20,e.getInt32(20,!0),!0),t.setInt32(24,e.getInt32(24,!0),!0),t.setInt32(28,e.getInt32(28,!0),!0)}function fn(t,e){const n=hn(e);return function(){W.call(this);const o=this[b];n(o,t,e)}}function hn(t){const e=yn[t];return e||(t&7?t&3?t&1?pn:dn:mn:bn)}const yn={1:gn,2:wn,4:Sn,8:vn,16:Tn,32:An};function pn(t,e,n){for(let o=e,i=e+n;o<i;o++)t.setInt8(o,0)}function dn(t,e,n){for(let o=e,i=e+n;o<i;o+=2)t.setInt16(o,0,!0)}function mn(t,e,n){for(let o=e,i=e+n;o<i;o+=4)t.setInt32(o,0,!0)}function bn(t,e,n){for(let o=e,i=e+n;o<i;o+=8)t.setInt32(o,0,!0),t.setInt32(o+4,0,!0)}function gn(t,e){t.setInt8(e,0)}function wn(t,e){t.setInt16(e,0,!0)}function Sn(t,e){t.setInt32(e,0,!0)}function vn(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0)}function Tn(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0)}function An(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0),t.setInt32(e+16,0,!0),t.setInt32(e+20,0,!0),t.setInt32(e+24,0,!0),t.setInt32(e+28,0,!0)}function W(){const t=this[b],e=t[b];if(!e||t.buffer.byteLength!==0)return!1;const{memory:n,address:o,len:i}=e,s=new DataView(n.buffer,o,i);return s[b]=e,this[b]=s,!0}const ce={},le={};function pt(t,e="utf-8"){let n=ce[e];n||(n=ce[e]=new TextDecoder(e));let o;if(Array.isArray(t))if(t.length===1)o=t[0];else{let i=0;for(const c of t)i+=c.length;const{constructor:s}=t[0];o=new s(i);let r=0;for(const c of t)o.set(c,r),r+=c.length}else o=t;return n.decode(o)}function En(t,e="utf-8"){switch(e){case"utf-16":{const{length:n}=t,o=new Uint16Array(n);for(let i=0;i<n;i++)o[i]=t.charCodeAt(i);return o}default:{let n=le[e];return n||(n=le[e]=new TextEncoder),n.encode(t)}}}function On(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}function xn(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<n.byteLength;o++)n[o]=e.charCodeAt(o);return new DataView(n.buffer)}function H(){const t=new Map,e={error:"throw"},n=function(o){const i=o==null?void 0:o[U];if(i){let s=t.get(o);return s===void 0&&(s=i.call(o,n,e),t.set(o,s)),s}else return o};return n(this)}const In=BigInt(Number.MAX_SAFE_INTEGER),Vn=BigInt(Number.MIN_SAFE_INTEGER);function Y(){const t=new Map,e={error:"return"},n=function(o){const i=o==null?void 0:o[U];if(i){if(o instanceof Error)return{error:o.message};let s=t.get(o);return s===void 0&&(s=i.call(o,n,e),t.set(o,s)),s}else return typeof o=="bigint"&&Vn<=o&&o<=In?Number(o):o};return n(this)}function ge(t,e){const n=Yt(()=>this.$,e);return t(n)}function Yt(t,e={}){const{error:n="throw"}=e;try{return t()}catch(o){if(n==="return")return o;throw o}}function Q(t,e={}){return Vt({get(){return W.call(this),this[b]},set(n){No(n),bt.call(this,n,t,!0,e)}})}function tt(t,e={}){return Vt({get(){return On(this.dataView)},set(n){typeof n!="string"&&Pt("string",n);const o=xn(n);bt.call(this,o,t,!1,e)}})}function we(t,e={}){const{sentinel:n,instance:{members:o}}=t,{byteSize:i}=o[0];return Vt({get(){const s=this.dataView,r=i===1?Int8Array:Int16Array,c=new r(s.buffer,s.byteOffset,this.length),l=pt(c,`utf-${i*8}`);return(n==null?void 0:n.value)===void 0?l:l.slice(0,-1)},set(s){typeof s!="string"&&Pt("a string",s),(n==null?void 0:n.value)!==void 0&&s.charCodeAt(s.length-1)!==n.value&&(s=s+String.fromCharCode(n.value));const r=En(s,`utf-${i*8}`),c=new DataView(r.buffer);bt.call(this,c,t,!1,e)}})}function ct(t,e={}){const{typedArray:n}=t;return Vt({get(){const o=this.dataView,i=o.byteLength/n.BYTES_PER_ELEMENT;return new n(o.buffer,o.byteOffset,i)},set(o){Bo(o,n)||Pt(n.name,o);const i=new DataView(o.buffer,o.byteOffset,o.byteLength);bt.call(this,i,t,!0,e)}})}function Vt({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}function Mn(t,e){const{byteSize:n,align:o,instance:{members:[i]},isConst:s}=t,{runtimeSafety:r=!0}=e,{structure:c}=i,{sentinel:l}=c,a=c.type===x.Slice,u=c.type===x.Pointer,f=a&&!l,y=f?n/2:n,{get:h,set:d}=C({type:A.Uint,bitOffset:0,bitSize:y*8,byteSize:y,structure:{byteSize:y}},e),{get:p,set:w}=f?C({type:A.Uint,bitOffset:y*8,bitSize:y*8,byteSize:y,structure:{name:"usize",byteSize:y}},e):{},S=function(){const T=this[st];if(T){const M=this[Bt]();if(M.address!==T.address||M.length!==T.length){const{constructor:_}=c,Ft=e.findMemory(M.address,M.length*_[z]),Ke=_.call(yt,Ft,{writable:!s});this[E][0]=Ke,this[st]=M}}},m=function(){return S.call(this),this[E][0]??zt()},v=function(T){if(e.inFixedMemory(this))if(e.inFixedMemory(T)){const M={address:e.getViewAddress(T[b]),length:f?T.length:1};gt.call(this,M),this[st]=M}else Mo();this[E][0]=T},I=ne(c)?function(){return m.call(this)[qt]()}:m,B=function(T){return S.call(this),(this[E][0]??zt())[At](T)},g=function(T,M){const _=c.constructor;if(this===yt||this===Gt||T instanceof R)return!1;if(ae(T,_))return new R(_(T["*"],{writable:!s}),M);if(a)return new R(_(T),M);Oo()},D=function(){const T=u?{}:jn,M=new Proxy(this,T);return Object.defineProperty(this,It,{value:M}),M},O=function(T){const M=c.constructor;if(ae(T,M)&&(!s&&T.constructor.const&&xo(t,T),T=T[E][0]),T instanceof M)W.call(T),s&&!T[Et]?T=M(T,{writable:!1}):!s&&T[Et]&&jo(t);else if(Uo(T,M)){const _=Dt(c,T,e);T=M(_,{writable:!s})}else if(T!==void 0&&!T[b]){const _=e.inFixedMemory(this),Ft=new M(T,{writable:!s,fixed:_});r&&c.typedArray&&Lo(T==null?void 0:T.buffer)&&Co(c,T),T=Ft}else T!==void 0&&Vo(t,T);this[Ut](T)},R=t.constructor=X(t,{initializer:O,alternateCaster:g,finalizer:D},e),gt=function({address:T,length:M}){d.call(this,T),w==null||w.call(this,M)},wt=function(){const T=h.call(this),M=p?p.call(this):l?T?e.findSentinel(T,l.bytes)+1:0:1;return{address:T,length:M}},He={"*":{get:I,set:B},$:{get:Kt,set:O},valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},[nt]:{value:m},[Ut]:{value:v},[Bt]:{value:wt},[pe]:{value:gt},[P]:{value:Dn},[$]:{value:k(n)},[N]:{value:zt},[U]:{value:$n},[st]:{value:void 0,writable:!0}},Ye={child:{get:()=>c.constructor},const:{value:s},[j]:{value:o},[z]:{value:n}};return K(R,He,Ye)}function $n(t){let e;try{e=this["*"]}catch{e=Symbol.for("inaccessible")}return t(e)}function Kt(){return this[It]}function lt({source:t}){const e=t[E][0];e&&this[Ut](e)}function Pn({isActive:t}){this[E][0]&&!t(this)&&(this[E][0]=void 0)}function Dn(t,e={}){const{source:n,isActive:o=q,isMutable:i=q}=e;t.call(this,{source:n,isActive:o,isMutable:i})}function ae(t,e){var n;return((n=t==null?void 0:t.constructor)==null?void 0:n.child)===e&&t["*"]}const jn={get(t,e){return e===Rt?t:e in t?t[e]:t[nt]()[e]},set(t,e,n){if(e in t)t[e]=n;else{const o=t[nt]();o[e]=n}return!0},deleteProperty(t,e){if(e in t)delete t[e];else{const n=t[nt]();delete n[e]}return!0},has(t,e){if(e in t)return!0;{const n=t[nt]();return e in n}}};function q(){return!0}function Cn(t,e){const{byteSize:n,align:o,instance:{members:i},hasPointer:s}=t,r={};for(const h of i){const{get:d,set:p}=C(h,e);r[h.name]={get:d,set:p,configurable:!0,enumerable:!0},h.isRequired&&p&&(p.required=!0)}const c=!!i.find(h=>h.type===A.Object),l=et(t),a=function(h){h instanceof u?(this[$](h),s&&this[P](lt,{vivificate:!0,source:h})):h&&typeof h=="object"?l.call(this,h):h!==void 0&&it(t,"object",h)},u=t.constructor=X(t,{initializer:a},e),f={$:{get:De,set:a},dataView:Q(t),base64:tt(t),valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},...r,[Symbol.iterator]:{value:ve},[$]:{value:k(n)},[N]:c&&{value:Xt(t)},[P]:s&&{value:Zt(t,q)},[U]:{value:Fn},[xt]:{value:i.map(h=>h.name)}},y={[j]:{value:o},[z]:{value:n}};return K(u,f,y)}function Fn(t,e){const n={};for(const[o,i]of Se.call(this,e))n[o]=t(i);return n}function Se(t){return{[Symbol.iterator]:zn.bind(this,t),length:this[xt].length}}function ve(t){return Se.call(this,t)[Symbol.iterator]()}function zn(t){const e=this,n=this[xt];let o=0;return{next(){let i,s;if(o<n.length){const r=n[o++];i=[r,Yt(()=>e[r],t)],s=!1}else s=!0;return{value:i,done:s}}}}function Xt(t){const{instance:{members:e}}=t,n={};for(const o of e.filter(i=>i.type===A.Object))n[o.slot]=o;return function(i,s=!0){const r=n[i],{bitOffset:c,byteSize:l,structure:{constructor:a}}=r,u=this[b],y=u.byteOffset+(c>>3);let h=l;h===void 0&&(c&7&&Do(r),h=r.bitSize>>3);const d=new DataView(u.buffer,y,h);return this[E][i]=a.call(Gt,d,{writable:s})}}function Zt(t,e={}){const{isChildActive:n=q,isChildMutable:o=q}=e,{instance:{members:i}}=t,s=i.filter(r=>r.structure.hasPointer);return function(c,l={}){var d;const{source:a,vivificate:u=!1,isActive:f=q,isMutable:y=q}=l,h={...l,isActive:p=>f(this)&&n.call(this,p),isMutable:p=>y(this)&&o.call(this,p)};for(const{slot:p}of s){if(a){const S=(d=a[E])==null?void 0:d[p];if(!S)continue;h.source=S}const w=this[E][p]??(u?this[N](p):null);w&&w[P](c,h)}}}function Nn(t,e){const{byteSize:n,align:o,instance:{members:i},hasPointer:s}=t,r=!!i.find(h=>h.type===A.Object),c=t.constructor=function(h){const d=e.allocateMemory(n,o);this[b]=d,r&&(this[E]={}),u.call(this,h)},l=i.slice(0,-1).map(h=>h.name),a=l.length,u=function(h){h.length!==a&&Ao(t,h.length);for(const[d,p]of l.entries())try{this[p]=h[d]}catch(w){Eo(t,d,w)}},f={};for(const h of i)f[h.name]=C(h,e);const y=function(h){return h===this.retval};return F(c.prototype,{...f,[$]:{value:k(n)},[N]:r&&{value:Xt(t)},[P]:s&&{value:Zt(t,{isChildMutable:y})}}),F(c,{[j]:{value:o},[z]:{value:n}}),c}function kn(t,e){const{length:n,byteSize:o,align:i,instance:{members:[s]},hasPointer:r}=t,{get:c,set:l}=C(s,e),a=Ae(s),u=et(t),f=function(m){if(m instanceof h)this[$](m),r&&this[P](lt,{vivificate:!0,source:m});else if(typeof m=="string"&&a&&(m={string:m}),m!=null&&m[Symbol.iterator]){m=Ve(m),m.length!==n&&$t(t,this,m);let v=0;for(const I of m)l.call(this,v++,I)}else m&&typeof m=="object"?u.call(this,m)===0&&ot(t,m):m!==void 0&&ot(t,m)},y=Te,h=t.constructor=X(t,{initializer:f,finalizer:y},e),d=t.typedArray=at(s),p=s.type===A.Object,w={$:{get:Kt,set:f},length:{value:n},dataView:Q(t),base64:tt(t),string:a&&we(t),typedArray:d&&ct(t),get:{value:c},set:{value:l},entries:{value:Qt},valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},[Symbol.iterator]:{value:Oe},[$]:{value:k(o)},[N]:p&&{value:xe(t)},[P]:r&&{value:Ie()},[U]:{value:Ee}},S={child:{get:()=>s.structure.constructor},[mt]:{value:jt(t)},[j]:{value:i},[z]:{value:o}};return K(h,w,S)}function Te(){const t=new Proxy(this,Un);return Object.defineProperty(this,It,{value:t}),t}function Ae(t){return t.type===A.Uint&&[8,16].includes(t.bitSize)}function Ee(t,e){const n=[];for(const[o,i]of Qt.call(this,e))n.push(t(i));return n}function Oe(){const t=this[Ht]??this,e=this.length;let n=0;return{next(){let o,i;if(n<e){const s=n++;o=t.get(s),i=!1}else i=!0;return{value:o,done:i}}}}function Bn(t){const e=this[Ht]??this,n=this.length;let o=0;return{next(){let i,s;if(o<n){const r=o++;i=[r,Yt(()=>e.get(r),t)],s=!1}else s=!0;return{value:i,done:s}}}}function Qt(t){return{[Symbol.iterator]:Bn.bind(this,t),length:this.length}}function xe(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:o}=e;return function(s,r=!0){const{constructor:c}=o,l=this[b],u=l.byteOffset+n*s,f=new DataView(l.buffer,u,n);return this[E][s]=c.call(Gt,f,{writable:r})}}function Ie(t){return function(n,o={}){const{source:i,vivificate:s=!1,isActive:r=q,isMutable:c=q}=o,l={...o,isActive:()=>r(this),isMutable:()=>c(this)};for(let a=0,u=this.length;a<u;a++){i&&(l.source=i==null?void 0:i[E][a]);const f=this[E][a]??(s?this[N](a):null);f&&f[P](n,l)}}}function Ve(t){var i;if(typeof t.length=="number")return t;const e=t[Symbol.iterator](),n=e.next(),o=(i=n.value)==null?void 0:i.length;if(typeof o=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let s;for(;!(s=e.next()).done;)yield s.value}(),{length:o});{const s=[];let r=n;for(;!r.done;)s.push(r.value),r=e.next();return s}}const Un={get(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return t.get(n);switch(e){case"get":return t[ut]||(t[ut]=t.get.bind(t)),t[ut];case"set":return t[ft]||(t[ft]=t.set.bind(t)),t[ft];case Ht:return t;default:return t[e]}},set(t,e,n){const o=typeof e=="symbol"?0:e|0;if(o!==0||o==e)t.set(o,n);else switch(e){case"get":t[ut]=n;break;case"set":t[ft]=n;break;default:t[e]=n}return!0},deleteProperty(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return!1;switch(e){case"get":delete t[ut];break;case"set":delete t[ft];break;default:delete t[e]}return!0},has(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,o=t.length;n<o;n++)e.push(`${n}`);return e.push("length",It),e},getOwnPropertyDescriptor(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e){if(n>=0&&n<t.length)return{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(t,e)}};function Ln(t,e){const{byteSize:n,align:o,instance:{members:[i]}}=t,{get:s,set:r}=C(i,e),{get:c,set:l}=C({...i,type:A.EnumerationItem,structure:t},e),a=["string","number","tagged union"],u=et(t),f=function(m){m&&typeof m=="object"?u.call(this,m)===0&&it(t,a,m):m!==void 0&&l.call(this,m)},y=function(m){if(typeof m=="string"||typeof m=="number"||typeof m=="bigint"){const v=h[rt];let I=v[m];return I||h[me]&&typeof m!="string"&&(I=v[m]=new h(void 0),r.call(I,m),F(I,{[Tt]:{value:`${m}`}})),I}else{if((m==null?void 0:m[ie])instanceof h)return m[ie];if(!Dt(t,m,e))it(t,a,m);else return!1}},h=t.constructor=X(t,{initializer:f,alternateCaster:y},e),d=t.typedArray=at(i),p=function(m){return m==="string"?this.$[Tt]:s.call(this)},w={$:{get:c,set:l},dataView:Q(t),base64:tt(t),typedArray:d&&ct(t),valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},[Symbol.toPrimitive]:{value:p},[$]:{value:k(n)},[U]:{value:Rn}},S={[j]:{value:o},[z]:{value:n},[rt]:{value:{}}};return K(h,w,S)}function Rn(t){return t(this.$[Tt])}function _n(t,e){const{byteSize:n,align:o,instance:{members:i},hasPointer:s}=t,{get:r,set:c}=C(i[0],e),{get:l,set:a}=C(i[1],e),u=function(){const O=l.call(this,!0);if(O)throw O;return r.call(this)},f=i[0].type===A.Void,h=i[1].structure.name==="anyerror"?te():i[1].structure.constructor,d=function(){return!l.call(this,!0)},p=function(){var O;this[se](),(O=this[P])==null||O.call(this,Pn)},w=!!i.find(O=>O.type===A.Object),S=et(t),m=function(O){if(O instanceof v)this[$](O),s&&d.call(this)&&this[P](lt,{vivificate:!0,source:O});else if(O instanceof h)a.call(this,O),p.call(this);else if(O!==void 0||f)try{c.call(this,O),a.call(this,0,!0)}catch(R){if(O instanceof Error)ke(t);else if(O&&typeof O=="object")try{if(S.call(this,O)===0)throw R}catch(gt){const{error:wt}=O;if(typeof wt=="string")a.call(this,wt),p.call(this);else throw gt}else throw R}},v=t.constructor=X(t,{initializer:m},e),{bitOffset:I,byteSize:B}=i[0],g={$:{get:u,set:m},dataView:Q(t),base64:tt(t),valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},[$]:{value:k(n)},[se]:{value:fn(I/8,B)},[N]:w&&{value:Xt(t)},[P]:s&&{value:Zt(t,{isChildActive:d})},[U]:{value:ge}},D={[j]:{value:o},[z]:{value:n}};return K(v,g,D)}function Wn(t,e){const{byteSize:n,align:o,instance:{members:[i]}}=t,{get:s,set:r}=C(i,e),c=et(t),l=function(h){if(h instanceof a)this[$](h);else if(h&&typeof h=="object"){if(c.call(this,h)===0){const d=$e(i);it(t,d,h)}}else h!==void 0&&r.call(this,h)},a=t.constructor=X(t,{initializer:l},e),u=t.typedArray=at(i),f={$:{get:s,set:r},dataView:Q(t),base64:tt(t),typedArray:u&&ct(t),valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},[Symbol.toPrimitive]:{value:s},[$]:{value:k(n)},[U]:{value:ge}},y={[mt]:{value:jt(t)},[j]:{value:o},[z]:{value:n}};return K(a,f,y)}function Gn(t){const{type:e,bitSize:n}=t,o=e===A.Int;let i=o?n-1:n;if(n<=32){const s=2**i-1;return{min:o?-(2**i):0,max:s}}else{i=BigInt(i);const s=2n**i-1n;return{min:o?-(2n**i):0n,max:s}}}function Me({type:t,bitSize:e}){if(t===A.Int||t===A.Uint)return e<=32?Number:BigInt;if(t===A.Float)return Number;if(t===A.Bool)return Boolean}function $e(t){const e=Me(t);if(e)return typeof e(0)}function qn(t,e){const{align:n,instance:{members:[o]},hasPointer:i}=t,{get:s,set:r}=C(o,e),{byteSize:c,structure:l}=o,a=Hn(t,e);a&&(t.sentinel=a);const u=Ae(o),f=function(g,D,O=!1){g||(g=e.allocateMemory(D*c,n,O)),this[b]=g,this[Lt]=D},y=function(g,D){D!==this[Lt]&&$t(t,this,g)},h=et(t),d=function(g,D=!1){if(g instanceof w)this[b]?y.call(this,g,g.length):f.call(this,null,g.length,D),this[$](g),i&&this[P](lt,{vivificate:!0,source:g});else if(typeof g=="string"&&u)d.call(this,{string:g},D);else if(g!=null&&g[Symbol.iterator]){g=Ve(g),this[b]?y.call(this,g,g.length):f.call(this,null,g.length,D);let O=0;for(const R of g)a==null||a.validateValue(R,O,g.length),r.call(this,O++,R)}else typeof g=="number"?!this[b]&&g>=0&&isFinite(g)?f.call(this,null,g):ot(t,g,!this[b]):g&&typeof g=="object"?h.call(this,g)===0&&ot(t,g):g!==void 0&&ot(t,g)},p=Te,w=t.constructor=X(t,{initializer:d,shapeDefiner:f,finalizer:p},e),S=t.typedArray=at(o),m=o.type===A.Object,v={shapeDefiner:f},I={$:{get:Kt,set:d},length:{get:Jn},dataView:Q(t,v),base64:tt(t,v),string:u&&we(t,v),typedArray:S&&ct(t,v),get:{value:s},set:{value:r},entries:{value:Qt},valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},[Symbol.iterator]:{value:Oe},[$]:{value:k(c,!0)},[N]:m&&{value:xe(t)},[P]:i&&{value:Ie()},[U]:{value:Ee}},B={child:{get:()=>l.constructor},[mt]:{value:jt(t)},[j]:{value:n},[z]:{value:c}};return K(w,I,B)}function Jn(){return this[Lt]}function Hn(t,e){const{runtimeSafety:n=!0}=e,{byteSize:o,instance:{members:[i,s],template:r}}=t;if(!s)return;const{get:c}=C(s,e),l=c.call(r,0),{get:a}=C(i,e),u=n?function(h,d,p){h===l&&d!==p-1?ue(t,h,d,p):h!==l&&d===p-1&&St(t,l,d)}:function(h,d,p){h!==l&&d===p-1&&St(t,l,p)},f=n?function(h,d){for(let p=0;p<d;p++){const w=a.call(h,p);w===l&&p!==d-1?ue(t,l,p,d):w!==l&&p===d-1&&St(t,l,d)}}:function(h,d){if(d*o===h[b].byteLength){const p=d-1;a.call(h,p)!==l&&St(t,l,d)}},y=r[b];return{value:l,bytes:y,validateValue:u,validateData:f}}function Yn(t,e){const{length:n,byteSize:o,align:i,instance:{members:[s]}}=t,{bitSize:r,structure:c}=s,l={};for(let p=0,w=0;p<n;p++,w+=r){const{get:S,set:m}=C({...s,bitOffset:w},e);l[p]={get:S,set:m,configurable:!0}}const a=et(t),u=function(p){if(p instanceof f)this[$](p);else if(p!=null&&p[Symbol.iterator]){let w=p.length;typeof w!="number"&&(p=[...p],w=p.length),w!==n&&$t(t,this,p);let S=0;for(const m of p)this[Jt][S++].call(this,m)}else p&&typeof p=="object"?a.call(this,p)===0&&ot(t,p):p!==void 0&&ot(t,p)},f=t.constructor=X(t,{initializer:u},e),y=t.typedArray=at(s),h={...l,$:{get:De,set:u},length:{value:n},dataView:Q(t),base64:tt(t),typedArray:y&&ct(t),valueOf:{value:H},toJSON:{value:Y},entries:{value:Pe},delete:{value:J(t)},[Symbol.iterator]:{value:Xn},[$]:{value:k(o)},[U]:{value:Kn}},d={child:{get:()=>c.constructor},[mt]:{value:jt(t)},[j]:{value:i},[z]:{value:o}};return K(f,h,d)}function Kn(t,e){const n=[];for(const[o,i]of Pe.call(this,e))n.push(t(i));return n}function Xn(){const t=this,e=this.length;let n=0;return{next(){let o,i;if(n<e){const s=n++;o=t[s],i=!1}else i=!0;return{value:o,done:i}}}}function Zn(){const t=this,e=this.length;let n=0;return{next(){let o,i;if(n<e){const s=n++;o=[s,t[s]],i=!1}else i=!0;return{value:o,done:i}}}}function Pe(){return{[Symbol.iterator]:Zn.bind(this),length:this.length}}const x={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,ExternUnion:6,BareUnion:7,TaggedUnion:8,ErrorUnion:9,ErrorSet:10,Enumeration:11,Optional:12,Pointer:13,Slice:14,Vector:15,Opaque:16,Function:17},L=Array(Object.values(x).length);function oi(){L[x.Primitive]=Wn}function ii(){L[x.Array]=kn}function si(){L[x.Struct]=Cn}function ri(){L[x.ArgStruct]=Nn}function ci(){L[x.ErrorUnion]=_n}function li(){L[x.ErrorSet]=no}function ai(){L[x.Enumeration]=Ln}function ui(){L[x.Pointer]=Mn}function fi(){L[x.Slice]=qn}function hi(){L[x.Vector]=Yn}function Qn(t){return L[t]}function F(t,e){for(const[n,o]of Object.entries(e))if(o){const{set:i,get:s,value:r,enumerable:c,configurable:l=!0,writable:a=!0}=o;Object.defineProperty(t,n,s?{get:s,set:i,configurable:l,enumerable:c}:{value:r,configurable:l,enumerable:c,writable:a})}for(const n of Object.getOwnPropertySymbols(e)){const o=e[n];o&&Object.defineProperty(t,n,o)}}function K(t,e,n){var u;const o={};Object.setPrototypeOf(o,t.prototype);const i={},s={};for(const[f,y]of Object.entries(e))y!=null&&y.set?(i[f]={...y,set:Nt},f!=="$"&&(s[f]=y.set)):f==="set"&&(i[f]={value:Nt,configurable:!0,writable:!0});const r=(u=e[N])==null?void 0:u.value,c={value:function(f){return r.call(this,f,!1)}},{get:l,set:a}=e.$;return F(t.prototype,{[Et]:{value:!1},[de]:{value:Object.keys(s)},[At]:{value:a},[qt]:{value:l},[Jt]:{value:s},...e}),F(t,{[_t]:{value:o},...n}),F(o,{constructor:{value:t,configurable:!0},[Et]:{value:!0},[At]:{value:Nt},[N]:r&&c,...i}),t}function X(t,e,n){const{byteSize:o,align:i,instance:{members:s,template:r},hasPointer:c}=t,{modifier:l,initializer:a,finalizer:u,alternateCaster:f,shapeDefiner:y}=e,h=to(s);let d;if(r!=null&&r[E]){const S=s.filter(m=>io(m.type));S.length>0&&(d=S.map(m=>m.slot))}const p=new eo,w=function(S,m={}){const{writable:v=!0,fixed:I=!1}=m,B=this instanceof w;let g,D;if(B)arguments.length===0&&bo(t),g=this,h&&(g[E]={}),y?(a.call(g,S,I),D=g[b]):g[b]=D=n.allocateMemory(o,i,I);else{if(f&&(g=f.call(this,S,m),g!==!1)||(D=ko(t,S,n),g=p.find(D,v)))return g;g=Object.create(v?w.prototype:w[_t]),y?bt.call(g,D,t,!1,{shapeDefiner:y}):g[b]=D,h&&(g[E]={},c&&S instanceof w&&g[P](lt,{vivificate:!0,source:S}))}if(d)for(const O of d)g[E][O]=r[E][O];return l&&l.call(g),B&&(y||a.call(g,S),v||(g=Object.assign(Object.create(w[_t]),g))),u&&(g=u.call(g)),p.save(D,v,g)};return w}function et(t){const{instance:{template:e}}=t;return function(n){var u;const o=Object.keys(n),i=this[Jt],s=this[de];for(const f of o)f in i||To(t,f);let r=0,c=0,l=0,a=0;for(const f of s){const y=i[f];y.special?f in n&&a++:(r++,f in n?c++:y.required&&l++)}if(l!==0&&a===0){const f=s.filter(y=>i[y].required&&!(y in n));vo(t,f)}if(a+c>o.length)for(const f of s)f in n&&(o.includes(f)||o.push(f));c<r&&a===0&&e&&(e[b]&&this[$](e),(u=this[P])==null||u.call(this,lt,{vivificate:!0,source:e}));for(const f of o)i[f].call(this,n[f]);return o.length}}function to(t){for(const{type:e}of t)switch(e){case A.Object:case A.Comptime:case A.Type:case A.Literal:return!0}return!1}function De(){return this}class eo{constructor(){V(this,0,null);V(this,1,null)}find(e,n){const i=this[n?0:1];return i==null?void 0:i.get(e)}save(e,n,o){const i=n?0:1;let s=this[i];return s||(s=this[i]=new WeakMap),s.set(e,o),o}}function no(t,e){const{byteSize:n,align:o,instance:{members:[i]}}=t,{get:s}=C(i,e),{get:r,set:c}=C({...i,type:A.Error,structure:t},e),l=["string","number"],a=et(t),u=function(v){if(v&&typeof v=="object")try{a.call(this,v)===0&&it(t,l,v)}catch(I){const{error:B}=v;if(typeof B=="string")c.call(this,B);else throw I}else v!==void 0&&c.call(this,v)},f=function(v){if(typeof v=="number"||typeof v=="string")return y[rt][v];if(!Dt(t,v,e))it(t,l,v);else return!1},y=t.constructor=X(t,{initializer:u,alternateCaster:f},e);Object.setPrototypeOf(y.prototype,Ot.prototype);const h=t.typedArray=at(i),d=function(){return this.$.message},p=function(){return"Error"},w=function(v){return v==="string"?Error.prototype.toString.call(this,v):s.call(this)},S={$:{get:r,set:c},message:{get:d},dataView:Q(t),base64:tt(t),typedArray:h&&ct(t),valueOf:{value:H},toJSON:{value:Y},delete:{value:J(e)},[Symbol.toStringTag]:{get:p},[Symbol.toPrimitive]:{value:w},[$]:{value:k(n)},[U]:{value:r}},m={[j]:{value:o},[z]:{value:n},[rt]:{value:{}}};return K(y,S,m)}let Ot;function oo(){Ot=function(){},Object.setPrototypeOf(Ot.prototype,Error.prototype)}function te(){return Ot}const A={Void:0,Bool:1,Int:2,Uint:3,Float:4,EnumerationItem:5,Error:6,Object:7,Type:8,Comptime:9,Static:10,Literal:11,Null:12,Undefined:13};function io(t){switch(t){case A.Type:case A.Comptime:case A.Literal:return!0;default:return!1}}const G={};function yi(){G[A.Bool]=so}function pi(){G[A.Int]=ro}function di(){G[A.Uint]=co}function mi(){G[A.Float]=lo}function bi(){G[A.EnumerationItem]=ao}function gi(){G[A.Error]=uo}function wi(){G[A.Object]=ho}function Si(){G[A.Type]=po}function vi(){G[A.Comptime]=mo}function ee({bitOffset:t,bitSize:e,byteSize:n}){return n!==void 0||!(t&7)&&!(e&7)||e===0}function C(t,e){const n=G[t.type];return n(t,e)}function so(t,e){return Mt(t,e,Fo)}function ro(t,e){const n=je(e,dt);return Mt(t,e,n)}function co(t,e){const n=je(e,dt);return Mt(t,e,n)}function je(t,e){return function(n,o){const{runtimeSafety:i=!0}=t,s=e(n,o);if(i&&n==="set"){const{min:r,max:c}=Gn(o);return function(l,a,u){(a<r||a>c)&&$o(o,a),s.call(this,l,a,u)}}return s}}function lo(t,e){return Mt(t,e,dt)}function Ce(t,e){const{type:n,structure:o}=t.structure.instance.members[0],i={...t,type:n,structure:o};return C(i,e)}function ao(t,e){const{structure:n}=t,{get:o,set:i}=Ce(t,e),s=function(r){const{constructor:c}=n,l=r instanceof c?r:c(r);return l||wo(n,r),l};return{get:o.length===0?function(){const c=o.call(this);return s(c)}:function(c){const l=o.call(this,c);return s(l)},set:i.length===1?function(c){const l=s(c);i.call(this,l[Symbol.toPrimitive]())}:function(c,l){const a=s(l);i.call(this,c,a[Symbol.toPrimitive]())}}}function uo(t,e){const{structure:n}=t,{name:o}=n,{get:i,set:s}=Ce(t,e),r=o==="anyerror",c=te(),l=function(a,u=!1){const{constructor:f}=n;let y;if(!(a===0&&u))return a instanceof Error?a instanceof(r?c:f)?y=a:ke(n):(y=r?c[a]:f(a),y||So(n,a)),y};return{get:i.length===0?function(u){const f=i.call(this);return l(f,u)}:function(u){const f=i.call(this,u);return l(f,!1)},set:s.length===1?function(u,f){const y=l(u,f);s.call(this,Number(y??0))}:function(u,f){const y=l(f,!1);s.call(this,u,Number(y))}}}function ne(t){switch(t.type){case x.Primitive:case x.ErrorUnion:case x.Optional:case x.Enumeration:case x.ErrorSet:return!0;default:return!1}}function Fe(t){return(this[E][t]??this[N](t))[qt]()}function ze(t){return this[E][t]??this[N](t)}function fo(t,e){(this[E][t]??this[N](t))[At](e)}function oe(t,{get:e,set:n}){return t!==void 0?{get:function(){return e.call(this,t)},set:n?function(o){return n.call(this,t,o)}:void 0}:{get:e,set:n}}function ho(t,e){const{structure:n,slot:o}=t;return oe(o,{get:ne(n)?Fe:ze,set:fo})}function yo(t){const e=this[E][t];return e==null?void 0:e.constructor}function po(t,e){const{slot:n}=t;return oe(n,{get:yo})}function mo(t,e){const{slot:n,structure:o}=t;return oe(n,{get:ne(o)?Fe:ze})}function Mt(t,e,n){const{littleEndian:o=!0}=e,{bitOffset:i,byteSize:s}=t,r=n("get",t),c=n("set",t);if(i!==void 0){const l=i>>3;return{get:function(){try{return r.call(this[b],l,o)}catch(u){if(u instanceof TypeError&&W.call(this))return r.call(this[b],l,o);throw u}},set:function(u){try{return c.call(this[b],l,u,o)}catch(f){if(f instanceof TypeError&&W.call(this))return c.call(this[b],l,u,o);throw f}}}}else return{get:function(a){try{return r.call(this[b],a*s,o)}catch(u){if(u instanceof TypeError&&W.call(this))return r.call(this[b],a*s,o);fe(t,a,u)}},set:function(a,u){try{return c.call(this[b],a*s,u,o)}catch(f){if(f instanceof TypeError&&W.call(this))return c.call(this[b],a*s,u,o);fe(t,a,f)}}}}function bo(t){const{name:e}=t;throw new TypeError(`An initializer must be provided to the constructor of ${e}, even when the intended value is undefined`)}function Ne(t,e,n=null){const{name:o,type:i,byteSize:s}=t,r=e.byteLength,c=s!==1?"s":"";if(i===x.Slice&&!n)throw new TypeError(`${o} has elements that are ${s} byte${c} in length, received ${r}`);{const l=i===x.Slice?n.length*s:s;throw new TypeError(`${o} has ${l} byte${c}, received ${r}`)}}function go(t){const{type:e,byteSize:n,typedArray:o}=t,i=n!==1?"s":"",s=["ArrayBuffer","DataView"].map(Z);throw o&&s.push(Z(o.name)),e===x.Slice?new TypeError(`Expecting ${Wt(s)} that can accommodate items ${n} byte${i} in length`):new TypeError(`Expecting ${Wt(s)} that is ${n} byte${i} in length`)}function wo(t,e){const{name:n}=t;throw typeof e=="number"||typeof e=="bigint"?new TypeError(`Value given does not correspond to an item of enum ${n}: ${e}`):new TypeError(`Enum item of the type ${n} expected, received ${e}`)}function So(t,e){const{name:n}=t,o=typeof e;throw o==="string"||o==="number"?new TypeError(`Error ${o} does not corresponds to any error in error set ${n}: ${e}`):new TypeError(`Error of the type ${n} expected, received ${e}`)}function ke(t){const{name:e}=t;throw new TypeError(`Error given is not a part of error set ${e}`)}function it(t,e,n){const{name:o}=t,i=[];if(Array.isArray(e))for(const r of e)i.push(Z(r));else i.push(Z(e));const s=Ue(n);throw new TypeError(`${o} expects ${Wt(i)} as argument, received ${s}`)}function ot(t,e,n=!1){const{instance:{members:[o]},type:i,typedArray:s}=t,r=[],c=$e(o);c?r.push(`array of ${c}s`):o.type===A.EnumerationItem?r.push("array of enum items"):r.push("array of objects"),s&&r.push(s.name),i===x.Slice&&n&&r.push("length"),it(t,r.join(" or "),e)}function $t(t,e,n){const{name:o,length:i,instance:{members:[s]}}=t,{structure:{constructor:r}}=s,{length:c,constructor:l}=n,a=(e==null?void 0:e.length)??i,u=a!==1?"s":"";let f;throw l===r?f="only a single one":l.child===r?f=`a slice/array that has ${c}`:f=`${c} initializer${c>1?"s":""}`,new TypeError(`${o} has ${a} element${u}, received ${f}`)}function vo(t,e){const{name:n}=t;throw new TypeError(`Missing initializers for ${n}: ${e.join(", ")}`)}function To(t,e){const{name:n,instance:{members:o}}=t;throw o.find(s=>s.name===e)?new TypeError(`Comptime value cannot be changed: ${e}`):new TypeError(`${n} does not have a property with that name: ${e}`)}function Ao(t,e){const{name:n,instance:{members:o}}=t,i=o.length-1,s=i!==1?"s":"";throw new Error(`${n} expects ${i} argument${s}, received ${e}`)}function Eo(t,e,n){const{name:o,instance:{members:i}}=t,s=`args[${e}]`,r=i.length-1,c=e!==0?"..., ":"",l=e!==r-1?", ...":"",a=c+s+l,u=new n.constructor(`${o}(${a}): ${n.message}`);throw u.stack=n.stack,u}function Oo(t){throw new TypeError("Non-slice pointers can only be created with the help of the new operator")}function xo(t,e){const{name:n}=t,{constructor:{name:o}}=e;throw new TypeError(`Conversion of ${o} to ${n} requires an explicit cast`)}function ue(t,e,n,o){const{name:i}=t;throw new TypeError(`${i} expects the sentinel value ${e} at ${o-1}, found at ${n}`)}function St(t,e,n){const{name:o}=t;throw new TypeError(`${o} expects the sentinel value ${e} at ${n-1}`)}function Io(t,e){throw new TypeError(`Unable to simultaneously align memory to ${e}-byte and ${t}-byte boundary`)}function Pt(t,e){const n=Ue(e);throw new TypeError(`Expected ${Z(t)}, received ${n}`)}function zt(){throw new TypeError("Null pointer")}function Vo(t,e){const{name:n}=t;let o;if(e!=null){const i=typeof e,s=i==="object"&&e.constructor!==Object?`${e.constructor.name} object`:i;o=`${Le(s)} ${s}`}else o=e+"";throw new TypeError(`${n} cannot point to ${o}`)}function Mo(t,e){throw new TypeError("Pointers in fixed memory cannot point to garbage-collected object")}function $o(t,e){const n=Ct(t);throw new TypeError(`${n} cannot represent the value given: ${e}`)}function Po(t,e){const{name:n}=t;throw new RangeError(`Index exceeds the size of ${n??"array"}: ${e}`)}function fe(t,e,n){if(n instanceof RangeError)Po(t,e);else throw n}function Do(t){const{name:e,structure:{name:{struct:n}}}=t;throw new TypeError(`Unable to create ${n} as it is not situated on a byte boundary: ${e}`)}function Nt(){throw new TypeError("Unable to modify read-only object")}function jo(t){const{name:e}=t;throw new TypeError(`${e} cannot point to a read-only object`)}function he(t){throw new Error(Be(t))}function Co(t,e){const n=Z(t.typedArray.name),o=Z(e.constructor.name);console.warn(`Implicitly creating ${n} from ${o}`)}function Be(t){let e=t.replace(/_/g," ");try{e=e.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,(n,o,i)=>{if(o.length===1)return` ${o.toLocaleLowerCase()}${i}`;if(i){const s=o.substring(0,o.length-1),r=o.charAt(o.length-1).toLocaleLowerCase();return` ${s} ${r}${i}`}else return` ${o}`}).trimStart()}catch{}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function Ue(t){const e=typeof t;let n;return e==="object"?n=t?Object.prototype.toString.call(t):"null":n=e,Z(n)}function Z(t){return`${Le(t)} ${t}`}function Le(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function Wt(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}function Fo(t,e){return qe(t,e,()=>{if(ee(e)){const{byteSize:n}=e,o=Ct({type:A.Int,bitSize:n*8});if(t==="get"){const i=DataView.prototype[`get${o}`];return function(s,r){return!!i.call(this,s,r)}}else{const i=DataView.prototype[`set${o}`],s=n>4?1n:1,r=n>4?0n:0;return function(c,l,a){i.call(this,c,l?s:r,a)}}}else return _e(t,e)})}function dt(t,e){return qe(t,e,n=>DataView.prototype[n]?DataView.prototype[n]:_e(t,e))}const Re={};function Ti(){Re[A.Uint]=zo}function _e(t,e){const n=Re[e.type];return n(t,e)}function zo(t,e){return ee(e)?_o(t,e):Wo(t,e)}function Dt(t,e,n){const{type:o,byteSize:i,typedArray:s}=t;let r;const c=e==null?void 0:e[Symbol.toStringTag];if(c==="DataView")r=e;else if(c==="ArrayBuffer"||c==="SharedArrayBuffer")r=n.obtainView(e,0,e.byteLength);else if(s&&c===s.name||c==="Uint8ClampedArray"&&s===Uint8Array)r=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else if(c==="Uint8Array"&&typeof Buffer=="function"&&e instanceof Buffer)r=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else{const l=e==null?void 0:e[b];if(l){const{constructor:a,instance:{members:[u]}}=t;if(e instanceof a)return l;if(o===x.Array||o===x.Slice||o===x.Vector){const{byteSize:f,structure:{constructor:y}}=u,h=Ge(e,y);if(h!==void 0){if(o===x.Slice||h*f===i)return l;$t(t,null,e)}}}}return r&&i!==void 0&&We(r,t),r}function No(t){return(t==null?void 0:t[Symbol.toStringTag])!=="DataView"&&Pt("a DataView",t),t}function We(t,e){const{byteSize:n,type:o}=e;(o===x.Slice?t.byteLength%n!==0:t.byteLength!==n)&&Ne(e,t)}function bt(t,e,n,o){const{byteSize:i,type:s,sentinel:r}=e,c=s===x.Slice;if(this[b]){const l=c?i*this.length:i;t.byteLength!==l&&Ne(e,t,this);const a={[b]:t};r==null||r.validateData(a,this.length),this[$](a)}else{const{shapeDefiner:l}=o;We(t,e);const a=t.byteLength/i,u={[b]:t};r==null||r.validateData(u,a),l.call(this,n?null:t,a),n&&this[$](u)}}function Ge(t,e){const{constructor:n}=t;if(n===e)return 1;if(n.child===e)return t.length}function ko(t,e,n){const o=Dt(t,e,n);return o||go(t),o}function at(t){const{type:e,byteSize:n}=t;if(e===A.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(e===A.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(e===A.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(e===A.Object)return t.structure.typedArray;return null}function Bo(t,e){const n=t==null?void 0:t[Symbol.toStringTag];return!!e&&n===e.name}function Uo(t,e){const n=e[mt];if(n){const o=t==null?void 0:t[Symbol.toStringTag];if(n.includes(o))return!0}return!!(e.child&&Ge(t,e.child)!==void 0)}function jt(t){const{typedArray:e}=t,n=[];return e&&(n.push(e.name),n.push("DataView"),(e===Uint8Array||e===Int8Array)&&(n.push("Uint8ClampedArray"),n.push("ArrayBuffer"),n.push("SharedArrayBuffer"))),n}function Lo(t,e){const n=t==null?void 0:t[Symbol.toStringTag];return n==="DataView"||n==="ArrayBuffer"||n==="SharedArrayBuffer"?!0:!!(e&&n===e.name)}function Ct(t){const{type:e,bitSize:n,byteSize:o}=t;if(e===A.Int)return`${n<=32?"":"Big"}Int${n}`;if(e===A.Uint)return`${n<=32?"":"Big"}Uint${n}`;if(e===A.Float)return`Float${n}`;if(e===A.Bool)return`Bool${o!==void 0?o*8:1}`;if(e===A.Void)return"Null"}function Ro(t){const e=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,o=Math.ceil(t/64);return{get:function(i,s){let r=0n;if(s)for(let c=0,l=i+(o-1)*8;c<o;c++,l-=8){const a=e.call(this,l,s);r=r<<64n|a}else for(let c=0,l=i;c<o;c++,l+=8){const a=e.call(this,l,s);r=r<<64n|a}return r},set:function(i,s,r){let c=s;const l=0xFFFFFFFFFFFFFFFFn;if(r)for(let a=0,u=i;a<o;a++,u+=8){const f=c&l;n.call(this,u,f,r),c>>=64n}else{c<<=BigInt(o*64-t);for(let a=0,u=i+(o-1)*8;a<o;a++,u-=8){const f=c&l;n.call(this,u,f,r),c>>=64n}}return c}}}function _o(t,e){const{bitSize:n,byteSize:o}=e;if(n<64){const i=Ct({...e,bitSize:o*8}),s=DataView.prototype[`get${i}`],r=DataView.prototype[`set${i}`],c=n<=32?2**n-1:2n**BigInt(n)-1n;return t==="get"?function(l,a){return s.call(this,l,a)&c}:function(l,a,u){const f=a&c;r.call(this,l,f,u)}}else{const{get:i,set:s}=Ro(n),r=2n**BigInt(n)-1n;return t==="get"?function(c,l){return i.call(this,c,l)&r}:function(c,l,a){const u=l&r;s.call(this,c,u,a)}}}function Wo(t,e){const{bitSize:n,bitOffset:o}=e,i=o&7;if(i+n<=8){const s=DataView.prototype.setUint8,r=DataView.prototype.getUint8,c=2**n-1;if(t==="get")return function(l){return r.call(this,l)>>>i&c};{const l=255^c<<i;return function(a,u){const y=r.call(this,a)&l|(u&c)<<i;s.call(this,a,y)}}}return Go(t,e)}function Go(t,e){const{bitSize:n,bitOffset:o}=e,i=o&7,s=[1,2,4,8].find(c=>c*8>=n)??Math.ceil(n/64)*64,r=new DataView(new ArrayBuffer(s));if(t==="get"){const c=dt("get",{...e,byteSize:s}),l=re(i,n,!0);return function(a,u){return l(r,this,a),c.call(r,0,u)}}else{const c=dt("set",{...e,byteSize:s}),l=re(i,n,!1);return function(a,u,f){c.call(r,0,u,f),l(this,r,a)}}}const ye={};function qe(t,e,n){const{type:o,bitOffset:i,bitSize:s,structure:r}=e,c=i&7,l=Ct(e),a=ee(e)?"":`Bit${c}`,u=o===A.Int||o===A.Uint;let f=`${t}${l}${a}`,y=!1,h=f;if(u&&s===64){const p=r==null?void 0:r.name;(p==="usize"||p==="isize")&&(f+="Size",y=!0)}let d=ye[f];if(!d){if(u&&t==="set"){const p=Me(e),w=n(h);d=function(S,m,v){w.call(this,S,p(m),v)}}else if(y&&t==="get"){const p=n(h),w=BigInt(Number.MIN_SAFE_INTEGER),S=BigInt(Number.MAX_SAFE_INTEGER);d=function(m,v){const I=p.call(this,m,v);return w<=I&&I<=S?Number(I):I}}else d=n(f);d&&d.name!==f&&Object.defineProperty(d,"name",{value:f,configurable:!0,writable:!1}),ye[f]=d}return d}function qo(t,e){const n=(o,{methods:i},s)=>{const r={},c=/^(get|set)\s+([\s\S]+)/;for(const l of i){const a=e.createCaller(l,s),u=c.exec(a.name);if(u){const f=u[1],y=u[2],h=f==="get"?0:1;if(Jo(l,s)===h){let p=r[y];p||(p=r[y]={configurable:!0,enumerable:!0}),p[f]=a}}else r[a.name]={value:a,configurable:!0,writable:!0}}F(o,r)};n(t.constructor,t.static,!1),n(t.constructor.prototype,t.instance,!0)}function Jo(t,e){const{argStruct:{instance:{members:n}}}=t;return n.length-(e?2:1)}function Ho(t,e){const{type:n,constructor:o,static:{members:i,template:s}}=t;if(i.length===0)return;const r={};for(const c of i)r[c.name]=C(c,e);if(F(o,{...r,[Symbol.iterator]:{value:ve},[E]:{value:s[E]},[xt]:{value:i.map(c=>c.name)}}),n===x.Enumeration){const c=o[rt];for(const{name:l,slot:a}of i)if(l!==void 0){const u=o[E][a];if(u instanceof o){F(u,{[Tt]:{value:l}});const f=u[Symbol.toPrimitive]();c[f]=c[l]=u}}else F(o,{[me]:{value:!0}})}else if(n===x.ErrorSet){const c=te(),l=o[rt];for(const{name:a,slot:u}of i){let f=o[E][u];const y=Number(f),h=c[y];if(h){if(!(h instanceof o)){const d=h.constructor,p=Object.values(d[E]),w=Object.values(o[E]).map(S=>Number(S));if(p.every(S=>w.includes(Number(S))))Object.setPrototypeOf(d.prototype,o.prototype);else{Object.setPrototypeOf(o.prototype,d.prototype);for(const S of p)w.includes(Number(S))&&Object.setPrototypeOf(S,o.prototype)}}f=o[E][u]=h}else F(f,{message:{value:Be(a)}}),c[y]=c[f.message]=c[`${f}`]=f;l[y]=l[f.message]=l[`${f}`]=f}}}class Yo{constructor(){V(this,"context");V(this,"contextStack",[]);V(this,"consolePending",[]);V(this,"consoleTimeout",0);V(this,"viewMap",new WeakMap);V(this,"initPromise");V(this,"abandoned",!1);V(this,"released",!1);V(this,"littleEndian",!0);V(this,"runtimeSafety",!0);V(this,"comptime",!1);V(this,"variables",[]);V(this,"imports");V(this,"console",globalThis.console)}startContext(){this.context&&this.contextStack.push(this.context),this.context=new Ko}endContext(){this.context=this.contextStack.pop()}allocateMemory(e,n=0,o=!1){return o?this.allocateFixedMemory(e,n):this.allocateRelocMemory(e,n)}allocateRelocMemory(e,n){return this.obtainView(new ArrayBuffer(e),0,e)}registerMemory(e,n=null,o=void 0){const{memoryList:i}=this.context,s=this.getViewAddress(e),r=kt(i,s);return i.splice(r,0,{address:s,dv:e,len:e.byteLength,targetDV:n,targetAlign:o}),s}unregisterMemory(e){const{memoryList:n}=this.context,o=kt(n,e),i=n[o-1];(i==null?void 0:i.address)===e&&n.splice(o-1,1)}findMemory(e,n){if(this.context){const{memoryList:o}=this.context,i=kt(o,e),s=o[i-1];if((s==null?void 0:s.address)===e&&s.len===n)return s.targetDV??s.dv;if((s==null?void 0:s.address)<=e&&e<ht(s.address,s.len)){const r=Number(e-s.address),c=s.targetDV??s.dv,l=n===void 0;l&&(n=c.byteLength-r);const a=this.obtainView(c.buffer,c.byteOffset+r,n);return l&&(a[j]=s.targetAlign),a}}return this.obtainFixedView(e,n??0)}getViewAddress(e){const n=this.getBufferAddress(e.buffer);return ht(n,e.byteOffset)}obtainView(e,n,o){let i=this.viewMap.get(e);if(!i){const c=new DataView(e,n,o);return this.viewMap.set(e,c),c}if(i instanceof DataView){if(i.byteOffset===n&&i.byteLength===o)return i;{const c=i;i={[`${c.byteOffset}:${c.byteLength}`]:c},this.viewMap.set(e,i)}}const s=`${n}:${o}`;let r=i[s];return r||(r=i[s]=new DataView(e,n,o)),r}captureView(e,n,o){if(o){const i=this.allocateRelocMemory(n,0);return n>0&&this.copyBytes(i,e,n),i}else return this.obtainFixedView(e,n)}castView(e,n,o){const{constructor:i,hasPointer:s}=e,r=i.call(yt,n,{writable:o});return s&&this.acquirePointerTargets(r),r}finalizeShape(e){const o=Qn(e.type)(e,this);typeof o=="function"&&(F(o,{name:{value:e.name,configurable:!0}}),o.prototype.hasOwnProperty(Symbol.toStringTag)||F(o.prototype,{[Symbol.toStringTag]:{value:e.name,configurable:!0}}))}finalizeStructure(e){Ho(e,this),qo(e,this)}createCaller(e,n){const{name:o,argStruct:i,thunkId:s}=e,{constructor:r}=i,c=this;let l;return n?l=function(...a){return c.invokeThunk(s,new r([this,...a]))}:l=function(...a){return c.invokeThunk(s,new r(a))},Object.defineProperty(l,"name",{value:o}),l}recreateStructures(e,n){Object.assign(this,n);const o=(r,c)=>{for(const[l,a]of Object.entries(c))r[l]=i(a);return r},i=r=>{if(r.memory){const{array:c,offset:l,length:a}=r.memory,u=this.obtainView(c.buffer,l,a),{constructor:f}=r.structure,{reloc:y,const:h}=r,d=y!==void 0&&h!==!0,p=f.call(yt,u,{writable:d});return r.slots&&o(p[E],r.slots),y!==void 0&&this.variables.push({reloc:y,object:p}),p}else return r.structure};oo();const s=new Map;for(const r of e){for(const c of[r.instance,r.static])if(c.template){const l=c.template,a=c.template={};if(l.memory){const{array:u,offset:f,length:y}=l.memory;a[b]=this.obtainView(u.buffer,f,y)}if(l.slots){const u=a[E]={};s.set(u,l.slots)}}this.finalizeShape(r)}for(const[r,c]of s)o(r,c);for(const r of e)this.finalizeStructure(r)}linkVariables(e){const n=[];for(const{object:o,reloc:i}of this.variables)this.linkObject(o,i,e),o[nt]&&o[E][0]&&n.push(o);for(const o of n){const i=o[nt](),s=this.getViewAddress(i[b]),{length:r=1}=i;o[st]={address:s,length:r}}}linkObject(e,n,o){if(this.inFixedMemory(e))return;const i=e[b],s=this.recreateAddress(n),r=this.obtainFixedView(s,i.byteLength);if(o){const l=Object.create(e.constructor.prototype);l[b]=r,l[$](e)}e[b]=r;const c=l=>{if(l[E]){for(const a of Object.values(l[E]))if(a){const u=a[b];if(u.buffer===i.buffer){const f=u.byteOffset-i.byteOffset;a[b]=this.obtainView(r.buffer,f,u.byteLength),c(a)}}}};c(e)}unlinkVariables(){for(const{object:e}of this.variables)this.unlinkObject(e)}unlinkObject(e){if(!this.inFixedMemory(e))return;const n=e[b],o=this.allocateMemory(n.byteLength),i=Object.create(e.constructor.prototype);i[b]=o,i[$](e),e[b]=o}releaseFunctions(){const e=function(){throw new Error("Module was abandoned")};for(const n of Object.keys(this.imports))this[n]&&(this[n]=e)}getControlObject(){return{init:()=>this.initPromise??Promise.resolve(),abandon:()=>this.abandon(),released:()=>this.released,connect:e=>this.console=e}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}writeToConsole(e){const{console:n}=this;try{const o=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).slice(),i=o.lastIndexOf(10);if(i===-1)this.consolePending.push(o);else{const s=o.subarray(0,i),r=o.subarray(i+1),c=[...this.consolePending,s];n.log(pt(c)),this.consolePending=r.length>0?[r]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout(()=>{n.log(pt(this.consolePending)),this.consolePending=[]},250))}catch(o){n.error(o)}}flushConsole(){this.consolePending.length>0&&(console.log(pt(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}updatePointerAddresses(e){const n=new Map,o=new Map,i=[],s=this,r=function({isActive:a}){var y;if(!a(this))return;const u=this[Rt];if(n.get(u))return;const f=u[E][0];if(f&&(n.set(u,f),!s.inFixedMemory(f))){const h=f[b],d=o.get(h.buffer);if(d){const p=Array.isArray(d)?d:[d],w=Je(p,h.byteOffset,S=>S[b].byteOffset);p.splice(w,0,f),Array.isArray(d)||(o.set(h.buffer,p),i.push(p))}else o.set(h.buffer,f);(y=f[P])==null||y.call(f,r)}};e[P](r);const c=this.findTargetClusters(i),l=new Map;for(const a of c)for(const u of a.targets)l.set(u,a);for(const[a,u]of n){const f=l.get(u),{length:y=1}=u;let h=this.getTargetAddress(u,f);h===!1&&(h=this.getShadowAddress(u,f)),a[pe]({address:h,length:y})}}findTargetClusters(e){const n=[];for(const o of e){let i=null,s=0,r=0,c=null;for(const l of o){const a=l[b],{byteOffset:u,byteLength:f}=a,y=u+f;let h=!0;i&&(r>u?(c||(c={targets:[i],start:s,end:r,address:void 0,misaligned:void 0},n.push(c)),c.targets.push(l),y>r?c.end=y:h=!1):c=null),h&&(i=l,s=u,r=y)}}return n}createClusterShadow(e){const{start:n,end:o,targets:i}=e;let s=0,r;for(const S of i){const m=S[b],v=m.byteOffset,I=S.constructor[j]??m[j];(s===void 0||I>s)&&(s=I,r=v)}const c=o-n,l=this.allocateShadowMemory(c+s,1),a=this.getViewAddress(l),u=Zo(ht(a,r),s),f=Qo(u,r),y=l.byteOffset+Number(f-a),h=new DataView(l.buffer,y,c);for(const S of i){const m=S[b],v=m.byteOffset;if(v!==r){const I=S.constructor[j]??m[j];Xo(ht(f,v),I)&&Io(I,s)}}const d={[$]:k(c)},p=Object.create(d),w=Object.create(d);return p[b]=new DataView(i[0][b].buffer,Number(n),c),w[b]=h,w[vt]={address:a,len:l.byteLength,align:1},this.addShadow(w,p,1)}getShadowAddress(e,n){if(n){const o=e[b];if(n.address===void 0){const i=this.createClusterShadow(n);n.address=this.getViewAddress(i[b])}return ht(n.address,o.byteOffset)}else{const o=this.createShadow(e);return this.getViewAddress(o[b])}}createShadow(e){const n=e[b],o=e.constructor[j]??n[j],i=Object.create(e.constructor.prototype),s=i[b]=this.allocateShadowMemory(n.byteLength,o);return i[vt]={address:this.getViewAddress(s),len:s.byteLength,align:o},this.addShadow(i,e,o)}addShadow(e,n,o){let{shadowMap:i}=this.context;return i||(i=this.context.shadowMap=new Map),i.set(e,n),this.registerMemory(e[b],n[b],o),e}removeShadow(e){const{shadowMap:n}=this.context;if(n){for(const[o]of n)if(o[b]===e){n.delete(o);break}}}updateShadows(){const{shadowMap:e}=this.context;if(e)for(const[n,o]of e)n[$](o)}updateShadowTargets(){const{shadowMap:e}=this.context;if(e)for(const[n,o]of e)o[$](n)}releaseShadows(){const{shadowMap:e}=this.context;if(e)for(const[n]of e){const{address:o,len:i,align:s}=n[vt];this.freeShadowMemory(o,i,s)}}acquirePointerTargets(e){const n=this,o=new Map,i=function({isActive:s,isMutable:r}){var y,h;const c=this[Rt];if(o.get(c))return;o.set(c,!0);const l=!c.constructor.const,a=c[E][0];let u,f;if(s(this)){const d=c.constructor.child;if(!a||r(this))if(f=c[Bt](),ti(f.address))u=null;else{const p=d[z]!==void 0?f.length*d[z]:void 0,w=n.findMemory(f.address,p);u=d.call(yt,w,{writable:l})}else u=a}(y=a==null?void 0:a[P])==null||y.call(a,i,{vivificate:!0,isMutable:()=>l}),u!==a&&((h=u==null?void 0:u[P])==null||h.call(u,i,{vivificate:!0,isMutable:()=>l}),c[E][0]=u,n.inFixedMemory(c)&&(c[st]=f))};e[P](i,{vivificate:!0})}}class Ko{constructor(){V(this,"pointerProcessed",new Map);V(this,"memoryList",[]);V(this,"shadowMap",null);V(this,"call",0)}}function Je(t,e,n){let o=0,i=t.length;if(i===0)return 0;for(;o<i;){const s=Math.floor((o+i)/2);n(t[s])<=e?o=s+1:i=s}return i}function kt(t,e){return Je(t,e,n=>n.address)}function Xo(t,e){if(e===void 0)return!1;typeof t=="bigint"&&(t=Number(t&0xFFFFFFFFn));const n=e-1;return(t&n)!==0}function Zo(t,e){let n;return typeof t=="bigint"?(e=BigInt(e),n=~(e-1n)):n=~(e-1),(t&n)+e}function ht(t,e){return t+(typeof t=="bigint"?BigInt(e):e)}function Qo(t,e){return t-(typeof t=="bigint"?BigInt(e):e)}function ti(t){return typeof t=="bigint"?t===0xaaaaaaaaaaaaaaaan:t===2863311530}class ei extends Yo{constructor(){super(...arguments);V(this,"imports",{getFactoryThunk:{argType:"",returnType:"i"},allocateExternMemory:{argType:"ii",returnType:"i"},freeExternMemory:{argType:"iii"},allocateShadowMemory:{argType:"cii",returnType:"v"},freeShadowMemory:{argType:"ciii"},runThunk:{argType:"iv",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"}});V(this,"exports",{allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"vvb",returnType:"v"},getSlotNumber:{argType:"ii",returnType:"i"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"},startCall:{argType:"iv",returnType:"i"},endCall:{argType:"iv",returnType:"i"}});V(this,"nextValueIndex",1);V(this,"valueTable",{0:null});V(this,"valueIndices",new Map);V(this,"memory",null);V(this,"littleEndian",!0)}allocateHostMemory(n,o){const i={[j]:o},s=k(n),r=this.allocateRelocMemory(n,o),c=this.allocateShadowMemory(n,o),l={constructor:i,[b]:r,[$]:s},a={constructor:i,[b]:c,[$]:s};return a[vt]={address:this.getViewAddress(c),len:n,align:o},this.addShadow(a,l,o),c}freeHostMemory(n,o,i){const s=this.findMemory(n,o);this.removeShadow(s),this.unregisterMemory(n),this.freeShadowMemory(n,o,i)}getBufferAddress(n){return 0}allocateFixedMemory(n,o){if(n===0)return new DataView(this.memory.buffer,0,0);const i=this.allocateExternMemory(n,o),s=this.obtainFixedView(i,n);return s[j]=o,s}freeFixedMemory(n,o,i){o!==0&&this.freeExternMemory(n,o,i)}obtainFixedView(n,o){const{memory:i}=this;o===0&&n===-1431655766&&(n=0);const s=this.obtainView(i.buffer,n,o);return s[b]={memory:i,address:n,len:o},s}releaseFixedView(n){n.buffer;const o=n.byteOffset,i=n.byteLength,s=n[j];s!==void 0&&this.freeFixedMemory(o,i,s)}inFixedMemory(n){return this.memory?(W.call(n),n[b].buffer===this.memory.buffer):!1}copyBytes(n,o,i){const{memory:s}=this,r=new DataView(s.buffer,o,i);be(i)(n,r)}findSentinel(n,o){const{memory:i}=this,s=o.byteLength,r=i.buffer.byteLength-s+1;for(let c=n;c<r;c+=s){const l=new DataView(i.buffer,c,s);let a=!0;for(let u=0;u<s;u++){const f=l.getUint8(u),y=o.getUint8(u);if(f!==y){a=!1;break}}if(a)return(c-n)/s}}captureString(n,o){const{buffer:i}=this.memory,s=new Uint8Array(i,n,o);return pt(s)}getTargetAddress(n,o){return this.inFixedMemory(n)?this.getViewAddress(n[b]):n[b].byteLength===0?0:!1}clearExchangeTable(){this.nextValueIndex!==1&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(n){if(n){let o=this.valueIndices.get(n);return o===void 0&&(o=this.nextValueIndex++,this.valueIndices.set(n,o),this.valueTable[o]=n),o}else return 0}fromWebAssembly(n,o){switch(n){case"v":case"s":return this.valueTable[o];case"i":return o;case"b":return!!o}}toWebAssembly(n,o){switch(n){case"v":case"s":return this.getObjectIndex(o);case"i":return o;case"b":return o?1:0}}exportFunction(n,o="",i=""){return n?(...s)=>{s=s.map((c,l)=>this.fromWebAssembly(o.charAt(l),c));const r=n.apply(this,s);return this.toWebAssembly(i,r)}:()=>{}}importFunction(n,o="",i=""){let s=!1;return o.startsWith("c")&&(s=!0,o=o.slice(1)),(...r)=>{r=r.map((l,a)=>this.toWebAssembly(o.charAt(a),l)),s&&(r=[this.context.call,...r]);const c=n.apply(this,r);return this.fromWebAssembly(i,c)}}exportFunctions(){const n={};for(const[o,{argType:i,returnType:s,alias:r}]of Object.entries(this.exports)){const c=this[r??o];n[`_${o}`]=this.exportFunction(c,i,s)}return n}importFunctions(n){for(const[o,i]of Object.entries(n)){const s=this.imports[o];if(s){const{argType:r,returnType:c}=s;this[o]=this.importFunction(i,r,c)}}}async instantiateWebAssembly(n){const o=await n,i=this.exportFunctions(),s=this.getWASI(),r={env:i,wasi_snapshot_preview1:s};return o[Symbol.toStringTag]==="Response"?WebAssembly.instantiateStreaming(o,r):WebAssembly.instantiate(o,r)}loadModule(n){return this.initPromise=(async()=>{const{instance:o}=await this.instantiateWebAssembly(n),{memory:i,_initialize:s}=o.exports;this.importFunctions(o.exports),this.trackInstance(o),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=i,s==null||s()})()}trackInstance(n){const o=new WeakRef(n);Object.defineProperty(this,"released",{get:()=>!o.deref(),enumerable:!0})}linkVariables(n){this.initPromise&&(this.initPromise=this.initPromise.then(()=>super.linkVariables(n)))}getMemoryOffset(n){return n}recreateAddress(n){return n}startCall(n,o){this.startContext(),this.context.call=n,o[P]&&this.updatePointerAddresses(o);const i=this.getShadowAddress(o);return this.updateShadows(),i}endCall(n,o){this.updateShadowTargets(),o[P]&&this.acquirePointerTargets(o),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&this.flushConsole()}async runThunk(n,o){return await this.initPromise,this.runThunk(n,o)}invokeThunk(n,o){const i=this.runThunk(n,o);if(i){if(i[Symbol.toStringTag]==="Promise")return i.then(s=>(s&&he(s),o.retval));he(i)}return o.retval}getWASI(){return{proc_exit:n=>{},fd_write:(n,o,i,s)=>{if(n===1||n===2){const r=new DataView(this.memory.buffer);let c=0;for(let l=0,a=o;l<i;l++,a+=8){const u=r.getUint32(a,!0),f=r.getUint32(a+4,!0),y=new DataView(this.memory.buffer,u,f);this.writeToConsole(y),c+=f}return r.setUint32(s,c,!0),0}else return 1},random_get:(n,o)=>{const i=new DataView(this.memory.buffer);for(let s=0;s<o;s++)i.setUint8(Math.floor(256*Math.random()));return 0}}}}function Ai(t){return new ei}export{ii as a,ui as b,si as c,hi as d,fi as e,ai as f,li as g,ci as h,ri as i,Si as j,di as k,wi as l,vi as m,pi as n,bi as o,mi as p,gi as q,Ai as r,Ti as s,yi as t,oi as u};
