var dn=Object.defineProperty;var yn=(e,t,n)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var St=(e,t,n)=>yn(e,typeof t!="symbol"?t+"":t,n);const T={Primitive:0,Array:1,Struct:2,Union:3,ErrorUnion:4,ErrorSet:5,Enum:6,Optional:7,Pointer:8,Slice:9,Vector:10,Opaque:11,ArgStruct:12,VariadicStruct:13,Function:14},Ne=Object.keys(T),C={HasValue:1,HasObject:2,HasPointer:4,HasSlot:8},kt={IsSize:16},Oe={HasSentinel:16,IsString:32,IsTypedArray:64,IsClampedArray:128},H={IsExtern:16,IsPacked:32,IsIterator:64,IsTuple:128,IsAllocator:256,IsPromise:512,IsGenerator:1024,IsAbortSignal:2048},mn={IsOpenEnded:16,IsIterator:32},At={HasSelector:16},k={HasLength:16,IsMultiple:32,IsSingle:64,IsConst:128,IsNullable:256},te={HasSentinel:16,IsString:32,IsTypedArray:64,IsClampedArray:128,IsOpaque:256},It={IsGlobal:16},Et={IsTypedArray:16,IsClampedArray:32},qe={HasOptions:16,IsThrowing:32,IsAsync:64},$={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Literal:7,Null:8,Undefined:9,Unsupported:10},Nt=Object.keys($),we={IsRequired:1,IsReadOnly:2,IsPartOfSet:4,IsSelector:8,IsMethod:16,IsSentinel:32,IsBackingInt:64},de={OK:0,Failure:1,Deadlock:2,Disabled:3},xt={Call:0,Release:1},N={IsInactive:1,IsImmutable:2,IgnoreUncreated:4,IgnoreInactive:8,IgnoreArguments:16,IgnoreRetval:32};var jt;const Ye=globalThis[jt=Symbol.for("ZIGAR")]??(globalThis[jt]={});function bn(e){return Ye[e]??(Ye[e]=Symbol(e))}function x(e){return bn(e)}const w=x("memory"),V=x("slots"),dt=x("parent"),P=x("zig"),Ke=x("name"),ve=x("type"),Lt=x("flags"),ke=x("class"),vt=x("tag"),Ie=x("props"),ge=x("pointer"),ae=x("sentinel"),Ge=x("array"),X=x("target"),le=x("entries"),Ae=x("max length"),ot=x("keys"),Rt=x("address"),be=x("length"),Me=x("last address"),je=x("last length"),Ze=x("proxy"),Le=x("cache"),yt=x("size"),pn=x("bit size"),K=x("align"),Ee=x("const target"),Xe=x("const proxy"),ne=x("environment"),wn=x("attributes"),gn=x("primitive"),Re=x("setters"),se=x("typed array"),Dt=x("throwing"),Ht=x("promise"),Sn=x("generator"),me=x("callback"),Tt=x("allocator"),ct=x("signature"),mt=x("update"),G=x("restore"),De=x("reset"),Y=x("vivificate"),z=x("visit"),D=x("copy"),Ce=x("shape"),Z=x("initialize"),ie=x("finalize"),Pe=x("cast"),lt=x("return");function W(e,t,n){if(n){const{set:s,get:i,value:r,enumerable:c,configurable:o=!0,writable:a=!0}=n;Object.defineProperty(e,t,i||s?{get:i,set:s,configurable:o,enumerable:c}:{value:r,configurable:o,enumerable:c,writable:a})}return e}function ce(e,t){for(const[n,s]of Object.entries(t))W(e,n,s);for(const n of Object.getOwnPropertySymbols(t)){const s=t[n];W(e,n,s)}return e}function g(e){return e!==void 0?{value:e}:void 0}function Ut({type:e,bitSize:t}){switch(e){case $.Bool:return"boolean";case $.Int:case $.Uint:if(t>32)return"bigint";case $.Float:return"number"}}function bt(e,t="utf-8"){const n=Qe[t]??(Qe[t]=new TextDecoder(t));let s;if(Array.isArray(e))if(e.length===1)s=e[0];else{let i=0;for(const o of e)i+=o.length;const{constructor:r}=e[0];s=new r(i);let c=0;for(const o of e)s.set(o,c),c+=o.length}else s=e;return s.buffer[Symbol.toStringTag]==="SharedArrayBuffer"&&(s=new s.constructor(s)),n.decode(s)}function Bt(e,t="utf-8"){switch(t){case"utf-16":{const{length:n}=e,s=new Uint16Array(n);for(let i=0;i<n;i++)s[i]=e.charCodeAt(i);return s}default:return(et[t]??(et[t]=new TextEncoder)).encode(e)}}function An(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=String.fromCharCode.apply(null,t);return btoa(n)}function In(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<n.byteLength;s++)n[s]=t.charCodeAt(s);return new DataView(n.buffer)}const Qe={},et={};function _t(e,t,n){let s=0,i=e.length;if(i===0)return 0;for(;s<i;){const r=Math.floor((s+i)/2);n(e[r])<=t?s=r+1:i=r}return i}const En=function(e,t){return t?!!(e&t-1):!1},xn=function(e,t){return e+(t-1)&~(t-1)},at=4294967295,xe=-1,vn=function(e){return e===2863311530||e===-1431655766},ye=function(e,t){return e+t};function Gt(e){var i;if(typeof e.length=="number")return e;const t=e[Symbol.iterator](),n=t.next(),s=(i=n.value)==null?void 0:i.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let r;for(;!(r=t.next()).done;)yield r.value}(),{length:s});{const r=[];let c=n;for(;!c.done;)r.push(c.value),c=t.next();return r}}function Zt(e,t){const{constructor:n}=e;if(n===t)return 1;if(n.child===t)return e.length}function Wt(e,t){return e===t||(e==null?void 0:e[ct])===t[ct]&&e[ne]!==t[ne]}function oe(e,t){return e instanceof t||Wt(e==null?void 0:e.constructor,t)}function Fe({get:e,set:t}){return e.special=t.special=!0,{get:e,set:t}}function pt(){return this}function wt(){return this[Ze]}function Tn(){return String(this)}function He(){}class Jt{constructor(){St(this,"map",new WeakMap)}find(t){return this.map.get(t)}save(t,n){return this.map.set(t,n),n}}const ee={name:"",mixins:[],constructor:null};function I(e){return ee.constructor||ee.mixins.push(e),e}function Vn(){return ee.constructor||(ee.constructor=On(ee.name,ee.mixins),ee.name="",ee.mixins=[]),ee.constructor}function On(e,t){const n={},s=function(){for(const[r,c]of Object.entries(n))this[r]=structuredClone(c)},{prototype:i}=s;W(s,"name",g(e));for(const r of t)for(let[c,o]of Object.entries(r))if(typeof o=="function")W(i,c,g(o));else{let a=n[c];if(a!==void 0){if((a==null?void 0:a.constructor)===Object)o=Object.assign({...a},o);else if(a!==o)throw new Error(`Duplicate property: ${c}`)}n[c]=o}return s}function Is(){const e=Vn();return new e}I({accessorCache:new Map,getAccessor(e,t){var u;const{type:n,bitSize:s,bitOffset:i,byteSize:r}=t,c=[],o=r===void 0&&(s&7||i&7);o&&c.push("Unaligned");let a=Nt[n];s>32&&(n===$.Int||n===$.Uint)&&(s<=64?a=`Big${a}`:a=`Jumbo${a}`),c.push(a,`${n===$.Bool&&r?r*8:s}`),o&&c.push(`@${i}`);const l=e+c.join("");let f=DataView.prototype[l];if(f||(f=this.accessorCache.get(l),f))return f;for(;c.length>0;){const h=`getAccessor${c.join("")}`;if(f=(u=this[h])==null?void 0:u.call(this,e,t))break;c.pop()}if(!f)throw new Error(`No accessor available: ${l}`);return W(f,"name",g(l)),this.accessorCache.set(l,f),f}});I({getAccessorBool(e,t){const{byteSize:n}=t,s=n*8,i=this.getAccessor(e,{type:$.Uint,bitSize:s,byteSize:n});if(e==="get")return function(r,c){return!!i.call(this,r,c)};{const r=s<=32?0:0n,c=s<=32?1:1n;return function(o,a,l){i.call(this,o,a?c:r,l)}}}});I({getAccessorUint(e,t){const{bitSize:n,byteSize:s}=t;if(s){const i=this.getAccessor(e,{...t,bitSize:s*8}),r=2**n-1;return e==="get"?function(c,o){return i.call(this,c,o)&r}:function(c,o,a){const l=o&r;i.call(this,c,l,a)}}}});class Mn extends SyntaxError{constructor(t){super(`Cannot convert ${t} to an Int`)}}class Cn extends TypeError{constructor(){super("Unsupported")}}class qt extends TypeError{constructor(t){const{name:n}=t;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class Yt extends TypeError{constructor(t,n,s=null){const{name:i,type:r,byteSize:c}=t,o=n.byteLength,a=c!==1?"s":"";let l;if(r===T.Slice&&!s)l=`${i} has elements that are ${c} byte${a} in length, received ${o}`;else{const f=r===T.Slice?s.length*c:c;l=`${i} has ${f} byte${a}, received ${o}`}super(l)}}class Pn extends TypeError{constructor(t){const{type:n,byteSize:s,typedArray:i}=t,r=s!==1?"s":"",c=["ArrayBuffer","DataView"].map(fe);i&&c.push(fe(i.name));let o;n===T.Slice?o=`Expecting ${ut(c)} that can accommodate items ${s} byte${r} in length`:o=`Expecting ${ut(c)} that is ${s} byte${r} in length`,super(o)}}class $n extends TypeError{constructor(t,n){const{name:s}=t;let i;typeof n=="number"||typeof n=="bigint"?i=`Value given does not correspond to an item of enum ${s}: ${n}`:i=`Enum item of the type ${s} expected, received ${n}`,super(i)}}class zn extends TypeError{constructor(t,n){const{name:s}=t,i=typeof n;let r;i==="string"||i==="number"||$e(n)?($e(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),r=`Error ${i} does not corresponds to any error in error set ${s}: ${n}`):r=`Error of the type ${s} expected, received ${n}`,super(r)}}class Kt extends TypeError{constructor(t){const{name:n}=t;super(`Error given is not a part of error set ${n}`)}}class Se extends TypeError{constructor(t,n,s){const{name:i}=t,r=[];if(Array.isArray(n))for(const o of n)r.push(fe(o));else r.push(fe(n));const c=en(s);super(`${i} expects ${ut(r)} as argument, received ${c}`)}}class pe extends Se{constructor(t,n,s=!1){var l;const{instance:{members:[i]},type:r,constructor:c}=t,o=[],a=Ut(i);if(a){let f;switch((l=i.structure)==null?void 0:l.type){case T.Enum:f="enum item";break;case T.ErrorSet:f="error";break;default:f=a}o.push(`array of ${f}s`)}else o.push("array of objects");c[se]&&o.push(c[se].name),r===T.Slice&&s&&o.push("length"),super(t,o.join(" or "),n)}}class We extends TypeError{constructor(t,n,s){const{name:i,length:r,instance:{members:[c]}}=t,{structure:{constructor:o}}=c,{length:a,constructor:l}=s,f=(n==null?void 0:n.length)??r,u=f!==1?"s":"";let h;l===o?h="only a single one":l.child===o?h=`a slice/array that has ${a}`:h=`${a} initializer${a>1?"s":""}`,super(`${i} has ${f} element${u}, received ${h}`)}}class Vt extends TypeError{constructor(t,n){t<0?super("Length of slice cannot be negative"):super(`Length of slice can be ${n} or less, received ${t}`)}}class Fn extends TypeError{constructor(t,n){const{name:s}=t;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class jn extends TypeError{constructor(t,n){const{name:s,instance:{members:i}}=t,r=i.find(o=>o.name===n);let c;r?c=`Comptime value cannot be changed: ${n}`:c=`${s} does not have a property with that name: ${n}`,super(c)}}class kn extends Error{constructor(t,n,s=!1){super(),this.fnName="fn",this.argIndex=t,this.argCount=n,this.variadic=s}get message(){const t=this.argIndex!==1?"s":"";let n=this.argIndex;return this.variadic&&(n=`at least ${n}`),`${this.fnName}(): Expecting ${n} argument${t}, received ${this.argCount}`}}class Nn extends Error{constructor(){super("Undefined argument")}}class Ln extends TypeError{constructor(){super("Non-slice pointers can only be created with the help of the new operator")}}class Rn extends TypeError{constructor(){super("Casting to function is not allowed")}}class Dn extends TypeError{constructor(t,n){const{name:s}=t,{constructor:{name:i}}=n;super(`Conversion of ${i} to ${s} requires an explicit cast`)}}class Ot extends TypeError{constructor(t,n,s,i){const{name:r}=t;super(`${r} expects the sentinel value ${n} at ${i-1}, found at ${s}`)}}class tt extends TypeError{constructor(t,n,s){const{name:i}=t;super(`${i} expects the sentinel value ${n} at ${s-1}`)}}class Hn extends TypeError{constructor(t,n){super(`Unable to simultaneously align memory to ${n}-byte and ${t}-byte boundary`)}}class re extends TypeError{constructor(t,n){const s=en(n);super(`Expected ${fe(t)}, received ${s}`)}}class Un extends TypeError{constructor(){super("Null pointer")}}class Xt extends TypeError{constructor(t){super(`Object has been freed already: ${t.constructor.name}`)}}class Bn extends TypeError{constructor(t,n){const{name:s}=t;let i;if(n!=null){const r=n instanceof Object&&n.constructor!==Object?`${n.constructor.name} object`:typeof n;i=`${tn(r)} ${r}`}else i=n+"";super(`${s} cannot point to ${i}`)}}class _n extends TypeError{constructor(t,n){super("Pointers in Zig memory cannot point to garbage-collected object")}}class ft extends RangeError{constructor(t,n){const{name:s}=t;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class Mt extends TypeError{constructor(t){const{name:n}=t,s=n!==void 0?`Property ${n}`:"Element";super(`${s} can only be undefined`)}}class Gn extends TypeError{constructor(t){const{name:n,structure:{name:s}}=t;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class Zn extends TypeError{constructor(){super("Unable to modify read-only object")}}class Wn extends TypeError{constructor(t){const{name:n}=t;super(`${n} cannot point to a read-only object`)}}class Qt extends Error{constructor(t){super(t??"Error encountered in Zig code")}}class Jn extends Qt{constructor(t){super("Program exited"),this.code=t}}function qn(e,t){const{message:n}=this;return ce(this,{fnName:g("fn"),argIndex:g(e),argCount:g(t),message:{get(){const{fnName:s,argIndex:i,argCount:r}=this,c=`args[${i}]`,o=i!==0?"..., ":"",a=i!==r-1?", ...":"",l=o+c+a;return`${s}(${l}): ${n}`}}}),this}function Ct(e,t,n){return n instanceof RangeError&&!(n instanceof ft)&&(n=new ft(e,t)),n}function Te(){throw new Zn}function Yn(e,t){const n=fe(e.constructor[se].name),s=fe(t.constructor.name);console.warn(`Implicitly creating ${n} from ${s}`)}function Kn(e){let t=e.replace(/_/g," ");try{t=t.replace(new RegExp("(\\p{Uppercase}+)(\\p{Lowercase}*)","gu"),(n,s,i)=>s.length===1?` ${s.toLocaleLowerCase()}${i}`:i?n:` ${s}`).trimStart()}catch{}return t.charAt(0).toLocaleUpperCase()+t.substring(1)}function $e(e){return typeof e=="object"&&typeof e.error=="string"&&Object.keys(e).length===1}function en(e){const t=typeof e;let n;return t==="object"?n=e?Object.prototype.toString.call(e):"null":n=t,fe(n)}function fe(e){return`${tn(e)} ${e}`}function tn(e){return/^\W*[aeiou]/i.test(e)?"an":"a"}function ut(e,t="or"){const n=` ${t} `;return e.length>2?e.slice(0,-1).join(", ")+n+e[e.length-1]:e.join(n)}I({defineAlloc(){return{value(e,t=1){const n=31-Math.clz32(t),{vtable:{alloc:s},ptr:i}=this,r=s(i,e,n,0);r.length=e;const c=r["*"][w];return c[P].align=t,c}}},defineFree(){return{value(e){const{dv:t,align:n}=Pt(e),s=t==null?void 0:t[P];if(!s)throw new re("object containing allocated Zig memory",e);const{address:i}=s;if(i===xe)throw new Xt(e);if(!i)return;const r=31-Math.clz32(n),{vtable:{free:c},ptr:o}=this;c(o,t,r,0),s.address=xe}}},defineDupe(){const e=this.getCopyFunction();return{value(t){const{dv:n,align:s,constructor:i}=Pt(t);if(!n)throw new re("string, DataView, typed array, or Zig object",t);const r=this.alloc(n.byteLength,s);return e(r,n),i?i(r):r}}}});function Pt(e){var i;let t,n=1,s=null;if(e instanceof DataView){t=e;const r=(i=t==null?void 0:t[P])==null?void 0:i.align;r&&(n=r)}else if(e instanceof ArrayBuffer)t=new DataView(e);else if(e)if(e[w])e.constructor[ve]===T.Pointer&&(e=e["*"]),t=e[w],s=e.constructor,n=s[K];else{typeof e=="string"&&(e=Bt(e));const{buffer:r,byteOffset:c,byteLength:o,BYTES_PER_ELEMENT:a}=e;r&&c!==void 0&&o!==void 0&&(t=new DataView(r,c,o),n=a)}return{dv:t,align:n,constructor:s}}I({jsFunctionThunkMap:new Map,jsFunctionCallerMap:new Map,jsFunctionControllerMap:new Map,jsFunctionIdMap:null,jsFunctionNextId:1,getFunctionId(e){this.jsFunctionIdMap||(this.jsFunctionIdMap=new WeakMap);let t=this.jsFunctionIdMap.get(e);return t===void 0&&(t=this.jsFunctionNextId++,this.jsFunctionIdMap.set(e,t)),t},getFunctionThunk(e,t){const n=this.getFunctionId(e);let s=this.jsFunctionThunkMap.get(n);if(s===void 0){const i=this.getViewAddress(t[w]),r=this.createJsThunk(i,n);if(!r)throw new Error("Unable to create function thunk");s=this.obtainZigView(r,0),this.jsFunctionThunkMap.set(n,s),this.jsFunctionControllerMap.set(n,t)}return s},createInboundCaller(e,t){const n=(i,r)=>{let c=de.OK,o=!1;try{const a=t(i);if(z in a){a[z]("reset");const u=this.startContext();this.updatePointerTargets(u,a,!0),this.updateShadowTargets(u),this.endContext()}const l=function(u){try{const h=a[me];if(h)h(null,u);else if(t[Dt]&&u instanceof Error)a[lt](u);else throw u}catch{c=de.Failure,console.error(u)}},f=function(u){const h=a[me];try{h?h(null,u):a[lt](u,a[Tt])}catch(d){c=de.Failure,console.error(d)}};try{const u=e(...a);(u==null?void 0:u[Symbol.toStringTag])==="Promise"?r||a[me]?(u.then(f,l),r&&u.then(()=>this.finalizeAsyncCall(r,c)),o=!0,c=de.OK):c=de.Deadlock:(u!=null||!a[me])&&f(u)}catch(u){l(u)}}catch(a){console.error(a),c=de.Failure}return r&&!o&&this.finalizeAsyncCall(r,c),c},s=this.getFunctionId(e);return this.jsFunctionCallerMap.set(s,n),function(...i){return e(...i)}},defineArgIterator(e){const t=e.filter(({structure:n})=>n.type===T.Struct&&n.flags&H.IsAllocator).length;return{value(){var o;let n,s=0,i=0,r=0;const c=[];for(const[a,{structure:l,type:f}]of e.entries())try{let u=this[a];f===$.Object&&((o=u==null?void 0:u[w])!=null&&o[P])&&(u=new u.constructor(u));let h,d;if(l.type===T.Struct){if(l.flags&H.IsAllocator)h=t===1?"allocator":`allocator${++s}`,d=this[Tt]=u;else if(l.flags&H.IsPromise){if(h="callback",++i===1){const m=this[me]=u.callback["*"],A=u.ptr;d=(...S)=>{const b=S.length===2?S[0]??S[1]:S[0];return m(A,b)}}}else if(l.flags&H.IsAbortSignal&&(h="signal",++r===1)){const m=new AbortController;if(u.ptr["*"])m.abort();else{const A=setInterval(()=>{u.ptr["*"]&&(m.abort(),clearInterval(A))},50)}d=m.signal}}h!==void 0?d!==void 0&&(n??(n={}),n[h]=d):c.push(u)}catch(u){c.push(u)}return n&&c.push(n),c[Symbol.iterator]()}}},performJsAction(e,t,n,s,i=0){if(e===xt.Call){const r=this.obtainZigView(n,s);return this.runFunction(t,r,i)}else if(e===xt.Release)return this.releaseFunction(t)},runFunction(e,t,n){const s=this.jsFunctionCallerMap.get(e);return s?s(t,n):de.Failure},releaseFunction(e){const t=this.jsFunctionThunkMap.get(e),n=this.jsFunctionControllerMap.get(e);if(t&&n){const s=this.getViewAddress(n[w]),i=this.getViewAddress(t);this.destroyJsThunk(s,i),this.releaseZigView(t),e&&(this.jsFunctionThunkMap.delete(e),this.jsFunctionCallerMap.delete(e),this.jsFunctionControllerMap.delete(e))}},exports:{performJsAction:{argType:"iiii",returnType:"i"},queueJsAction:{argType:"iiiii"}},imports:{createJsThunk:{argType:"ii",returnType:"i"},destroyJsThunk:{argType:"ii",returnType:"i"},finalizeAsyncCall:{argType:"ii"}},queueJsAction(e,t,n,s,i){this.performJsAction(e,t,n,s,i)}});I({createOutboundCaller(e,t){const n=this,s=function(...i){if(!n.runThunk)return n.initPromise.then(()=>s(...i));try{return n.invokeThunk(e,s,new t(i))}catch(r){if("fnName"in r&&(r.fnName=s.name),r instanceof Jn&&r.code===0)return;throw r}};return s},copyArguments(e,t,n,s){let i=0,r=0;for(const[c,{type:o,structure:a}]of n.entries()){let l,f,u,h;if(a.type===T.Struct&&(a.flags&H.IsAllocator?l=(++r===1?(s==null?void 0:s.allocator)??(s==null?void 0:s.allocator1):s==null?void 0:s[`allocator${r}`])??this.createDefaultAllocator(e,a):a.flags&H.IsPromise?(f||(f={ptr:null,callback:this.createPromiseCallback(e,s==null?void 0:s.callback)}),l=f):a.flags&H.IsGenerator?(u||(u={ptr:null,callback:this.createGeneratorCallback(e,s==null?void 0:s.callback)}),l=u):a.flags&H.IsAbortSignal&&(h||(h={ptr:this.createSignalArray(a,s==null?void 0:s.signal)}),l=h)),l===void 0&&(l=t[i++],l===void 0&&o!==$.Void))throw new Nn;try{e[c]=l}catch(d){throw qn.call(d,c,t.length)}}},invokeThunk(e,t,n){var A;const s=this.startContext(),i=n[wn],r=this.getViewAddress(e[w]),c=this.getViewAddress(t[w]),o=z in n;o&&this.updatePointerAddresses(s,n);const a=this.getShadowAddress(s,n,null,!1),l=i?this.getShadowAddress(s,i):0;this.updateShadows(s);const f=i?this.runVariadicThunk(r,c,a,l,i.length):this.runThunk(r,c,a),u=()=>{var S,b;this.updateShadowTargets(s),o&&this.updatePointerTargets(s,n),this.libc&&((S=this.flushStdout)==null||S.call(this)),(b=this.flushConsole)==null||b.call(this),this.endContext()};if(!f)throw u(),new Qt;(A=n[D])==null||A.call(n,this.findShadowView(n[w])),ie in n?n[ie]=u:u();const h=n[Ht],d=n[Sn],m=n[me];if(m){try{const{retval:S}=n;S!=null&&m(null,S)}catch(S){m(null,S)}return h??d}else return n.retval},imports:{runThunk:{argType:"iii",returnType:"b"},runVariadicThunk:{argType:"iiiii",returnType:"b"}}});I({copiers:null,resetters:null,defineCopier(e,t){const n=this.getCopyFunction(e,t);return{value(s){var c,o;(c=this[G])==null||c.call(this),(o=s[G])==null||o.call(s);const i=s[w],r=this[w];n(r,i)}}},defineResetter(e,t){const n=this.getResetFunction(t);return{value(){var i;(i=this[G])==null||i.call(this);const s=this[w];n(s,e,t)}}},getCopyFunction(e,t=!1){return this.copiers||(this.copiers=this.defineCopiers()),(t?void 0:this.copiers[e])??this.copiers.any},getResetFunction(e){return this.resetters||(this.resetters=this.defineResetters()),this.resetters[e]??this.resetters.any},defineCopiers(){const e={type:$.Int,bitSize:8,byteSize:1},t={type:$.Int,bitSize:16,byteSize:2},n={type:$.Int,bitSize:32,byteSize:4},s=this.getAccessor("get",e),i=this.getAccessor("set",e),r=this.getAccessor("get",t),c=this.getAccessor("set",t),o=this.getAccessor("get",n),a=this.getAccessor("set",n);return{0:He,1:function(l,f){i.call(l,0,s.call(f,0))},2:function(l,f){c.call(l,0,r.call(f,0,!0),!0)},4:function(l,f){a.call(l,0,o.call(f,0,!0),!0)},8:function(l,f){a.call(l,0,o.call(f,0,!0),!0),a.call(l,4,o.call(f,4,!0),!0)},16:function(l,f){a.call(l,0,o.call(f,0,!0),!0),a.call(l,4,o.call(f,4,!0),!0),a.call(l,8,o.call(f,8,!0),!0),a.call(l,12,o.call(f,12,!0),!0)},any:function(l,f){let u=0,h=l.byteLength;for(;u+4<=h;)a.call(l,u,o.call(f,u,!0),!0),u+=4;for(;u+1<=h;)i.call(l,u,s.call(f,u)),u++}}},defineResetters(){const e={type:$.Int,bitSize:8,byteSize:1},t={type:$.Int,bitSize:16,byteSize:2},n={type:$.Int,bitSize:32,byteSize:4},s=this.getAccessor("set",e),i=this.getAccessor("set",t),r=this.getAccessor("set",n);return{0:He,1:function(c,o){s.call(c,o,0)},2:function(c,o){i.call(c,o,0,!0)},4:function(c,o){r.call(c,o,0,!0)},8:function(c,o){r.call(c,o+0,0,!0),r.call(c,o+4,0,!0)},16:function(c,o){r.call(c,o+0,0,!0),r.call(c,o+4,0,!0),r.call(c,o+8,0,!0),r.call(c,o+12,0,!0)},any:function(c,o,a){let l=o;for(;l+4<=a;)r.call(c,l,0,!0),l+=4;for(;l+1<=a;)s.call(c,l,0),l++}}},defineRetvalCopier({byteSize:e,bitOffset:t}){if(e>0){const n=this,s=t>>3,i=this.getCopyFunction(e);return{value(r){const c=this[w],{address:o}=r[P],a=new DataView(n.memory.buffer,o+s,e),l=new DataView(c.buffer,c.byteOffset+s,e);i(l,a)}}}}});I({addIntConversion(e){return function(t,n){const s=e.call(this,t,n),{flags:i,bitSize:r}=n;if(t==="set")return r>32?function(c,o,a){s.call(this,c,BigInt(o),a)}:function(c,o,a){const l=Number(o);if(!isFinite(l))throw new Mn(o);s.call(this,c,l,a)};{const{flags:c}=n.structure;if(c&kt.IsSize&&r>32){const o=BigInt(Number.MAX_SAFE_INTEGER),a=BigInt(Number.MIN_SAFE_INTEGER);return function(l,f){const u=s.call(this,l,f);return a<=u&&u<=o?Number(u):u}}}return s}}});I({memoryList:[],contextCount:0,startContext(){return++this.contextCount,{shadowList:[]}},endContext(){if(--this.contextCount===0){for(const{shadowDV:e}of this.memoryList)e&&this.freeShadowMemory(e);this.memoryList.splice(0)}},getShadowAddress(e,t,n,s){const i=t[w];if(n){if(n.address===void 0){const{start:r,end:c,targets:o}=n;let a=0,l;for(const E of o){const v=E[w],F=v.byteOffset,j=E.constructor[K]??v[K];(a===void 0||j>a)&&(a=j,l=F)}const f=c-r,u=this.allocateShadowMemory(f+a,1),h=this.getViewAddress(u),d=xn(ye(h,l-r),a),m=ye(d,r-l);for(const E of o){const v=E[w],F=v.byteOffset;if(F!==l){const j=E.constructor[K]??v[K];if(En(ye(m,F-r),j))throw new Hn(j,a)}}const A=u.byteOffset+Number(m-h),S=new DataView(u.buffer,A,f);S[P]={address:m,len:f,align:1,unalignedAddress:h,type:st.Scratch};const b=new DataView(i.buffer,Number(r),f),p=this.registerMemory(m,f,1,s,b,S);e.shadowList.push(p),n.address=m}return ye(n.address,i.byteOffset-n.start)}else{const r=t.constructor[K]??i[K],c=i.byteLength,o=this.allocateShadowMemory(c,r),a=this.getViewAddress(o),l=this.registerMemory(a,c,1,s,i,o);return e.shadowList.push(l),a}},updateShadows(e){const t=this.getCopyFunction();for(let{targetDV:n,shadowDV:s}of e.shadowList)s=this.restoreView(s),t(s,n)},updateShadowTargets(e){const t=this.getCopyFunction();for(let{targetDV:n,shadowDV:s,writable:i}of e.shadowList)i&&(s=this.restoreView(s),t(n,s))},registerMemory(e,t,n,s,i,r){const c=nt(this.memoryList,e);let o=this.memoryList[c-1];return(o==null?void 0:o.address)===e&&o.len===t?o.writable||(o.writable=s):(o={address:e,len:t,align:n,writable:s,targetDV:i,shadowDV:r},this.memoryList.splice(c,0,o)),o},unregisterMemory(e,t){const n=nt(this.memoryList,e),s=this.memoryList[n-1];if((s==null?void 0:s.address)===e&&s.len===t)return this.memoryList.splice(n-1,1),s},findMemory(e,t,n,s){let i=n*(s??0);const r=nt(this.memoryList,t),c=this.memoryList[r-1];let o;if((c==null?void 0:c.address)===t&&c.len===i)o=c.targetDV;else if((c==null?void 0:c.address)<=t&&ye(t,i)<ye(c.address,c.len)){const a=Number(t-c.address),l=s===void 0,{targetDV:f}=c;l&&(i=f.byteLength-a),o=this.obtainView(f.buffer,f.byteOffset+a,i),l&&(o[K]=c.align)}if(!o)o=this.obtainZigView(t,i);else{let{targetDV:a,shadowDV:l}=c;l&&e&&!e.shadowList.includes(c)&&(l=this.restoreView(l),this.getCopyFunction()(a,l))}return o},findShadowView(e){for(const{shadowDV:t,targetDV:n}of this.memoryList)if(n===e)return t},allocateZigMemory(e,t,n=st.Normal){const s=e?this.allocateExternMemory(n,e,t):0;if(!s&&e)throw new Error("Out of memory");const i=this.obtainZigView(s,e),r=i==null?void 0:i[P];return r&&(r.align=t,r.type=n),i},freeZigMemory(e){const{address:t,unalignedAddress:n,len:s,align:i,type:r}=e[P];s&&this.freeExternMemory(r,n??t,s,i)},releaseZigView(e){const t=e[P],n=t==null?void 0:t.address;n&&n!==xe&&(t.address=xe)},getViewAddress(e){const t=e[P];if(t)return t.address;{const n=this.getBufferAddress(e.buffer);return ye(n,e.byteOffset)}},imports:{allocateExternMemory:{argType:"iii",returnType:"i"},freeExternMemory:{argType:"iiii"}},exports:{getViewAddress:{argType:"v",returnType:"i"}},usizeMaxBuffer:new ArrayBuffer(0),allocateShadowMemory(e,t){return this.allocateZigMemory(e,t,st.Scratch)},freeShadowMemory(e){return this.freeZigMemory(e)},obtainZigView(e,t){return vn(e)&&(e=t>0?0:at),!e&&t?null:e===at?this.obtainView(this.usizeMaxBuffer,0,0):this.obtainView(this.memory.buffer,e,t)},getTargetAddress(e,t,n,s){const i=t[w];return i[P]?this.getViewAddress(i):i.byteLength===0?0:this.getShadowAddress(e,t,n,s)},getBufferAddress(e){return 0},copyExternBytes(e,t,n){const{memory:s}=this,i=new DataView(s.buffer,t,n);this.getCopyFunction(n)(e,i)}});function nt(e,t){return _t(e,t,n=>n.address)}const st={Normal:0,Scratch:1};I({released:!1,abandoned:!1,releaseFunctions(){const e=()=>{throw new Error("Module was abandoned")};for(const t of Object.keys(this.imports))this[t]&&(this[t]=e)},abandonModule(){var e;this.abandoned||(this.releaseFunctions(),(e=this.unlinkVariables)==null||e.call(this),this.abandoned=!0)},imports:{initialize:{argType:""}},exports:{displayPanic:{argType:"ii"}},nextValueIndex:1,valueMap:new Map,valueIndices:new Map,options:null,executable:null,memory:null,table:null,initialTableLength:0,exportedFunctions:null,async initialize(e){var t;(t=this.setCustomWASI)==null||t.call(this,e),await this.initPromise},getObjectIndex(e){if(e!=null){let t=this.valueIndices.get(e);return t===void 0&&(t=this.nextValueIndex++,this.valueIndices.set(e,t),this.valueMap.set(t,e)),t}else return 0},fromWebAssembly(e,t){switch(e){case"v":case"s":return this.valueMap.get(t);case"i":return t;case"b":return!!t}},toWebAssembly(e,t){switch(e){case"v":case"s":return this.getObjectIndex(t);case"i":return t;case"b":return t?1:0}},exportFunction(e,t="",n="",s){return e?(...i)=>{i=i.map((o,a)=>this.fromWebAssembly(t.charAt(a),o));const r=e.apply(this,i);return this.toWebAssembly(n,r)}:()=>{}},importFunction(e,t="",n=""){return(...s)=>{s=s.map((r,c)=>this.toWebAssembly(t.charAt(c),r));const i=e.apply(this,s);return this.fromWebAssembly(n,i)}},exportFunctions(){const e={};for(const[t,{argType:n,returnType:s,alias:i}]of Object.entries(this.exports)){const r=this[i??t];r&&(e[`_${t}`]=this.exportFunction(r,n,s,t))}return e},importFunctions(e){for(const[t,{argType:n,returnType:s}]of Object.entries(this.imports)){const i=e[t];i&&W(this,t,{value:this.importFunction(i,n,s)})}},async instantiateWebAssembly(e,t){var S;const{memoryInitial:n,memoryMax:s,tableInitial:i,multithreaded:r}=this.options=t,c=await e,o=c[Symbol.toStringTag]==="Response"?"Streaming":"",a=WebAssembly,l=a["compile"+o],f=this.executable=await l(c),u=this.exportFunctions(),h={},d={},m={},A=this.exportedModules={env:h,wasi:d,wasi_snapshot_preview1:m};for(const{module:b,name:p,kind:E}of a.Module.imports(f))E==="function"&&(b==="env"?h[p]=u[p]??He:b==="wasi_snapshot_preview1"?m[p]=this.getWASIHandler(p):b==="wasi"&&(d[p]=((S=this.getThreadHandler)==null?void 0:S.call(this,p))??He));return this.memory=h.memory=new a.Memory({initial:n,maximum:s,shared:r}),this.table=h.__indirect_function_table=new a.Table({initial:i,element:"anyfunc",shared:r}),this.initialTableLength=i,new a.Instance(f,A)},loadModule(e,t){return this.initPromise=(async()=>{var i,r;const n=await this.instantiateWebAssembly(e,t),{exports:s}=n;if(this.importFunctions(s),this.trackInstance(n),this.customWASI){const c={...s,memory:this.memory},o=new Proxy(n,{get(a,l){return l==="exports"?c:a[l]}});(r=(i=this.customWASI).initialize)==null||r.call(i,o)}this.initialize()})()},displayPanic(e,t){const n=new Uint8Array(this.memory.buffer,e,t),s=bt(n);console.error(`Zig panic: ${s}`)},trackInstance(e){const t=new WeakRef(e);Object.defineProperty(this,"released",{get:()=>!t.deref(),enumerable:!0})}});I({linkVariables(e){var n,s,i;if(!this.memory){this.initPromise=this.initPromise.then(()=>this.linkVariables(e));return}const t=this.getCopyFunction();for(const{object:r,handle:c}of this.variables){const o=r[w],a=c,l=r[w]=this.obtainZigView(a,o.byteLength);e&&t(l,o),(s=(n=r.constructor[Le])==null?void 0:n.save)==null||s.call(n,l,r);const f=u=>{var d,m;const h=u[V];if(h){const A=l.byteOffset;for(const S of Object.values(h))if(S){const b=S[w];if(b.buffer===o.buffer){const p=A+b.byteOffset-o.byteOffset;S[w]=this.obtainView(l.buffer,p,b.byteLength),(m=(d=S.constructor[Le])==null?void 0:d.save)==null||m.call(d,l,S),f(S)}}}};f(r),(i=r[z])==null||i.call(r,function(){this[mt]()})}},unlinkVariables(){const e=this.getCopyFunction();for(const{object:t}of this.variables){const n=this.restoreView(t[w]),s=n[P];if(s){const i=t[w]=this.allocateMemory(s.len);e(i,n)}}},imports:{recreateAddress:{argType:"i",returnType:"i"}}});I({updatePointerAddresses(e,t){const n=new Map,s=new Map,i=[],r=function(l){var u;const f=this[ge];if(n.get(f)===void 0){const h=f[V][0];if(h){const d=!f.constructor.const,m={target:h,writable:d},A=h[w];if(A[P])n.set(f,null);else{n.set(f,h);const S=s.get(A.buffer);if(S){const b=Array.isArray(S)?S:[S],p=_t(b,A.byteOffset,E=>E.target[w].byteOffset);b.splice(p,0,m),Array.isArray(S)||(s.set(A.buffer,b),i.push(b))}else s.set(A.buffer,m);(u=h[z])==null||u.call(h,r,0)}}}},c=N.IgnoreRetval|N.IgnoreInactive;t[z](r,c);const o=this.findTargetClusters(i),a=new Map;for(const l of o)for(const f of l.targets)a.set(f,l);for(const[l,f]of n)if(f){const u=a.get(f),h=(u==null?void 0:u.writable)??!l.constructor.const;l[Rt]=this.getTargetAddress(e,f,u,h),be in l&&(l[be]=f.length)}},updatePointerTargets(e,t,n=!1){const s=new Map,i=function(c){var a,l;const o=this[ge];if(!s.get(o)){s.set(o,!0);const f=o[V][0],u=!f||!(c&N.IsImmutable)?o[mt](e,!0,!(c&N.IsInactive)):f,h=o.constructor.const?N.IsImmutable:0;h&N.IsImmutable||f&&!f[w][P]&&((a=f[z])==null||a.call(f,i,h)),u!==f&&u&&!u[w][P]&&((l=u==null?void 0:u[z])==null||l.call(u,i,h))}},r=n?N.IgnoreRetval:0;t[z](i,r)},findTargetClusters(e){const t=[];for(const n of e){let s=null,i=0,r=0,c=null;for(const{target:o,writable:a}of n){const l=o[w],{byteOffset:f,byteLength:u}=l,h=f+u;let d=!0;s&&(r>f?(c?c.writable||(c.writable=a):(c={targets:[s],start:i,end:r,address:void 0,misaligned:void 0,writable:a},t.push(c)),c.targets.push(o),h>r?c.end=h:d=!1):c=null),d&&(s=o,i=f,r=h)}}return t}});I({consoleObject:null,consolePending:[],consoleTimeout:0,writeToConsole(e){try{const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).slice(),n=t.lastIndexOf(10);if(n===-1)this.consolePending.push(t);else{const s=t.subarray(0,n),i=t.subarray(n+1);this.writeToConsoleNow([...this.consolePending,s]),this.consolePending.splice(0),i.length>0&&this.consolePending.push(i)}return clearTimeout(this.consoleTimeout),this.consoleTimeout=0,this.consolePending.length>0&&(this.consoleTimeout=setTimeout(()=>{this.writeToConsoleNow(this.consolePending),this.consolePending.splice(0)},250)),!0}catch(t){return console.error(t),!1}},writeToConsoleNow(e){var n,s;const t=this.consoleObject??globalThis.console;(s=(n=t.log)==null?void 0:n.call)==null||s.call(n,t,bt(e))},flushConsole(){this.consolePending.length>0&&(this.writeToConsoleNow(this.consolePending),this.consolePending.splice(0),clearTimeout(this.consoleTimeout))},imports:{flushStdout:{argType:"",returnType:""}}});I({viewMap:null,extractView(e,t,n=Qn){var a;const{type:s,byteSize:i,constructor:r}=e;let c;const o=t==null?void 0:t[Symbol.toStringTag];if(o&&(o==="DataView"?c=this.registerView(t):o==="ArrayBuffer"?c=this.obtainView(t,0,t.byteLength):(o&&o===((a=r[se])==null?void 0:a.name)||o==="Uint8ClampedArray"&&r[se]===Uint8Array)&&(c=this.obtainView(t.buffer,t.byteOffset,t.byteLength))),!c){const l=t==null?void 0:t[w];if(l){const{constructor:f,instance:{members:[u]}}=e;if(oe(t,f))return l;if(Xn(s)){const{byteSize:h,structure:{constructor:d}}=u,m=Zt(t,d);if(m!==void 0){if(s===T.Slice||m*h===i)return l;throw new We(e,null,t)}}}}return c?i!==void 0&&$t(c,e):n==null||n(e,t),c},assignView(e,t,n,s,i){var a,l,f,u;const{byteSize:r,type:c}=n,o=r??1;if(e[w]){const h=c===T.Slice?o*e.length:o;if(t.byteLength!==h)throw new Yt(n,t,e);const d={[w]:t};(u=(f=e.constructor[ae])==null?void 0:f.validateData)==null||u.call(f,d,e.length),e[D](d)}else{r!==void 0&&$t(t,n);const h=t.byteLength/o,d={[w]:t};(l=(a=e.constructor[ae])==null?void 0:a.validateData)==null||l.call(a,d,h),i&&(s=!0),e[Ce](s?null:t,h,i),s&&e[D](d)}},findViewAt(e,t,n){var r;let s=(this.viewMap??(this.viewMap=new WeakMap)).get(e),i;if(s)if(s instanceof DataView)if(s.byteOffset===t&&s.byteLength===n)i=s;else{const c=s,o=`${c.byteOffset}:${c.byteLength}`;s=new Map([[o,c]]),this.viewMap.set(e,s)}else i=s.get(`${t}:${n}`);return((r=i==null?void 0:i[P])==null?void 0:r.address)===xe&&(i=null),{existing:i,entry:s}},obtainView(e,t,n){var c;const{existing:s,entry:i}=this.findViewAt(e,t,n);let r;return s||(i?(r=new DataView(e,t,n),i.set(`${t}:${n}`,r)):this.viewMap.set(e,r=new DataView(e,t,n)),(e===((c=this.memory)==null?void 0:c.buffer)||e===this.usizeMaxBuffer)&&(r[P]={address:t,len:n}),r)},registerView(e){if(!e[P]){const{buffer:t,byteOffset:n,byteLength:s}=e,{existing:i,entry:r}=this.findViewAt(t,n,s);if(i)return i;r?r.set(`${n}:${s}`,e):this.viewMap.set(t,e)}return e},allocateMemory(e,t=0,n=null){var s;return((s=n==null?void 0:n.alloc)==null?void 0:s.call(n,e,t))??this.allocateJSMemory(e,t)},allocateJSMemory(e,t){return this.obtainView(new ArrayBuffer(e),0,e)},restoreView(e){const t=e==null?void 0:e[P];return(t==null?void 0:t.len)>0&&e.buffer.byteLength===0&&(e=this.obtainZigView(t.address,t.len),t.align&&(e[P].align=t.align)),e},defineRestorer(){const e=this;return{value(){var s,i;const t=this[w],n=e.restoreView(t);return t!==n?(this[w]=n,(i=(s=this.constructor[Le])==null?void 0:s.save)==null||i.call(s,n,this),!0):!1}}}});function $t(e,t){const{byteSize:n,type:s}=t;if(!(s===T.Slice?e.byteLength%n===0:e.byteLength===n))throw new Yt(t,e)}function Xn(e){return e===T.Array||e===T.Vector||e===T.Slice}function Qn(e){throw new Pn(e)}I({makeReadOnly(e){nn(e)}});const es=Object.getOwnPropertyDescriptors,Ue=Object.defineProperty;function nn(e){const t=e[ge];if(t)it(t,["length"]);else{const n=e[Ge];n?(it(n),ts(n)):it(e)}}function it(e,t=[]){const n=es(e.constructor.prototype);for(const[s,i]of Object.entries(n))i.set&&!t.includes(s)&&(i.set=Te,Ue(e,s,i));Ue(e,Ee,{value:e})}function ts(e){Ue(e,"set",{value:Te});const t=e.get;Ue(e,"get",{value:function(s){const i=t.call(this,s);return(i==null?void 0:i[Ee])===null&&nn(i),i}})}I({defineMember(e,t=!0){if(!e)return{};const{type:n,structure:s}=e,i=`defineMember${Nt[n]}`,c=this[i].call(this,e);if(t&&s){const{type:o}=s,a=`transformDescriptor${Ne[o]}`,l=this[a];if(l)return l.call(this,c,e)}return c}});function sn(e,{get:t,set:n}){return e!==void 0?{get:function(){return t.call(this,e)},set:n?function(s,i){return n.call(this,e,s,i)}:void 0}:{get:t,set:n}}I({defineBase64(e){const t=this;return Fe({get(){return An(this.dataView)},set(n,s){if(typeof n!="string")throw new re("string",n);const i=In(n);t.assignView(this,i,e,!1,s)}})}});I({defineMemberBool(e){return this.defineMemberUsing(e,this.getAccessor)}});I({defineClampedArray(e){const t=this,n=Uint8ClampedArray;return Fe({get(){const s=this.typedArray;return new n(s.buffer,s.byteOffset,s.length)},set(s,i){if((s==null?void 0:s[Symbol.toStringTag])!==n.name)throw new re(n.name,s);const r=new DataView(s.buffer,s.byteOffset,s.byteLength);t.assignView(this,r,e,!0,i)}})}});I({defineDataView(e){const t=this;return Fe({get(){var s;return(s=this[G])==null||s.call(this),this[w]},set(n,s){if((n==null?void 0:n[Symbol.toStringTag])!=="DataView")throw new re("DataView",n);t.assignView(this,n,e,!0,s)}})}});I({defineMemberFloat(e){return this.defineMemberUsing(e,this.getAccessor)}});I({defineMemberInt(e){let t=this.getAccessor;return this.runtimeSafety&&(t=this.addRuntimeCheck(t)),t=this.addIntConversion(t),this.defineMemberUsing(e,t)}});I({defineMemberObject(e){return sn(e.slot,{get:e.structure.flags&C.HasValue?ns:ss,set:e.flags&we.IsReadOnly?Te:is})}});function ns(e){return(this[V][e]??this[Y](e)).$}function ss(e){return this[V][e]??this[Y](e)}function is(e,t,n){(this[V][e]??this[Y](e))[Z](t,n)}I({defineMemberUsing(e,t){const{littleEndian:n}=this,{bitOffset:s,byteSize:i}=e,r=t.call(this,"get",e),c=t.call(this,"set",e);if(s!==void 0){const o=s>>3;return{get:function(){var l;try{return r.call(this[w],o,n)}catch(f){if(f instanceof TypeError&&((l=this[G])!=null&&l.call(this)))return r.call(this[w],o,n);throw f}},set:function(l){var f;try{return c.call(this[w],o,l,n)}catch(u){if(u instanceof TypeError&&((f=this[G])!=null&&f.call(this)))return c.call(this[w],o,l,n);throw u}}}}else return{get:function(a){var l;try{return r.call(this[w],a*i,n)}catch(f){if(f instanceof TypeError&&((l=this[G])!=null&&l.call(this)))return r.call(this[w],a*i,n);throw Ct(e,a,f)}},set:function(a,l){var f;try{return c.call(this[w],a*i,l,n)}catch(u){if(u instanceof TypeError&&((f=this[G])!=null&&f.call(this)))return c.call(this[w],a*i,l,n);throw Ct(e,a,u)}}}}});I({defineSentinel(e){const{byteSize:t,instance:{members:[n,s],template:i}}=e,{get:r}=this.defineMember(s),{get:c}=this.defineMember(n),o=r.call(i,0),a=!!(s.flags&we.IsRequired),{runtimeSafety:l}=this;return g({value:o,bytes:i[w],validateValue(f,u,h){if(a){if(l&&f===o&&u!==h-1)throw new Ot(e,f,u,h);if(f!==o&&u===h-1)throw new tt(e,o,h)}},validateData(f,u){if(a){if(l)for(let h=0;h<u;h++){const d=c.call(f,h);if(d===o&&h!==u-1)throw new Ot(e,o,h,u);if(d!==o&&h===u-1)throw new tt(e,o,u)}else if(u>0&&u*t===f[w].byteLength&&c.call(f,u-1)!==o)throw new tt(e,o,u)}},isRequired:a})},findSentinel(e,t){const{memory:n}=this,s=t.byteLength,i=n.buffer.byteLength-s+1;for(let r=e;r<i;r+=s){const c=new DataView(n.buffer,r,s);let o=!0;for(let a=0;a<s;a++){const l=c.getUint8(a),f=t.getUint8(a);if(l!==f){o=!1;break}}if(o)return(r-e)/s}}});I({defineString(e){const t=this,{byteSize:n}=e.instance.members[0],s=`utf-${n*8}`;return Fe({get(){var c;let i=bt(this.typedArray,s);const r=(c=this.constructor[ae])==null?void 0:c.value;return r!==void 0&&i.charCodeAt(i.length-1)===r&&(i=i.slice(0,-1)),i},set(i,r){var l;if(typeof i!="string")throw new re("string",i);const c=(l=this.constructor[ae])==null?void 0:l.value;c!==void 0&&i.charCodeAt(i.length-1)!==c&&(i+=String.fromCharCode(c));const o=Bt(i,s),a=new DataView(o.buffer);t.assignView(this,a,e,!1,r)}})}});I({defineValueOf(){return{value(){return rn(this,!1)}}}});const rs=BigInt(Number.MAX_SAFE_INTEGER),os=BigInt(Number.MIN_SAFE_INTEGER);function rn(e,t){const n=t?r=>{try{return r()}catch(c){return c}}:r=>r(),s=new Map,i=function(r){var a;const c=typeof r=="function"?T.Struct:(a=r==null?void 0:r.constructor)==null?void 0:a[ve];if(c===void 0){if(t){if(typeof r=="bigint"&&os<=r&&r<=rs)return Number(r);if(r instanceof Error)return{error:r.message}}return r}let o=s.get(r);if(o===void 0){let l;switch(c){case T.Struct:l=r[le],o=r.constructor[Lt]&H.IsTuple?[]:{};break;case T.Union:l=r[le],o={};break;case T.Array:case T.Vector:case T.Slice:l=r[le],o=[];break;case T.Pointer:try{o=r["*"]}catch{o=Symbol.for("inaccessible")}break;case T.Enum:o=n(()=>String(r));break;case T.Opaque:o={};break;default:o=n(()=>r.$)}if(o=i(o),s.set(r,o),l)for(const[f,u]of l)o[f]=i(u)}return o};return i(e)}I({defineToJSON(){return{value(){return rn(this,!0)}}}});I({defineMemberType(e,t){const{slot:n}=e;return sn(n,{get(s){const i=this[V][s];return i==null?void 0:i.constructor},set:Te})}});I({defineTypedArray(e){const t=this,n=this.getTypedArray(e);return Fe({get(){const s=this.dataView,i=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,i)},set(s,i){if((s==null?void 0:s[Symbol.toStringTag])!==n.name)throw new re(n.name,s);const r=new DataView(s.buffer,s.byteOffset,s.byteLength);t.assignView(this,r,e,!0,i)}})}});I({defineMemberUint(e){let t=this.getAccessor;return this.runtimeSafety&&(t=this.addRuntimeCheck(t)),t=this.addIntConversion(t),this.defineMemberUsing(e,t)}});I({defineMemberVoid(e,t){const{bitOffset:n}=e;return{get(){},set:n!==void 0?function(s){if(s!==void 0)throw new Mt(e)}:function(s,i){if(i!==void 0)throw new Mt(e);if(s<0||s>=this.length)throw new ft(e,s)}}}});function cs(){const e=this;return{next(){const t=e.next();return{value:t,done:t===null}}}}function gt(e){return{[Symbol.iterator]:ls.bind(this,e),length:this[Ie].length}}function on(e){return gt.call(this,e)[Symbol.iterator]()}function ls(e){const t=an(e),n=this,s=this[Ie];let i=0;return{next(){let r,c;if(i<s.length){const o=s[i++];r=[o,t(()=>n[o])],c=!1}else c=!0;return{value:r,done:c}}}}function cn(){const e=this[Ge]??this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=e.get(r),i=!1}else i=!0;return{value:s,done:i}}}}function as(e){const t=an(e),n=this[Ge]??this,s=this.length;let i=0;return{next(){let r,c;if(i<s){const o=i++;r=[o,t(()=>n.get(o))],c=!1}else c=!0;return{value:r,done:c}}}}function Be(e){return{[Symbol.iterator]:as.bind(this,e),length:this.length}}function ln(){const e=this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=e[r],i=!1}else i=!0;return{value:s,done:i}}}}function fs(){const e=this,t=this.length;let n=0;return{next(){let s,i;if(n<t){const r=n++;s=[r,e[r]],i=!1}else i=!0;return{value:s,done:i}}}}function _e(){return{[Symbol.iterator]:fs.bind(this),length:this.length}}function an(e){return(e==null?void 0:e.error)==="return"?t=>{try{return t()}catch(n){return n}}:t=>t()}I({defineStructure(e){const{type:t,byteSize:n}=e,s=`define${Ne[t]}`,i=this[s],r=[],c={},o={dataView:this.defineDataView(e),base64:this.defineBase64(e),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[Ee]:{value:null},[Re]:g(c),[ot]:g(r),[D]:this.defineCopier(n),[G]:this.defineRestorer()},a=e.constructor=i.call(this,e,o);for(const[l,f]of Object.entries(o)){const u=f==null?void 0:f.set;u&&!c[l]&&(c[l]=u,r.push(l))}return ce(a.prototype,o),a},finalizeStructure(e){var A;const{name:t,type:n,constructor:s,align:i,byteSize:r,flags:c,signature:o,static:{members:a,template:l}}=e,f=[],u={name:g(t),toJSON:this.defineToJSON(),valueOf:this.defineValueOf(),[ct]:g(o),[ne]:g(this),[K]:g(i),[yt]:g(r),[ve]:g(n),[Lt]:g(c),[Ie]:g(f),[se]:g(this.getTypedArray(e)),[Symbol.iterator]:g(on),[le]:{get:gt},[Ie]:g(f)},h={[Symbol.toStringTag]:g(t)};for(const S of a){const{name:b,slot:p}=S;if(S.structure.type===T.Function){const E=l[V][p];u[b]=g(E),E.name||W(E,"name",g(b));const[v,F]=((A=/^(get|set)\s+([\s\S]+)/.exec(b))==null?void 0:A.slice(1))??[],j=v==="get"?0:1;if(v&&E.length===j){const L=u[F]??(u[F]={});L[v]=E}if(S.flags&we.IsMethod){const L=function(...U){try{return E(this,...U)}catch(ue){throw"argCount"in ue&&(ue.argIndex--,ue.argCount--),ue}};if(ce(L,{name:g(b),length:g(E.length-1)}),h[b]=g(L),v&&L.length===j){const U=h[F]??(h[F]={});U[v]=L}}}else u[b]=this.defineMember(S),f.push(b)}u[V]=f.length>0&&g(l[V]);const d=`finalize${Ne[n]}`,m=this[d];(m==null?void 0:m.call(this,e,u,h))!==!1&&(ce(s.prototype,h),ce(s,u))},createConstructor(e,t={}){const{type:n,byteSize:s,align:i,flags:r,instance:{members:c,template:o}}=e,{onCastError:a}=t;let l;if(o!=null&&o[V]){const d=c.filter(m=>m.flags&we.IsReadOnly);d.length>0&&(l=d.map(m=>m.slot))}const f=new Jt,u=this,h=function(d,m={}){const{allocator:A}=m,S=this instanceof h;let b,p;if(S){if(arguments.length===0)throw new qt(e);if(b=this,r&C.HasSlot&&(b[V]={}),Ce in b)b[Z](d,A),p=b[w];else{const E=n!==T.Pointer?A:null;b[w]=p=u.allocateMemory(s,i,E)}}else{if(Pe in h&&(b=h[Pe].call(this,d,m),b!==!1)||(p=u.extractView(e,d,a),b=f.find(p)))return b;b=Object.create(h.prototype),Ce in b?u.assignView(b,p,e,!1,!1):b[w]=p,r&C.HasSlot&&(b[V]={})}if(l)for(const E of l)b[V][E]=o[V][E];return S&&(Ce in b||b[Z](d,A)),ie in b&&(b=b[ie]()),f.save(p,b)};return W(h,Le,g(f)),o!=null&&o[w]&&W(o,G,this.defineRestorer()),h},createApplier(e){const{instance:{template:t}}=e;return function(n,s){const i=Object.keys(n),r=this[ot],c=this[Re];for(const u of i)if(!(u in c))throw new jn(e,u);let o=0,a=0,l=0,f=0;for(const u of r){const h=c[u];h.special?u in n&&f++:(o++,u in n?a++:h.required&&l++)}if(l!==0&&f===0){const u=r.filter(h=>c[h].required&&!(h in n));throw new Fn(e,u)}if(f+a>i.length)for(const u of r)u in n&&(i.includes(u)||i.push(u));a<o&&f===0&&t&&t[w]&&this[D](t);for(const u of i)c[u].call(this,n[u],s);return i.length}},getTypedArray(e){const{type:t,instance:n}=e;if(t!==void 0&&n){const[s]=n.members;switch(t){case T.Enum:case T.ErrorSet:case T.Primitive:{const{byteSize:i,type:r}=s,c=r===$.Float?"Float":r===$.Int?"Int":"Uint",a=(i>4&&r!==$.Float?"Big":"")+c+i*8+"Array";return globalThis[a]}case T.Array:case T.Slice:case T.Vector:return this.getTypedArray(s.structure)}}}});I({defineArgStruct(e,t){var f;const{flags:n,byteSize:s,align:i,length:r,instance:{members:c}}=e,o=this,a=c.slice(1),l=function(u){const h=this instanceof l;let d,m;if(h?(d=this,m=o.allocateMemory(s,i)):(d=Object.create(l.prototype),m=u),d[w]=m,n&C.HasSlot&&(d[V]={}),h){let A;if(n&qe.HasOptions&&u.length===r+1&&(A=u.pop()),u.length!==r)throw new kn(r,u.length);n&qe.IsAsync&&(d[ie]=null),o.copyArguments(d,u,a,A)}else return d};for(const u of c)t[u.name]=this.defineMember(u);return t.length=g(a.length),t[Y]=n&C.HasObject&&this.defineVivificatorStruct(e),t[z]=n&C.HasPointer&&this.defineVisitorArgStruct(c),t[lt]=g(t.retval.set),t[Symbol.iterator]=(f=this.defineArgIterator)==null?void 0:f.call(this,a),t[D]=this.defineRetvalCopier(c[0]),l},finalizeArgStruct(e,t){const{flags:n}=e;t[Dt]=g(!!(n&qe.IsThrowing))}});I({defineArray(e,t){const{length:n,instance:{members:[s]},flags:i}=e,r=this.createApplier(e),c=this.defineMember(s),{set:o}=c,a=this.createConstructor(e),l=function(f,u){if(oe(f,a))this[D](f),i&C.HasPointer&&this[z]("copy",N.Vivificate,f);else if(typeof f=="string"&&i&Oe.IsString&&(f={string:f}),f!=null&&f[Symbol.iterator]){if(f=Gt(f),f.length!==n)throw new We(e,this,f);let h=0;for(const d of f)o.call(this,h++,d,u)}else if(f&&typeof f=="object"){if(r.call(this,f)===0)throw new pe(e,f)}else if(f!==void 0)throw new pe(e,f)};return t.$={get:wt,set:l},t.length=g(n),t.entries=g(Be),i&Oe.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),i&Oe.IsString&&(t.string=this.defineString(e)),i&Oe.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t[Symbol.iterator]=g(cn),t[Z]=g(l),t[ie]=this.defineFinalizerArray(c),t[le]={get:Be},t[Y]=i&C.HasObject&&this.defineVivificatorArray(e),t[z]=i&C.HasPointer&&this.defineVisitorArray(),a},finalizeArray(e,t){const{flags:n,instance:{members:[s]}}=e;t.child=g(s.structure.constructor),t[ae]=n&Oe.HasSentinel&&this.defineSentinel(e)}});I({defineFinalizerArray({get:e,set:t}){return{value(){const n=new Proxy(this,us);return ce(this,{[Ze]:{value:n},get:{value:e.bind(this)},set:t&&{value:t.bind(this)}}),n}}},defineVivificatorArray(e){const{instance:{members:[t]}}=e,{byteSize:n,structure:s}=t,i=this;return{value:function(o){var m;const{constructor:a}=s;(m=this[G])==null||m.call(this);const l=this[w],u=l.byteOffset+n*o,h=i.obtainView(l.buffer,u,n);return this[V][o]=a.call(dt,h)}}}});const us={get(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?e.get(n):t===Ge?e:e[t]},set(e,t,n){const s=typeof t=="symbol"?0:t|0;return s!==0||s==t?e.set(s,n):e[t]=n,!0},deleteProperty(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?!1:(delete e[t],!0)},has(e,t){const n=typeof t=="symbol"?0:t|0;return n!==0||n==t?n>=0&&n<e.length:e[t]},ownKeys(e){const t=[];for(let n=0,s=e.length;n<s;n++)t.push(`${n}`);return t.push("length",Ze),t},getOwnPropertyDescriptor(e,t){const n=typeof t=="symbol"?0:t|0;if(n!==0||n==t){if(n>=0&&n<e.length)return{value:e.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(e,t)}};I({defineEnum(e,t){const{instance:{members:[n]}}=e,s=this.defineMember(n),{get:i,set:r}=s,{get:c}=this.defineMember(n,!1),o=this.createApplier(e),a=["string","number","tagged union"],l=function(u){if(u&&typeof u=="object"){if(o.call(this,u)===0)throw new Se(e,a,u)}else u!==void 0&&r.call(this,u)},f=this.createConstructor(e,{onCastError(u,h){throw new Se(u,a,h)}});return t.$=s,t.toString=g(Tn),t[Symbol.toPrimitive]={value(u){switch(u){case"string":case"default":return this.$[Ke];default:return c.call(this)}}},t[Z]=g(l),f},finalizeEnum(e,t){const{flags:n,constructor:s,instance:{members:[i]},static:{members:r,template:c}}=e,o=c[V],{get:a,set:l}=this.defineMember(i,!1);for(const{name:f,flags:u,slot:h}of r)if(u&we.IsPartOfSet){const d=o[h];W(d,Ke,g(f));const m=a.call(d);t[f]=t[m]={value:d,writable:!1}}t[Pe]={value(f){if(typeof f=="string"||typeof f=="number"||typeof f=="bigint"){let u=s[f];return u||n&mn.IsOpenEnded&&typeof f!="string"&&(u=new s(void 0),l.call(u,f),W(u,Ke,g(f)),W(s,f,g(u))),u}else return f instanceof s?f:(f==null?void 0:f[vt])instanceof s?f[vt]:!1}},t[se]=g(this.getTypedArray(e))},transformDescriptorEnum(e,t){const{type:n,structure:s}=t;if(n===$.Object)return e;const i=function(o){const{constructor:a}=s,l=a(o);if(!l)throw new $n(s,o);return l},{get:r,set:c}=e;return{get:r.length===0?function(){const a=r.call(this);return i(a)}:function(a){const l=r.call(this,a);return i(l)},set:c.length===1?function(a){a=i(a)[Symbol.toPrimitive](),c.call(this,a)}:function(a,l){const f=i(l);c.call(this,a,f[Symbol.toPrimitive]())}}}});I({currentGlobalSet:void 0,currentErrorClass:void 0,defineErrorSet(e,t){const{instance:{members:[n]},flags:s}=e;if(!this.currentErrorClass){this.currentErrorClass=class extends hs{};const f={type:T.ErrorSet,name:"anyerror",instance:{members:[n]},static:{members:[],template:{SLOTS:{}}}};this.currentGlobalSet=this.defineStructure(f),this.finalizeStructure(f)}if(this.currentGlobalSet&&s&It.IsGlobal)return this.currentGlobalSet;const i=this.defineMember(n),{set:r}=i,c=["string","number"],o=this.createApplier(e),a=function(f){if(f instanceof l[ke])r.call(this,f);else if(f&&typeof f=="object"&&!$e(f)){if(o.call(this,f)===0)throw new Se(e,c,f)}else f!==void 0&&r.call(this,f)},l=this.createConstructor(e,{onCastError(f,u){throw new Se(f,c,u)}});return t.$=i,t[Z]=g(a),l},finalizeErrorSet(e,t){const{constructor:n,flags:s,instance:{members:[i]},static:{members:r,template:c}}=e;if(this.currentGlobalSet&&s&It.IsGlobal)return!1;const o=(c==null?void 0:c[V])??{},{get:a}=this.defineMember(i,!1);for(const{name:l,slot:f}of r){const u=o[f],h=a.call(u);let d=this.currentGlobalSet[h],m=!0;d||(d=new this.currentErrorClass(l,h),m=!1);const A=g(d),S=String(d);t[l]=t[S]=t[h]=A,m||(ce(this.currentGlobalSet,{[h]:A,[S]:A,[l]:A}),this.currentGlobalSet[Ie].push(l))}t[Pe]={value(l){return typeof l=="number"||typeof l=="string"?n[l]:l instanceof n[ke]?n[Number(l)]:$e(l)?n[`Error: ${l.error}`]:l instanceof Error?void 0:!1}},t[ke]=g(this.currentErrorClass)},transformDescriptorErrorSet(e,t){const{type:n,structure:s}=t;if(n===$.Object)return e;const i=function(o){const{constructor:a}=s,l=a(o);if(!l)throw o instanceof Error?new Kt(s):new zn(s,o);return l},{get:r,set:c}=e;return{get:r.length===0?function(){const a=r.call(this);return i(a)}:function(a){const l=r.call(this,a);return i(l)},set:c.length===1?function(a){const l=i(a);a=Number(l),c.call(this,a)}:function(a,l){const f=i(l);l=Number(f),c.call(this,a,l)}}},resetGlobalErrorSet(){this.currentErrorClass=this.currentGlobalSet=void 0}});class hs extends Error{constructor(t,n){super(Kn(t)),this.number=n,this.stack=void 0}[Symbol.toPrimitive](t){switch(t){case"string":case"default":return Error.prototype.toString.call(this,t);default:return this.number}}toJSON(){return{error:this.message}}}I({defineErrorUnion(e,t){const{instance:{members:[n,s]},flags:i}=e,{get:r,set:c}=this.defineMember(n),{get:o,set:a}=this.defineMember(s),{get:l,set:f}=this.defineMember(s,!1),u=function(){if(l.call(this))throw o.call(this);return r.call(this)},h=n.type===$.Void,d=s.structure.constructor,m=function(){var v;this[De](),(v=this[z])==null||v.call(this,"clear")},A=this.createApplier(e),S=function(v,F){if(oe(v,E))this[D](v),i&C.HasPointer&&(l.call(this)||this[z]("copy",0,v));else if(v instanceof d[ke]&&d(v))a.call(this,v),m.call(this);else if(v!==void 0||h)try{c.call(this,v,F),f.call(this,0)}catch(j){if(v instanceof Error){const L=d[v]??d.Unexpected;if(L)a.call(this,L),m.call(this);else throw new Kt(e)}else if($e(v))a.call(this,v),m.call(this);else if(v&&typeof v=="object"){if(A.call(this,v)===0)throw j}else throw j}},{bitOffset:b,byteSize:p}=n,E=this.createConstructor(e);return t.$={get:u,set:S},t[Z]=g(S),t[Y]=i&C.HasObject&&this.defineVivificatorStruct(e),t[De]=this.defineResetter(b/8,p),t[z]=i&C.HasPointer&&this.defineVisitorErrorUnion(n,l),E}});I({defineFunction(e,t){const{instance:{members:[n],template:s},static:{template:i}}=e,r=new Jt,{structure:{constructor:c}}=n,o=this,a=function(l){const f=this instanceof a;let u;if(f){if(arguments.length===0)throw new qt(e);if(typeof l!="function")throw new re("function",l);if(c[ve]===T.VariadicStruct)throw new Cn;u=o.getFunctionThunk(l,i)}else{if(this!==ne)throw new Rn;u=l}let h;if(h=r.find(u))return h;const d=c.prototype.length,m=f?o.createInboundCaller(l,c):o.createOutboundCaller(s,c);return ce(m,{length:g(d),name:g("")}),Object.setPrototypeOf(m,a.prototype),m[w]=u,r.save(u,m),m};return Object.setPrototypeOf(a.prototype,Function.prototype),t.valueOf=t.toJSON=g(pt),a},finalizeFunction(e,t,n){n[Symbol.toStringTag]=void 0}});I({defineOptional(e,t){const{instance:{members:[n,s]},flags:i}=e,{get:r,set:c}=this.defineMember(n),{get:o,set:a}=this.defineMember(s),l=function(){var S;return o.call(this)?r.call(this):((S=this[z])==null||S.call(this,"clear"),null)},f=n.type===$.Void,u=function(A,S){var b,p;oe(A,h)?(this[D](A),i&C.HasPointer&&o.call(this)&&this[z]("copy",N.Vivificate,A)):A===null?(a.call(this,0),(b=this[De])==null||b.call(this),(p=this[z])==null||p.call(this,"clear")):(A!==void 0||f)&&(c.call(this,A,S),i&At.HasSelector?a.call(this,1):i&C.HasPointer&&(o.call(this)||a.call(this,13)))},h=e.constructor=this.createConstructor(e),{bitOffset:d,byteSize:m}=n;return t.$={get:l,set:u},t[Z]=g(u),t[De]=i&At.HasSelector&&this.defineResetter(d/8,m),t[Y]=i&C.HasObject&&this.defineVivificatorStruct(e),t[z]=i&C.HasPointer&&this.defineVisitorOptional(n,o),h}});I({definePointer(e,t){const{flags:n,byteSize:s,instance:{members:[i]}}=e,{structure:r}=i,{type:c,flags:o,byteSize:a=1}=r,l=n&k.HasLength?s/2:s,{get:f,set:u}=this.defineMember({type:$.Uint,bitOffset:0,bitSize:l*8,byteSize:l,structure:{byteSize:l}}),{get:h,set:d}=n&k.HasLength?this.defineMember({type:$.Uint,bitOffset:l*8,bitSize:l*8,byteSize:l,structure:{flags:kt.IsSize,byteSize:l}}):{},m=function(y,M=!0,O=!0){if(M||this[w][P])if(O){const R=Ve.child,B=f.call(this),_=n&k.HasLength?h.call(this):c===T.Slice&&o&te.HasSentinel?U.findSentinel(B,R[ae].bytes)+1:1;if(B!==this[Me]||_!==this[je]){const J=U.findMemory(y,B,_,R[yt]),he=J?R.call(ne,J):null;return this[V][0]=he,this[Me]=B,this[je]=_,n&k.HasLength&&(this[Ae]=null),he}}else return this[V][0]=void 0;return this[V][0]},A=function(y){u.call(this,y),this[Me]=y},S=o&te.HasSentinel?1:0,b=n&k.HasLength||o&te.HasSentinel?function(y){var M;(M=d==null?void 0:d.call)==null||M.call(d,this,y-S),this[je]=y}:null,p=function(){const y=this[ge]??this,M=!y[V][0],O=m.call(y,null,M);if(!O){if(n&k.IsNullable)return null;throw new Un}return n&k.IsConst?fn(O):O},E=function(y){var O,R;if(y===void 0)return;const M=this[ge]??this;if(y){const B=y[w][P];if(B){const{address:_,js:J}=B;A.call(this,_),(O=b==null?void 0:b.call)==null||O.call(b,this,y.length),J&&(y[w][P]=void 0)}else if(M[w][P])throw new _n(e,y)}else M[w][P]&&(A.call(this,0),(R=b==null?void 0:b.call)==null||R.call(b,this,0));M[V][0]=y??null,n&k.HasLength&&(M[Ae]=null)},v=o&C.HasValue?function(){return p.call(this).$}:p,F=n&k.IsConst?Te:function(y){const M=p.call(this);return M.$=y},j=function(){const y=p.call(this);return y?y.length:0},L=function(y){var Q;y=y|0;const M=p.call(this);if(M){if(M.length===y)return}else{if(y!==0)throw new Vt(y,0);return}const O=M[w],R=O[P],B=O.buffer.byteLength-O.byteOffset;let _;if(R||(n&k.HasLength?_=this[Ae]??(this[Ae]=M.length):_=B/a|0),y<0||y>_)throw new Vt(y,_);const J=y*a,he=J<=B?U.obtainView(O.buffer,O.byteOffset,J):U.obtainZigView(R.address,J),q=r.constructor;this[V][0]=q.call(ne,he),(Q=b==null?void 0:b.call)==null||Q.call(b,this,y)},U=this,ue=function(y,M){var B,_,J,he;const O=r.constructor;if(ht(y,O)){if(!(n&k.IsConst)&&y.constructor.const)throw new Dn(e,y);y=y[V][0]}else if(n&k.IsMultiple)zt(y,O,n)&&(y=O(y[V][0][w]));else if(c===T.Slice&&o&te.IsOpaque&&y){if(y.constructor[ve]===T.Pointer)y=(B=y[X])==null?void 0:B[w];else if(y[w])y=y[w];else if((y==null?void 0:y.buffer)instanceof ArrayBuffer&&!(y instanceof Uint8Array||y instanceof DataView)){const{byteOffset:q,byteLength:Q}=y;q!==void 0&&Q!==void 0&&(y=new DataView(y.buffer,q,Q))}}if(y instanceof O){(_=y[G])==null||_.call(y);const q=y[Ee];if(q)if(n&k.IsConst)y=q;else throw new Wn(e)}else if(oe(y,O))y=O.call(ne,y[w]);else if(n&k.IsSingle&&n&k.IsMultiple&&y instanceof O.child)y=O(y[w]);else if(ms(y,O)){const q=U.extractView(r,y);y=O(q)}else if(y!=null&&!y[w]){if(n&k.IsSingle&&n&k.IsMultiple&&typeof y=="object"&&!y[Symbol.iterator]){let Q=!0;const un=O.prototype[Re];for(const hn of Object.keys(y)){const Je=un[hn];if(Je!=null&&Je.special){Q=!1;break}}Q&&(y=[y])}const q=new O(y,{allocator:M});U.runtimeSafety&&se in O&&((J=y==null?void 0:y.buffer)==null?void 0:J[Symbol.toStringTag])==="ArrayBuffer"&&Yn(r,y),y=q}else if(y!==void 0&&(!(n&k.IsNullable)||y!==null))throw new Bn(e,y);const R=(he=y==null?void 0:y[w])==null?void 0:he[P];if((R==null?void 0:R.address)===xe)throw new Xt(y);this[X]=y},Ve=this.createConstructor(e);return t["*"]={get:v,set:F},t.$={get:wt,set:ue},t.length={get:j,set:L},t.slice=c===T.Slice&&{value(y,M){const O=this[X].slice(y,M);return new Ve(O)}},t.subarray=c===T.Slice&&{value(y,M,O){const R=this[X].subarray(y,M,O);return new Ve(R)}},t[Symbol.toPrimitive]=c===T.Primitive&&{value(y){return this[X][Symbol.toPrimitive](y)}},t[Z]=g(ue),t[ie]={value(){const y=c!==T.Pointer?ds:{};let M;c===T.Function?(M=function(){},M[w]=this[w],M[V]=this[V],Object.setPrototypeOf(M,Ve.prototype)):M=this;const O=new Proxy(M,y);return Object.defineProperty(M,Ze,{value:O}),O}},t[X]={get:p,set:E},t[mt]=g(m),t[Rt]={set:A},t[be]={set:b},t[z]=this.defineVisitor(),t[Me]=g(0),t[je]=g(0),t[Ae]=n&k.HasLength&&g(null),t.dataView=t.base64=void 0,Ve},finalizePointer(e,t){const{flags:n,constructor:s,instance:{members:[i]}}=e,{structure:r}=i,{type:c,constructor:o}=r;t.child=o?g(o):{get(){return r.constructor}},t.const=g(!!(n&k.IsConst)),t[Pe]={value(a,l){if(this===ne||this===dt||a instanceof s)return!1;if(ht(a,o))return new s(o(a["*"]),l);if(zt(a,o,n))return new s(a);if(c===T.Slice)return new s(o(a),l);throw new Ln(e)}}}});function ht(e,t){var n;return Wt((n=e==null?void 0:e.constructor)==null?void 0:n.child,t)&&e["*"]}function zt(e,t,n){var s,i;if(n&k.IsMultiple){if(((i=(s=e==null?void 0:e.constructor)==null?void 0:s.child)==null?void 0:i.child)===t.child&&e["*"])return!0;if(n&k.IsSingle&&ht(e,t.child))return!0}return!1}function fn(e){let t=e[Xe];return t||(Object.defineProperty(e,Xe,{value:void 0,configurable:!0}),t=new Proxy(e,ys),Object.defineProperty(e,Xe,{value:t})),t}const ds={get(e,t){return t===ge?e:t in e?e[t]:e[X][t]},set(e,t,n){if(t in e)e[t]=n;else{const s=e[X];s[t]=n}return!0},deleteProperty(e,t){if(t in e)delete e[t];else{const n=e[X];delete n[t]}return!0},has(e,t){if(t in e)return!0;{const n=e[X];return t in n}},apply(e,t,n){return e["*"].apply(t,n)}},ys={get(e,t){if(t===Ee)return e;{const n=e[t];return(n==null?void 0:n[Ee])===null?fn(n):n}},set(e,t,n){const s=e[ge];return s&&!(t in s)?e[t]=n:Te(),!0}};function ms(e,t){const n=e==null?void 0:e[Symbol.toStringTag];if(n){const s=t[se];if(s)switch(n){case s.name:case"DataView":return!0;case"ArrayBuffer":return s===Uint8Array||s===Int8Array;case"Uint8ClampedArray":return s===Uint8Array}if(t.child&&Zt(e,t.child)!==void 0)return!0}return!1}I({definePrimitive(e,t){const{instance:{members:[n]}}=e,s=this.createApplier(e),{get:i,set:r}=this.defineMember(n),c=function(a){if(oe(a,o))this[D](a);else if(a&&typeof a=="object"){if(s.call(this,a)===0){const l=Ut(n);throw new Se(e,l,a)}}else a!==void 0&&r.call(this,a)},o=this.createConstructor(e);return t.$={get:i,set:c},t[Z]=g(c),t[Symbol.toPrimitive]=g(i),o},finalizePrimitive(e,t){const{instance:{members:[n]}}=e;t[pn]=g(n.bitSize),t[gn]=g(n.type)}});I({defineSlice(e,t){const{align:n,flags:s,byteSize:i,name:r,instance:{members:[c]}}=e,{byteSize:o,structure:a}=c,l=this,f=function(p,E,v){p||(p=l.allocateMemory(E*o,n,v)),this[w]=p,this[be]=E},u=function(p,E){if(E!==this[be])throw new We(e,this,p)},h=this.defineMember(c),{set:d}=h,m=this.createApplier(e),A=function(p,E){var v;if(oe(p,b))this[w]?u.call(this,p,p.length):f.call(this,null,p.length,E),this[D](p),s&C.HasPointer&&this[z]("copy",N.Vivificate,p);else if(typeof p=="string"&&s&te.IsString)A.call(this,{string:p},E);else if(p!=null&&p[Symbol.iterator]){p=Gt(p),this[w]?u.call(this,p,p.length):f.call(this,null,p.length,E);let F=0;for(const j of p)(v=b[ae])==null||v.validateValue(j,F,p.length),d.call(this,F++,j,E)}else if(typeof p=="number")if(!this[w]&&p>=0&&isFinite(p))f.call(this,null,p,E);else throw new pe(e,p,!this[w]);else if(p&&typeof p=="object"){if(m.call(this,p,E)===0)throw new pe(e,p)}else if(p!==void 0)throw new pe(e,p)},S=function(p,E){const v=this[be],F=this[w];p=p===void 0?0:Ft(p,v),E=E===void 0?v:Ft(E,v);const j=p*o,L=E*o-j;return l.obtainView(F.buffer,F.byteOffset+j,L)},b=this.createConstructor(e);return t.$={get:wt,set:A},t.length={get:bs},s&te.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),s&te.IsString&&(t.string=this.defineString(e)),s&te.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t.entries=g(Be),t.subarray={value(p,E){const v=S.call(this,p,E);return b(v)}},t.slice={value(p,E,v={}){const{zig:F=!1}=v,j=S.call(this,p,E),L=l.allocateMemory(j.byteLength,n,F),U=b(L);return U[D]({[w]:j}),U}},t[Symbol.iterator]=g(cn),t[Ce]=g(f),t[D]=this.defineCopier(i,!0),t[Z]=g(A),t[ie]=this.defineFinalizerArray(h),t[le]={get:Be},t[Y]=s&C.HasObject&&this.defineVivificatorArray(e),t[z]=s&C.HasPointer&&this.defineVisitorArray(),b},finalizeSlice(e,t){const{flags:n,instance:{members:[s]}}=e;t.child=g(s.structure.constructor),t[ae]=n&te.HasSentinel&&this.defineSentinel(e)}});function bs(){return this[be]}function Ft(e,t){return e=e|0,e<0?(e=t+e,e<0&&(e=0)):e>t&&(e=t),e}I({defineStruct(e,t){const{flags:n,length:s,instance:{members:i}}=e,r=i.find(d=>d.flags&we.IsBackingInt),c=r&&this.defineMember(r),o=this.createApplier(e),a=function(d,m){if(oe(d,l))this[D](d),n&C.HasPointer&&this[z]("copy",0,d);else if(d&&typeof d=="object")o.call(this,d,m);else if((typeof d=="number"||typeof d=="bigint")&&c)c.set.call(this,d);else if(d!==void 0)throw new Se(e,"object",d)},l=this.createConstructor(e),f=t[Re].value,u=t[ot].value,h=[];for(const d of i.filter(m=>!!m.name)){const{name:m,flags:A}=d,{set:S}=t[m]=this.defineMember(d);S&&(A&we.IsRequired&&(S.required=!0),f[m]=S,u.push(m)),h.push(m)}return t.$={get:pt,set:a},t.length=g(s),t.entries=n&H.IsTuple&&{value:_e},t[Symbol.toPrimitive]=c&&{value(d){return d==="string"?Object.prototype.toString.call(this):c.get.call(this)}},t[Symbol.iterator]=g(n&H.IsIterator?cs:n&H.IsTuple?ln:on),t[Z]=g(a),t[Y]=n&C.HasObject&&this.defineVivificatorStruct(e),t[z]=n&C.HasPointer&&this.defineVisitorStruct(i),t[le]={get:n&H.IsTuple?_e:gt},t[Ie]=g(h),n&H.IsAllocator&&(t.alloc=this.defineAlloc(),t.free=this.defineFree(),t.dupe=this.defineDupe()),l}});I({defineVivificatorStruct(e){const{instance:{members:t}}=e,n={};for(const i of t.filter(r=>r.type===$.Object))n[i.slot]=i;const s=this;return{value(i){var A;const r=n[i],{bitOffset:c,byteSize:o,structure:{constructor:a}}=r;(A=this[G])==null||A.call(this);const l=this[w],u=l.byteOffset+(c>>3);let h=o;if(h===void 0){if(c&7)throw new Gn(r);h=r.bitSize>>3}const d=s.obtainView(l.buffer,u,h);return this[V][i]=a.call(dt,d)}}}});I({defineVector(e,t){const{flags:n,length:s,instance:{members:[i]}}=e,r=this.createApplier(e),c=function(l){if(oe(l,o))this[D](l),n&C.HasPointer&&this[z]("copy",N.Vivificate,l);else if(l!=null&&l[Symbol.iterator]){let f=l.length;if(typeof f!="number"&&(l=[...l],f=l.length),f!==s)throw new We(e,this,l);let u=0;for(const h of l)this[u++]=h}else if(l&&typeof l=="object"){if(r.call(this,l)===0)throw new pe(e,l)}else if(l!==void 0)throw new pe(e,l)},o=this.createConstructor(e,{initializer:c}),{bitSize:a}=i;for(let l=0,f=0;l<s;l++,f+=a)n&C.HasPointer?t[l]=this.defineMember({...i,slot:l}):t[l]=this.defineMember({...i,bitOffset:f});return t.$={get:pt,set:c},t.length=g(s),n&Et.IsTypedArray&&(t.typedArray=this.defineTypedArray(e),n&Et.IsClampedArray&&(t.clampedArray=this.defineClampedArray(e))),t.entries=g(_e),t[Symbol.iterator]=g(ln),t[Z]=g(c),t[le]={get:_e},t[Y]=n&C.HasObject&&this.defineVivificatorArray(e),t[z]=n&C.HasPointer&&this.defineVisitorArray(),o},finalizeVector(e,t){const{instance:{members:[n]}}=e;t.child=g(n.structure.constructor)}});I({defineVisitor(){return{value(e,t,n){let s;typeof e=="string"?s=ps[e]:s=e,s.call(this,t,n)}}}});function ze(e,t,n,s){let i=this[V][e];if(!i)if(!(n&N.IgnoreUncreated))i=this[Y](e);else return;let r;s&&(r=s[V][e],!r)||i[z](t,n,r)}const ps={copy(e,t){this[V][0]=t[V][0]},clear(e){e&N.IsInactive&&(this[V][0]=void 0)},reset(){this[V][0]=void 0,this[Me]=void 0}};I({defineVisitorArgStruct(e){const t=[];let n;for(const[s,{slot:i,structure:r}]of e.entries())r.flags&C.HasPointer&&(s===0?n=i:t.push(i));return{value(s,i,r){if(!(i&N.IgnoreArguments)&&t.length>0)for(const c of t)ze.call(this,c,s,i|N.IsImmutable,r);!(i&N.IgnoreRetval)&&n!==void 0&&ze.call(this,n,s,i,r)}}}});I({defineVisitorErrorUnion(e,t){const{slot:n}=e;return{value(s,i,r){t.call(this)&&(i|=N.IsInactive),(!(i&N.IsInactive)||!(i&N.IgnoreInactive))&&ze.call(this,n,s,i,r)}}}});I({defineVisitorOptional(e,t){const{slot:n}=e;return{value(s,i,r){t.call(this)||(i|=N.IsInactive),(!(i&N.IsInactive)||!(i&N.IgnoreInactive))&&ze.call(this,n,s,i,r)}}}});I({defineVisitorStruct(e){const t=e.filter(n=>{var s;return((s=n.structure)==null?void 0:s.flags)&C.HasPointer}).map(n=>n.slot);return{value(n,s,i){for(const r of t)ze.call(this,r,n,s,i)}}}});I({variables:[],getSpecialExports(){const e=t=>{if(t===void 0)throw new Error("Not a Zig type");return t};return{init:(...t)=>{var n;return(n=this.initialize)==null?void 0:n.call(this,...t)},abandon:()=>{var t;return(t=this.abandonModule)==null?void 0:t.call(this)},released:()=>this.released,connect:t=>this.consoleObject=t,sizeOf:t=>e(t==null?void 0:t[yt]),alignOf:t=>e(t==null?void 0:t[K]),typeOf:t=>{var n;return(n=Ne[e(t==null?void 0:t[ve])])==null?void 0:n.toLowerCase()}}},recreateStructures(e,t){var c;Object.assign(this,t);const n=(o,a)=>{for(const[l,f]of Object.entries(a))o[l]=i(f);return o},s=o=>o.length?o.buffer:new ArrayBuffer(0),i=o=>{const{memory:a,structure:l,actual:f}=o;if(a){if(f)return f;{const{array:u,offset:h,length:d}=a,m=this.obtainView(s(u),h,d),{handle:A,const:S}=o,b=l==null?void 0:l.constructor,p=o.actual=b.call(ne,m);return S&&this.makeReadOnly(p),o.slots&&n(p[V],o.slots),A&&this.variables.push({handle:A,object:p}),p}}else return l};(c=this.resetGlobalErrorSet)==null||c.call(this);const r=new Map;for(const o of e){for(const a of[o.instance,o.static])if(a.template){const{slots:l,memory:f,handle:u}=a.template,h=a.template={};if(f){const{array:d,offset:m,length:A}=f;h[w]=this.obtainView(s(d),m,A),u&&this.variables.push({handle:u,object:h})}if(l){const d=h[V]={};r.set(d,l)}}this.defineStructure(o)}for(const[o,a]of r)n(o,a);for(const o of e)this.finalizeStructure(o)}});I({defaultAllocator:null,vtableFnIds:null,createDefaultAllocator(e,t){let n=this.defaultAllocator;if(!n){const{constructor:s}=t,{noResize:i}=s,r={alloc:(o,a,l)=>this.allocateHostMemory(a,1<<l),free:(o,a,l)=>{const f=this.getViewAddress(a["*"][w]),u=a.length;this.freeHostMemory(f,u,1<<l)},resize:i},c=this.obtainZigView(at,0);n=this.defaultAllocator=new s({ptr:c,vtable:r}),this.vtableFnIds=[r.alloc,r.free].map(o=>this.getFunctionId(o))}return n},freeDefaultAllocator(){if(this.vtableFnIds){for(const e of this.vtableFnIds)this.releaseFunction(e);this.defaultAllocator=null,this.vtableFnIds=null}},allocateHostMemory(e,t){const n=this.allocateJSMemory(e,t);try{const s=this.allocateShadowMemory(e,t),i=this.getViewAddress(s);return this.registerMemory(i,e,t,!0,n,s),s}catch{return null}},freeHostMemory(e,t,n){const s=this.unregisterMemory(e,t);s&&this.freeShadowMemory(s.shadowDV)}});I({createPromiseCallback(e,t){if(t){if(typeof t!="function")throw new re("function",t)}else e[Ht]=new Promise((s,i)=>{t=r=>{var c;(c=r==null?void 0:r[w])!=null&&c[P]&&(r=new r.constructor(r)),r instanceof Error?i(r):s(r)}});const n=e[me]=(s,i)=>{t.length===2?t(i instanceof Error?i:null,isError?null:i):t(i),e[ie]();const r=this.getFunctionId(n);this.releaseFunction(r)};return n}});I({createSignalArray(e,t){const{constructor:{child:n}}=e.instance.members[0].structure,s=new Int32Array([t!=null&&t.aborted?1:0]),i=n(s);return t&&t.addEventListener("abort",()=>{{const r=this.findShadowView(i[w]);if(r){const c=new Int32Array(r.buffer,r.byteOffset,1);Atomics.store(c,0,1)}}},{once:!0}),i}});I({nextThreadId:1,workers:[],getThreadHandler(e){switch(e){case"thread-spawn":return typeof window=="object"&&!window.crossOriginIsolated&&console.warn(`%cHTML document is not cross-origin isolated %c

WebAssembly multithreading in the browser is only possibly when %cwindow.crossOriginIsolated%c = true. Visit https://developer.mozilla.org/en-US/docs/Web/API/Window/crossOriginIsolated for information on how to enable it.`,"color: red;font-size: 200%;font-weight:bold","","background-color: lightgrey;font-weight:bold",""),this.spawnThread.bind(this);case"wait-async":return this.waitAsync.bind(this)}},spawnThread(e){const t=this.nextThreadId;this.nextThreadId++;const{executable:n,memory:s,options:i}=this,r={executable:n,memory:s,options:i,tid:t,arg:e},c=(a,l)=>{var f;if(l.type==="call"){const{module:u,name:h,args:d,array:m}=l,A=(f=this.exportedModules[u])==null?void 0:f[h],S=A==null?void 0:A(...d);m&&(m[1]=S|0,m[0]=1,Atomics.notify(m,0,1))}else if(l.type==="exit"){const u=this.workers.indexOf(a);u!==-1&&(a.detach(),this.workers.splice(u,1))}},o="message";{const a=gs(),l=new Worker(a,{type:"module",name:"zig"}),f=u=>c(l,u.data);l.addEventListener(o,f),l.detach=()=>l.removeEventListener(o,f),l.postMessage(r),this.workers.push(l)}return t},waitAsync(e,t,n){const s=new Int32Array(this.memory.buffer,e,1),i=Atomics.load(s,0),r=this.table.get(t),c=()=>r(n),o=i!==0?Atomics.waitAsync(s,0,i):{async:!1};o.async?o.value.then(c):c()}});function ws(){const e=Ss.toString(),t=e.indexOf("{")+1,n=e.lastIndexOf("}");return e.slice(t,n)}let rt;function gs(){if(!rt){const e=ws();rt=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}return rt}function Ss(){let e;self.onmessage=s=>t(s.data),e=s=>self.postMessage(s);function t({executable:s,memory:i,options:r,tid:c,arg:o}){const a=WebAssembly,l={memory:i},f={},u={},h={env:l,wasi:f,wasi_snapshot_preview1:u};for(const{module:S,name:b,kind:p}of a.Module.imports(s))if(p==="function"){const E=n(S,b);S==="env"?l[b]=E:S==="wasi_snapshot_preview1"?u[b]=E:S==="wasi"&&(f[b]=E)}const{tableInitial:d}=r;l.__indirect_function_table=new a.Table({initial:d,element:"anyfunc"});const{exports:m}=new a.Instance(s,h),{wasi_thread_start:A}=m;A(c,o),e({type:"exit"})}function n(s,i){if(i==="_queueJsAction")return function(...r){return e({type:"call",module:s,name:i,args:r}),0};{const r=new Int32Array(new SharedArrayBuffer(8));return function(...c){return r[0]=0,e({type:"call",module:s,name:i,args:c,array:r}),Atomics.wait(r,0,0),r[1]}}}}export{Is as c};
