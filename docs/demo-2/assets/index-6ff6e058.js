var Ke=Object.defineProperty;var Xe=(t,e,n)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(Xe(t,typeof e!="symbol"?e+"":e,n),n);const b=Symbol("memory"),E=Symbol("slots"),_t=Symbol("parent"),Tt=Symbol("name"),oe=Symbol("tag"),rt=Symbol("items"),xt=Symbol("props"),Wt=Symbol("getter"),At=Symbol("setter"),ft=Symbol("elementGetter"),ut=Symbol("elementSetter"),Nt=Symbol("addressGetter"),ye=Symbol("addressSetter"),nt=Symbol("targetGetter"),kt=Symbol("targetSetter"),st=Symbol("fixedLocation"),Gt=Symbol("propSetters"),pe=Symbol("allKeys"),Ut=Symbol("length"),It=Symbol("proxy"),mt=Symbol("compat"),z=Symbol("size"),D=Symbol("align"),qt=Symbol("array"),Lt=Symbol("pointer"),Et=Symbol("const"),Bt=Symbol("constProto"),$=Symbol("copier"),ie=Symbol("resetter"),k=Symbol("normalizer"),N=Symbol("vivificator"),P=Symbol("pointerVisitor"),yt=Symbol("environment"),vt=Symbol("attributes"),de=Symbol("more");function H(t){return function(){const e=this[b];this[b]=null,this[E]&&(this[E]={}),t.releaseFixedView(e)}}function se(t,e,n){if(t+e<=8){const o=2**e-1;if(n)return function(i,s,r){const l=s.getUint8(r)>>t&o;i.setUint8(0,l)};{const i=255^o<<t;return function(s,r,c){const l=r.getUint8(0),f=s.getUint8(c)&i|(l&o)<<t;s.setUint8(c,f)}}}else{const o=8-t,i=2**o-1;if(n){const r=2**(e%8)-1;return function(c,l,a){let f=a,u=0,y=l.getUint8(f++),h,d=y>>t&i,p=o,w=e;do w>p&&(y=l.getUint8(f++),d=d|y<<p),h=w>=8?d&255:d&r,c.setUint8(u++,h),d>>=8,w-=8;while(w>0)}}else{const r=2**((e-o)%8)-1,c=255^i<<t,l=255^r;return function(a,f,u){let y=0,h=u,d=a.getUint8(h),p,w,S=d&c,m=t,v=e+m;do v>m&&(p=f.getUint8(y++),S=S|p<<m,m+=8),v>=8?w=S&255:(d=a.getUint8(h),w=d&l|S&r),a.setUint8(h++,w),S>>=8,m-=8,v-=8;while(v>0)}}}}function U(t,e=!1){const n=me(t,e);return function(o){W.call(this),W.call(o);const i=o[b],s=this[b];n(s,i)}}function me(t,e=!1){if(!e){const n=Ze[t];if(n)return n}return t&7?t&3?t&1?Qe:tn:en:nn}const Ze={1:on,2:sn,4:rn,8:cn,16:ln,32:an};function Qe(t,e){for(let n=0,o=t.byteLength;n<o;n++)t.setInt8(n,e.getInt8(n))}function tn(t,e){for(let n=0,o=t.byteLength;n<o;n+=2)t.setInt16(n,e.getInt16(n,!0),!0)}function en(t,e){for(let n=0,o=t.byteLength;n<o;n+=4)t.setInt32(n,e.getInt32(n,!0),!0)}function nn(t,e){for(let n=0,o=t.byteLength;n<o;n+=8)t.setInt32(n,e.getInt32(n,!0),!0),t.setInt32(n+4,e.getInt32(n+4,!0),!0)}function on(t,e){t.setInt8(0,e.getInt8(0))}function sn(t,e){t.setInt16(0,e.getInt16(0,!0),!0)}function rn(t,e){t.setInt32(0,e.getInt32(0,!0),!0)}function cn(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0)}function ln(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0)}function an(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0),t.setInt32(16,e.getInt32(16,!0),!0),t.setInt32(20,e.getInt32(20,!0),!0),t.setInt32(24,e.getInt32(24,!0),!0),t.setInt32(28,e.getInt32(28,!0),!0)}function fn(t,e){const n=un(e);return function(){W.call(this);const o=this[b];n(o,t,e)}}function un(t){const e=hn[t];return e||(t&7?t&3?t&1?yn:pn:dn:mn)}const hn={1:bn,2:gn,4:wn,8:Sn,16:vn,32:Tn};function yn(t,e,n){for(let o=e,i=e+n;o<i;o++)t.setInt8(o,0)}function pn(t,e,n){for(let o=e,i=e+n;o<i;o+=2)t.setInt16(o,0,!0)}function dn(t,e,n){for(let o=e,i=e+n;o<i;o+=4)t.setInt32(o,0,!0)}function mn(t,e,n){for(let o=e,i=e+n;o<i;o+=8)t.setInt32(o,0,!0),t.setInt32(o+4,0,!0)}function bn(t,e){t.setInt8(e,0)}function gn(t,e){t.setInt16(e,0,!0)}function wn(t,e){t.setInt32(e,0,!0)}function Sn(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0)}function vn(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0)}function Tn(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0),t.setInt32(e+16,0,!0),t.setInt32(e+20,0,!0),t.setInt32(e+24,0,!0),t.setInt32(e+28,0,!0)}function W(){const t=this[b],e=t[b];if(!e||t.buffer.byteLength!==0)return!1;const{memory:n,address:o,len:i}=e,s=new DataView(n.buffer,o,i);return s[b]=e,this[b]=s,!0}const re={},ce={};function pt(t,e="utf-8"){let n=re[e];n||(n=re[e]=new TextDecoder(e));let o;if(Array.isArray(t))if(t.length===1)o=t[0];else{let i=0;for(const c of t)i+=c.length;const{constructor:s}=t[0];o=new s(i);let r=0;for(const c of t)o.set(c,r),r+=c.length}else o=t;return n.decode(o)}function An(t,e="utf-8"){switch(e){case"utf-16":{const{length:n}=t,o=new Uint16Array(n);for(let i=0;i<n;i++)o[i]=t.charCodeAt(i);return o}default:{let n=ce[e];return n||(n=ce[e]=new TextEncoder),n.encode(t)}}}function En(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}function On(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<n.byteLength;o++)n[o]=e.charCodeAt(o);return new DataView(n.buffer)}function G(){const t=new Map,e={error:"throw"},n=function(o){const i=o==null?void 0:o[k];if(i){let s=t.get(o);return s===void 0&&(s=i.call(o,n,e),t.set(o,s)),s}else return o};return n(this)}const xn=BigInt(Number.MAX_SAFE_INTEGER),In=BigInt(Number.MIN_SAFE_INTEGER);function q(){const t=new Map,e={error:"return"},n=function(o){const i=o==null?void 0:o[k];if(i){if(o instanceof Error)return{error:o.message};let s=t.get(o);return s===void 0&&(s=i.call(o,n,e),t.set(o,s)),s}else return typeof o=="bigint"&&In<=o&&o<=xn?Number(o):o};return n(this)}function be(t,e){const n=Jt(()=>this.$,e);return t(n)}function Jt(t,e={}){const{error:n="throw"}=e;try{return t()}catch(o){if(n==="return")return o;throw o}}function Q(t,e={}){return Vt({get(){return W.call(this),this[b]},set(n){Co(n),bt.call(this,n,t,!0,e)}})}function tt(t,e={}){return Vt({get(){return En(this.dataView)},set(n){typeof n!="string"&&$t("string",n);const o=On(n);bt.call(this,o,t,!1,e)}})}function ge(t,e={}){const{sentinel:n,instance:{members:o}}=t,{byteSize:i}=o[0];return Vt({get(){const s=this.dataView,r=i===1?Int8Array:Int16Array,c=new r(s.buffer,s.byteOffset,this.length),l=pt(c,`utf-${i*8}`);return(n==null?void 0:n.value)===void 0?l:l.slice(0,-1)},set(s){typeof s!="string"&&$t("a string",s),(n==null?void 0:n.value)!==void 0&&s.charCodeAt(s.length-1)!==n.value&&(s=s+String.fromCharCode(n.value));const r=An(s,`utf-${i*8}`),c=new DataView(r.buffer);bt.call(this,c,t,!1,e)}})}function ct(t,e={}){const{typedArray:n}=t;return Vt({get(){const o=this.dataView,i=o.byteLength/n.BYTES_PER_ELEMENT;return new n(o.buffer,o.byteOffset,i)},set(o){zo(o,n)||$t(n.name,o);const i=new DataView(o.buffer,o.byteOffset,o.byteLength);bt.call(this,i,t,!0,e)}})}function Vt({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}function Vn(t,e){const{byteSize:n,align:o,instance:{members:[i]},isConst:s}=t,{runtimeSafety:r=!0}=e,{structure:c}=i,{sentinel:l}=c,a=c.type===x.Slice,f=c.type===x.Pointer,u=a&&!l,y=u?n/2:n,{get:h,set:d}=C({type:A.Uint,bitOffset:0,bitSize:y*8,byteSize:y,structure:{byteSize:y}},e),{get:p,set:w}=u?C({type:A.Uint,bitOffset:y*8,bitSize:y*8,byteSize:y,structure:{name:"usize",byteSize:y}},e):{},S=function(){const T=this[st];if(T){const M=this[Nt]();if(M.address!==T.address||M.length!==T.length){const{constructor:_}=c,Dt=e.findMemory(M.address,M.length*_[z]),Ye=_.call(yt,Dt,{writable:!s});this[E][0]=Ye,this[st]=M}}},m=function(){return S.call(this),this[E][0]??Ct()},v=function(T){if(e.inFixedMemory(this))if(e.inFixedMemory(T)){const M={address:e.getViewAddress(T[b]),length:u?T.length:1};gt.call(this,M),this[st]=M}else xo();this[E][0]=T},I=Qt(c)?function(){return m.call(this)[Wt]()}:m,L=function(T){return S.call(this),(this[E][0]??Ct())[At](T)},g=function(T,M){const _=c.constructor;if(this===yt||this===_t||T instanceof R)return!1;if(le(T,_))return new R(_(T["*"],{writable:!s}),M);if(a)return new R(_(T),M);To()},j=function(){const T=f?{}:jn,M=new Proxy(this,T);return Object.defineProperty(this,It,{value:M}),M},O=function(T){const M=c.constructor;if(le(T,M)&&(!s&&T.constructor.const&&Ao(t,T),T=T[E][0]),T instanceof M)W.call(T),s&&!T[Et]?T=M(T,{writable:!1}):!s&&T[Et]&&$o(t);else if(No(T,M)){const _=Pt(c,T,e);T=M(_,{writable:!s})}else if(T!==void 0&&!T[b]){const _=e.inFixedMemory(this),Dt=new M(T,{writable:!s,fixed:_});r&&c.typedArray&&ko(T==null?void 0:T.buffer)&&Po(c,T),T=Dt}else T!==void 0&&Oo(t,T);this[kt](T)},R=t.constructor=K(t,{initializer:O,alternateCaster:g,finalizer:j},e),gt=function({address:T,length:M}){d.call(this,T),w==null||w.call(this,M)},wt=function(){const T=h.call(this),M=p?p.call(this):l?T?e.findSentinel(T,l.bytes)+1:0:1;return{address:T,length:M}},Je={"*":{get:I,set:L},$:{get:Ht,set:O},valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},[nt]:{value:m},[kt]:{value:v},[Nt]:{value:wt},[ye]:{value:gt},[P]:{value:Pn},[$]:{value:U(n)},[N]:{value:Ct},[k]:{value:Mn},[st]:{value:void 0,writable:!0}},He={child:{get:()=>c.constructor},const:{value:s},[D]:{value:o},[z]:{value:n}};return Y(R,Je,He)}function Mn(t){let e;try{e=this["*"]}catch{e=Symbol.for("inaccessible")}return t(e)}function Ht(){return this[It]}function lt({source:t}){const e=t[E][0];e&&this[kt](e)}function $n({isActive:t}){this[E][0]&&!t(this)&&(this[E][0]=void 0)}function Pn(t,e={}){const{source:n,isActive:o=J,isMutable:i=J}=e;t.call(this,{source:n,isActive:o,isMutable:i})}function le(t,e){var n;return((n=t==null?void 0:t.constructor)==null?void 0:n.child)===e&&t["*"]}const jn={get(t,e){return e===Lt?t:e in t?t[e]:t[nt]()[e]},set(t,e,n){if(e in t)t[e]=n;else{const o=t[nt]();o[e]=n}return!0},deleteProperty(t,e){if(e in t)delete t[e];else{const n=t[nt]();delete n[e]}return!0},has(t,e){if(e in t)return!0;{const n=t[nt]();return e in n}}};function J(){return!0}function Dn(t,e){const{byteSize:n,align:o,instance:{members:i},hasPointer:s}=t,r={};for(const h of i){const{get:d,set:p}=C(h,e);r[h.name]={get:d,set:p,configurable:!0,enumerable:!0},h.isRequired&&p&&(p.required=!0)}const c=!!i.find(h=>h.type===A.Object),l=et(t),a=function(h){h instanceof f?(this[$](h),s&&this[P](lt,{vivificate:!0,source:h})):h&&typeof h=="object"?l.call(this,h):h!==void 0&&it(t,"object",h)},f=t.constructor=K(t,{initializer:a},e),u={$:{get:je,set:a},dataView:Q(t),base64:tt(t),valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},...r,[Symbol.iterator]:{value:ve},[$]:{value:U(n)},[N]:c&&{value:Yt(t)},[P]:s&&{value:Kt(t,J)},[k]:{value:we},[xt]:{value:i.map(h=>h.name)}},y={[D]:{value:o},[z]:{value:n}};return Y(f,u,y)}function we(t,e){const n={};for(const[o,i]of Se.call(this,e))n[o]=t(i);return n}function Se(t){return{[Symbol.iterator]:Cn.bind(this,t),length:this[xt].length}}function ve(t){return Se.call(this,t)[Symbol.iterator]()}function Cn(t){const e=this,n=this[xt];let o=0;return{next(){let i,s;if(o<n.length){const r=n[o++];i=[r,Jt(()=>e[r],t)],s=!1}else s=!0;return{value:i,done:s}}}}function Yt(t){const{instance:{members:e}}=t,n={};for(const o of e.filter(i=>i.type===A.Object))n[o.slot]=o;return function(i,s=!0){const r=n[i],{bitOffset:c,byteSize:l,structure:{constructor:a}}=r,f=this[b],y=f.byteOffset+(c>>3);let h=l;h===void 0&&(c&7&&Mo(r),h=r.bitSize>>3);const d=new DataView(f.buffer,y,h);return this[E][i]=a.call(_t,d,{writable:s})}}function Kt(t,e={}){const{isChildActive:n=J,isChildMutable:o=J}=e,{instance:{members:i}}=t,s=i.filter(r=>r.structure.hasPointer);return function(c,l={}){var d;const{source:a,vivificate:f=!1,isActive:u=J,isMutable:y=J}=l,h={...l,isActive:p=>u(this)&&n.call(this,p),isMutable:p=>y(this)&&o.call(this,p)};for(const{slot:p}of s){if(a){const S=(d=a[E])==null?void 0:d[p];if(!S)continue;h.source=S}const w=this[E][p]??(f?this[N](p):null);w&&w[P](c,h)}}}function Fn(t,e){const{byteSize:n,align:o,instance:{members:i},hasPointer:s}=t,r=!!i.find(h=>h.type===A.Object),c=t.constructor=function(h){const d=e.allocateMemory(n,o);this[b]=d,r&&(this[E]={}),f.call(this,h)},l=i.slice(0,-1).map(h=>h.name),a=l.length,f=function(h){h.length!==a&&So(t,h.length);for(const[d,p]of l.entries())try{this[p]=h[d]}catch(w){vo(t,d,w)}},u={};for(const h of i)u[h.name]=C(h,e);const y=function(h){return h===this.retval};return F(c.prototype,{...u,[$]:{value:U(n)},[N]:r&&{value:Yt(t)},[P]:s&&{value:Kt(t,{isChildMutable:y})}}),F(c,{[D]:{value:o},[z]:{value:n}}),c}function zn(t,e){const{length:n,byteSize:o,align:i,instance:{members:[s]},hasPointer:r}=t,{get:c,set:l}=C(s,e),a=Ae(s),f=et(t),u=function(m){if(m instanceof h)this[$](m),r&&this[P](lt,{vivificate:!0,source:m});else if(typeof m=="string"&&a&&(m={string:m}),m!=null&&m[Symbol.iterator]){m=Ve(m),m.length!==n&&Mt(t,this,m);let v=0;for(const I of m)l.call(this,v++,I)}else m&&typeof m=="object"?f.call(this,m)===0&&ot(t,m):m!==void 0&&ot(t,m)},y=Te,h=t.constructor=K(t,{initializer:u,finalizer:y},e),d=t.typedArray=at(s),p=s.type===A.Object,w={$:{get:Ht,set:u},length:{value:n},dataView:Q(t),base64:tt(t),string:a&&ge(t),typedArray:d&&ct(t),get:{value:c},set:{value:l},entries:{value:Xt},valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},[Symbol.iterator]:{value:Oe},[$]:{value:U(o)},[N]:p&&{value:xe(t)},[P]:r&&{value:Ie()},[k]:{value:Ee}},S={child:{get:()=>s.structure.constructor},[mt]:{value:jt(t)},[D]:{value:i},[z]:{value:o}};return Y(h,w,S)}function Te(){const t=new Proxy(this,kn);return Object.defineProperty(this,It,{value:t}),t}function Ae(t){return t.type===A.Uint&&[8,16].includes(t.bitSize)}function Ee(t,e){const n=[];for(const[o,i]of Xt.call(this,e))n.push(t(i));return n}function Oe(){const t=this[qt]??this,e=this.length;let n=0;return{next(){let o,i;if(n<e){const s=n++;o=t.get(s),i=!1}else i=!0;return{value:o,done:i}}}}function Nn(t){const e=this[qt]??this,n=this.length;let o=0;return{next(){let i,s;if(o<n){const r=o++;i=[r,Jt(()=>e.get(r),t)],s=!1}else s=!0;return{value:i,done:s}}}}function Xt(t){return{[Symbol.iterator]:Nn.bind(this,t),length:this.length}}function xe(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:o}=e;return function(s,r=!0){const{constructor:c}=o,l=this[b],f=l.byteOffset+n*s,u=new DataView(l.buffer,f,n);return this[E][s]=c.call(_t,u,{writable:r})}}function Ie(t){return function(n,o={}){const{source:i,vivificate:s=!1,isActive:r=J,isMutable:c=J}=o,l={...o,isActive:()=>r(this),isMutable:()=>c(this)};for(let a=0,f=this.length;a<f;a++){i&&(l.source=i==null?void 0:i[E][a]);const u=this[E][a]??(s?this[N](a):null);u&&u[P](n,l)}}}function Ve(t){var i;if(typeof t.length=="number")return t;const e=t[Symbol.iterator](),n=e.next(),o=(i=n.value)==null?void 0:i.length;if(typeof o=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let s;for(;!(s=e.next()).done;)yield s.value}(),{length:o});{const s=[];let r=n;for(;!r.done;)s.push(r.value),r=e.next();return s}}const kn={get(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return t.get(n);switch(e){case"get":return t[ft]||(t[ft]=t.get.bind(t)),t[ft];case"set":return t[ut]||(t[ut]=t.set.bind(t)),t[ut];case qt:return t;default:return t[e]}},set(t,e,n){const o=typeof e=="symbol"?0:e|0;if(o!==0||o==e)t.set(o,n);else switch(e){case"get":t[ft]=n;break;case"set":t[ut]=n;break;default:t[e]=n}return!0},deleteProperty(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return!1;switch(e){case"get":delete t[ft];break;case"set":delete t[ut];break;default:delete t[e]}return!0},has(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,o=t.length;n<o;n++)e.push(`${n}`);return e.push("length",It),e},getOwnPropertyDescriptor(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e){if(n>=0&&n<t.length)return{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(t,e)}};function Un(t,e){const{byteSize:n,align:o,instance:{members:[i]}}=t,{get:s,set:r}=C(i,e),{get:c,set:l}=C({...i,type:A.EnumerationItem,structure:t},e),a=["string","number","tagged union"],f=et(t),u=function(m){m&&typeof m=="object"?f.call(this,m)===0&&it(t,a,m):m!==void 0&&l.call(this,m)},y=function(m){if(typeof m=="string"||typeof m=="number"||typeof m=="bigint"){const v=h[rt];let I=v[m];return I||h[de]&&typeof m!="string"&&(I=v[m]=new h(void 0),r.call(I,m),F(I,{[Tt]:{value:`${m}`}})),I}else{if((m==null?void 0:m[oe])instanceof h)return m[oe];if(!Pt(t,m,e))it(t,a,m);else return!1}},h=t.constructor=K(t,{initializer:u,alternateCaster:y},e),d=t.typedArray=at(i),p=function(m){return m==="string"?this.$[Tt]:s.call(this)},w={$:{get:c,set:l},dataView:Q(t),base64:tt(t),typedArray:d&&ct(t),valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},[Symbol.toPrimitive]:{value:p},[$]:{value:U(n)},[k]:{value:Ln}},S={[D]:{value:o},[z]:{value:n},[rt]:{value:{}}};return Y(h,w,S)}function Ln(t){return t(this.$[Tt])}function Bn(t,e){const{byteSize:n,align:o,instance:{members:i},hasPointer:s}=t,{get:r,set:c}=C(i[0],e),{get:l,set:a}=C(i[1],e),f=function(){const O=l.call(this,!0);if(O)throw O;return r.call(this)},u=i[0].type===A.Void,h=i[1].structure.name==="anyerror"?Zt():i[1].structure.constructor,d=function(){return!l.call(this,!0)},p=function(){var O;this[ie](),(O=this[P])==null||O.call(this,$n)},w=!!i.find(O=>O.type===A.Object),S=et(t),m=function(O){if(O instanceof v)this[$](O),s&&d.call(this)&&this[P](lt,{vivificate:!0,source:O});else if(O instanceof h)a.call(this,O),p.call(this);else if(O!==void 0||u)try{c.call(this,O),a.call(this,0,!0)}catch(R){if(O instanceof Error)Ue(t);else if(O&&typeof O=="object")try{if(S.call(this,O)===0)throw R}catch(gt){const{error:wt}=O;if(typeof wt=="string")a.call(this,wt),p.call(this);else throw gt}else throw R}},v=t.constructor=K(t,{initializer:m},e),{bitOffset:I,byteSize:L}=i[0],g={$:{get:f,set:m},dataView:Q(t),base64:tt(t),valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},[$]:{value:U(n)},[ie]:{value:fn(I/8,L)},[N]:w&&{value:Yt(t)},[P]:s&&{value:Kt(t,{isChildActive:d})},[k]:{value:be}},j={[D]:{value:o},[z]:{value:n}};return Y(v,g,j)}function Rn(t,e){const{byteSize:n,align:o,instance:{members:[i]}}=t,{get:s,set:r}=C(i,e),c=et(t),l=function(h){if(h instanceof a)this[$](h);else if(h&&typeof h=="object"){if(c.call(this,h)===0){const d=$e(i);it(t,d,h)}}else h!==void 0&&r.call(this,h)},a=t.constructor=K(t,{initializer:l},e),f=t.typedArray=at(i),u={$:{get:s,set:r},dataView:Q(t),base64:tt(t),typedArray:f&&ct(t),valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},[Symbol.toPrimitive]:{value:s},[$]:{value:U(n)},[k]:{value:be}},y={[mt]:{value:jt(t)},[D]:{value:o},[z]:{value:n}};return Y(a,u,y)}function _n(t){const{type:e,bitSize:n}=t,o=e===A.Int;let i=o?n-1:n;if(n<=32){const s=2**i-1;return{min:o?-(2**i):0,max:s}}else{i=BigInt(i);const s=2n**i-1n;return{min:o?-(2n**i):0n,max:s}}}function Me({type:t,bitSize:e}){if(t===A.Int||t===A.Uint)return e<=32?Number:BigInt;if(t===A.Float)return Number;if(t===A.Bool)return Boolean}function $e(t){const e=Me(t);if(e)return typeof e(0)}function Wn(t,e){const{align:n,instance:{members:[o]},hasPointer:i}=t,{get:s,set:r}=C(o,e),{byteSize:c,structure:l}=o,a=qn(t,e);a&&(t.sentinel=a);const f=Ae(o),u=function(g,j,O=!1){g||(g=e.allocateMemory(j*c,n,O)),this[b]=g,this[Ut]=j},y=function(g,j){j!==this[Ut]&&Mt(t,this,g)},h=et(t),d=function(g,j=!1){if(g instanceof w)this[b]?y.call(this,g,g.length):u.call(this,null,g.length,j),this[$](g),i&&this[P](lt,{vivificate:!0,source:g});else if(typeof g=="string"&&f)d.call(this,{string:g},j);else if(g!=null&&g[Symbol.iterator]){g=Ve(g),this[b]?y.call(this,g,g.length):u.call(this,null,g.length,j);let O=0;for(const R of g)a==null||a.validateValue(R,O,g.length),r.call(this,O++,R)}else typeof g=="number"?!this[b]&&g>=0&&isFinite(g)?u.call(this,null,g):ot(t,g,!this[b]):g&&typeof g=="object"?h.call(this,g)===0&&ot(t,g):g!==void 0&&ot(t,g)},p=Te,w=t.constructor=K(t,{initializer:d,shapeDefiner:u,finalizer:p},e),S=t.typedArray=at(o),m=o.type===A.Object,v={shapeDefiner:u},I={$:{get:Ht,set:d},length:{get:Gn},dataView:Q(t,v),base64:tt(t,v),string:f&&ge(t,v),typedArray:S&&ct(t,v),get:{value:s},set:{value:r},entries:{value:Xt},valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},[Symbol.iterator]:{value:Oe},[$]:{value:U(c,!0)},[N]:m&&{value:xe(t)},[P]:i&&{value:Ie()},[k]:{value:Ee}},L={child:{get:()=>l.constructor},[mt]:{value:jt(t)},[D]:{value:n},[z]:{value:c}};return Y(w,I,L)}function Gn(){return this[Ut]}function qn(t,e){const{runtimeSafety:n=!0}=e,{byteSize:o,instance:{members:[i,s],template:r}}=t;if(!s)return;const{get:c}=C(s,e),l=c.call(r,0),{get:a}=C(i,e),f=n?function(h,d,p){h===l&&d!==p-1?ae(t,h,d,p):h!==l&&d===p-1&&St(t,l,d)}:function(h,d,p){h!==l&&d===p-1&&St(t,l,p)},u=n?function(h,d){for(let p=0;p<d;p++){const w=a.call(h,p);w===l&&p!==d-1?ae(t,l,p,d):w!==l&&p===d-1&&St(t,l,d)}}:function(h,d){if(d*o===h[b].byteLength){const p=d-1;a.call(h,p)!==l&&St(t,l,d)}},y=r[b];return{value:l,bytes:y,validateValue:f,validateData:u}}function Jn(t,e){const{length:n,byteSize:o,align:i,instance:{members:[s]}}=t,{bitSize:r,structure:c}=s,l={};for(let p=0,w=0;p<n;p++,w+=r){const{get:S,set:m}=C({...s,bitOffset:w},e);l[p]={get:S,set:m,configurable:!0}}const a=et(t),f=function(p){if(p instanceof u)this[$](p);else if(p!=null&&p[Symbol.iterator]){let w=p.length;typeof w!="number"&&(p=[...p],w=p.length),w!==n&&Mt(t,this,p);let S=0;for(const m of p)this[Gt][S++].call(this,m)}else p&&typeof p=="object"?a.call(this,p)===0&&ot(t,p):p!==void 0&&ot(t,p)},u=t.constructor=K(t,{initializer:f},e),y=t.typedArray=at(s),h={...l,$:{get:je,set:f},length:{value:n},dataView:Q(t),base64:tt(t),typedArray:y&&ct(t),valueOf:{value:G},toJSON:{value:q},entries:{value:Pe},delete:{value:H(t)},[Symbol.iterator]:{value:Yn},[$]:{value:U(o)},[k]:{value:Hn}},d={child:{get:()=>c.constructor},[mt]:{value:jt(t)},[D]:{value:i},[z]:{value:o}};return Y(u,h,d)}function Hn(t,e){const n=[];for(const[o,i]of Pe.call(this,e))n.push(t(i));return n}function Yn(){const t=this,e=this.length;let n=0;return{next(){let o,i;if(n<e){const s=n++;o=t[s],i=!1}else i=!0;return{value:o,done:i}}}}function Kn(){const t=this,e=this.length;let n=0;return{next(){let o,i;if(n<e){const s=n++;o=[s,t[s]],i=!1}else i=!0;return{value:o,done:i}}}}function Pe(){return{[Symbol.iterator]:Kn.bind(this),length:this.length}}const x={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,ExternUnion:6,BareUnion:7,TaggedUnion:8,ErrorUnion:9,ErrorSet:10,Enumeration:11,Optional:12,Pointer:13,Slice:14,Vector:15,Opaque:16,Function:17},B=Array(Object.values(x).length);function ei(){B[x.Primitive]=Rn}function ni(){B[x.Array]=zn}function oi(){B[x.Struct]=Dn}function ii(){B[x.ArgStruct]=Fn}function si(){B[x.ErrorUnion]=Bn}function ri(){B[x.ErrorSet]=to}function ci(){B[x.Enumeration]=Un}function li(){B[x.Pointer]=Vn}function ai(){B[x.Slice]=Wn}function fi(){B[x.Vector]=Jn}function Xn(t){return B[t]}function F(t,e){for(const[n,o]of Object.entries(e))if(o){const{set:i,get:s,value:r,enumerable:c,configurable:l=!0,writable:a=!0}=o;Object.defineProperty(t,n,s?{get:s,set:i,configurable:l,enumerable:c}:{value:r,configurable:l,enumerable:c,writable:a})}for(const n of Object.getOwnPropertySymbols(e)){const o=e[n];o&&Object.defineProperty(t,n,o)}}function Y(t,e,n){var f;const o={};Object.setPrototypeOf(o,t.prototype);const i={},s={};for(const[u,y]of Object.entries(e))y!=null&&y.set?(i[u]={...y,set:Ft},u!=="$"&&(s[u]=y.set)):u==="set"&&(i[u]={value:Ft,configurable:!0,writable:!0});const r=(f=e[N])==null?void 0:f.value,c={value:function(u){return r.call(this,u,!1)}},{get:l,set:a}=e.$;return F(t.prototype,{[Et]:{value:!1},[pe]:{value:Object.keys(s)},[At]:{value:a},[Wt]:{value:l},[Gt]:{value:s},...e}),F(t,{[Bt]:{value:o},...n}),F(o,{constructor:{value:t,configurable:!0},[Et]:{value:!0},[At]:{value:Ft},[N]:r&&c,...i}),t}function K(t,e,n){const{byteSize:o,align:i,instance:{members:s,template:r},hasPointer:c}=t,{modifier:l,initializer:a,finalizer:f,alternateCaster:u,shapeDefiner:y}=e,h=Zn(s);let d;if(r!=null&&r[E]){const S=s.filter(m=>no(m.type));S.length>0&&(d=S.map(m=>m.slot))}const p=new Qn,w=function(S,m={}){const{writable:v=!0,fixed:I=!1}=m,L=this instanceof w;let g,j;if(L)arguments.length===0&&yo(t),g=this,h&&(g[E]={}),y?(a.call(g,S,I),j=g[b]):g[b]=j=n.allocateMemory(o,i,I);else{if(u&&(g=u.call(this,S,m),g!==!1)||(j=Fo(t,S,n),g=p.find(j,v)))return g;g=Object.create(v?w.prototype:w[Bt]),y?bt.call(g,j,t,!1,{shapeDefiner:y}):g[b]=j,h&&(g[E]={},c&&S instanceof w&&g[P](lt,{vivificate:!0,source:S}))}if(d)for(const O of d)g[E][O]=r[E][O];return l&&l.call(g),L&&(y||a.call(g,S),v||(g=Object.assign(Object.create(w[Bt]),g))),f&&(g=f.call(g)),p.save(j,v,g)};return w}function et(t){const{instance:{template:e}}=t;return function(n){var f;const o=Object.keys(n),i=this[Gt],s=this[pe];for(const u of o)u in i||wo(t,u);let r=0,c=0,l=0,a=0;for(const u of s){const y=i[u];y.special?u in n&&a++:(r++,u in n?c++:y.required&&l++)}if(l!==0&&a===0){const u=s.filter(y=>i[y].required&&!(y in n));go(t,u)}if(a+c>o.length)for(const u of s)u in n&&(o.includes(u)||o.push(u));c<r&&a===0&&e&&(e[b]&&this[$](e),(f=this[P])==null||f.call(this,lt,{vivificate:!0,source:e}));for(const u of o)i[u].call(this,n[u]);return o.length}}function Zn(t){for(const{type:e}of t)switch(e){case A.Object:case A.Comptime:case A.Type:case A.Literal:return!0}return!1}function je(){return this}class Qn{constructor(){V(this,0,null);V(this,1,null)}find(e,n){const i=this[n?0:1];return i==null?void 0:i.get(e)}save(e,n,o){const i=n?0:1;let s=this[i];return s||(s=this[i]=new WeakMap),s.set(e,o),o}}function to(t,e){const{byteSize:n,align:o,instance:{members:[i]}}=t,{get:s}=C(i,e),{get:r,set:c}=C({...i,type:A.Error,structure:t},e),l=["string","number"],a=et(t),f=function(v){if(v&&typeof v=="object")try{a.call(this,v)===0&&it(t,l,v)}catch(I){const{error:L}=v;if(typeof L=="string")c.call(this,L);else throw I}else v!==void 0&&c.call(this,v)},u=function(v){if(typeof v=="number"||typeof v=="string")return y[rt][v];if(!Pt(t,v,e))it(t,l,v);else return!1},y=t.constructor=K(t,{initializer:f,alternateCaster:u},e);Object.setPrototypeOf(y.prototype,Ot.prototype);const h=t.typedArray=at(i),d=function(){return this.$.message},p=function(){return"Error"},w=function(v){return v==="string"?Error.prototype.toString.call(this,v):s.call(this)},S={$:{get:r,set:c},message:{get:d},dataView:Q(t),base64:tt(t),typedArray:h&&ct(t),valueOf:{value:G},toJSON:{value:q},delete:{value:H(e)},[Symbol.toStringTag]:{get:p},[Symbol.toPrimitive]:{value:w},[$]:{value:U(n)},[k]:{value:r}},m={[D]:{value:o},[z]:{value:n},[rt]:{value:{}}};return Y(y,S,m)}let Ot;function eo(){Ot=function(){},Object.setPrototypeOf(Ot.prototype,Error.prototype)}function Zt(){return Ot}const A={Void:0,Bool:1,Int:2,Uint:3,Float:4,EnumerationItem:5,Error:6,Object:7,Type:8,Comptime:9,Static:10,Literal:11,Null:12,Undefined:13};function no(t){switch(t){case A.Type:case A.Comptime:case A.Literal:return!0;default:return!1}}const X={};function ui(){X[A.Int]=oo}function hi(){X[A.Uint]=io}function yi(){X[A.Float]=so}function pi(){X[A.EnumerationItem]=ro}function di(){X[A.Error]=co}function mi(){X[A.Object]=ao}function bi(){X[A.Type]=uo}function gi(){X[A.Comptime]=ho}function De({bitOffset:t,bitSize:e,byteSize:n}){return n!==void 0||!(t&7)&&!(e&7)||e===0}function C(t,e){const n=X[t.type];return n(t,e)}function oo(t,e){const n=Ce(e,dt);return ee(t,e,n)}function io(t,e){const n=Ce(e,dt);return ee(t,e,n)}function Ce(t,e){return function(n,o){const{runtimeSafety:i=!0}=t,s=e(n,o);if(i&&n==="set"){const{min:r,max:c}=_n(o);return function(l,a,f){(a<r||a>c)&&Io(o,a),s.call(this,l,a,f)}}return s}}function so(t,e){return ee(t,e,dt)}function Fe(t,e){const{type:n,structure:o}=t.structure.instance.members[0],i={...t,type:n,structure:o};return C(i,e)}function ro(t,e){const{structure:n}=t,{get:o,set:i}=Fe(t,e),s=function(r){const{constructor:c}=n,l=r instanceof c?r:c(r);return l||mo(n,r),l};return{get:o.length===0?function(){const c=o.call(this);return s(c)}:function(c){const l=o.call(this,c);return s(l)},set:i.length===1?function(c){const l=s(c);i.call(this,l[Symbol.toPrimitive]())}:function(c,l){const a=s(l);i.call(this,c,a[Symbol.toPrimitive]())}}}function co(t,e){const{structure:n}=t,{name:o}=n,{get:i,set:s}=Fe(t,e),r=o==="anyerror",c=Zt(),l=function(a,f=!1){const{constructor:u}=n;let y;if(!(a===0&&f))return a instanceof Error?a instanceof(r?c:u)?y=a:Ue(n):(y=r?c[a]:u(a),y||bo(n,a)),y};return{get:i.length===0?function(f){const u=i.call(this);return l(u,f)}:function(f){const u=i.call(this,f);return l(u,!1)},set:s.length===1?function(f,u){const y=l(f,u);s.call(this,Number(y??0))}:function(f,u){const y=l(u,!1);s.call(this,f,Number(y))}}}function Qt(t){switch(t.type){case x.Primitive:case x.ErrorUnion:case x.Optional:case x.Enumeration:case x.ErrorSet:return!0;default:return!1}}function ze(t){return(this[E][t]??this[N](t))[Wt]()}function Ne(t){return this[E][t]??this[N](t)}function lo(t,e){(this[E][t]??this[N](t))[At](e)}function te(t,{get:e,set:n}){return t!==void 0?{get:function(){return e.call(this,t)},set:n?function(o){return n.call(this,t,o)}:void 0}:{get:e,set:n}}function ao(t,e){const{structure:n,slot:o}=t;return te(o,{get:Qt(n)?ze:Ne,set:lo})}function fo(t){const e=this[E][t];return e==null?void 0:e.constructor}function uo(t,e){const{slot:n}=t;return te(n,{get:fo})}function ho(t,e){const{slot:n,structure:o}=t;return te(n,{get:Qt(o)?ze:Ne})}function ee(t,e,n){const{littleEndian:o=!0}=e,{bitOffset:i,byteSize:s}=t,r=n("get",t),c=n("set",t);if(i!==void 0){const l=i>>3;return{get:function(){try{return r.call(this[b],l,o)}catch(f){if(f instanceof TypeError&&W.call(this))return r.call(this[b],l,o);throw f}},set:function(f){try{return c.call(this[b],l,f,o)}catch(u){if(u instanceof TypeError&&W.call(this))return c.call(this[b],l,f,o);throw u}}}}else return{get:function(a){try{return r.call(this[b],a*s,o)}catch(f){if(f instanceof TypeError&&W.call(this))return r.call(this[b],a*s,o);fe(t,a,f)}},set:function(a,f){try{return c.call(this[b],a*s,f,o)}catch(u){if(u instanceof TypeError&&W.call(this))return c.call(this[b],a*s,f,o);fe(t,a,u)}}}}function yo(t){const{name:e}=t;throw new TypeError(`An initializer must be provided to the constructor of ${e}, even when the intended value is undefined`)}function ke(t,e,n=null){const{name:o,type:i,byteSize:s}=t,r=e.byteLength,c=s!==1?"s":"";if(i===x.Slice&&!n)throw new TypeError(`${o} has elements that are ${s} byte${c} in length, received ${r}`);{const l=i===x.Slice?n.length*s:s;throw new TypeError(`${o} has ${l} byte${c}, received ${r}`)}}function po(t){const{type:e,byteSize:n,typedArray:o}=t,i=n!==1?"s":"",s=["ArrayBuffer","DataView"].map(Z);throw o&&s.push(Z(o.name)),e===x.Slice?new TypeError(`Expecting ${Rt(s)} that can accommodate items ${n} byte${i} in length`):new TypeError(`Expecting ${Rt(s)} that is ${n} byte${i} in length`)}function mo(t,e){const{name:n}=t;throw typeof e=="number"||typeof e=="bigint"?new TypeError(`Value given does not correspond to an item of enum ${n}: ${e}`):new TypeError(`Enum item of the type ${n} expected, received ${e}`)}function bo(t,e){const{name:n}=t,o=typeof e;throw o==="string"||o==="number"?new TypeError(`Error ${o} does not corresponds to any error in error set ${n}: ${e}`):new TypeError(`Error of the type ${n} expected, received ${e}`)}function Ue(t){const{name:e}=t;throw new TypeError(`Error given is not a part of error set ${e}`)}function it(t,e,n){const{name:o}=t,i=[];if(Array.isArray(e))for(const r of e)i.push(Z(r));else i.push(Z(e));const s=Be(n);throw new TypeError(`${o} expects ${Rt(i)} as argument, received ${s}`)}function ot(t,e,n=!1){const{instance:{members:[o]},type:i,typedArray:s}=t,r=[],c=$e(o);c?r.push(`array of ${c}s`):o.type===A.EnumerationItem?r.push("array of enum items"):r.push("array of objects"),s&&r.push(s.name),i===x.Slice&&n&&r.push("length"),it(t,r.join(" or "),e)}function Mt(t,e,n){const{name:o,length:i,instance:{members:[s]}}=t,{structure:{constructor:r}}=s,{length:c,constructor:l}=n,a=(e==null?void 0:e.length)??i,f=a!==1?"s":"";let u;throw l===r?u="only a single one":l.child===r?u=`a slice/array that has ${c}`:u=`${c} initializer${c>1?"s":""}`,new TypeError(`${o} has ${a} element${f}, received ${u}`)}function go(t,e){const{name:n}=t;throw new TypeError(`Missing initializers for ${n}: ${e.join(", ")}`)}function wo(t,e){const{name:n,instance:{members:o}}=t;throw o.find(s=>s.name===e)?new TypeError(`Comptime value cannot be changed: ${e}`):new TypeError(`${n} does not have a property with that name: ${e}`)}function So(t,e){const{name:n,instance:{members:o}}=t,i=o.length-1,s=i!==1?"s":"";throw new Error(`${n} expects ${i} argument${s}, received ${e}`)}function vo(t,e,n){const{name:o,instance:{members:i}}=t,s=`args[${e}]`,r=i.length-1,c=e!==0?"..., ":"",l=e!==r-1?", ...":"",a=c+s+l,f=new n.constructor(`${o}(${a}): ${n.message}`);throw f.stack=n.stack,f}function To(t){throw new TypeError("Non-slice pointers can only be created with the help of the new operator")}function Ao(t,e){const{name:n}=t,{constructor:{name:o}}=e;throw new TypeError(`Conversion of ${o} to ${n} requires an explicit cast`)}function ae(t,e,n,o){const{name:i}=t;throw new TypeError(`${i} expects the sentinel value ${e} at ${o-1}, found at ${n}`)}function St(t,e,n){const{name:o}=t;throw new TypeError(`${o} expects the sentinel value ${e} at ${n-1}`)}function Eo(t,e){throw new TypeError(`Unable to simultaneously align memory to ${e}-byte and ${t}-byte boundary`)}function $t(t,e){const n=Be(e);throw new TypeError(`Expected ${Z(t)}, received ${n}`)}function Ct(){throw new TypeError("Null pointer")}function Oo(t,e){const{name:n}=t;let o;if(e!=null){const i=typeof e,s=i==="object"&&e.constructor!==Object?`${e.constructor.name} object`:i;o=`${Re(s)} ${s}`}else o=e+"";throw new TypeError(`${n} cannot point to ${o}`)}function xo(t,e){throw new TypeError("Pointers in fixed memory cannot point to garbage-collected object")}function Io(t,e){const n=ne(t);throw new TypeError(`${n} cannot represent the value given: ${e}`)}function Vo(t,e){const{name:n}=t;throw new RangeError(`Index exceeds the size of ${n??"array"}: ${e}`)}function fe(t,e,n){if(n instanceof RangeError)Vo(t,e);else throw n}function Mo(t){const{name:e,structure:{name:{struct:n}}}=t;throw new TypeError(`Unable to create ${n} as it is not situated on a byte boundary: ${e}`)}function Ft(){throw new TypeError("Unable to modify read-only object")}function $o(t){const{name:e}=t;throw new TypeError(`${e} cannot point to a read-only object`)}function ue(t){throw new Error(Le(t))}function Po(t,e){const n=Z(t.typedArray.name),o=Z(e.constructor.name);console.warn(`Implicitly creating ${n} from ${o}`)}function Le(t){let e=t.replace(/_/g," ");try{e=e.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,(n,o,i)=>{if(o.length===1)return` ${o.toLocaleLowerCase()}${i}`;if(i){const s=o.substring(0,o.length-1),r=o.charAt(o.length-1).toLocaleLowerCase();return` ${s} ${r}${i}`}else return` ${o}`}).trimStart()}catch{}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function Be(t){const e=typeof t;let n;return e==="object"?n=t?Object.prototype.toString.call(t):"null":n=e,Z(n)}function Z(t){return`${Re(t)} ${t}`}function Re(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function Rt(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}function dt(t,e){return _o(t,e,n=>DataView.prototype[n]?DataView.prototype[n]:jo(t,e))}const _e={};function wi(){_e[A.Uint]=Do}function jo(t,e){const n=_e[e.type];return n(t,e)}function Do(t,e){return De(e)?Lo(t,e):Bo(t,e)}function Pt(t,e,n){const{type:o,byteSize:i,typedArray:s}=t;let r;const c=e==null?void 0:e[Symbol.toStringTag];if(c==="DataView")r=e;else if(c==="ArrayBuffer"||c==="SharedArrayBuffer")r=n.obtainView(e,0,e.byteLength);else if(s&&c===s.name||c==="Uint8ClampedArray"&&s===Uint8Array)r=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else if(c==="Uint8Array"&&typeof Buffer=="function"&&e instanceof Buffer)r=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else{const l=e==null?void 0:e[b];if(l){const{constructor:a,instance:{members:[f]}}=t;if(e instanceof a)return l;if(o===x.Array||o===x.Slice||o===x.Vector){const{byteSize:u,structure:{constructor:y}}=f,h=Ge(e,y);if(h!==void 0){if(o===x.Slice||h*u===i)return l;Mt(t,null,e)}}}}return r&&i!==void 0&&We(r,t),r}function Co(t){return(t==null?void 0:t[Symbol.toStringTag])!=="DataView"&&$t("a DataView",t),t}function We(t,e){const{byteSize:n,type:o}=e;(o===x.Slice?t.byteLength%n!==0:t.byteLength!==n)&&ke(e,t)}function bt(t,e,n,o){const{byteSize:i,type:s,sentinel:r}=e,c=s===x.Slice;if(this[b]){const l=c?i*this.length:i;t.byteLength!==l&&ke(e,t,this);const a={[b]:t};r==null||r.validateData(a,this.length),this[$](a)}else{const{shapeDefiner:l}=o;We(t,e);const a=t.byteLength/i,f={[b]:t};r==null||r.validateData(f,a),l.call(this,n?null:t,a),n&&this[$](f)}}function Ge(t,e){const{constructor:n}=t;if(n===e)return 1;if(n.child===e)return t.length}function Fo(t,e,n){const o=Pt(t,e,n);return o||po(t),o}function at(t){const{type:e,byteSize:n}=t;if(e===A.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(e===A.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(e===A.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(e===A.Object)return t.structure.typedArray;return null}function zo(t,e){const n=t==null?void 0:t[Symbol.toStringTag];return!!e&&n===e.name}function No(t,e){const n=e[mt];if(n){const o=t==null?void 0:t[Symbol.toStringTag];if(n.includes(o))return!0}return!!(e.child&&Ge(t,e.child)!==void 0)}function jt(t){const{typedArray:e}=t,n=[];return e&&(n.push(e.name),n.push("DataView"),(e===Uint8Array||e===Int8Array)&&(n.push("Uint8ClampedArray"),n.push("ArrayBuffer"),n.push("SharedArrayBuffer"))),n}function ko(t,e){const n=t==null?void 0:t[Symbol.toStringTag];return n==="DataView"||n==="ArrayBuffer"||n==="SharedArrayBuffer"?!0:!!(e&&n===e.name)}function ne(t){const{type:e,bitSize:n,byteSize:o}=t;if(e===A.Int)return`${n<=32?"":"Big"}Int${n}`;if(e===A.Uint)return`${n<=32?"":"Big"}Uint${n}`;if(e===A.Float)return`Float${n}`;if(e===A.Bool)return`Bool${o!==void 0?o*8:1}`;if(e===A.Void)return"Null"}function Uo(t){const e=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,o=Math.ceil(t/64);return{get:function(i,s){let r=0n;if(s)for(let c=0,l=i+(o-1)*8;c<o;c++,l-=8){const a=e.call(this,l,s);r=r<<64n|a}else for(let c=0,l=i;c<o;c++,l+=8){const a=e.call(this,l,s);r=r<<64n|a}return r},set:function(i,s,r){let c=s;const l=0xFFFFFFFFFFFFFFFFn;if(r)for(let a=0,f=i;a<o;a++,f+=8){const u=c&l;n.call(this,f,u,r),c>>=64n}else{c<<=BigInt(o*64-t);for(let a=0,f=i+(o-1)*8;a<o;a++,f-=8){const u=c&l;n.call(this,f,u,r),c>>=64n}}return c}}}function Lo(t,e){const{bitSize:n,byteSize:o}=e;if(n<64){const i=ne({...e,bitSize:o*8}),s=DataView.prototype[`get${i}`],r=DataView.prototype[`set${i}`],c=n<=32?2**n-1:2n**BigInt(n)-1n;return t==="get"?function(l,a){return s.call(this,l,a)&c}:function(l,a,f){const u=a&c;r.call(this,l,u,f)}}else{const{get:i,set:s}=Uo(n),r=2n**BigInt(n)-1n;return t==="get"?function(c,l){return i.call(this,c,l)&r}:function(c,l,a){const f=l&r;s.call(this,c,f,a)}}}function Bo(t,e){const{bitSize:n,bitOffset:o}=e,i=o&7;if(i+n<=8){const s=DataView.prototype.setUint8,r=DataView.prototype.getUint8,c=2**n-1;if(t==="get")return function(l){return r.call(this,l)>>>i&c};{const l=255^c<<i;return function(a,f){const y=r.call(this,a)&l|(f&c)<<i;s.call(this,a,y)}}}return Ro(t,e)}function Ro(t,e){const{bitSize:n,bitOffset:o}=e,i=o&7,s=[1,2,4,8].find(c=>c*8>=n)??Math.ceil(n/64)*64,r=new DataView(new ArrayBuffer(s));if(t==="get"){const c=dt("get",{...e,byteSize:s}),l=se(i,n,!0);return function(a,f){return l(r,this,a),c.call(r,0,f)}}else{const c=dt("set",{...e,byteSize:s}),l=se(i,n,!1);return function(a,f,u){c.call(r,0,f,u),l(this,r,a)}}}const he={};function _o(t,e,n){const{type:o,bitOffset:i,bitSize:s,structure:r}=e,c=i&7,l=ne(e),a=De(e)?"":`Bit${c}`,f=o===A.Int||o===A.Uint;let u=`${t}${l}${a}`,y=!1,h=u;if(f&&s===64){const p=r==null?void 0:r.name;(p==="usize"||p==="isize")&&(u+="Size",y=!0)}let d=he[u];if(!d){if(f&&t==="set"){const p=Me(e),w=n(h);d=function(S,m,v){w.call(this,S,p(m),v)}}else if(y&&t==="get"){const p=n(h),w=BigInt(Number.MIN_SAFE_INTEGER),S=BigInt(Number.MAX_SAFE_INTEGER);d=function(m,v){const I=p.call(this,m,v);return w<=I&&I<=S?Number(I):I}}else d=n(u);d&&d.name!==u&&Object.defineProperty(d,"name",{value:u,configurable:!0,writable:!1}),he[u]=d}return d}function Wo(t,e){const n=(o,{methods:i},s)=>{const r={},c=/^(get|set)\s+([\s\S]+)/;for(const l of i){const a=e.createCaller(l,s),f=c.exec(a.name);if(f){const u=f[1],y=f[2],h=u==="get"?0:1;if(Go(l,s)===h){let p=r[y];p||(p=r[y]={configurable:!0,enumerable:!0}),p[u]=a}}else r[a.name]={value:a,configurable:!0,writable:!0}}F(o,r)};n(t.constructor,t.static,!1),n(t.constructor.prototype,t.instance,!0)}function Go(t,e){const{argStruct:{instance:{members:n}}}=t;return n.length-(e?2:1)}function qo(t,e){const{type:n,constructor:o,static:{members:i,template:s}}=t;if(i.length===0)return;const r={};for(const c of i)r[c.name]=C(c,e);if(F(o,{valueOf:{value:G},toJSON:{value:q},...r,[Symbol.iterator]:{value:ve},[E]:{value:s[E]},[xt]:{value:i.map(c=>c.name)},[k]:{value:we}}),n===x.Enumeration){const c=o[rt];for(const{name:l,slot:a}of i)if(l!==void 0){const f=o[E][a];if(f instanceof o){F(f,{[Tt]:{value:l}});const u=f[Symbol.toPrimitive]();c[u]=c[l]=f}}else F(o,{[de]:{value:!0}})}else if(n===x.ErrorSet){const c=Zt(),l=o[rt];for(const{name:a,slot:f}of i){let u=o[E][f];const y=Number(u),h=c[y];if(h){if(!(h instanceof o)){const d=h.constructor,p=Object.values(d[E]),w=Object.values(o[E]).map(S=>Number(S));if(p.every(S=>w.includes(Number(S))))Object.setPrototypeOf(d.prototype,o.prototype);else{Object.setPrototypeOf(o.prototype,d.prototype);for(const S of p)w.includes(Number(S))&&Object.setPrototypeOf(S,o.prototype)}}u=o[E][f]=h}else F(u,{message:{value:Le(a)}}),c[y]=c[u.message]=c[`${u}`]=u;l[y]=l[u.message]=l[`${u}`]=u}}}class Jo{constructor(){V(this,"context");V(this,"contextStack",[]);V(this,"consolePending",[]);V(this,"consoleTimeout",0);V(this,"viewMap",new WeakMap);V(this,"initPromise");V(this,"abandoned",!1);V(this,"released",!1);V(this,"littleEndian",!0);V(this,"runtimeSafety",!0);V(this,"comptime",!1);V(this,"variables",[]);V(this,"imports");V(this,"console",globalThis.console)}startContext(){this.context&&this.contextStack.push(this.context),this.context=new Ho}endContext(){this.context=this.contextStack.pop()}allocateMemory(e,n=0,o=!1){return o?this.allocateFixedMemory(e,n):this.allocateRelocMemory(e,n)}allocateRelocMemory(e,n){return this.obtainView(new ArrayBuffer(e),0,e)}registerMemory(e,n=null,o=void 0){const{memoryList:i}=this.context,s=this.getViewAddress(e),r=zt(i,s);return i.splice(r,0,{address:s,dv:e,len:e.byteLength,targetDV:n,targetAlign:o}),s}unregisterMemory(e){const{memoryList:n}=this.context,o=zt(n,e),i=n[o-1];(i==null?void 0:i.address)===e&&n.splice(o-1,1)}findMemory(e,n){if(this.context){const{memoryList:o}=this.context,i=zt(o,e),s=o[i-1];if((s==null?void 0:s.address)===e&&s.len===n)return s.targetDV??s.dv;if((s==null?void 0:s.address)<=e&&e<ht(s.address,s.len)){const r=Number(e-s.address),c=s.targetDV??s.dv,l=n===void 0;l&&(n=c.byteLength-r);const a=this.obtainView(c.buffer,c.byteOffset+r,n);return l&&(a[D]=s.targetAlign),a}}return this.obtainFixedView(e,n??0)}getViewAddress(e){const n=this.getBufferAddress(e.buffer);return ht(n,e.byteOffset)}obtainView(e,n,o){let i=this.viewMap.get(e);if(!i){const c=new DataView(e,n,o);return this.viewMap.set(e,c),c}if(i instanceof DataView){if(i.byteOffset===n&&i.byteLength===o)return i;{const c=i;i={[`${c.byteOffset}:${c.byteLength}`]:c},this.viewMap.set(e,i)}}const s=`${n}:${o}`;let r=i[s];return r||(r=i[s]=new DataView(e,n,o)),r}captureView(e,n,o){if(o){const i=this.allocateRelocMemory(n,0);return n>0&&this.copyBytes(i,e,n),i}else return this.obtainFixedView(e,n)}castView(e,n,o){const{constructor:i,hasPointer:s}=e,r=i.call(yt,n,{writable:o});return s&&this.acquirePointerTargets(r),r}finalizeShape(e){const o=Xn(e.type)(e,this);typeof o=="function"&&(F(o,{name:{value:e.name,configurable:!0}}),o.prototype.hasOwnProperty(Symbol.toStringTag)||F(o.prototype,{[Symbol.toStringTag]:{value:e.name,configurable:!0}}))}finalizeStructure(e){qo(e,this),Wo(e,this)}createCaller(e,n){const{name:o,argStruct:i,thunkId:s}=e,{constructor:r}=i,c=this;let l;return n?l=function(...a){return c.invokeThunk(s,new r([this,...a]))}:l=function(...a){return c.invokeThunk(s,new r(a))},Object.defineProperty(l,"name",{value:o}),l}recreateStructures(e,n){Object.assign(this,n);const o=(r,c)=>{for(const[l,a]of Object.entries(c))r[l]=i(a);return r},i=r=>{if(r.memory){const{array:c,offset:l,length:a}=r.memory,f=this.obtainView(c.buffer,l,a),{constructor:u}=r.structure,{reloc:y,const:h}=r,d=y!==void 0&&h!==!0,p=u.call(yt,f,{writable:d});return r.slots&&o(p[E],r.slots),y!==void 0&&this.variables.push({reloc:y,object:p}),p}else return r.structure};eo();const s=new Map;for(const r of e){for(const c of[r.instance,r.static])if(c.template){const l=c.template,a=c.template={};if(l.memory){const{array:f,offset:u,length:y}=l.memory;a[b]=this.obtainView(f.buffer,u,y)}if(l.slots){const f=a[E]={};s.set(f,l.slots)}}this.finalizeShape(r)}for(const[r,c]of s)o(r,c);for(const r of e)this.finalizeStructure(r)}linkVariables(e){const n=[];for(const{object:o,reloc:i}of this.variables)this.linkObject(o,i,e),o[nt]&&o[E][0]&&n.push(o);for(const o of n){const i=o[nt](),s=this.getViewAddress(i[b]),{length:r=1}=i;o[st]={address:s,length:r}}}linkObject(e,n,o){if(this.inFixedMemory(e))return;const i=e[b],s=this.recreateAddress(n),r=this.obtainFixedView(s,i.byteLength);if(o){const l=Object.create(e.constructor.prototype);l[b]=r,l[$](e)}e[b]=r;const c=l=>{if(l[E]){for(const a of Object.values(l[E]))if(a){const f=a[b];if(f.buffer===i.buffer){const u=f.byteOffset-i.byteOffset;a[b]=this.obtainView(r.buffer,u,f.byteLength),c(a)}}}};c(e)}unlinkVariables(){for(const{object:e}of this.variables)this.unlinkObject(e)}unlinkObject(e){if(!this.inFixedMemory(e))return;const n=e[b],o=this.allocateMemory(n.byteLength),i=Object.create(e.constructor.prototype);i[b]=o,i[$](e),e[b]=o}releaseFunctions(){const e=function(){throw new Error("Module was abandoned")};for(const n of Object.keys(this.imports))this[n]&&(this[n]=e)}getControlObject(){return{init:()=>this.initPromise??Promise.resolve(),abandon:()=>this.abandon(),released:()=>this.released,connect:e=>this.console=e}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}writeToConsole(e){const{console:n}=this;try{const o=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).slice(),i=o.lastIndexOf(10);if(i===-1)this.consolePending.push(o);else{const s=o.subarray(0,i),r=o.subarray(i+1),c=[...this.consolePending,s];n.log(pt(c)),this.consolePending=r.length>0?[r]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout(()=>{n.log(pt(this.consolePending)),this.consolePending=[]},250))}catch(o){n.error(o)}}flushConsole(){this.consolePending.length>0&&(console.log(pt(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}updatePointerAddresses(e){const n=new Map,o=new Map,i=[],s=this,r=function({isActive:a}){var y;if(!a(this))return;const f=this[Lt];if(n.get(f))return;const u=f[E][0];if(u&&(n.set(f,u),!s.inFixedMemory(u))){const h=u[b],d=o.get(h.buffer);if(d){const p=Array.isArray(d)?d:[d],w=qe(p,h.byteOffset,S=>S[b].byteOffset);p.splice(w,0,u),Array.isArray(d)||(o.set(h.buffer,p),i.push(p))}else o.set(h.buffer,u);(y=u[P])==null||y.call(u,r)}};e[P](r);const c=this.findTargetClusters(i),l=new Map;for(const a of c)for(const f of a.targets)l.set(f,a);for(const[a,f]of n){const u=l.get(f),{length:y=1}=f;let h=this.getTargetAddress(f,u);h===!1&&(h=this.getShadowAddress(f,u)),a[ye]({address:h,length:y})}}findTargetClusters(e){const n=[];for(const o of e){let i=null,s=0,r=0,c=null;for(const l of o){const a=l[b],{byteOffset:f,byteLength:u}=a,y=f+u;let h=!0;i&&(r>f?(c||(c={targets:[i],start:s,end:r,address:void 0,misaligned:void 0},n.push(c)),c.targets.push(l),y>r?c.end=y:h=!1):c=null),h&&(i=l,s=f,r=y)}}return n}createClusterShadow(e){const{start:n,end:o,targets:i}=e;let s=0,r;for(const S of i){const m=S[b],v=m.byteOffset,I=S.constructor[D]??m[D];(s===void 0||I>s)&&(s=I,r=v)}const c=o-n,l=this.allocateShadowMemory(c+s,1),a=this.getViewAddress(l),f=Ko(ht(a,r),s),u=Xo(f,r),y=l.byteOffset+Number(u-a),h=new DataView(l.buffer,y,c);for(const S of i){const m=S[b],v=m.byteOffset;if(v!==r){const I=S.constructor[D]??m[D];Yo(ht(u,v),I)&&Eo(I,s)}}const d={[$]:U(c)},p=Object.create(d),w=Object.create(d);return p[b]=new DataView(i[0][b].buffer,Number(n),c),w[b]=h,w[vt]={address:a,len:l.byteLength,align:1},this.addShadow(w,p,1)}getShadowAddress(e,n){if(n){const o=e[b];if(n.address===void 0){const i=this.createClusterShadow(n);n.address=this.getViewAddress(i[b])}return ht(n.address,o.byteOffset)}else{const o=this.createShadow(e);return this.getViewAddress(o[b])}}createShadow(e){const n=e[b],o=e.constructor[D]??n[D],i=Object.create(e.constructor.prototype),s=i[b]=this.allocateShadowMemory(n.byteLength,o);return i[vt]={address:this.getViewAddress(s),len:s.byteLength,align:o},this.addShadow(i,e,o)}addShadow(e,n,o){let{shadowMap:i}=this.context;return i||(i=this.context.shadowMap=new Map),i.set(e,n),this.registerMemory(e[b],n[b],o),e}removeShadow(e){const{shadowMap:n}=this.context;if(n){for(const[o]of n)if(o[b]===e){n.delete(o);break}}}updateShadows(){const{shadowMap:e}=this.context;if(e)for(const[n,o]of e)n[$](o)}updateShadowTargets(){const{shadowMap:e}=this.context;if(e)for(const[n,o]of e)o[$](n)}releaseShadows(){const{shadowMap:e}=this.context;if(e)for(const[n]of e){const{address:o,len:i,align:s}=n[vt];this.freeShadowMemory(o,i,s)}}acquirePointerTargets(e){const n=this,o=new Map,i=function({isActive:s,isMutable:r}){var y,h;const c=this[Lt];if(o.get(c))return;o.set(c,!0);const l=!c.constructor.const,a=c[E][0];let f,u;if(s(this)){const d=c.constructor.child;if(!a||r(this))if(u=c[Nt](),Zo(u.address))f=null;else{const p=d[z]!==void 0?u.length*d[z]:void 0,w=n.findMemory(u.address,p);f=d.call(yt,w,{writable:l})}else f=a}(y=a==null?void 0:a[P])==null||y.call(a,i,{vivificate:!0,isMutable:()=>l}),f!==a&&((h=f==null?void 0:f[P])==null||h.call(f,i,{vivificate:!0,isMutable:()=>l}),c[E][0]=f,n.inFixedMemory(c)&&(c[st]=u))};e[P](i,{vivificate:!0})}}class Ho{constructor(){V(this,"pointerProcessed",new Map);V(this,"memoryList",[]);V(this,"shadowMap",null);V(this,"call",0)}}function qe(t,e,n){let o=0,i=t.length;if(i===0)return 0;for(;o<i;){const s=Math.floor((o+i)/2);n(t[s])<=e?o=s+1:i=s}return i}function zt(t,e){return qe(t,e,n=>n.address)}function Yo(t,e){if(e===void 0)return!1;typeof t=="bigint"&&(t=Number(t&0xFFFFFFFFn));const n=e-1;return(t&n)!==0}function Ko(t,e){let n;return typeof t=="bigint"?(e=BigInt(e),n=~(e-1n)):n=~(e-1),(t&n)+e}function ht(t,e){return t+(typeof t=="bigint"?BigInt(e):e)}function Xo(t,e){return t-(typeof t=="bigint"?BigInt(e):e)}function Zo(t){return typeof t=="bigint"?t===0xaaaaaaaaaaaaaaaan:t===2863311530}class Qo extends Jo{constructor(){super(...arguments);V(this,"imports",{getFactoryThunk:{argType:"",returnType:"i"},allocateExternMemory:{argType:"ii",returnType:"i"},freeExternMemory:{argType:"iii"},allocateShadowMemory:{argType:"cii",returnType:"v"},freeShadowMemory:{argType:"ciii"},runThunk:{argType:"iv",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"}});V(this,"exports",{allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"vvb",returnType:"v"},getSlotNumber:{argType:"ii",returnType:"i"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"},startCall:{argType:"iv",returnType:"i"},endCall:{argType:"iv",returnType:"i"}});V(this,"nextValueIndex",1);V(this,"valueTable",{0:null});V(this,"valueIndices",new Map);V(this,"memory",null);V(this,"littleEndian",!0)}allocateHostMemory(n,o){const i={[D]:o},s=U(n),r=this.allocateRelocMemory(n,o),c=this.allocateShadowMemory(n,o),l={constructor:i,[b]:r,[$]:s},a={constructor:i,[b]:c,[$]:s};return a[vt]={address:this.getViewAddress(c),len:n,align:o},this.addShadow(a,l,o),c}freeHostMemory(n,o,i){const s=this.findMemory(n,o);this.removeShadow(s),this.unregisterMemory(n),this.freeShadowMemory(n,o,i)}getBufferAddress(n){return 0}allocateFixedMemory(n,o){if(n===0)return new DataView(this.memory.buffer,0,0);const i=this.allocateExternMemory(n,o),s=this.obtainFixedView(i,n);return s[D]=o,s}freeFixedMemory(n,o,i){o!==0&&this.freeExternMemory(n,o,i)}obtainFixedView(n,o){const{memory:i}=this;o===0&&n===-1431655766&&(n=0);const s=this.obtainView(i.buffer,n,o);return s[b]={memory:i,address:n,len:o},s}releaseFixedView(n){n.buffer;const o=n.byteOffset,i=n.byteLength,s=n[D];s!==void 0&&this.freeFixedMemory(o,i,s)}inFixedMemory(n){return this.memory?(W.call(n),n[b].buffer===this.memory.buffer):!1}copyBytes(n,o,i){const{memory:s}=this,r=new DataView(s.buffer,o,i);me(i)(n,r)}findSentinel(n,o){const{memory:i}=this,s=o.byteLength,r=i.buffer.byteLength-s+1;for(let c=n;c<r;c+=s){const l=new DataView(i.buffer,c,s);let a=!0;for(let f=0;f<s;f++){const u=l.getUint8(f),y=o.getUint8(f);if(u!==y){a=!1;break}}if(a)return(c-n)/s}}captureString(n,o){const{buffer:i}=this.memory,s=new Uint8Array(i,n,o);return pt(s)}getTargetAddress(n,o){return this.inFixedMemory(n)?this.getViewAddress(n[b]):n[b].byteLength===0?0:!1}clearExchangeTable(){this.nextValueIndex!==1&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(n){if(n){let o=this.valueIndices.get(n);return o===void 0&&(o=this.nextValueIndex++,this.valueIndices.set(n,o),this.valueTable[o]=n),o}else return 0}fromWebAssembly(n,o){switch(n){case"v":case"s":return this.valueTable[o];case"i":return o;case"b":return!!o}}toWebAssembly(n,o){switch(n){case"v":case"s":return this.getObjectIndex(o);case"i":return o;case"b":return o?1:0}}exportFunction(n,o="",i=""){return n?(...s)=>{s=s.map((c,l)=>this.fromWebAssembly(o.charAt(l),c));const r=n.apply(this,s);return this.toWebAssembly(i,r)}:()=>{}}importFunction(n,o="",i=""){let s=!1;return o.startsWith("c")&&(s=!0,o=o.slice(1)),(...r)=>{r=r.map((l,a)=>this.toWebAssembly(o.charAt(a),l)),s&&(r=[this.context.call,...r]);const c=n.apply(this,r);return this.fromWebAssembly(i,c)}}exportFunctions(){const n={};for(const[o,{argType:i,returnType:s,alias:r}]of Object.entries(this.exports)){const c=this[r??o];n[`_${o}`]=this.exportFunction(c,i,s)}return n}importFunctions(n){for(const[o,i]of Object.entries(n)){const s=this.imports[o];if(s){const{argType:r,returnType:c}=s;this[o]=this.importFunction(i,r,c)}}}async instantiateWebAssembly(n){const o=await n,i=this.exportFunctions(),s=this.getWASI(),r={env:i,wasi_snapshot_preview1:s};return o[Symbol.toStringTag]==="Response"?WebAssembly.instantiateStreaming(o,r):WebAssembly.instantiate(o,r)}loadModule(n){return this.initPromise=(async()=>{const{instance:o}=await this.instantiateWebAssembly(n),{memory:i,_initialize:s}=o.exports;this.importFunctions(o.exports),this.trackInstance(o),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=i,s==null||s()})()}trackInstance(n){const o=new WeakRef(n);Object.defineProperty(this,"released",{get:()=>!o.deref(),enumerable:!0})}linkVariables(n){this.initPromise&&(this.initPromise=this.initPromise.then(()=>super.linkVariables(n)))}getMemoryOffset(n){return n}recreateAddress(n){return n}startCall(n,o){this.startContext(),this.context.call=n,o[P]&&this.updatePointerAddresses(o);const i=this.getShadowAddress(o);return this.updateShadows(),i}endCall(n,o){this.updateShadowTargets(),o[P]&&this.acquirePointerTargets(o),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&this.flushConsole()}async runThunk(n,o){return await this.initPromise,this.runThunk(n,o)}invokeThunk(n,o){const i=this.runThunk(n,o);if(i){if(i[Symbol.toStringTag]==="Promise")return i.then(s=>(s&&ue(s),o.retval));ue(i)}return o.retval}getWASI(){return{proc_exit:n=>{},fd_write:(n,o,i,s)=>{if(n===1||n===2){const r=new DataView(this.memory.buffer);let c=0;for(let l=0,a=o;l<i;l++,a+=8){const f=r.getUint32(a,!0),u=r.getUint32(a+4,!0),y=new DataView(this.memory.buffer,f,u);this.writeToConsole(y),c+=u}return r.setUint32(s,c,!0),0}else return 1},random_get:(n,o)=>{const i=new DataView(this.memory.buffer);for(let s=0;s<o;s++)i.setUint8(Math.floor(256*Math.random()));return 0}}}}function Si(t){return new Qo}export{ni as a,li as b,oi as c,fi as d,ai as e,ci as f,ri as g,si as h,ii as i,bi as j,hi as k,mi as l,gi as m,ui as n,pi as o,yi as p,di as q,Si as r,wi as s,ei as u};
