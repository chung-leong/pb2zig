var xr=Object.defineProperty;var Tr=(t,e,n)=>e in t?xr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(Tr(t,typeof e!="symbol"?e+"":e,n),n);const j={Void:0,Bool:1,Int:2,Uint:3,Float:4,Object:5,Type:6,Comptime:7,Static:8,Literal:9,Null:10,Undefined:11},x={Primitive:0,Array:1,Struct:2,ExternStruct:3,PackedStruct:4,ArgStruct:5,ExternUnion:6,BareUnion:7,TaggedUnion:8,ErrorUnion:9,ErrorSet:10,Enumeration:11,Optional:12,Pointer:13,Slice:14,Vector:15,Opaque:16,Function:17};function Pe(t){const{type:e,bitSize:n,byteSize:s}=t;if(e===j.Int)return`${n<=32?"":"Big"}Int${n}`;if(e===j.Uint)return`${n<=32?"":"Big"}Uint${n}`;if(e===j.Float)return`Float${n}`;if(e===j.Bool)return`Bool${s!==void 0?s*8:1}`;if(e===j.Void)return"Null"}function Er(t){const{type:e,bitSize:n}=t,s=e===j.Int;let r=s?n-1:n;if(n<=32){const i=2**r-1;return{min:s?-(2**r):0,max:i}}else{r=BigInt(r);const i=2n**r-1n;return{min:s?-(2n**r):0n,max:i}}}function En({type:t,bitSize:e}){if(t===j.Int||t===j.Uint)return e<=32?Number:BigInt;if(t===j.Float)return Number;if(t===j.Bool)return Boolean}function In(t){const e=En(t);if(e)return typeof e(0)}function Vn({bitOffset:t,bitSize:e,byteSize:n}){return n!==void 0||!(t&7)&&!(e&7)||e===0}function Ct(t){return typeof t=="object"&&typeof t.error=="string"&&Object.keys(t).length===1}class Ir extends TypeError{constructor(e){const{name:n}=e;super(`An initializer must be provided to the constructor of ${n}, even when the intended value is undefined`)}}class Pn extends TypeError{constructor(e,n,s=null){const{name:r,type:i,byteSize:o}=e,c=n.byteLength,a=o!==1?"s":"";let l;if(i===x.Slice&&!s)l=`${r} has elements that are ${o} byte${a} in length, received ${c}`;else{const u=i===x.Slice?s.length*o:o;l=`${r} has ${u} byte${a}, received ${c}`}super(l)}}class Vr extends TypeError{constructor(e){const{type:n,byteSize:s,typedArray:r}=e,i=s!==1?"s":"",o=["ArrayBuffer","DataView"].map(it);r&&o.push(it(r.name));let c;n===x.Slice?c=`Expecting ${xe(o)} that can accommodate items ${s} byte${i} in length`:c=`Expecting ${xe(o)} that is ${s} byte${i} in length`,super(c)}}class Pr extends TypeError{constructor(e,n){const{name:s}=e;let r;typeof n=="number"||typeof n=="bigint"?r=`Value given does not correspond to an item of enum ${s}: ${n}`:r=`Enum item of the type ${s} expected, received ${n}`,super(r)}}class Mr extends TypeError{constructor(e,n){const{name:s}=e,r=typeof n;let i;r==="string"||r==="number"||Ct(n)?(Ct(n)&&(n=`{ error: ${JSON.stringify(n.error)} }`),i=`Error ${r} does not corresponds to any error in error set ${s}: ${n}`):i=`Error of the type ${s} expected, received ${n}`,super(i)}}class Mn extends TypeError{constructor(e){const{name:n}=e;super(`Error given is not a part of error set ${n}`)}}class ht extends TypeError{constructor(e,n,s){const{name:r}=e,i=[];if(Array.isArray(n))for(const c of n)i.push(it(c));else i.push(it(n));const o=Un(s);super(`${r} expects ${xe(i)} as argument, received ${o}`)}}class mt extends ht{constructor(e,n,s=!1){var l;const{instance:{members:[r]},type:i,typedArray:o}=e,c=[],a=In(r);if(a){let u;switch((l=r.structure)==null?void 0:l.type){case x.Enumeration:u="enum item";break;case x.ErrorSet:u="error";break;default:u=a}c.push(`array of ${u}s`)}else c.push("array of objects");o&&c.push(o.name),i===x.Slice&&s&&c.push("length"),super(e,c.join(" or "),n)}}class Yt extends TypeError{constructor(e,n,s){const{name:r,length:i,instance:{members:[o]}}=e,{structure:{constructor:c}}=o,{length:a,constructor:l}=s,u=(n==null?void 0:n.length)??i,f=u!==1?"s":"";let b;l===c?b="only a single one":l.child===c?b=`a slice/array that has ${a}`:b=`${a} initializer${a>1?"s":""}`,super(`${r} has ${u} element${f}, received ${b}`)}}class $r extends TypeError{constructor(e,n){const{name:s}=e;super(`Missing initializers for ${s}: ${n.join(", ")}`)}}class Ur extends TypeError{constructor(e,n){const{name:s,instance:{members:r}}=e,i=r.find(c=>c.name===n);let o;i?o=`Comptime value cannot be changed: ${n}`:o=`${s} does not have a property with that name: ${n}`,super(o)}}class Cr extends Error{constructor(e,n){const{name:s,instance:{members:r}}=e,i=r.length-1,o=i!==1?"s":"";super(`${s} expects ${i} argument${o}, received ${n}`)}}class Dr extends TypeError{constructor(e){super("Non-slice pointers can only be created with the help of the new operator")}}class kr extends TypeError{constructor(e,n){const{name:s}=e,{constructor:{name:r}}=n;super(`Conversion of ${r} to ${s} requires an explicit cast`)}}class pn extends TypeError{constructor(e,n,s,r){const{name:i}=e;super(`${i} expects the sentinel value ${n} at ${r-1}, found at ${s}`)}}class Kt extends TypeError{constructor(e,n,s){const{name:r}=e;super(`${r} expects the sentinel value ${n} at ${s-1}`)}}class Fr extends TypeError{constructor(e,n){super(`Unable to simultaneously align memory to ${n}-byte and ${e}-byte boundary`)}}class Zt extends TypeError{constructor(e,n){const s=Un(n);super(`Expected ${it(e)}, received ${s}`)}}class dn extends TypeError{constructor(){super("Null pointer")}}class Rr extends TypeError{constructor(e,n){const{name:s}=e;let r;if(n!=null){const i=typeof n,o=i==="object"&&n.constructor!==Object?`${n.constructor.name} object`:i;r=`${Cn(o)} ${o}`}else r=n+"";super(`${s} cannot point to ${r}`)}}class Nr extends TypeError{constructor(e,n){super("Pointers in fixed memory cannot point to garbage-collected object")}}class Lr extends TypeError{constructor(e,n){const s=Pe(e);super(`${s} cannot represent the value given: ${n}`)}}class gn extends RangeError{constructor(e,n){const{name:s}=e;super(`Index exceeds the size of ${s??"array"}: ${n}`)}}class Br extends TypeError{constructor(e){const{name:n,structure:{name:{struct:s}}}=e;super(`Unable to create ${s} as it is not situated on a byte boundary: ${n}`)}}class _r extends TypeError{constructor(){super("Unable to modify read-only object")}}class qr extends TypeError{constructor(e){const{name:n}=e;super(`${n} cannot point to a read-only object`)}}class Sn extends Error{constructor(e){super($n(e))}}function Wr(t,e,n){const{name:s,instance:{members:r}}=t,i=`args[${e}]`,o=r.length-1,c=e!==0?"..., ":"",a=e!==o-1?", ...":"",l=c+i+a,u=Object.create(n.constructor.prototype);return u.message=`${s}(${l}): ${n.message}`,u.stack=n.stack,u}function wn(t,e,n){return n instanceof RangeError&&!(n instanceof gn)&&(n=new gn(t,e)),n}function jt(){throw new _r}function Gr(t,e){const n=it(t.typedArray.name),s=it(e.constructor.name);console.warn(`Implicitly creating ${n} from ${s}`)}function $n(t){let e=t.replace(/_/g," ");try{e=e.replace(/(\p{Uppercase}+)(\p{Lowercase}*)/gu,(n,s,r)=>{if(s.length===1)return` ${s.toLocaleLowerCase()}${r}`;if(r){const i=s.substring(0,s.length-1),o=s.charAt(s.length-1).toLocaleLowerCase();return` ${i} ${o}${r}`}else return` ${s}`}).trimStart()}catch{}return e.charAt(0).toLocaleUpperCase()+e.substring(1)}function Un(t){const e=typeof t;let n;return e==="object"?n=t?Object.prototype.toString.call(t):"null":n=e,it(n)}function it(t){return`${Cn(t)} ${t}`}function Cn(t){return/^\W*[aeiou]/i.test(t)?"an":"a"}function xe(t,e="or"){const n=` ${e} `;return t.length>2?t.slice(0,-1).join(", ")+n+t[t.length-1]:t.join(n)}const S=Symbol("memory"),z=Symbol("slots"),Me=Symbol("parent"),$e=Symbol("name"),Mt=Symbol("class"),On=Symbol("tag"),bt=Symbol("props"),Qt=Symbol("getter"),te=Symbol("setter"),Vt=Symbol("elementGetter"),Pt=Symbol("elementSetter"),Te=Symbol("addressGetter"),Dn=Symbol("addressSetter"),yt=Symbol("targetGetter"),Ee=Symbol("targetSetter"),vt=Symbol("fixedLocation"),Ue=Symbol("propSetters"),N=Symbol("writeDisabler"),kn=Symbol("allKeys"),Ie=Symbol("length"),ee=Symbol("proxy"),Rt=Symbol("compat"),L=Symbol("size"),D=Symbol("align"),Ce=Symbol("array"),Dt=Symbol("pointer"),pt=Symbol("constTarget"),ze=Symbol("constProxy"),M=Symbol("copier"),vn=Symbol("resetter"),B=Symbol("normalizer"),H=Symbol("vivificator"),U=Symbol("pointerVisitor"),$t=Symbol("environment"),Ht=Symbol("attributes"),Fn=Symbol("more");function ct(t){return function(){const e=this[S];this[S]=null,this[z]&&(this[z]={}),t.releaseFixedView(e)}}function An(t,e,n){if(t+e<=8){const s=2**e-1;if(n)return function(r,i,o){const a=i.getUint8(o)>>t&s;r.setUint8(0,a)};{const r=255^s<<t;return function(i,o,c){const a=o.getUint8(0),u=i.getUint8(c)&r|(a&s)<<t;i.setUint8(c,u)}}}else{const s=8-t,r=2**s-1;if(n){const o=2**(e%8)-1;return function(c,a,l){let u=l,f=0,b=a.getUint8(u++),y,m=b>>t&r,h=s,p=e;do p>h&&(b=a.getUint8(u++),m=m|b<<h),y=p>=8?m&255:m&o,c.setUint8(f++,y),m>>=8,p-=8;while(p>0)}}else{const o=2**((e-s)%8)-1,c=255^r<<t,a=255^o;return function(l,u,f){let b=0,y=f,m=l.getUint8(y),h,p,g=m&c,w=t,E=e+w;do E>w&&(h=u.getUint8(b++),g=g|h<<w,w+=8),E>=8?p=g&255:(m=l.getUint8(y),p=m&a|g&o),l.setUint8(y++,p),g>>=8,w-=8,E-=8;while(E>0)}}}}function _(t,e=!1){const n=Rn(t,e);return function(s){K.call(this),K.call(s);const r=s[S],i=this[S];n(i,r)}}function Rn(t,e=!1){if(!e){const n=Jr[t];if(n)return n}return t&7?t&3?t&1?Kr:Hr:Xr:Yr}const Jr={1:Zr,2:Qr,4:ti,8:ei,16:ni,32:si};function Kr(t,e){for(let n=0,s=t.byteLength;n<s;n++)t.setInt8(n,e.getInt8(n))}function Hr(t,e){for(let n=0,s=t.byteLength;n<s;n+=2)t.setInt16(n,e.getInt16(n,!0),!0)}function Xr(t,e){for(let n=0,s=t.byteLength;n<s;n+=4)t.setInt32(n,e.getInt32(n,!0),!0)}function Yr(t,e){for(let n=0,s=t.byteLength;n<s;n+=8)t.setInt32(n,e.getInt32(n,!0),!0),t.setInt32(n+4,e.getInt32(n+4,!0),!0)}function Zr(t,e){t.setInt8(0,e.getInt8(0))}function Qr(t,e){t.setInt16(0,e.getInt16(0,!0),!0)}function ti(t,e){t.setInt32(0,e.getInt32(0,!0),!0)}function ei(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0)}function ni(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0)}function si(t,e){t.setInt32(0,e.getInt32(0,!0),!0),t.setInt32(4,e.getInt32(4,!0),!0),t.setInt32(8,e.getInt32(8,!0),!0),t.setInt32(12,e.getInt32(12,!0),!0),t.setInt32(16,e.getInt32(16,!0),!0),t.setInt32(20,e.getInt32(20,!0),!0),t.setInt32(24,e.getInt32(24,!0),!0),t.setInt32(28,e.getInt32(28,!0),!0)}function ri(t,e){const n=ii(e);return function(){K.call(this);const s=this[S];n(s,t,e)}}function ii(t){const e=oi[t];return e||(t&7?t&3?t&1?ci:ai:li:ui)}const oi={1:fi,2:yi,4:mi,8:hi,16:bi,32:pi};function ci(t,e,n){for(let s=e,r=e+n;s<r;s++)t.setInt8(s,0)}function ai(t,e,n){for(let s=e,r=e+n;s<r;s+=2)t.setInt16(s,0,!0)}function li(t,e,n){for(let s=e,r=e+n;s<r;s+=4)t.setInt32(s,0,!0)}function ui(t,e,n){for(let s=e,r=e+n;s<r;s+=8)t.setInt32(s,0,!0),t.setInt32(s+4,0,!0)}function fi(t,e){t.setInt8(e,0)}function yi(t,e){t.setInt16(e,0,!0)}function mi(t,e){t.setInt32(e,0,!0)}function hi(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0)}function bi(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0)}function pi(t,e){t.setInt32(e+0,0,!0),t.setInt32(e+4,0,!0),t.setInt32(e+8,0,!0),t.setInt32(e+12,0,!0),t.setInt32(e+16,0,!0),t.setInt32(e+20,0,!0),t.setInt32(e+24,0,!0),t.setInt32(e+28,0,!0)}function K(){const t=this[S],e=t[S];if(!e||t.buffer.byteLength!==0)return!1;const{memory:n,address:s,len:r}=e,i=new DataView(n.buffer,s,r);return i[S]=e,this[S]=i,!0}function kt(t,e){return Ei(t,e,n=>DataView.prototype[n]?DataView.prototype[n]:gi(t,e))}const Nn={};function di(){Nn[j.Uint]=Si}function gi(t,e){const n=Nn[e.type];return n(t,e)}function Si(t,e){return Vn(e)?ji(t,e):xi(t,e)}function ne(t,e,n){const{type:s,byteSize:r,typedArray:i}=t;let o;const c=e==null?void 0:e[Symbol.toStringTag];if(c==="DataView")o=e;else if(c==="ArrayBuffer"||c==="SharedArrayBuffer")o=n.obtainView(e,0,e.byteLength);else if(i&&c===i.name||c==="Uint8ClampedArray"&&i===Uint8Array)o=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else if(c==="Uint8Array"&&typeof Buffer=="function"&&e instanceof Buffer)o=n.obtainView(e.buffer,e.byteOffset,e.byteLength);else{const a=e==null?void 0:e[S];if(a){const{constructor:l,instance:{members:[u]}}=t;if(e instanceof l)return a;if(s===x.Array||s===x.Slice||s===x.Vector){const{byteSize:f,structure:{constructor:b}}=u,y=Bn(e,b);if(y!==void 0){if(s===x.Slice||y*f===r)return a;throw new Yt(t,null,e)}}}}return o&&r!==void 0&&Ln(o,t),o}function wi(t){if((t==null?void 0:t[Symbol.toStringTag])!=="DataView")throw new Zt("a DataView",t);return t}function Ln(t,e){const{byteSize:n,type:s}=e;if(s===x.Slice?t.byteLength%n!==0:t.byteLength!==n)throw new Pn(e,t)}function Nt(t,e,n,s,r){const{byteSize:i,type:o,sentinel:c}=e,a=o===x.Slice;if(this[S]){const l=a?i*this.length:i;if(t.byteLength!==l)throw new Pn(e,t,this);const u={[S]:t};c==null||c.validateData(u,this.length),this[M](u)}else{const{shapeDefiner:l}=r;Ln(t,e);const u=t.byteLength/i,f={[S]:t};c==null||c.validateData(f,u),s&&(n=!0),l.call(this,n?null:t,u,s),n&&this[M](f)}}function Bn(t,e){const{constructor:n}=t;if(n===e)return 1;if(n.child===e)return t.length}function Oi(t,e,n){const s=ne(t,e,n);if(!s)throw console.log(e),new Vr(t);return s}function dt(t){const{type:e,byteSize:n}=t;if(e===j.Int)switch(n){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array;case 8:return BigInt64Array}else if(e===j.Uint)switch(n){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;case 8:return BigUint64Array}else if(e===j.Float)switch(n){case 4:return Float32Array;case 8:return Float64Array}else if(e===j.Object)return t.structure.typedArray;return null}function vi(t,e){const n=t==null?void 0:t[Symbol.toStringTag];return!!e&&n===e.name}function Ai(t,e){const n=e[Rt];if(n){const s=t==null?void 0:t[Symbol.toStringTag];if(n.includes(s))return!0}return!!(e.child&&Bn(t,e.child)!==void 0)}function se(t){const{typedArray:e}=t,n=[];return e&&(n.push(e.name),n.push("DataView"),(e===Uint8Array||e===Int8Array)&&(n.push("ArrayBuffer"),n.push("SharedArrayBuffer"),e===Uint8Array&&n.push("Uint8ClampedArray"))),n}function zi(t){const e=DataView.prototype.getBigUint64,n=DataView.prototype.setBigUint64,s=Math.ceil(t/64);return{get:function(r,i){let o=0n;if(i)for(let c=0,a=r+(s-1)*8;c<s;c++,a-=8){const l=e.call(this,a,i);o=o<<64n|l}else for(let c=0,a=r;c<s;c++,a+=8){const l=e.call(this,a,i);o=o<<64n|l}return o},set:function(r,i,o){let c=i;const a=0xFFFFFFFFFFFFFFFFn;if(o)for(let l=0,u=r;l<s;l++,u+=8){const f=c&a;n.call(this,u,f,o),c>>=64n}else{c<<=BigInt(s*64-t);for(let l=0,u=r+(s-1)*8;l<s;l++,u-=8){const f=c&a;n.call(this,u,f,o),c>>=64n}}return c}}}function ji(t,e){const{bitSize:n,byteSize:s}=e;if(n<64){const r=Pe({...e,bitSize:s*8}),i=DataView.prototype[`get${r}`],o=DataView.prototype[`set${r}`],c=n<=32?2**n-1:2n**BigInt(n)-1n;return t==="get"?function(a,l){return i.call(this,a,l)&c}:function(a,l,u){const f=l&c;o.call(this,a,f,u)}}else{const{get:r,set:i}=zi(n),o=2n**BigInt(n)-1n;return t==="get"?function(c,a){return r.call(this,c,a)&o}:function(c,a,l){const u=a&o;i.call(this,c,u,l)}}}function xi(t,e){const{bitSize:n,bitOffset:s}=e,r=s&7;if(r+n<=8){const i=DataView.prototype.setUint8,o=DataView.prototype.getUint8,c=2**n-1;if(t==="get")return function(a){return o.call(this,a)>>>r&c};{const a=255^c<<r;return function(l,u){const b=o.call(this,l)&a|(u&c)<<r;i.call(this,l,b)}}}return Ti(t,e)}function Ti(t,e){const{bitSize:n,bitOffset:s}=e,r=s&7,i=[1,2,4,8].find(c=>c*8>=n)??Math.ceil(n/64)*64,o=new DataView(new ArrayBuffer(i));if(t==="get"){const c=kt("get",{...e,byteSize:i}),a=An(r,n,!0);return function(l,u){return a(o,this,l),c.call(o,0,u)}}else{const c=kt("set",{...e,byteSize:i}),a=An(r,n,!1);return function(l,u,f){c.call(o,0,u,f),a(this,o,l)}}}const zn={};function Ei(t,e,n){const{type:s,bitOffset:r,bitSize:i,structure:o}=e,c=r&7,a=Pe(e),l=Vn(e)?"":`Bit${c}`,u=s===j.Int||s===j.Uint;let f=`${t}${a}${l}`,b=!1,y=f;if(u&&i===64){const h=o==null?void 0:o.name;(h==="usize"||h==="isize")&&(f+="Size",b=!0)}let m=zn[f];if(!m){if(u&&t==="set"){const h=En(e),p=n(y);m=function(g,w,E){p.call(this,g,h(w),E)}}else if(b&&t==="get"){const h=n(y),p=BigInt(Number.MIN_SAFE_INTEGER),g=BigInt(Number.MAX_SAFE_INTEGER);m=function(w,E){const $=h.call(this,w,E);return p<=$&&$<=g?Number($):$}}else m=n(f);m&&m.name!==f&&Object.defineProperty(m,"name",{value:f,configurable:!0,writable:!1}),zn[f]=m}return m}function Ii({type:t}){switch(t){case j.Type:case j.Comptime:case j.Literal:return!0;default:return!1}}const St={};function Vi(){St[j.Int]=ki}function _n(){St[j.Uint]=Fi}function Pi(){St[j.Float]=Ri}function Mi(){St[j.Object]=_i}function $i(){St[j.Type]=Wi}function Ui(){St[j.Comptime]=Gi}const De={};function Ci(){De[x.Enumeration]=Ni}function Di(){De[x.ErrorSet]=Li}function k(t,e){const n=St[t.type];return n(t,e)}function qn(t,e){const{structure:n}=e,s=De[n==null?void 0:n.type];return s?s(t,n):t}function ki(t,e){const n=Wn(e,kt),s=Re(t,e,n);return qn(s,t)}function Fi(t,e){const n=Wn(e,kt),s=Re(t,e,n);return qn(s,t)}function Wn(t,e){return function(n,s){const{runtimeSafety:r=!0}=t,i=e(n,s);if(r&&n==="set"){const{min:o,max:c}=Er(s);return function(a,l,u){if(l<o||l>c)throw new Lr(s,l);i.call(this,a,l,u)}}return i}}function Ri(t,e){return Re(t,e,kt)}function Ni(t,e){const n=function(s){const{constructor:r}=e,i=r(s);if(!i)throw new Pr(e,s);return i};return{get:t.get.length===0?function(r){const i=t.get.call(this);return r==="number"?i:n(i)}:function(r){const i=t.get.call(this,r);return n(i)},set:t.set.length===1?function(r,i){i!=="number"&&(r=n(r)[Symbol.toPrimitive]()),t.set.call(this,r)}:function(r,i){const o=n(i);t.set.call(this,r,o[Symbol.toPrimitive]())}}}function Li(t,e){const n=function(s){const{constructor:r}=e,i=r(s);if(!i)throw s instanceof Error?new Mn(e):new Mr(e,s);return i};return{get:t.get.length===0?function(r){const i=t.get.call(this);return r==="number"?i:n(i)}:function(r){const i=t.get.call(this,r);return n(i)},set:t.set.length===1?function(r,i){if(i!=="number"){const o=n(r);r=Number(o)}t.set.call(this,r)}:function(r,i){const o=n(i);i=Number(o),t.set.call(this,r,i)}}}function ke(t){switch(t.type){case x.Primitive:case x.ErrorUnion:case x.Optional:case x.Enumeration:case x.ErrorSet:return!0;default:return!1}}function Gn(t){return(this[z][t]??this[H](t))[Qt]()}function Jn(t){return this[z][t]??this[H](t)}function Bi(t,e){(this[z][t]??this[H](t))[te](e)}function Fe(t,{get:e,set:n}){return t!==void 0?{get:function(){return e.call(this,t)},set:n?function(s){return n.call(this,t,s)}:void 0}:{get:e,set:n}}function _i(t,e){const{structure:n,slot:s}=t;return Fe(s,{get:ke(n)?Gn:Jn,set:Bi})}function qi(t){const e=this[z][t];return e==null?void 0:e.constructor}function Wi(t,e){const{slot:n}=t;return Fe(n,{get:qi})}function Gi(t,e){const{slot:n,structure:s}=t;return Fe(n,{get:ke(s)?Gn:Jn})}function Re(t,e,n){const{littleEndian:s=!0}=e,{bitOffset:r,byteSize:i}=t,o=n("get",t),c=n("set",t);if(r!==void 0){const a=r>>3;return{get:function(){try{return o.call(this[S],a,s)}catch(u){if(u instanceof TypeError&&K.call(this))return o.call(this[S],a,s);throw u}},set:function(u){try{return c.call(this[S],a,u,s)}catch(f){if(f instanceof TypeError&&K.call(this))return c.call(this[S],a,u,s);throw f}}}}else return{get:function(l){try{return o.call(this[S],l*i,s)}catch(u){if(u instanceof TypeError&&K.call(this))return o.call(this[S],l*i,s);throw wn(t,l,u)}},set:function(l,u){try{return c.call(this[S],l*i,u,s)}catch(f){if(f instanceof TypeError&&K.call(this))return c.call(this[S],l*i,u,s);throw wn(t,l,f)}}}}function R(t,e){for(const[n,s]of Object.entries(e))if(s){const{set:r,get:i,value:o,enumerable:c,configurable:a=!0,writable:l=!0}=s;Object.defineProperty(t,n,i?{get:i,set:r,configurable:a,enumerable:c}:{value:o,configurable:a,enumerable:c,writable:l})}for(const n of Object.getOwnPropertySymbols(e)){const s=e[n];s&&Object.defineProperty(t,n,s)}}function et(t,e,n){const s={};for(const[o,c]of Object.entries(e))c!=null&&c.set&&o!=="$"&&(s[o]=c.set);const{get:r,set:i}=e.$;return R(t.prototype,{[kn]:{value:Object.keys(s)},[te]:{value:i},[Qt]:{value:r},[Ue]:{value:s},[pt]:{value:null},...e}),R(t,n),t}function wt(){const t=Object.getOwnPropertyDescriptors(this.constructor.prototype);for(const[e,n]of Object.entries(t))n.set&&(n.set=jt,Object.defineProperty(this,e,n));Object.defineProperty(this,te,{value:jt}),Object.defineProperty(this,pt,{value:this})}function nt(t,e,n){const{byteSize:s,align:r,instance:{members:i,template:o},hasPointer:c}=t,{modifier:a,initializer:l,finalizer:u,alternateCaster:f,shapeDefiner:b}=e,y=Ji(i);let m;if(o!=null&&o[z]){const g=i.filter(w=>Ii(w));g.length>0&&(m=g.map(w=>w.slot))}const h=new Ki,p=function(g,w={}){const{fixed:E=!1}=w,$=this instanceof p;let P,v;if($){if(arguments.length===0)throw new Ir(t);P=this,y&&(P[z]={}),b?(l.call(P,g,E),v=P[S]):P[S]=v=n.allocateMemory(s,r,E)}else{if(f&&(P=f.call(this,g,w),P!==!1)||(v=Oi(t,g,n),P=h.find(v)))return P;P=Object.create(p.prototype),b?Nt.call(P,v,t,!1,!1,{shapeDefiner:b}):P[S]=v,y&&(P[z]={})}if(m)for(const T of m)P[z][T]=o[z][T];return a&&a.call(P),$&&(b||l.call(P,g)),u&&(P=u.call(P)),h.save(v,P)};return p}function Lt({source:t}){const e=t[z][0];e&&this[Ee](e)}function at(t){const{instance:{template:e}}=t;return function(n,s){var f;const r=Object.keys(n),i=this[Ue],o=this[kn];for(const b of r)if(!(b in i))throw new Ur(t,b);let c=0,a=0,l=0,u=0;for(const b of o){const y=i[b];y.special?b in n&&u++:(c++,b in n?a++:y.required&&l++)}if(l!==0&&u===0){const b=o.filter(y=>i[y].required&&!(y in n));throw new $r(t,b)}if(u+a>r.length)for(const b of o)b in n&&(r.includes(b)||r.push(b));a<c&&u===0&&e&&(e[S]&&this[M](e),(f=this[U])==null||f.call(this,Lt,{vivificate:!0,source:e}));for(const b of r)i[b].call(this,n[b],s);return r.length}}function Ji(t){for(const{type:e}of t)switch(e){case j.Object:case j.Comptime:case j.Type:case j.Literal:return!0}return!1}function Kn(){return this}class Ki{constructor(){V(this,"map",new WeakMap)}find(e){return this.map.get(e)}save(e,n){return this.map.set(e,n),n}}const jn={},xn={};function Ut(t,e="utf-8"){let n=jn[e];n||(n=jn[e]=new TextDecoder(e));let s;if(Array.isArray(t))if(t.length===1)s=t[0];else{let r=0;for(const c of t)r+=c.length;const{constructor:i}=t[0];s=new i(r);let o=0;for(const c of t)s.set(c,o),o+=c.length}else s=t;return n.decode(s)}function Hi(t,e="utf-8"){switch(e){case"utf-16":{const{length:n}=t,s=new Uint16Array(n);for(let r=0;r<n;r++)s[r]=t.charCodeAt(r);return s}default:{let n=xn[e];return n||(n=xn[e]=new TextEncoder),n.encode(t)}}}function Xi(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=String.fromCharCode.apply(null,e);return btoa(n)}function Yi(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<n.byteLength;s++)n[s]=e.charCodeAt(s);return new DataView(n.buffer)}function q(){const t=new Map,e={error:"throw"},n=function(s){const r=s==null?void 0:s[B];if(r){let i=t.get(s);return i===void 0&&(i=r.call(s,n,e),t.set(s,i)),i}else return s};return n(this)}const Zi=BigInt(Number.MAX_SAFE_INTEGER),Qi=BigInt(Number.MIN_SAFE_INTEGER);function X(){const t=new Map,e={error:"return"},n=function(s){const r=s==null?void 0:s[B];if(r){let i=t.get(s);return i===void 0&&(i=r.call(s,n,e),typeof(i==null?void 0:i.toJSON)=="function"&&(i=i.toJSON()),t.set(s,i)),i}else return typeof s=="bigint"&&Qi<=s&&s<=Zi?Number(s):s};return n(this)}function Hn(t,e){const n=Ne(()=>this.$,e);return t(n)}function Ne(t,e={}){const{error:n="throw"}=e;try{return t()}catch(s){if(n==="return")return s;throw s}}function lt(t,e={}){return re({get(){return K.call(this),this[S]},set(n,s){wi(n),Nt.call(this,n,t,!0,s,e)}})}function ut(t,e={}){return re({get(){return Xi(this.dataView)},set(n,s){if(typeof n!="string")throw new Zt("string",n);const r=Yi(n);Nt.call(this,r,t,!1,s,e)}})}function Xn(t,e={}){const{sentinel:n,instance:{members:s}}=t,{byteSize:r}=s[0];return re({get(){const i=this.dataView,o=r===1?Int8Array:Int16Array,c=new o(i.buffer,i.byteOffset,this.length),a=Ut(c,`utf-${r*8}`);return(n==null?void 0:n.value)===void 0?a:a.slice(0,-1)},set(i,o){if(typeof i!="string")throw new Zt("a string",i);(n==null?void 0:n.value)!==void 0&&i.charCodeAt(i.length-1)!==n.value&&(i=i+String.fromCharCode(n.value));const c=Hi(i,`utf-${r*8}`),a=new DataView(c.buffer);Nt.call(this,a,t,!1,o,e)}})}function Et(t,e={}){const{typedArray:n}=t;return re({get(){const s=this.dataView,r=s.byteLength/n.BYTES_PER_ELEMENT;return new n(s.buffer,s.byteOffset,r)},set(s,r){if(!vi(s,n))throw new Zt(n.name,s);const i=new DataView(s.buffer,s.byteOffset,s.byteLength);Nt.call(this,i,t,!0,r,e)}})}function re({get:t,set:e}){return t.special=e.special=!0,{get:t,set:e}}let rt,Xt;function Yn(t,e){const{name:n,byteSize:s,align:r,instance:{members:[i]}}=t;if(Xt||(Xt=class extends no{},rt=Yn({...t,name:"anyerror"},e)),rt&&n==="anyerror")return t.constructor=rt,t.typedArray=dt(i),rt;const o=Xt,{get:c,set:a}=k(i,e),l=["string","number"],u=at(t),f=function(g){if(g instanceof y[Mt])a.call(this,g);else if(g&&typeof g=="object"&&!Ct(g)){if(u.call(this,g)===0)throw new ht(t,l,g)}else g!==void 0&&a.call(this,g)},b=function(g){if(typeof g=="number"||typeof g=="string")return y[g];if(g instanceof y[Mt])return y[Number(g)];if(Ct(g))return y[`Error: ${g.error}`];if(ne(t,g,e))return!1;throw new ht(t,l,g)},y=t.constructor=nt(t,{initializer:f,alternateCaster:b},e),m=t.typedArray=dt(i),h={$:{get:c,set:a},dataView:lt(t),base64:ut(t),typedArray:m&&Et(t),valueOf:{value:q},toJSON:{value:X},delete:{value:ct(e)},[M]:{value:_(s)},[B]:{value:c},[N]:{value:wt}},p={[D]:{value:r},[L]:{value:s},[Mt]:{value:o},[bt]:n==="anyerror"?{value:[]}:void 0};return et(y,h,p)}function to(t,e,n){const s=n[Qt]("number");let r=rt[s];if(!r){const c=t[Mt];r=new c(e,s)}const i=String(r),o={[s]:{value:r},[i]:{value:r},[e]:{value:r}};R(t,o),R(rt,o),rt[bt].push(e)}function eo(){Xt=rt=void 0}class no extends Error{constructor(e,n){super($n(e)),this.number=n}[Symbol.toPrimitive](e){switch(e){case"string":case"default":return Error.prototype.toString.call(this,e);default:return this.number}}toJSON(){return{error:this.message}}}function so(t,e){const n=(s,{methods:r},i)=>{const o={},c=/^(get|set)\s+([\s\S]+)/;for(const a of r){const l=e.createCaller(a,i),u=c.exec(l.name);if(u){const f=u[1],b=u[2],y=f==="get"?0:1;if(ro(a,i)===y){let h=o[b];h||(h=o[b]={configurable:!0,enumerable:!0}),h[f]=l}}else o[l.name]={value:l,configurable:!0,writable:!0}}R(s,o)};n(t.constructor,t.static,!1),n(t.constructor.prototype,t.instance,!0)}function ro(t,e){const{argStruct:{instance:{members:n}}}=t;return n.length-(e?2:1)}function io(t,e){const{byteSize:n,align:s,instance:{members:[r]}}=t,{get:i,set:o}=k(r,e),c=["string","number","tagged union"],a=at(t),l=function(p){if(p&&typeof p=="object"){if(a.call(this,p)===0)throw new ht(t,c,p)}else p!==void 0&&o.call(this,p)},u=function(p){if(typeof p=="string"||typeof p=="number"||typeof p=="bigint"){let g=f[p];if(!g&&f[Fn]&&typeof p!="string"){g=new f(void 0);debugger;o.call(g,p,"number"),Zn(f,`${p}`,g)}return g}else{if(p instanceof f)return p;if((p==null?void 0:p[On])instanceof f)return p[On];if(ne(t,p,e))return!1;throw new ht(t,c,p)}},f=t.constructor=nt(t,{initializer:l,alternateCaster:u},e),b=t.typedArray=dt(r),y=function(p){switch(p){case"string":case"default":return this.$[$e];default:return i.call(this,"number")}},m={$:{get:i,set:o},dataView:lt(t),base64:ut(t),typedArray:b&&Et(t),valueOf:{value:q},toString:{value:q},toJSON:{value:X},delete:{value:ct(e)},[Symbol.toPrimitive]:{value:y},[M]:{value:_(n)},[B]:{value:oo},[N]:{value:wt}},h={[D]:{value:s},[L]:{value:n}};return et(f,m,h)}function oo(t){return t(this.$[$e])}function Zn(t,e,n){if(e!==void 0){if(n instanceof t){R(n,{[$e]:{value:e}});const s=n[Symbol.toPrimitive]();R(t,{[s]:{value:n},[e]:{value:n}})}}else R(t,{[Fn]:{value:!0}})}function co(t,e){const{byteSize:n,align:s,instance:{members:[r]},isConst:i}=t,{runtimeSafety:o=!0}=e,{structure:c}=r,{type:a,sentinel:l,length:u}=c,f=a===x.Slice&&c.length===void 0&&!l,b=f?n/2:n,{get:y,set:m}=k({type:j.Uint,bitOffset:0,bitSize:b*8,byteSize:b,structure:{byteSize:b}},e),{get:h,set:p}=f?k({type:j.Uint,bitOffset:b*8,bitSize:b*8,byteSize:b,structure:{name:"usize",byteSize:b}},e):{},g=function(){const O=this[vt];if(O){const I=this[Te]();if(I.address!==O.address||I.length!==O.length){const{constructor:Y}=c,st=e.findMemory(I.address,I.length,Y[L]),Ae=Y.call($t,st);this[z][0]=Ae,this[vt]=I}}},w=function(){g.call(this);const O=this[z][0];if(!O)throw new dn;return i?Qn(O):O},E=function(O){if(e.inFixedMemory(this))if(e.inFixedMemory(O)){const I={address:e.getViewAddress(O[S]),length:f?O.length:hn};mn.call(this,I),this[vt]=I}else throw new Nr(t,O);this[z][0]=O},$=ke(c)?function(){return w.call(this)[Qt]()}:w,P=i?jt:function(O){g.call(this);const I=this[z][0];if(!I)throw new dn;return I[te](O)},v=function(O,I){const Y=c.constructor;if(this===$t||this===Me||O instanceof ft)return!1;if(Tn(O,Y))return new ft(Y(O["*"]),I);if(a===x.Slice)return new ft(Y(O),I);throw new Dr(t)},T=function(){const O=a===x.Pointer?{}:ho,I=new Proxy(this,O);return Object.defineProperty(this,ee,{value:I}),I},J=function(O){var Y;const I=c.constructor;if(Tn(O,I)){if(!i&&O.constructor.const)throw new kr(t,O);O=O[z][0]}if(O instanceof I){K.call(O);const st=O[pt];if(st)if(i)O=st;else throw new qr(t)}else if(Ai(O,I)){const st=ne(c,O,e);O=I(st)}else if(O!==void 0&&!O[S]){const st=e.inFixedMemory(this),Ae=new I(O,{fixed:st});if(o&&c.typedArray){const bn=(Y=O==null?void 0:O.buffer)==null?void 0:Y[Symbol.toStringTag];(bn==="ArrayBuffer"||bn==="SharedArrayBuffer")&&Gr(c,O)}O=Ae}else if(O!==void 0)throw new Rr(t,O);this[Ee](O)},ft=t.constructor=nt(t,{initializer:J,alternateCaster:v,finalizer:T},e),mn=function({address:O,length:I}){m.call(this,O),p==null||p.call(this,I)},hn=a!=x.Slice?1:u,Ar=function(){const O=y.call(this),I=h?h.call(this):l?O?e.findSentinel(O,l.bytes)+1:0:hn;return{address:O,length:I}},zr={"*":{get:$,set:P},$:{get:Le,set:J},valueOf:{value:q},toJSON:{value:X},delete:{value:uo},[Symbol.toPrimitive]:a===x.Primitive&&{value:fo},[yt]:{value:w},[Ee]:{value:E},[Te]:{value:Ar},[Dn]:{value:mn},[U]:{value:mo},[M]:{value:_(n)},[B]:{value:lo},[vt]:{value:void 0,writable:!0},[N]:{value:ao}},jr={child:{get:()=>c.constructor},const:{value:i},[D]:{value:s},[L]:{value:n}};return et(ft,zr,jr)}function ao(){const t=this[Dt],e=Object.getOwnPropertyDescriptor(t.constructor.prototype,"$");e.set=jt,Object.defineProperty(t,"$",e),Object.defineProperty(t,pt,{value:t})}function lo(t){let e;try{e=this["*"]}catch{e=Symbol.for("inaccessible")}return t(e)}function uo(){const t=this[z][0];t==null||t.delete()}function fo(t){return this[z][0][Symbol.toPrimitive](t)}function Le(){return this[ee]}function yo({isActive:t}){this[z][0]&&!t(this)&&(this[z][0]=void 0)}function mo(t,e={}){const{source:n,isActive:s=Z,isMutable:r=Z}=e;t.call(this,{source:n,isActive:s,isMutable:r})}function Tn(t,e){var n;return((n=t==null?void 0:t.constructor)==null?void 0:n.child)===e&&t["*"]}function Qn(t){let e=t[ze];return e||(Object.defineProperty(t,ze,{value:void 0,configurable:!0}),e=new Proxy(t,bo),Object.defineProperty(t,ze,{value:e})),e}const ho={get(t,e){return e===Dt?t:e in t?t[e]:t[yt]()[e]},set(t,e,n){if(e in t)t[e]=n;else{const s=t[yt]();s[e]=n}return!0},deleteProperty(t,e){if(e in t)delete t[e];else{const n=t[yt]();delete n[e]}return!0},has(t,e){if(e in t)return!0;{const n=t[yt]();return e in n}}},bo={get(t,e){if(e===pt)return t;{const n=t[e];return(n==null?void 0:n[pt])===null?Qn(n):n}},set(t,e,n){const s=t[Dt];if(s&&!(e in s))return t[e]=n,!0;jt()}};function Z(){return!0}function po(t,e){const{length:n,byteSize:s,align:r,instance:{members:[i]}}=t,{bitSize:o,structure:c}=i,a={};for(let h=0,p=0;h<n;h++,p+=o){const{get:g,set:w}=k({...i,bitOffset:p},e);a[h]={get:g,set:w,configurable:!0}}const l=at(t),u=function(h){if(h instanceof f)this[M](h);else if(h!=null&&h[Symbol.iterator]){let p=h.length;if(typeof p!="number"&&(h=[...h],p=h.length),p!==n)throw new Yt(t,this,h);let g=0;for(const w of h)this[Ue][g++].call(this,w)}else if(h&&typeof h=="object"){if(l.call(this,h)===0)throw new mt(t,h)}else if(h!==void 0)throw new mt(t,h)},f=t.constructor=nt(t,{initializer:u},e),b=t.typedArray=dt(i),y={...a,$:{get:Kn,set:u},length:{value:n},dataView:lt(t),base64:ut(t),typedArray:b&&Et(t),valueOf:{value:q},toJSON:{value:X},entries:{value:go},delete:{value:ct(t)},[Symbol.iterator]:{value:es},[M]:{value:_(s)},[B]:{value:ts},[N]:{value:wt}},m={child:{get:()=>c.constructor},[Rt]:{value:se(t)},[D]:{value:r},[L]:{value:s}};return et(f,y,m)}function ts(t){const e=[];for(const n of this)e.push(t(n));return e}function es(){const t=this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const i=n++;s=t[i],r=!1}else r=!0;return{value:s,done:r}}}}function ns(){const t=this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const i=n++;s=[i,t[i]],r=!1}else r=!0;return{value:s,done:r}}}}function go(){return{[Symbol.iterator]:ns.bind(this),length:this.length}}function So(t,e){const{byteSize:n,align:s,instance:{members:r},isTuple:i,hasPointer:o}=t,c={};for(const m of r){const{get:h,set:p}=k(m,e);c[m.name]={get:h,set:p,configurable:!0,enumerable:!0},m.isRequired&&p&&(p.required=!0)}const a=!!r.find(m=>m.type===j.Object),l=at(t),u=function(m){if(m instanceof f)this[M](m),o&&this[U](Lt,{vivificate:!0,source:m});else if(m&&typeof m=="object")l.call(this,m);else if(m!==void 0)throw new ht(t,"object",m)},f=t.constructor=nt(t,{initializer:u},e),b={$:{get:Kn,set:u},dataView:lt(t),base64:ut(t),length:i&&{value:r.length>0?parseInt(r[r.length-1].name)+1:0},valueOf:{value:q},toJSON:{value:X},delete:{value:ct(e)},entries:i&&{value:ns},...c,[Symbol.iterator]:{value:i?es:is},[M]:{value:_(n)},[H]:a&&{value:Be(t)},[U]:o&&{value:_e(t,Z)},[B]:{value:i?ts:ss},[N]:{value:wt},[bt]:{value:r.map(m=>m.name)}},y={[D]:{value:s},[L]:{value:n}};return et(f,b,y)}function ss(t,e){const n={};for(const[s,r]of rs.call(this,e))n[s]=t(r);return n}function rs(t){return{[Symbol.iterator]:wo.bind(this,t),length:this[bt].length}}function is(t){return rs.call(this,t)[Symbol.iterator]()}function wo(t){const e=this,n=this[bt];let s=0;return{next(){let r,i;if(s<n.length){const o=n[s++];r=[o,Ne(()=>e[o],t)],i=!1}else i=!0;return{value:r,done:i}}}}function Be(t){const{instance:{members:e}}=t,n={};for(const s of e.filter(r=>r.type===j.Object))n[s.slot]=s;return function(r){const i=n[r],{bitOffset:o,byteSize:c,structure:{constructor:a}}=i,l=this[S],f=l.byteOffset+(o>>3);let b=c;if(b===void 0){if(o&7)throw new Br(i);b=i.bitSize>>3}const y=new DataView(l.buffer,f,b);return this[z][r]=a.call(Me,y)}}function _e(t,e={}){const{isChildActive:n=Z,isChildMutable:s=Z}=e,{instance:{members:r}}=t,i=r.filter(o=>o.structure.hasPointer);return function(c,a={}){var m;const{source:l,vivificate:u=!1,isActive:f=Z,isMutable:b=Z}=a,y={...a,isActive:h=>f(this)&&n.call(this,h),isMutable:h=>b(this)&&s.call(this,h)};for(const{slot:h}of i){if(l){const g=(m=l[z])==null?void 0:m[h];if(!g)continue;y.source=g}const p=this[z][h]??(u?this[H](h):null);p&&p[U](c,y)}}}function Oo(t,e){const{type:n,constructor:s,static:{members:r,template:i}}=t,o={};for(const c of r)o[c.name]=k(c,e);if(R(s,{valueOf:{value:q},toJSON:{value:X},...o,[Symbol.iterator]:{value:is},[z]:i&&{value:i[z]},[bt]:!s[bt]&&{value:r.map(c=>c.name)},[B]:{value:ss}}),n===x.Enumeration)for(const{name:c,slot:a}of r)Zn(s,c,s[z][a]);else if(n===x.ErrorSet)for(const{name:c,slot:a}of r)to(s,c,s[z][a])}function vo(t,e){const{byteSize:n,align:s,instance:{members:r},hasPointer:i}=t,o=!!r.find(y=>y.type===j.Object),c=t.constructor=function(y){const m=e.allocateMemory(n,s);this[S]=m,o&&(this[z]={}),u.call(this,y)},a=r.slice(0,-1).map(y=>y.name),l=a.length,u=function(y){if(y.length!==l)throw new Cr(t,y.length);for(const[m,h]of a.entries())try{this[h]=y[m]}catch(p){throw Wr(t,m,p)}},f={};for(const y of r)f[y.name]=k(y,e);const b=function(y){return y===this.retval};return R(c.prototype,{...f,[M]:{value:_(n)},[H]:o&&{value:Be(t)},[U]:i&&{value:_e(t,{isChildMutable:b})}}),R(c,{[D]:{value:s},[L]:{value:n}}),c}function Ao(t,e){const{length:n,byteSize:s,align:r,instance:{members:[i]},hasPointer:o}=t,{get:c,set:a}=k(i,e),l=as(i),u=at(t),f=function(w){if(w instanceof y)this[M](w),o&&this[U](Lt,{vivificate:!0,source:w});else if(typeof w=="string"&&l&&(w={string:w}),w!=null&&w[Symbol.iterator]){if(w=ms(w),w.length!==n)throw new Yt(t,this,w);let E=0;for(const $ of w)a.call(this,E++,$)}else if(w&&typeof w=="object"){if(u.call(this,w)===0)throw new mt(t,w)}else if(w!==void 0)throw new mt(t,w)},b=os,y=t.constructor=nt(t,{initializer:f,finalizer:b},e),m=t.typedArray=dt(i),h=i.type===j.Object,p={$:{get:Le,set:f},length:{value:n},dataView:lt(t),base64:ut(t),string:l&&Xn(t),typedArray:m&&Et(t),get:{value:c},set:{value:a},entries:{value:qe},valueOf:{value:q},toJSON:{value:X},delete:{value:ct(e)},[Symbol.iterator]:{value:us},[M]:{value:_(s)},[H]:h&&{value:fs(t)},[U]:o&&{value:ys()},[B]:{value:ls},[N]:{value:cs}},g={child:{get:()=>i.structure.constructor},[Rt]:{value:se(t)},[D]:{value:r},[L]:{value:s}};return et(y,p,g)}function os(){const t=new Proxy(this,jo);return Object.defineProperty(this,ee,{value:t}),t}function cs(){wt.call(this),Object.defineProperty(this,"set",{value:jt});const t=this.get;Object.defineProperty(this,"get",{value:function(n){var r;const s=t.call(this,n);return(s==null?void 0:s[pt])===null&&((r=s[N])==null||r.call(s)),s}})}function as(t){return t.type===j.Uint&&[8,16].includes(t.bitSize)}function ls(t,e){const n=[];for(const[s,r]of qe.call(this,e))n.push(t(r));return n}function us(){const t=this[Ce]??this,e=this.length;let n=0;return{next(){let s,r;if(n<e){const i=n++;s=t.get(i),r=!1}else r=!0;return{value:s,done:r}}}}function zo(t){const e=this[Ce]??this,n=this.length;let s=0;return{next(){let r,i;if(s<n){const o=s++;r=[o,Ne(()=>e.get(o),t)],i=!1}else i=!0;return{value:r,done:i}}}}function qe(t){return{[Symbol.iterator]:zo.bind(this,t),length:this.length}}function fs(t){const{instance:{members:[e]}}=t,{byteSize:n,structure:s}=e;return function(i){const{constructor:o}=s,c=this[S],l=c.byteOffset+n*i,u=new DataView(c.buffer,l,n);return this[z][i]=o.call(Me,u)}}function ys(t){return function(n,s={}){const{source:r,vivificate:i=!1,isActive:o=Z,isMutable:c=Z}=s,a={...s,isActive:()=>o(this),isMutable:()=>c(this)};for(let l=0,u=this.length;l<u;l++){r&&(a.source=r==null?void 0:r[z][l]);const f=this[z][l]??(i?this[H](l):null);f&&f[U](n,a)}}}function ms(t){var r;if(typeof t.length=="number")return t;const e=t[Symbol.iterator](),n=e.next(),s=(r=n.value)==null?void 0:r.length;if(typeof s=="number"&&Object.keys(n.value).join()==="length")return Object.assign(function*(){let i;for(;!(i=e.next()).done;)yield i.value}(),{length:s});{const i=[];let o=n;for(;!o.done;)i.push(o.value),o=e.next();return i}}const jo={get(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return t.get(n);switch(e){case"get":return t[Vt]||(t[Vt]=t.get.bind(t)),t[Vt];case"set":return t[Pt]||(t[Pt]=t.set.bind(t)),t[Pt];case Ce:return t;default:return t[e]}},set(t,e,n){const s=typeof e=="symbol"?0:e|0;if(s!==0||s==e)t.set(s,n);else switch(e){case"get":t[Vt]=n;break;case"set":t[Pt]=n;break;default:t[e]=n}return!0},deleteProperty(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e)return!1;switch(e){case"get":delete t[Vt];break;case"set":delete t[Pt];break;default:delete t[e]}return!0},has(t,e){const n=typeof e=="symbol"?0:e|0;return n!==0||n==e?n>=0&&n<t.length:t[e]},ownKeys(t){const e=[];for(let n=0,s=t.length;n<s;n++)e.push(`${n}`);return e.push("length",ee),e},getOwnPropertyDescriptor(t,e){const n=typeof e=="symbol"?0:e|0;if(n!==0||n==e){if(n>=0&&n<t.length)return{value:t.get(n),enumerable:!0,writable:!0,configurable:!0}}else return Object.getOwnPropertyDescriptor(t,e)}};function xo(t,e){const{byteSize:n,align:s,instance:{members:r},hasPointer:i}=t,{get:o,set:c}=k(r[0],e),{get:a,set:l}=k(r[1],e),u=function(){if(a.call(this,"number"))throw a.call(this);return o.call(this)},f=r[0].type===j.Void,b=r[1].structure.constructor,y=function(){return!a.call(this,"number")},m=function(){var T;this[vn](),(T=this[U])==null||T.call(this,yo)},h=!!r.find(T=>T.type===j.Object),p=at(t),g=function(T){if(T instanceof w)this[M](T),i&&y.call(this)&&this[U](Lt,{vivificate:!0,source:T});else if(T instanceof b[Mt]&&b(T))l.call(this,T),m.call(this);else if(T!==void 0||f)try{c.call(this,T),l.call(this,0,"number")}catch(J){if(T instanceof Error)throw new Mn(t);if(Ct(T))l.call(this,T),m.call(this);else if(T&&typeof T=="object"){if(p.call(this,T)===0)throw J}else throw J}},w=t.constructor=nt(t,{initializer:g},e),{bitOffset:E,byteSize:$}=r[0],P={$:{get:u,set:g},dataView:lt(t),base64:ut(t),valueOf:{value:q},toJSON:{value:X},delete:{value:ct(e)},[M]:{value:_(n)},[vn]:{value:ri(E/8,$)},[H]:h&&{value:Be(t)},[U]:i&&{value:_e(t,{isChildActive:y})},[B]:{value:Hn},[N]:{value:wt}},v={[D]:{value:s},[L]:{value:n}};return et(w,P,v)}function To(t,e){const{byteSize:n,align:s,instance:{members:[r]}}=t,{get:i,set:o}=k(r,e),c=at(t),a=function(y){if(y instanceof l)this[M](y);else if(y&&typeof y=="object"){if(c.call(this,y)===0){const m=In(r);throw new ht(t,m,y)}}else y!==void 0&&o.call(this,y)},l=t.constructor=nt(t,{initializer:a},e),u=t.typedArray=dt(r),f={$:{get:i,set:o},dataView:lt(t),base64:ut(t),typedArray:u&&Et(t),valueOf:{value:q},toJSON:{value:X},delete:{value:ct(e)},[Symbol.toPrimitive]:{value:i},[M]:{value:_(n)},[B]:{value:Hn},[N]:{value:wt}},b={[Rt]:{value:se(t)},[D]:{value:s},[L]:{value:n}};return et(l,f,b)}function Eo(t,e){const{align:n,instance:{members:[s]},hasPointer:r}=t,{get:i,set:o}=k(s,e),{byteSize:c,structure:a}=s,l=Vo(t,e);l&&(t.sentinel=l);const u=as(s),f=function(v,T,J=!1){v||(v=e.allocateMemory(T*c,n,J)),this[S]=v,this[Ie]=T},b=function(v,T){if(T!==this[Ie])throw new Yt(t,this,v)},y=at(t),m=function(v,T=!1){if(v instanceof p)this[S]?b.call(this,v,v.length):f.call(this,null,v.length,T),this[M](v),r&&this[U](Lt,{vivificate:!0,source:v});else if(typeof v=="string"&&u)m.call(this,{string:v},T);else if(v!=null&&v[Symbol.iterator]){v=ms(v),this[S]?b.call(this,v,v.length):f.call(this,null,v.length,T);let J=0;for(const ft of v)l==null||l.validateValue(ft,J,v.length),o.call(this,J++,ft)}else if(typeof v=="number")if(!this[S]&&v>=0&&isFinite(v))f.call(this,null,v);else throw new mt(t,v,!this[S]);else if(v&&typeof v=="object"){if(y.call(this,v,T)===0)throw new mt(t,v)}else if(v!==void 0)throw new mt(t,v)},h=os,p=t.constructor=nt(t,{initializer:m,shapeDefiner:f,finalizer:h},e),g=t.typedArray=dt(s),w=s.type===j.Object,E={shapeDefiner:f},$={$:{get:Le,set:m},length:{get:Io},dataView:lt(t,E),base64:ut(t,E),string:u&&Xn(t,E),typedArray:g&&Et(t,E),get:{value:i},set:{value:o},entries:{value:qe},valueOf:{value:q},toJSON:{value:X},delete:{value:ct(e)},[Symbol.iterator]:{value:us},[M]:{value:_(c,!0)},[H]:w&&{value:fs(t)},[U]:r&&{value:ys()},[B]:{value:ls},[N]:{value:cs}},P={child:{get:()=>a.constructor},[Rt]:{value:se(t)},[D]:{value:n},[L]:{value:c}};return et(p,$,P)}function Io(){return this[Ie]}function Vo(t,e){const{runtimeSafety:n=!0}=e,{byteSize:s,instance:{members:[r,i],template:o}}=t;if(!i)return;const{get:c}=k(i,e),a=c.call(o,0),{get:l}=k(r,e),u=n?function(y,m,h){if(y===a&&m!==h-1)throw new pn(t,y,m,h);if(y!==a&&m===h-1)throw new Kt(t,a,m,h)}:function(y,m,h){if(y!==a&&m===h-1)throw new Kt(t,a,h)},f=n?function(y,m){for(let h=0;h<m;h++){const p=l.call(y,h);if(p===a&&h!==m-1)throw new pn(t,a,h,m);if(p!==a&&h===m-1)throw new Kt(t,a,m)}}:function(y,m){if(m*s===y[S].byteLength){const h=m-1;if(l.call(y,h)!==a)throw new Kt(t,a,m)}},b=o[S];return{value:a,bytes:b,validateValue:u,validateData:f}}const G=Array(Object.values(x).length);function Po(){G[x.Primitive]=To}function Mo(){G[x.Array]=Ao}function $o(){G[x.Struct]=So}function Uo(){G[x.ArgStruct]=vo}function Co(){G[x.ErrorUnion]=xo}function Do(){G[x.ErrorSet]=Yn,Di()}function ko(){G[x.Enumeration]=io,Ci()}function Fo(){G[x.Pointer]=co,_n()}function Ro(){G[x.Slice]=Eo}function No(){G[x.Vector]=po}function Lo(t){return G[t]}class Bo{constructor(){V(this,"context");V(this,"contextStack",[]);V(this,"consolePending",[]);V(this,"consoleTimeout",0);V(this,"viewMap",new WeakMap);V(this,"initPromise");V(this,"abandoned",!1);V(this,"released",!1);V(this,"littleEndian",!0);V(this,"runtimeSafety",!0);V(this,"comptime",!1);V(this,"variables",[]);V(this,"imports");V(this,"console",globalThis.console)}startContext(){this.context&&this.contextStack.push(this.context),this.context=new _o}endContext(){this.context=this.contextStack.pop()}allocateMemory(e,n=0,s=!1){return s?this.allocateFixedMemory(e,n):this.allocateRelocMemory(e,n)}allocateRelocMemory(e,n){return this.obtainView(new ArrayBuffer(e),0,e)}registerMemory(e,n=null,s=void 0){const{memoryList:r}=this.context,i=this.getViewAddress(e),o=je(r,i);return r.splice(o,0,{address:i,dv:e,len:e.byteLength,targetDV:n,targetAlign:s}),i}unregisterMemory(e){const{memoryList:n}=this.context,s=je(n,e),r=n[s-1];(r==null?void 0:r.address)===e&&n.splice(s-1,1)}findMemory(e,n,s){if(Go(e))if(!n)e=0;else return null;let r=n*(s??0);if(this.context){const{memoryList:i}=this.context,o=je(i,e),c=i[o-1];if((c==null?void 0:c.address)===e&&c.len===r)return c.targetDV??c.dv;if((c==null?void 0:c.address)<=e&&e<Ot(c.address,c.len)){const a=Number(e-c.address),l=c.targetDV??c.dv,u=s===void 0;u&&(r=l.byteLength-a);const f=this.obtainView(l.buffer,l.byteOffset+a,r);return u&&(f[D]=c.targetAlign),f}}return this.obtainFixedView(e,r)}getViewAddress(e){const n=this.getBufferAddress(e.buffer);return Ot(n,e.byteOffset)}obtainView(e,n,s){let r=this.viewMap.get(e);if(!r){const c=new DataView(e,n,s);return this.viewMap.set(e,c),c}if(r instanceof DataView){if(r.byteOffset===n&&r.byteLength===s)return r;{const c=r;r={[`${c.byteOffset}:${c.byteLength}`]:c},this.viewMap.set(e,r)}}const i=`${n}:${s}`;let o=r[i];return o||(o=r[i]=new DataView(e,n,s)),o}captureView(e,n,s){if(s){const r=this.allocateRelocMemory(n,0);return n>0&&this.copyBytes(r,e,n),r}else return this.obtainFixedView(e,n)}castView(e,n,s){var c;const{constructor:r,hasPointer:i}=e,o=r.call($t,n);return i&&this.acquirePointerTargets(o),s||(c=o[N])==null||c.call(o),o}finalizeShape(e){const s=Lo(e.type)(e,this);typeof s=="function"&&(R(s,{name:{value:e.name,configurable:!0}}),s.prototype.hasOwnProperty(Symbol.toStringTag)||R(s.prototype,{[Symbol.toStringTag]:{value:e.name,configurable:!0}}))}finalizeStructure(e){Oo(e,this),so(e,this)}createCaller(e,n){const{name:s,argStruct:r,thunkId:i}=e,{constructor:o}=r,c=this;let a;return n?a=function(...l){return c.invokeThunk(i,new o([this,...l]))}:a=function(...l){return c.invokeThunk(i,new o(l))},Object.defineProperty(a,"name",{value:s}),a}recreateStructures(e,n){Object.assign(this,n);const s=(o,c)=>{for(const[a,l]of Object.entries(c))o[a]=r(l);return o},r=o=>{var c;if(o.memory){const{array:a,offset:l,length:u}=o.memory,f=this.obtainView(a.buffer,l,u),{constructor:b}=o.structure,{reloc:y,const:m}=o,h=b.call($t,f);return m&&((c=h[N])==null||c.call(h)),o.slots&&s(h[z],o.slots),y!==void 0&&this.variables.push({reloc:y,object:h}),h}else return o.structure};eo();const i=new Map;for(const o of e){for(const c of[o.instance,o.static])if(c.template){const a=c.template,l=c.template={};if(a.memory){const{array:u,offset:f,length:b}=a.memory;l[S]=this.obtainView(u.buffer,f,b)}if(a.slots){const u=l[z]={};i.set(u,a.slots)}}this.finalizeShape(o)}for(const[o,c]of i)s(o,c);for(const o of e)this.finalizeStructure(o)}linkVariables(e){const n=[];for(const{object:s,reloc:r}of this.variables)this.linkObject(s,r,e),s[yt]&&s[z][0]&&n.push(s);for(const s of n){const r=s[yt](),i=this.getViewAddress(r[S]),{length:o=1}=r;s[vt]={address:i,length:o}}}linkObject(e,n,s){if(this.inFixedMemory(e))return;const r=e[S],i=this.recreateAddress(n),o=this.obtainFixedView(i,r.byteLength);if(s){const a=Object.create(e.constructor.prototype);a[S]=o,a[M](e)}e[S]=o;const c=a=>{if(a[z]){for(const l of Object.values(a[z]))if(l){const u=l[S];if(u.buffer===r.buffer){const f=u.byteOffset-r.byteOffset;l[S]=this.obtainView(o.buffer,f,u.byteLength),c(l)}}}};c(e)}unlinkVariables(){for(const{object:e}of this.variables)this.unlinkObject(e)}unlinkObject(e){if(!this.inFixedMemory(e))return;const n=e[S],s=this.allocateMemory(n.byteLength),r=Object.create(e.constructor.prototype);r[S]=s,r[M](e),e[S]=s}releaseFunctions(){const e=()=>{throw new Error("Module was abandoned")};for(const n of Object.keys(this.imports))this[n]&&(this[n]=e)}getSpecialExports(){return{init:()=>this.initPromise??Promise.resolve(),abandon:()=>this.abandon(),released:()=>this.released,connect:e=>this.console=e}}abandon(){this.abandoned||(this.releaseFunctions(),this.unlinkVariables(),this.abandoned=!0)}writeToConsole(e){const{console:n}=this;try{const s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).slice(),r=s.lastIndexOf(10);if(r===-1)this.consolePending.push(s);else{const i=s.subarray(0,r),o=s.subarray(r+1),c=[...this.consolePending,i];n.log(Ut(c)),this.consolePending=o.length>0?[o]:[]}clearTimeout(this.consoleTimeout),this.consolePending.length>0&&(this.consoleTimeout=setTimeout(()=>{n.log(Ut(this.consolePending)),this.consolePending=[]},250))}catch(s){n.error(s)}}flushConsole(){this.consolePending.length>0&&(console.log(Ut(this.consolePending)),this.consolePending=[],clearTimeout(this.consoleTimeout))}updatePointerAddresses(e){const n=new Map,s=new Map,r=[],i=this,o=function({isActive:l}){var b;if(!l(this))return;const u=this[Dt];if(n.get(u))return;const f=u[z][0];if(f&&(n.set(u,f),!i.inFixedMemory(f))){const y=f[S],m=s.get(y.buffer);if(m){const h=Array.isArray(m)?m:[m],p=hs(h,y.byteOffset,g=>g[S].byteOffset);h.splice(p,0,f),Array.isArray(m)||(s.set(y.buffer,h),r.push(h))}else s.set(y.buffer,f);(b=f[U])==null||b.call(f,o)}};e[U](o);const c=this.findTargetClusters(r),a=new Map;for(const l of c)for(const u of l.targets)a.set(u,l);for(const[l,u]of n){const f=a.get(u),{length:b=1}=u;let y=this.getTargetAddress(u,f);y===!1&&(y=this.getShadowAddress(u,f)),l[Dn]({address:y,length:b})}}findTargetClusters(e){const n=[];for(const s of e){let r=null,i=0,o=0,c=null;for(const a of s){const l=a[S],{byteOffset:u,byteLength:f}=l,b=u+f;let y=!0;r&&(o>u?(c||(c={targets:[r],start:i,end:o,address:void 0,misaligned:void 0},n.push(c)),c.targets.push(a),b>o?c.end=b:y=!1):c=null),y&&(r=a,i=u,o=b)}}return n}createClusterShadow(e){const{start:n,end:s,targets:r}=e;let i=0,o;for(const g of r){const w=g[S],E=w.byteOffset,$=g.constructor[D]??w[D];(i===void 0||$>i)&&(i=$,o=E)}const c=s-n,a=this.allocateShadowMemory(c+i,1),l=this.getViewAddress(a),u=Wo(Ot(l,o-n),i),f=Ot(u,n-o),b=a.byteOffset+Number(f-l),y=new DataView(a.buffer,b,c);for(const g of r){const w=g[S],E=w.byteOffset;if(E!==o){const $=g.constructor[D]??w[D];if(qo(Ot(f,E-n),$))throw new Fr($,i)}}const m={[M]:_(c)},h=Object.create(m),p=Object.create(m);return h[S]=new DataView(r[0][S].buffer,Number(n),c),p[S]=y,p[Ht]={address:l,len:a.byteLength,align:1},this.addShadow(p,h,1)}getShadowAddress(e,n){if(n){const s=e[S];if(n.address===void 0){const r=this.createClusterShadow(n);n.address=this.getViewAddress(r[S])}return Ot(n.address,s.byteOffset-n.start)}else{const s=this.createShadow(e);return this.getViewAddress(s[S])}}createShadow(e){const n=e[S],s=e.constructor[D]??n[D],r=Object.create(e.constructor.prototype),i=r[S]=this.allocateShadowMemory(n.byteLength,s);return r[Ht]={address:this.getViewAddress(i),len:i.byteLength,align:s},this.addShadow(r,e,s)}addShadow(e,n,s){let{shadowMap:r}=this.context;return r||(r=this.context.shadowMap=new Map),r.set(e,n),this.registerMemory(e[S],n[S],s),e}removeShadow(e){const{shadowMap:n}=this.context;if(n){for(const[s]of n)if(s[S]===e){n.delete(s);break}}}updateShadows(){const{shadowMap:e}=this.context;if(e)for(const[n,s]of e)n[M](s)}updateShadowTargets(){const{shadowMap:e}=this.context;if(e)for(const[n,s]of e)s[M](n)}releaseShadows(){const{shadowMap:e}=this.context;if(e)for(const[n]of e){const{address:s,len:r,align:i}=n[Ht];this.freeShadowMemory(s,r,i)}}acquirePointerTargets(e){const n=this,s=new Map,r=function({isActive:i,isMutable:o}){var b,y;const c=this[Dt];if(s.get(c))return;s.set(c,!0);const a=!c.constructor.const,l=c[z][0];let u,f;if(i(this)){const m=c.constructor.child;if(!l||o(this)){f=c[Te]();const h=n.findMemory(f.address,f.length,m[L]);u=h?m.call($t,h):null}else u=l}(b=l==null?void 0:l[U])==null||b.call(l,r,{vivificate:!0,isMutable:()=>a}),u!==l&&((y=u==null?void 0:u[U])==null||y.call(u,r,{vivificate:!0,isMutable:()=>a}),c[z][0]=u,n.inFixedMemory(c)&&(c[vt]=f))};e[U](r,{vivificate:!0})}}class _o{constructor(){V(this,"pointerProcessed",new Map);V(this,"memoryList",[]);V(this,"shadowMap",null);V(this,"call",0)}}function hs(t,e,n){let s=0,r=t.length;if(r===0)return 0;for(;s<r;){const i=Math.floor((s+r)/2);n(t[i])<=e?s=i+1:r=i}return r}function je(t,e){return hs(t,e,n=>n.address)}function qo(t,e){if(e===void 0)return!1;typeof t=="bigint"&&(t=Number(t&0xFFFFFFFFn));const n=e-1;return(t&n)!==0}function Wo(t,e){let n;return typeof t=="bigint"?(e=BigInt(e),n=~(e-1n)):n=~(e-1),(t&n)+e}function Ot(t,e){return t+(typeof t=="bigint"?BigInt(e):e)}function Go(t){return typeof t=="bigint"?t===0xaaaaaaaaaaaaaaaan:t===2863311530}class Jo extends Bo{constructor(){super(...arguments);V(this,"imports",{getFactoryThunk:{argType:"",returnType:"i"},allocateExternMemory:{argType:"ii",returnType:"i"},freeExternMemory:{argType:"iii"},allocateShadowMemory:{argType:"cii",returnType:"v"},freeShadowMemory:{argType:"ciii"},runThunk:{argType:"iv",returnType:"v"},isRuntimeSafetyActive:{argType:"",returnType:"b"}});V(this,"exports",{allocateHostMemory:{argType:"ii",returnType:"v"},freeHostMemory:{argType:"iii"},captureString:{argType:"ii",returnType:"v"},captureView:{argType:"iib",returnType:"v"},castView:{argType:"vvb",returnType:"v"},getSlotNumber:{argType:"ii",returnType:"i"},readSlot:{argType:"vi",returnType:"v"},writeSlot:{argType:"viv"},getViewAddress:{argType:"v",returnType:"i"},beginDefinition:{returnType:"v"},insertInteger:{argType:"vsi",alias:"insertProperty"},insertBoolean:{argType:"vsb",alias:"insertProperty"},insertString:{argType:"vss",alias:"insertProperty"},insertObject:{argType:"vsv",alias:"insertProperty"},beginStructure:{argType:"v",returnType:"v"},attachMember:{argType:"vvb"},attachMethod:{argType:"vvb"},createTemplate:{argType:"v",returnType:"v"},attachTemplate:{argType:"vvb"},finalizeShape:{argType:"v"},endStructure:{argType:"v"},startCall:{argType:"iv",returnType:"i"},endCall:{argType:"iv",returnType:"i"}});V(this,"nextValueIndex",1);V(this,"valueTable",{0:null});V(this,"valueIndices",new Map);V(this,"memory",null);V(this,"littleEndian",!0)}allocateHostMemory(n,s){const r={[D]:s},i=_(n),o=this.allocateRelocMemory(n,s),c=this.allocateShadowMemory(n,s),a={constructor:r,[S]:o,[M]:i},l={constructor:r,[S]:c,[M]:i};return l[Ht]={address:this.getViewAddress(c),len:n,align:s},this.addShadow(l,a,s),c}freeHostMemory(n,s,r){const i=this.findMemory(n,s,1);this.removeShadow(i),this.unregisterMemory(n),this.freeShadowMemory(n,s,r)}getBufferAddress(n){return 0}allocateFixedMemory(n,s){const r=n?this.allocateExternMemory(n,s):0,i=this.obtainFixedView(r,n);return i[D]=s,i}freeFixedMemory(n,s,r){s&&this.freeExternMemory(n,s,r)}obtainFixedView(n,s){const{memory:r}=this,i=this.obtainView(r.buffer,n,s);return i[S]={memory:r,address:n,len:s},i}releaseFixedView(n){n.buffer;const s=n.byteOffset,r=n.byteLength,i=n[D];i!==void 0&&this.freeFixedMemory(s,r,i)}inFixedMemory(n){return this.memory?(K.call(n),n[S].buffer===this.memory.buffer):!1}copyBytes(n,s,r){const{memory:i}=this,o=new DataView(i.buffer,s,r);Rn(r)(n,o)}findSentinel(n,s){const{memory:r}=this,i=s.byteLength,o=r.buffer.byteLength-i+1;for(let c=n;c<o;c+=i){const a=new DataView(r.buffer,c,i);let l=!0;for(let u=0;u<i;u++){const f=a.getUint8(u),b=s.getUint8(u);if(f!==b){l=!1;break}}if(l)return(c-n)/i}}captureString(n,s){const{buffer:r}=this.memory,i=new Uint8Array(r,n,s);return Ut(i)}getTargetAddress(n,s){return this.inFixedMemory(n)?this.getViewAddress(n[S]):n[S].byteLength===0?0:!1}clearExchangeTable(){this.nextValueIndex!==1&&(this.nextValueIndex=1,this.valueTable={0:null},this.valueIndices=new Map)}getObjectIndex(n){if(n){let s=this.valueIndices.get(n);return s===void 0&&(s=this.nextValueIndex++,this.valueIndices.set(n,s),this.valueTable[s]=n),s}else return 0}fromWebAssembly(n,s){switch(n){case"v":case"s":return this.valueTable[s];case"i":return s;case"b":return!!s}}toWebAssembly(n,s){switch(n){case"v":case"s":return this.getObjectIndex(s);case"i":return s;case"b":return s?1:0}}exportFunction(n,s="",r=""){return n?(...i)=>{i=i.map((c,a)=>this.fromWebAssembly(s.charAt(a),c));const o=n.apply(this,i);return this.toWebAssembly(r,o)}:()=>{}}importFunction(n,s="",r=""){let i=!1;return s.startsWith("c")&&(i=!0,s=s.slice(1)),(...o)=>{o=o.map((a,l)=>this.toWebAssembly(s.charAt(l),a)),i&&(o=[this.context.call,...o]);const c=n.apply(this,o);return this.fromWebAssembly(r,c)}}exportFunctions(){const n={};for(const[s,{argType:r,returnType:i,alias:o}]of Object.entries(this.exports)){const c=this[o??s];n[`_${s}`]=this.exportFunction(c,r,i)}return n}importFunctions(n){for(const[s,r]of Object.entries(n)){const i=this.imports[s];if(i){const{argType:o,returnType:c}=i;this[s]=this.importFunction(r,o,c)}}}async instantiateWebAssembly(n){const s=await n,r=this.exportFunctions(),i=this.getWASI(),o={env:r,wasi_snapshot_preview1:i};return s[Symbol.toStringTag]==="Response"?WebAssembly.instantiateStreaming(s,o):WebAssembly.instantiate(s,o)}loadModule(n){return this.initPromise=(async()=>{const{instance:s}=await this.instantiateWebAssembly(n),{memory:r,_initialize:i}=s.exports;this.importFunctions(s.exports),this.trackInstance(s),this.runtimeSafety=this.isRuntimeSafetyActive(),this.memory=r,i==null||i()})()}trackInstance(n){const s=new WeakRef(n);Object.defineProperty(this,"released",{get:()=>!s.deref(),enumerable:!0})}linkVariables(n){this.initPromise&&(this.initPromise=this.initPromise.then(()=>super.linkVariables(n)))}getMemoryOffset(n){return n}recreateAddress(n){return n}startCall(n,s){this.startContext(),this.context.call=n,s[U]&&this.updatePointerAddresses(s);const r=this.getShadowAddress(s);return this.updateShadows(),r}endCall(n,s){this.updateShadowTargets(),s[U]&&this.acquirePointerTargets(s),this.releaseShadows(),this.endContext(),!this.context&&this.flushConsole&&this.flushConsole()}async runThunk(n,s){return await this.initPromise,this.runThunk(n,s)}invokeThunk(n,s){const r=this.runThunk(n,s);if(r){if(r[Symbol.toStringTag]==="Promise")return r.then(i=>{if(i)throw new Sn(i);return s.retval});throw new Sn(r)}return s.retval}getWASI(){return{fd_write:(n,s,r,i)=>{if(n===1||n===2){const o=new DataView(this.memory.buffer);let c=0;for(let a=0,l=s;a<r;a++,l+=8){const u=o.getUint32(l,!0),f=o.getUint32(l+4,!0),b=new DataView(this.memory.buffer,u,f);this.writeToConsole(b),c+=f}return o.setUint32(i,c,!0),0}else return 1},random_get:(n,s)=>{const r=new DataView(this.memory.buffer,n,s);for(let i=0;i<s;i++)r.setUint8(i,Math.floor(256*Math.random()));return 0},proc_exit:()=>{},path_open:()=>1,fd_read:()=>1,fd_close:()=>1}}}function Ko(t){return new Jo}Po();$i();_n();Mo();Fo();Mi();Ui();Vi();Pi();$o();No();Ro();ko();di();Do();Co();Uo();const A={constructor:null,typedArray:null,type:0,name:void 0,byteSize:0,align:0,isConst:!1,isTuple:!1,hasPointer:!1,instance:{members:[],methods:[],template:null},static:{members:[],methods:[],template:null}},d={type:0,isRequired:!1},C={},ot={},ie={},oe={},ce={},ae={},W={},gt={},le={},ue={},tt={},fe={},ye={},xt={},Tt={},me={},he={},It={},be={},pe={},We={},Bt={},de={},_t={},F={},Q={},Ft={},Ge={},ge={},qt={},Se={},Wt={},we={},Gt={},Jt={},At={},Je={},Ke={},zt={},He={},Xe={},Ye={},bs={},Ze={},ps={},Qe={},ds={},tn={},gs={},en={},Ss={},nn={},ws={},Os={},sn={},vs={},Oe={},As={},zs={},rn={},js={},on={},xs={},Ts={},Es={},Is={},Vs={},Ps={},Ms={},$s={},Us={},Cs={},Ds={},ks={},Fs={},Rs={},Ns={},Ls={},Bs={},cn={},_s={},qs={},an={},Ws={},ln={},Gs={},Js={},Ks={},Hs={},Xs={},Ys={},Zs={},un={},Qs={},tr={},er={},nr={},sr={},rr={},ir={},or={},cr={},ar={},lr={},ur={},fr={},yr={},mr={},hr={},br={},pr={},dr={},gr={},Sr={},wr={},Ho=new Uint8Array,Xo=new Uint8Array,Yo=new Uint8Array([0,0,0,0,0,0,240,63]),Zo=new Uint8Array,Qo=new Uint8Array([0,0,0,0,0,192,114,64]),tc=new Uint8Array,ec=new Uint8Array([0,0,0,0,0,0,52,64]),nc=new Uint8Array([236,6,0,1]),sc=new Uint8Array([115,105,122,101,0]),rc=new Uint8Array,ic=new Uint8Array,oc=new Uint8Array([4]),cc=new Uint8Array,ac=new Uint8Array,lc=new Uint8Array([30,5,0,1]),uc=new Uint8Array([98,121,32,80,101,116,114,105,32,76,101,115,107,105,110,101,110,0]),fc=new Uint8Array([116,33,0,1]),yc=new Uint8Array([0]),mc=new Uint8Array,hc=new Uint8Array([1]),bc=new Uint8Array([76,5,0,1]),pc=new Uint8Array([67,114,121,115,116,97,108,108,105,122,101,32,45,102,105,108,116,101,114,0]),dc=new Uint8Array,gc=new Uint8Array,Sc=new Uint8Array,wc=new Uint8Array([0]),Oc=new Uint8Array([1]),Or=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),vc=new Uint8Array,Ac=new Uint8Array,zc=new Uint8Array,jc=new Uint8Array,xc=new Uint8Array([4]),fn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),vr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Tc=new Uint8Array,Ec=new Uint8Array,Ic=new Uint8Array,Vc=new Uint8Array,Pc=new Uint8Array([4]),yn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Mc=new Uint8Array([0,0,160,65]),$c=new Uint8Array([27,0]),Uc=new Uint8Array([27,0]),Cc=new Uint8Array,Dc=new Uint8Array,kc=new Uint8Array,Fc=new Uint8Array;Object.assign(bs,{slots:{0:Ze,1:Qe,2:tn,3:en,4:nn}});Object.assign(Ze,{structure:C,memory:{array:Ho},const:!0,slots:{0:ps}});Object.assign(ps,{structure:xt});Object.assign(Qe,{structure:tt,memory:{array:Xo},const:!0,slots:{0:ds}});Object.assign(ds,{structure:Tt,memory:{array:Yo},const:!0});Object.assign(tn,{structure:tt,memory:{array:Zo},const:!0,slots:{0:gs}});Object.assign(gs,{structure:Tt,memory:{array:Qo},const:!0});Object.assign(en,{structure:tt,memory:{array:tc},const:!0,slots:{0:Ss}});Object.assign(Ss,{structure:Tt,memory:{array:ec},const:!0});Object.assign(nn,{structure:ye,memory:{array:nc},const:!0,slots:{0:ws}});Object.assign(ws,{structure:fe,memory:{array:sc},reloc:16778988});Object.assign(Os,{slots:{0:sn}});Object.assign(sn,{structure:me,memory:{array:rc},const:!0,slots:{0:Ze,1:Qe,2:tn,3:en,4:nn}});Object.assign(vs,{slots:{0:Oe}});Object.assign(Oe,{structure:W,memory:{array:ic},const:!0,slots:{0:As}});Object.assign(As,{structure:gt,memory:{array:oc},const:!0});Object.assign(zs,{slots:{0:rn}});Object.assign(rn,{structure:It,memory:{array:cc},const:!0,slots:{0:Oe}});Object.assign(js,{slots:{0:on}});Object.assign(on,{structure:It,memory:{array:ac},const:!0,slots:{0:Oe}});Object.assign(xs,{slots:{0:Ts,1:Is,2:Ps,3:$s,4:Cs,5:Ds,6:ks}});Object.assign(Ts,{structure:oe,memory:{array:lc},const:!0,slots:{0:Es}});Object.assign(Es,{structure:ie,memory:{array:uc},reloc:16778526});Object.assign(Is,{structure:ae,memory:{array:fc},const:!0,slots:{0:Vs}});Object.assign(Vs,{structure:ce,memory:{array:yc},reloc:16785780});Object.assign(Ps,{structure:W,memory:{array:mc},const:!0,slots:{0:Ms}});Object.assign(Ms,{structure:gt,memory:{array:hc},const:!0});Object.assign($s,{structure:ue,memory:{array:bc},const:!0,slots:{0:Us}});Object.assign(Us,{structure:le,memory:{array:pc},reloc:16778572});Object.assign(Cs,{structure:he,memory:{array:dc},const:!0,slots:{0:sn}});Object.assign(Ds,{structure:be,memory:{array:gc},const:!0,slots:{0:rn}});Object.assign(ks,{structure:pe,memory:{array:Sc},const:!0,slots:{0:on}});Object.assign(Fs,{slots:{0:Rs,1:Ns}});Object.assign(Rs,{structure:Q,memory:{array:wc},const:!0});Object.assign(Ns,{structure:Q,memory:{array:Oc},const:!0});Object.assign(Ls,{memory:{array:Or},slots:{0:Bs}});Object.assign(Bs,{structure:_t,memory:{array:Or,offset:0,length:8},slots:{0:cn}});Object.assign(cn,{structure:de,memory:{array:vc},reloc:0});Object.assign(_s,{slots:{0:qs,1:Ws,2:Gs}});Object.assign(qs,{structure:C,memory:{array:Ac},const:!0,slots:{0:an}});Object.assign(an,{structure:Bt});Object.assign(Ws,{structure:C,memory:{array:zc},const:!0,slots:{0:ln}});Object.assign(ln,{structure:Ge});Object.assign(Gs,{structure:W,memory:{array:jc},const:!0,slots:{0:Js}});Object.assign(Js,{structure:gt,memory:{array:xc},const:!0});Object.assign(Ks,{memory:{array:fn},slots:{0:Hs}});Object.assign(Hs,{structure:ge,memory:{array:fn},slots:{0:Xs}});Object.assign(Xs,{structure:_t,memory:{array:fn,offset:0,length:8},slots:{0:cn}});Object.assign(Ys,{memory:{array:vr},slots:{0:Zs}});Object.assign(Zs,{structure:Wt,memory:{array:vr,offset:0,length:8},slots:{0:un}});Object.assign(un,{structure:Se,memory:{array:Tc},reloc:0});Object.assign(Qs,{slots:{0:tr,1:er,2:nr}});Object.assign(tr,{structure:C,memory:{array:Ec},const:!0,slots:{0:an}});Object.assign(er,{structure:C,memory:{array:Ic},const:!0,slots:{0:ln}});Object.assign(nr,{structure:W,memory:{array:Vc},const:!0,slots:{0:sr}});Object.assign(sr,{structure:gt,memory:{array:Pc},const:!0});Object.assign(rr,{memory:{array:yn},slots:{0:ir}});Object.assign(ir,{structure:we,memory:{array:yn},slots:{0:or}});Object.assign(or,{structure:Wt,memory:{array:yn,offset:0,length:8},slots:{0:un}});Object.assign(cr,{memory:{array:Mc}});Object.assign(ar,{slots:{0:lr}});Object.assign(lr,{structure:At,memory:{array:$c},const:!0});Object.assign(ur,{slots:{0:fr}});Object.assign(fr,{structure:zt,memory:{array:Uc},const:!0});Object.assign(yr,{slots:{0:mr,1:br,2:dr,3:Sr}});Object.assign(mr,{structure:C,memory:{array:Cc},const:!0,slots:{0:hr}});Object.assign(hr,{structure:We});Object.assign(br,{structure:C,memory:{array:Dc},const:!0,slots:{0:pr}});Object.assign(pr,{structure:qt});Object.assign(dr,{structure:C,memory:{array:kc},const:!0,slots:{0:gr}});Object.assign(gr,{structure:Gt});Object.assign(Sr,{structure:C,memory:{array:Fc},const:!0,slots:{0:wr}});Object.assign(wr,{structure:Jt});const Rc={argStruct:Ke,thunkId:2,name:"createOutput"},Nc={argStruct:Xe,thunkId:3,name:"createPartialOutput"};Object.assign(C,{...A,name:"type",align:1,instance:{members:[{...d,type:6,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:C}],methods:[]}});Object.assign(ot,{...A,name:"u8",byteSize:1,align:1,instance:{members:[{...d,type:3,bitOffset:0,bitSize:8,byteSize:1,structure:ot}],methods:[]}});Object.assign(ie,{...A,type:1,name:"[17:0]u8",length:17,byteSize:18,align:1,instance:{members:[{...d,type:3,bitSize:8,byteSize:1,structure:ot}],methods:[]}});Object.assign(oe,{...A,type:13,name:"*const [17:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...d,type:5,bitSize:32,byteSize:4,slot:0,structure:ie}],methods:[]}});Object.assign(ce,{...A,type:1,name:"[0:0]u8",length:0,byteSize:1,align:1,instance:{members:[{...d,type:3,bitSize:8,byteSize:1,structure:ot}],methods:[]}});Object.assign(ae,{...A,type:13,name:"*const [0:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...d,type:5,bitSize:32,byteSize:4,slot:0,structure:ce}],methods:[]}});Object.assign(W,{...A,name:"comptime_int",align:1,instance:{members:[{...d,type:7,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:W}],methods:[]}});Object.assign(gt,{...A,name:"i8",byteSize:1,align:1,instance:{members:[{...d,type:2,bitOffset:0,bitSize:8,byteSize:1,structure:gt}],methods:[]}});Object.assign(le,{...A,type:1,name:"[19:0]u8",length:19,byteSize:20,align:1,instance:{members:[{...d,type:3,bitSize:8,byteSize:1,structure:ot}],methods:[]}});Object.assign(ue,{...A,type:13,name:"*const [19:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...d,type:5,bitSize:32,byteSize:4,slot:0,structure:le}],methods:[]}});Object.assign(tt,{...A,name:"comptime_float",align:1,instance:{members:[{...d,type:7,bitOffset:0,bitSize:0,byteSize:0,slot:0,structure:tt}],methods:[]}});Object.assign(fe,{...A,type:1,name:"[4:0]u8",length:4,byteSize:5,align:1,instance:{members:[{...d,type:3,bitSize:8,byteSize:1,structure:ot}],methods:[]}});Object.assign(ye,{...A,type:13,name:"*const [4:0]u8",byteSize:4,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...d,type:5,bitSize:32,byteSize:4,slot:0,structure:fe}],methods:[]}});Object.assign(xt,{...A,name:"f32",byteSize:4,align:4,instance:{members:[{...d,type:4,bitOffset:0,bitSize:32,byteSize:4,structure:xt}],methods:[]}});Object.assign(Tt,{...A,name:"f64",byteSize:8,align:8,instance:{members:[{...d,type:4,bitOffset:0,bitSize:64,byteSize:8,structure:Tt}],methods:[]}});Object.assign(me,{...A,type:2,name:"Struct2856485591",align:1,instance:{members:[{...d,type:7,slot:0,name:"type",structure:C},{...d,type:7,slot:1,name:"minValue",structure:tt},{...d,type:7,slot:2,name:"maxValue",structure:tt},{...d,type:7,slot:3,name:"defaultValue",structure:tt},{...d,type:7,slot:4,name:"description",structure:ye}],methods:[],template:bs}});Object.assign(he,{...A,type:2,name:"Struct1500053711",align:1,instance:{members:[{...d,type:7,slot:0,name:"size",structure:me}],methods:[],template:Os}});Object.assign(It,{...A,type:2,name:"Struct3832472641",align:1,instance:{members:[{...d,type:7,slot:0,name:"channels",structure:W}],methods:[],template:vs}});Object.assign(be,{...A,type:2,name:"Struct2242867897",align:1,instance:{members:[{...d,type:7,slot:0,name:"src",structure:It}],methods:[],template:zs}});Object.assign(pe,{...A,type:2,name:"Struct172100005",align:1,instance:{members:[{...d,type:7,slot:0,name:"dst",structure:It}],methods:[],template:js}});Object.assign(We,{...A,type:2,name:"crystallize.kernel",align:1,static:{members:[{...d,type:7,slot:0,name:"namespace",structure:oe},{...d,type:7,slot:1,name:"vendor",structure:ae},{...d,type:7,slot:2,name:"version",structure:W},{...d,type:7,slot:3,name:"description",structure:ue},{...d,type:7,slot:4,name:"parameters",structure:he},{...d,type:7,slot:5,name:"inputImages",structure:be},{...d,type:7,slot:6,name:"outputImages",structure:pe}],methods:[],template:xs}});Object.assign(Bt,{...A,type:15,name:"@Vector(4, u8)",length:4,byteSize:4,align:4,instance:{members:[{...d,type:3,bitSize:8,byteSize:1,structure:ot}],methods:[]}});Object.assign(de,{...A,type:14,name:"[_]const @Vector(4, u8)",byteSize:4,align:4,instance:{members:[{...d,type:5,bitSize:32,byteSize:4,structure:Bt}],methods:[]}});Object.assign(_t,{...A,type:13,name:"[]const @Vector(4, u8)",byteSize:8,align:4,isConst:!0,hasPointer:!0,instance:{members:[{...d,type:5,bitSize:64,byteSize:8,slot:0,structure:de}],methods:[]}});Object.assign(F,{...A,name:"u32",byteSize:4,align:4,instance:{members:[{...d,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:F}],methods:[]}});Object.assign(Q,{...A,type:11,name:"crystallize.ColorSpace",byteSize:1,align:1,instance:{members:[{...d,type:3,bitOffset:0,bitSize:1,byteSize:1,structure:Q}],methods:[]},static:{members:[{...d,type:7,slot:0,name:"srgb",structure:Q},{...d,type:7,slot:1,name:"display-p3",structure:Q}],methods:[],template:Fs}});Object.assign(Ft,{...A,name:"usize",byteSize:4,align:4,instance:{members:[{...d,type:3,bitOffset:0,bitSize:32,byteSize:4,structure:Ft}],methods:[]}});Object.assign(Ge,{...A,type:15,name:"@Vector(4, f32)",length:4,byteSize:16,align:16,instance:{members:[{...d,type:4,bitSize:32,byteSize:4,structure:xt}],methods:[]}});Object.assign(ge,{...A,type:2,name:"crystallize.Image(u8,4,false)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...d,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:_t},{...d,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:F},{...d,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:F},{...d,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:Q},{...d,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Ft}],methods:[],template:Ls},static:{members:[{...d,type:7,slot:0,name:"Pixel",structure:C},{...d,type:7,slot:1,name:"FPixel",structure:C},{...d,type:7,slot:2,name:"channels",structure:W}],methods:[],template:_s}});Object.assign(qt,{...A,type:2,name:"crystallize.KernelInput(u8,crystallize.kernel)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...d,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"src",structure:ge}],methods:[],template:Ks}});Object.assign(Se,{...A,type:14,name:"[_]@Vector(4, u8)",byteSize:4,align:4,instance:{members:[{...d,type:5,bitSize:32,byteSize:4,structure:Bt}],methods:[]}});Object.assign(Wt,{...A,type:13,name:"[]@Vector(4, u8)",byteSize:8,align:4,hasPointer:!0,instance:{members:[{...d,type:5,bitSize:64,byteSize:8,slot:0,structure:Se}],methods:[]}});Object.assign(we,{...A,type:2,name:"crystallize.Image(u8,4,true)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...d,type:5,isRequired:!0,bitOffset:0,bitSize:64,byteSize:8,slot:0,name:"data",structure:Wt},{...d,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:1,name:"width",structure:F},{...d,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:2,name:"height",structure:F},{...d,type:3,bitOffset:160,bitSize:1,byteSize:1,slot:3,name:"colorSpace",structure:Q},{...d,type:3,bitOffset:128,bitSize:32,byteSize:4,slot:4,name:"offset",structure:Ft}],methods:[],template:Ys},static:{members:[{...d,type:7,slot:0,name:"Pixel",structure:C},{...d,type:7,slot:1,name:"FPixel",structure:C},{...d,type:7,slot:2,name:"channels",structure:W}],methods:[],template:Qs}});Object.assign(Gt,{...A,type:2,name:"crystallize.KernelOutput(u8,crystallize.kernel)",byteSize:24,align:4,hasPointer:!0,instance:{members:[{...d,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"dst",structure:we}],methods:[],template:rr}});Object.assign(Jt,{...A,type:2,name:"crystallize.KernelParameters(crystallize.kernel)",byteSize:4,align:4,instance:{members:[{...d,type:4,bitOffset:0,bitSize:32,byteSize:4,slot:0,name:"size",structure:xt}],methods:[],template:cr}});Object.assign(At,{...A,type:10,name:"ErrorSet171458574",byteSize:2,align:2,instance:{members:[{...d,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:At}],methods:[]},static:{members:[{...d,type:7,slot:0,name:"OutOfMemory",structure:At}],methods:[],template:ar}});Object.assign(Je,{...A,type:9,name:"ErrorSet171458574!crystallize.KernelOutput(u8,crystallize.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...d,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:Gt},{...d,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:At}],methods:[]}});Object.assign(Ke,{...A,type:5,name:"createOutput",byteSize:64,align:4,hasPointer:!0,instance:{members:[{...d,type:3,isRequired:!0,bitOffset:0,bitSize:32,byteSize:4,slot:3,name:"0",structure:F},{...d,type:3,isRequired:!0,bitOffset:32,bitSize:32,byteSize:4,slot:4,name:"1",structure:F},{...d,type:5,isRequired:!0,bitOffset:64,bitSize:192,byteSize:24,slot:0,name:"2",structure:qt},{...d,type:5,isRequired:!0,bitOffset:256,bitSize:32,byteSize:4,slot:1,name:"3",structure:Jt},{...d,type:5,isRequired:!0,bitOffset:288,bitSize:224,byteSize:28,slot:2,name:"retval",structure:Je}],methods:[]}});Object.assign(zt,{...A,type:10,name:"ErrorSet1421389764",byteSize:2,align:2,instance:{members:[{...d,type:3,bitOffset:0,bitSize:16,byteSize:2,structure:zt}],methods:[]},static:{members:[{...d,type:7,slot:0,name:"OutOfMemory",structure:zt}],methods:[],template:ur}});Object.assign(He,{...A,type:9,name:"ErrorSet1421389764!crystallize.KernelOutput(u8,crystallize.kernel)",byteSize:28,align:4,hasPointer:!0,instance:{members:[{...d,type:5,bitOffset:0,bitSize:192,byteSize:24,slot:0,name:"value",structure:Gt},{...d,type:3,bitOffset:192,bitSize:16,byteSize:2,name:"error",structure:zt}],methods:[]}});Object.assign(Xe,{...A,type:5,name:"createPartialOutput",byteSize:72,align:4,hasPointer:!0,instance:{members:[{...d,type:3,isRequired:!0,bitOffset:0,bitSize:32,byteSize:4,slot:3,name:"0",structure:F},{...d,type:3,isRequired:!0,bitOffset:32,bitSize:32,byteSize:4,slot:4,name:"1",structure:F},{...d,type:3,isRequired:!0,bitOffset:64,bitSize:32,byteSize:4,slot:5,name:"2",structure:F},{...d,type:3,isRequired:!0,bitOffset:96,bitSize:32,byteSize:4,slot:6,name:"3",structure:F},{...d,type:5,isRequired:!0,bitOffset:128,bitSize:192,byteSize:24,slot:0,name:"4",structure:qt},{...d,type:5,isRequired:!0,bitOffset:320,bitSize:32,byteSize:4,slot:1,name:"5",structure:Jt},{...d,type:5,isRequired:!0,bitOffset:352,bitSize:224,byteSize:28,slot:2,name:"retval",structure:He}],methods:[]}});Object.assign(Ye,{...A,type:2,name:"crystallize",align:1,static:{members:[{...d,type:7,slot:0,name:"kernel",structure:C},{...d,type:7,slot:1,name:"Input",structure:C},{...d,type:7,slot:2,name:"Output",structure:C},{...d,type:7,slot:3,name:"Parameters",structure:C}],methods:[Rc,Nc],template:yr}});const Lc=[C,ot,ie,oe,ce,ae,W,gt,le,ue,tt,fe,ye,xt,Tt,me,he,It,be,pe,We,Bt,de,_t,F,Q,Ft,Ge,ge,qt,Se,Wt,we,Gt,Jt,At,Je,Ke,zt,He,Xe,Ye],Bc=Ye,_c={runtimeSafety:!1,littleEndian:!0},ve=Ko();ve.getSpecialExports();ve.recreateStructures(Lc,_c);const qc=(async()=>{const t=new URL("crystallize-d39825fe.wasm",import.meta.url).href;return fetch(t)})();ve.loadModule(qc);ve.linkVariables(!0);const{constructor:Wc}=Bc,{createPartialOutput:Gc,Input:Jc,kernel:Ve}=Wc;function Kc(t,e,n,s,r={},i={}){const o=[];for(const[y]of Ve.inputImages)o.push(y);const c=[];for(const[y]of Ve.outputImages)c.push(y);if(Array.isArray(r)){const y=r;r={};for(const[m,h]of o.entries())r[h]=y[m]}const a=new Jc(void 0),l=[];let u;for(const y of o){let m=r[y];if(m||(o.length===1&&["data","width","height"].every(h=>!!r[h])?m=r:l.push(y)),a[y]=m,u){if(m.colorSpace!==u)throw new Error(`Input images must all use the same color space: ${u}`)}else u=m.colorSpace}if(l.length>0)throw new Error(`Missing input image${l.length>1?"s":""}: ${l.join(", ")}`);const f=Gc(t,e,n,s,a,i),b=y=>{const m={};for(const h of c){const{data:{typedArray:p},width:g,height:w}=y[h];let E;if(typeof ImageData=="function"){const $=new Uint8ClampedArray(p.buffer,p.byteOffset,p.byteLength);E=new ImageData($,g,s,{colorSpace:u})}else E={data:p,width:g,height:w};if(c.length===1)return E;m[h]=E}return m};return f[Symbol.toStringTag]==="Promise"?f.then(b):b(f)}function Hc(){const t={};for(let[e,n]of Ve){if(e==="parameters"){const s={};for(const[r,i]of n){const o=s[r]={};for(let[c,a]of i)typeof a=="object"?a=a.string??a.valueOf():typeof a=="function"&&(a=Xc(a.name)),o[c]=a}n=s}else typeof n=="object"&&(n=n.string??n.valueOf());t[e]=n}return t}function Xc(t){return{bool:"bool","@Vector(2, bool)":"bool2","@Vector(3, bool)":"bool3","@Vector(4, bool)":"bool4",i32:"int","@Vector(2, i32)":"int2","@Vector(3, i32)":"int3","@Vector(4, i32)":"int4",f32:"float","@Vector(2, f32)":"float2","@Vector(3, f32)":"float3","@Vector(4, f32)":"float4","[2]@Vector(2, f32)":"float2x2","[3]@Vector(3, f32)":"float3x3","[4]@Vector(4, f32)":"float4x4"}[t]}onmessage=t=>{const[e,n,...s]=t.data;Yc(e,s).then(([r,i])=>{postMessage([e,n,r],{transfer:i})}).catch(r=>{postMessage(["error",n,r])})};async function Yc(t,e){switch(t){case"getKernelInfo":return[Hc(...e)];case"createPartialImageData":const s=await Kc(...e),r=[];if("data"in s&&"width"in s&&"height"in s)r.push(s.data.buffer);else for(const i of Object.entries(s))r.push(s.data.buffer);return[s,r];default:throw new Error(`Unknown function: ${t}`)}}
